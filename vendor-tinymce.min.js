(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1595:function(t,e,n){(function(e){!function(n){"use strict";var noop=function(){},compose=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t(e.apply(null,n))}},constant=function(t){return function(){return t}},identity=function(t){return t};function curry(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e.concat(n);return t.apply(null,a)}}var not=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},i=constant(!1),a=constant(!0),none=function(){return u},u=function(){var eq=function(t){return t.isNone()},call=function(t){return t()},id=function(t){return t},t={fold:function(t,e){return t()},is:i,isSome:i,isNone:a,getOr:id,getOrThunk:call,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:i,forall:a,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:constant("none()")};return Object.freeze&&Object.freeze(t),t}(),some=function(t){var e=constant(t),self=function(){return n},bind=function(e){return e(t)},n={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:a,isNone:i,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:self,orThunk:self,map:function(e){return some(e(t))},each:function(e){e(t)},bind:bind,exists:bind,forall:bind,filter:function(e){return e(t)?n:u},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(i,(function(e){return n(t,e)}))}};return n},c={some:some,none:none,from:function(t){return null==t?u:some(t)}},isType=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},s=isType("string"),l=isType("object"),f=isType("array"),d=isType("null"),m=isType("boolean"),g=isType("function"),h=isType("number"),p=Array.prototype.slice,v=Array.prototype.indexOf,b=Array.prototype.push,rawIndexOf=function(t,e){return v.call(t,e)},contains=function(t,e){return rawIndexOf(t,e)>-1},exists=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return!0}return!1},map=function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;a++){var u=t[a];i[a]=e(u,a)}return i},each=function(t,e){for(var n=0,i=t.length;n<i;n++){e(t[n],n)}},filter=function(t,e){for(var n=[],i=0,a=t.length;i<a;i++){var u=t[i];e(u,i)&&n.push(u)}return n},foldr=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n)}}(t,(function(t){n=e(n,t)})),n},foldl=function(t,e,n){return each(t,(function(t){n=e(n,t)})),n},find=function(t,e){for(var n=0,i=t.length;n<i;n++){var a=t[n];if(e(a,n))return c.some(a)}return c.none()},findIndex=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return c.some(n)}return c.none()},bind=function(t,e){return function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!f(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);b.apply(e,t[n])}return e}(map(t,e))},forall=function(t,e){for(var n=0,i=t.length;n<i;++n){if(!0!==e(t[n],n))return!1}return!0},reverse=function(t){var e=p.call(t,0);return e.reverse(),e},difference=function(t,e){return filter(t,(function(t){return!contains(e,t)}))},head=function(t){return 0===t.length?c.none():c.some(t[0])},last=function(t){return 0===t.length?c.none():c.some(t[t.length-1])},y=g(Array.from)?Array.from:function(t){return p.call(t)},x=Object.keys,w=Object.hasOwnProperty,each$1=function(t,e){for(var n=x(t),i=0,a=n.length;i<a;i++){var u=n[i];e(t[u],u)}},map$1=function(t,e){return tupleMap(t,(function(t,n){return{k:n,v:e(t,n)}}))},tupleMap=function(t,e){var n={};return each$1(t,(function(t,i){var a=e(t,i);n[a.k]=a.v})),n},objAcc=function(t){return function(e,n){t[n]=e}},bifilter=function(t,e){var n={},i={};return function(t,e,n,i){each$1(t,(function(t,a){(e(t,a)?n:i)(t,a)}))}(t,e,objAcc(n),objAcc(i)),{t:n,f:i}},get=function(t,e){return has(t,e)?c.from(t[e]):c.none()},has=function(t,e){return w.call(t,e)},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var fromDom=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:constant(t)}},C={fromHtml:function(t,e){var i=(e||n.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1)throw n.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return fromDom(i.childNodes[0])},fromTag:function(t,e){var i=(e||n.document).createElement(t);return fromDom(i)},fromText:function(t,e){var i=(e||n.document).createTextNode(t);return fromDom(i)},fromDom:fromDom,fromPoint:function(t,e,n){var i=t.dom();return c.from(i.elementFromPoint(e,n)).map(fromDom)}},Cell=function(t){var e=t,get=function(){return e};return{get:get,set:function(t){e=t},clone:function(){return Cell(get())}}},unknown=function(){return nu(0,0)},nu=function(t,e){return{major:t,minor:e}},S={nu:nu,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?unknown():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}}(t,e);if(!n)return{major:0,minor:0};var group=function(t){return Number(e.replace(n,"$"+t))};return nu(group(1),group(2))}(t,n)},unknown:unknown},isBrowser=function(t,e){return function(){return e===t}},nu$1=function(t){var e=t.current;return{current:e,version:t.version,isEdge:isBrowser("Edge",e),isChrome:isBrowser("Chrome",e),isIE:isBrowser("IE",e),isOpera:isBrowser("Opera",e),isFirefox:isBrowser("Firefox",e),isSafari:isBrowser("Safari",e)}},k={unknown:function(){return nu$1({current:void 0,version:S.unknown()})},nu:nu$1,edge:constant("Edge"),chrome:constant("Chrome"),ie:constant("IE"),opera:constant("Opera"),firefox:constant("Firefox"),safari:constant("Safari")},isOS=function(t,e){return function(){return e===t}},nu$2=function(t){var e=t.current;return{current:e,version:t.version,isWindows:isOS("Windows",e),isiOS:isOS("iOS",e),isAndroid:isOS("Android",e),isOSX:isOS("OSX",e),isLinux:isOS("Linux",e),isSolaris:isOS("Solaris",e),isFreeBSD:isOS("FreeBSD",e),isChromeOS:isOS("ChromeOS",e)}},E={unknown:function(){return nu$2({current:void 0,version:S.unknown()})},nu:nu$2,windows:constant("Windows"),ios:constant("iOS"),android:constant("Android"),linux:constant("Linux"),osx:constant("OSX"),solaris:constant("Solaris"),freebsd:constant("FreeBSD"),chromeos:constant("ChromeOS")},detect$1=function(t,e){var n=String(e).toLowerCase();return find(t,(function(t){return t.search(n)}))},UaString_detectBrowser=function(t,e){return detect$1(t,e).map((function(t){var n=S.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},UaString_detectOs=function(t,e){return detect$1(t,e).map((function(t){var n=S.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},contains$1=function(t,e){return-1!==t.indexOf(e)},startsWith=function(t,e){return function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}(t,e,0)},trim=function(t){return t.replace(/^\s+|\s+$/g,"")},rTrim=function(t){return t.replace(/\s+$/g,"")},T=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(t){return function(e){return contains$1(e,t)}},O=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return contains$1(t,"edge/")&&contains$1(t,"chrome")&&contains$1(t,"safari")&&contains$1(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,T],search:function(t){return contains$1(t,"chrome")&&!contains$1(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return contains$1(t,"msie")||contains$1(t,"trident")}},{name:"Opera",versionRegexes:[T,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[T,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(contains$1(t,"safari")||contains$1(t,"mobile/"))&&contains$1(t,"applewebkit")}}],_=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return contains$1(t,"iphone")||contains$1(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],N={browsers:constant(O),oses:constant(_)},PlatformDetection_detect=function(t,e){var n=N.browsers(),i=N.oses(),a=UaString_detectBrowser(n,t).fold(k.unknown,k.nu),u=UaString_detectOs(i,t).fold(E.unknown,E.nu),c=function(t,e,n,i){var a=t.isiOS()&&!0===/ipad/i.test(n),u=t.isiOS()&&!a,c=t.isiOS()||t.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),m=!f&&!l&&!d;return{isiPad:constant(a),isiPhone:constant(u),isTablet:constant(l),isPhone:constant(f),isTouch:constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:constant(d),isDesktop:constant(m)}}(u,a,t,e);return{browser:a,os:u,deviceType:c}},A=Cell(PlatformDetection_detect(n.navigator.userAgent,(function(t){return n.window.matchMedia(t).matches}))),detect$3=function(){return A.get()},Immutable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var i={};return each(t,(function(t,n){i[t]=constant(e[n])})),i}},Recurse_toArray=function(t,e){var n=[],recurse=function(t){return n.push(t),e(t)},i=e(t);do{i=i.bind(recurse)}while(i.isSome());return n},compareDocumentPosition=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},Node_documentPositionContainedBy=function(t,e){return compareDocumentPosition(t,e,n.Node.DOCUMENT_POSITION_CONTAINED_BY)},z=(n.Node.ATTRIBUTE_NODE,n.Node.CDATA_SECTION_NODE,n.Node.COMMENT_NODE,n.Node.DOCUMENT_NODE),D=(n.Node.DOCUMENT_TYPE_NODE,n.Node.DOCUMENT_FRAGMENT_NODE,n.Node.ELEMENT_NODE),M=n.Node.TEXT_NODE,B=(n.Node.PROCESSING_INSTRUCTION_NODE,n.Node.ENTITY_REFERENCE_NODE,n.Node.ENTITY_NODE,n.Node.NOTATION_NODE,D),R=z,is=function(t,e){var n=t.dom();if(n.nodeType!==B)return!1;var i=n;if(void 0!==i.matches)return i.matches(e);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(e);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},bypassSelector=function(t){return t.nodeType!==B&&t.nodeType!==R||0===t.childElementCount},eq=function(t,e){return t.dom()===e.dom()},P=detect$3().browser.isIE()?function(t,e){return Node_documentPositionContainedBy(t.dom(),e.dom())}:function(t,e){var n=t.dom(),i=e.dom();return n!==i&&n.contains(i)},owner=function(t){return C.fromDom(t.dom().ownerDocument)},defaultView=function(t){return C.fromDom(t.dom().ownerDocument.defaultView)},parent=function(t){return c.from(t.dom().parentNode).map(C.fromDom)},prevSibling=function(t){return c.from(t.dom().previousSibling).map(C.fromDom)},nextSibling=function(t){return c.from(t.dom().nextSibling).map(C.fromDom)},prevSiblings=function(t){return reverse(Recurse_toArray(t,prevSibling))},nextSiblings=function(t){return Recurse_toArray(t,nextSibling)},children=function(t){return map(t.dom().childNodes,C.fromDom)},child=function(t,e){var n=t.dom().childNodes;return c.from(n[e]).map(C.fromDom)},firstChild=function(t){return child(t,0)},lastChild=function(t){return child(t,t.dom().childNodes.length-1)},I=(Immutable("element","offset"),function(t,e){parent(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),after=function(t,e){nextSibling(t).fold((function(){parent(t).each((function(t){append(t,e)}))}),(function(t){I(t,e)}))},prepend=function(t,e){firstChild(t).fold((function(){append(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))},append=function(t,e){t.dom().appendChild(e.dom())},append$1=function(t,e){each(e,(function(e){append(t,e)}))},empty=function(t){t.dom().textContent="",each(children(t),(function(t){remove(t)}))},remove=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},unwrap=function(t){var e,n=children(t);n.length>0&&(e=t,each(n,(function(t){I(e,t)}))),remove(t)},H=(void 0!==n.window?n.window:Function("return this;")(),function(t){return t.dom().nodeName.toLowerCase()}),isType$1=function(t){return function(e){return function(t){return t.dom().nodeType}(e)===t}},L=isType$1(D),F=isType$1(M),inBody=function(t){var e=F(t)?t.dom().parentNode:t.dom();return null!=e&&e.ownerDocument.body.contains(e)},r=function(t,e){return{left:constant(t),top:constant(e),translate:function(n,i){return r(t+n,e+i)}}},V=r,firstDefinedOrZero=function(t,e){return void 0!==t?t:void 0!==e?e:0},viewport=function(t){var e=t.dom(),n=e.ownerDocument.body;return n===e?V(n.offsetLeft,n.offsetTop):inBody(t)?function(t){var e=t.getBoundingClientRect();return V(e.left,e.top)}(e):V(0,0)},U=detect$3().browser.isSafari(),get$1=function(t){var e=void 0!==t?t.dom():n.document,i=e.body.scrollLeft||e.documentElement.scrollLeft,a=e.body.scrollTop||e.documentElement.scrollTop;return V(i,a)},to=function(t,e,i){(void 0!==i?i.dom():n.document).defaultView.scrollTo(t,e)},intoView=function(t,e){U&&g(t.dom().scrollIntoViewIfNeeded)?t.dom().scrollIntoViewIfNeeded(!1):t.dom().scrollIntoView(e)},bounds=function(t,e,n,i){return{x:constant(t),y:constant(e),width:constant(n),height:constant(i),right:constant(t+n),bottom:constant(e+i)}},getBounds=function(t){var e=void 0===t?n.window:t,i=e.document,a=get$1(C.fromDom(i));return function(t){var e=void 0===t?n.window:t;return c.from(e.visualViewport)}(e).fold((function(){var t=e.document.documentElement,n=t.clientWidth,i=t.clientHeight;return bounds(a.left(),a.top(),n,i)}),(function(t){return bounds(Math.max(t.pageLeft,a.left()),Math.max(t.pageTop,a.top()),t.width,t.height)}))},isNodeType=function(t){return function(e){return!!e&&e.nodeType===t}},j=isNodeType(1),matchNodeNames=function(t){var e=t.map((function(t){return t.toLowerCase()}));return function(t){if(t&&t.nodeName){var n=t.nodeName.toLowerCase();return contains(e,n)}return!1}},hasContentEditableState=function(t){return function(e){if(j(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},W=matchNodeNames(["textarea","input"]),q=isNodeType(3),$=isNodeType(8),G=isNodeType(9),X=isNodeType(11),K=matchNodeNames(["br"]),Y=hasContentEditableState("true"),J=hasContentEditableState("false"),Z={isText:q,isElement:j,isComment:$,isDocument:G,isDocumentFragment:X,isBr:K,isContentEditableTrue:Y,isContentEditableFalse:J,isRestrictedNode:function(t){return!!t&&!Object.getPrototypeOf(t)},matchNodeNames:matchNodeNames,hasPropValue:function(t,e){return function(n){return j(n)&&n[t]===e}},hasAttribute:function(t,e){return function(e){return j(e)&&e.hasAttribute(t)}},hasAttributeValue:function(t,e){return function(n){return j(n)&&n.getAttribute(t)===e}},matchStyleValues:function(t,e){var n=e.toLowerCase().split(" ");return function(e){var i;if(j(e))for(i=0;i<n.length;i++){var a=e.ownerDocument.defaultView.getComputedStyle(e,null);if((a?a.getPropertyValue(t):null)===n[i])return!0}return!1}},isBogus:function(t){return j(t)&&t.hasAttribute("data-mce-bogus")},isBogusAll:function(t){return j(t)&&"all"===t.getAttribute("data-mce-bogus")},isTable:function(t){return j(t)&&"TABLE"===t.tagName},isTextareaOrInput:W},isSupported=function(t){return void 0!==t.style&&g(t.style.getPropertyValue)},rawSet=function(t,e,i){if(!(s(i)||m(i)||h(i)))throw n.console.error("Invalid call to Attr.set. Key ",e,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,i+"")},set=function(t,e,n){rawSet(t.dom(),e,n)},setAll=function(t,e){var n=t.dom();each$1(e,(function(t,e){rawSet(n,e,t)}))},get$3=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},remove$1=function(t,e){t.dom().removeAttribute(e)},get$4=function(t,e){var i=t.dom(),a=n.window.getComputedStyle(i).getPropertyValue(e),u=""!==a||inBody(t)?a:getUnsafeProperty(i,e);return null===u?void 0:u},getUnsafeProperty=function(t,e){return isSupported(t)?t.style.getPropertyValue(e):""},getRaw=function(t,e){var n=t.dom(),i=getUnsafeProperty(n,e);return c.from(i).filter((function(t){return t.length>0}))},Q=detect$3().browser,firstElement=function(t){return find(t,L)},hasChild=function(t,e){return t.children&&contains(t.children,e)},Position$1_getPos=function(t,e,n){var i,a,u=0,c=0,s=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===get$4(C.fromDom(t),"position"))return{x:u=(a=e.getBoundingClientRect()).left+(s.documentElement.scrollLeft||t.scrollLeft)-s.documentElement.clientLeft,y:c=a.top+(s.documentElement.scrollTop||t.scrollTop)-s.documentElement.clientTop};for(i=e;i&&i!==n&&i.nodeType&&!hasChild(i,n);)u+=i.offsetLeft||0,c+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!==n&&i.nodeType&&!hasChild(i,n);)u-=i.scrollLeft||0,c-=i.scrollTop||0,i=i.parentNode;c+=function(t){return Q.isFirefox()&&"table"===H(t)?firstElement(children(t)).filter((function(t){return"caption"===H(t)})).bind((function(t){return firstElement(nextSiblings(t)).map((function(e){var n=e.dom().offsetTop,i=t.dom().offsetTop,a=t.dom().offsetHeight;return n<=i?-a:0}))})).getOr(0):0}(C.fromDom(e))}return{x:u,y:c}},tt={},et={exports:tt};!function(t,n,i,a){!function(a){if("object"==typeof n&&void 0!==i)i.exports=a();else if("function"==typeof t&&t.amd)t([],a);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).EphoxContactWrapper=a()}}((function(){return function r(t,e,n){function o(u,c){if(!e[u]){if(!t[u]){var s="function"==typeof a&&a;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[u]={exports:{}};t[u][0].call(f.exports,(function(e){return o(t[u][1][e]||e)}),f,f.exports,r,t,e,n)}return e[u].exports}for(var i="function"==typeof a&&a,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,e,n){var i,a,u=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(i===setTimeout)return setTimeout(t,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){i=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var c,s=[],l=!1,f=-1;function cleanUpNextTick(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&drainQueue())}function drainQueue(){if(!l){var t=runTimeout(cleanUpNextTick);l=!0;for(var e=s.length;e;){for(c=s,s=[];++f<e;)c&&c[f].run();f=-1,e=s.length}c=null,l=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new Item(t,e)),1!==s.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=noop,u.addListener=noop,u.once=noop,u.off=noop,u.removeListener=noop,u.removeAllListeners=noop,u.emit=noop,u.prependListener=noop,u.prependOnceListener=noop,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){!function(n){var i=setTimeout;function noop(){}function Promise(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(t,this)}function handle(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Promise._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void reject(e.promise,t)}resolve(e.promise,i)}else(1===t._state?resolve:reject)(e.promise,t._value)}))):t._deferreds.push(e)}function resolve(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Promise)return t._state=3,t._value=e,void finale(t);if("function"==typeof n)return void doResolve(function bind(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,finale(t)}catch(e){reject(t,e)}}function reject(t,e){t._state=2,t._value=e,finale(t)}function finale(t){2===t._state&&0===t._deferreds.length&&Promise._immediateFn((function(){t._handled||Promise._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)handle(t,t._deferreds[e]);t._deferreds=null}function Handler(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function doResolve(t,e){var n=!1;try{t((function(t){n||(n=!0,resolve(e,t))}),(function(t){n||(n=!0,reject(e,t))}))}catch(t){if(n)return;n=!0,reject(e,t)}}Promise.prototype.catch=function(t){return this.then(null,t)},Promise.prototype.then=function(t,e){var n=new this.constructor(noop);return handle(this,new Handler(t,e,n)),n},Promise.all=function(t){var e=Array.prototype.slice.call(t);return new Promise((function(t,n){if(0===e.length)return t([]);var i=e.length;function res(a,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){res(a,t)}),n)}e[a]=u,0==--i&&t(e)}catch(t){n(t)}}for(var a=0;a<e.length;a++)res(a,e[a])}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise?t:new Promise((function(e){e(t)}))},Promise.reject=function(t){return new Promise((function(e,n){n(t)}))},Promise.race=function(t){return new Promise((function(e,n){for(var i=0,a=t.length;i<a;i++)t[i].then(e,n)}))},Promise._immediateFn="function"==typeof t?function(e){t(e)}:function(t){i(t,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},Promise._setImmediateFn=function _setImmediateFn(t){Promise._immediateFn=t},Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(t){Promise._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=Promise:n.Promise||(n.Promise=Promise)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,i){var a=t("process/browser.js").nextTick,u=Function.prototype.apply,c=Array.prototype.slice,s={},l=0;function Timeout(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new Timeout(u.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new Timeout(u.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=l++,i=!(arguments.length<2)&&c.call(arguments,1);return s[e]=!0,a((function onNextTick(){s[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof i?i:function(t){delete s[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var i=t("promise-polyfill"),a="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:a.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,tt,et,void 0);var nt,rt=et.exports.boltExport,nu$3=function(t){var e=c.none(),i=[],get=function(t){isReady()?call(t):i.push(t)},isReady=function(){return e.isSome()},run=function(t){each(t,call)},call=function(t){e.each((function(e){n.setTimeout((function(){t(e)}),0)}))};return t((function(t){e=c.some(t),run(i),i=[]})),{get:get,map:function(t){return nu$3((function(e){get((function(n){e(t(n))}))}))},isReady:isReady}},ot={nu:nu$3,pure:function(t){return nu$3((function(e){e(t)}))}},errorReporter=function(t){n.setTimeout((function(){throw t}),0)},make=function(t){var get=function(e){t().then(e,errorReporter)};return{map:function(e){return make((function(){return t().then(e)}))},bind:function(e){return make((function(){return t().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return make((function(){return t().then((function(){return e.toPromise()}))}))},toLazy:function(){return ot.nu(get)},toCached:function(){var e=null;return make((function(){return null===e&&(e=t()),e}))},toPromise:t,get:get}},Future_nu=function(t){return make((function(){return new rt(t)}))},par=function(t,e){return e((function(e){var n=[],i=0;0===t.length?e([]):each(t,(function(a,u){a.get(function(a){return function(u){n[a]=u,++i>=t.length&&e(n)}}(u))}))}))},value=function(t){return{is:function(e){return t===e},isValue:a,isError:i,getOr:constant(t),getOrThunk:constant(t),getOrDie:constant(t),or:function(e){return value(t)},orThunk:function(e){return value(t)},fold:function(e,n){return n(t)},map:function(e){return value(e(t))},mapError:function(e){return value(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return c.some(t)}}},error=function(t){return{is:i,isValue:i,isError:a,getOr:identity,getOrThunk:function(t){return t()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return error(t)},mapError:function(e){return error(e(t))},each:noop,bind:function(e){return error(t)},exists:i,forall:a,toOption:c.none}},it={value:value,error:error,fromOption:function(t,e){return t.fold((function(){return error(e)}),value)}},at=window.Promise?window.Promise:function(){function bind(t,e){return function(){t.apply(e,arguments)}}var t=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Promise=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(t,bind(resolve,this),bind(reject,this))},e=Promise.immediateFn||"function"==typeof n.setImmediate&&n.setImmediate||function(t){n.setTimeout(t,1)};function handle(t){var n=this;null!==this._state?e((function(){var e=n._state?t.onFulfilled:t.onRejected;if(null!==e){var i;try{i=e(n._value)}catch(e){return void t.reject(e)}t.resolve(i)}else(n._state?t.resolve:t.reject)(n._value)})):this._deferreds.push(t)}function resolve(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void doResolve(bind(e,t),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=t,finale.call(this)}catch(t){reject.call(this,t)}}function reject(t){this._state=!1,this._value=t,finale.call(this)}function finale(){for(var t=0,e=this._deferreds.length;t<e;t++)handle.call(this,this._deferreds[t]);this._deferreds=null}function Handler(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function doResolve(t,e,n){var i=!1;try{t((function(t){i||(i=!0,e(t))}),(function(t){i||(i=!0,n(t))}))}catch(t){if(i)return;i=!0,n(t)}}return Promise.prototype.catch=function(t){return this.then(null,t)},Promise.prototype.then=function(t,e){var n=this;return new Promise((function(i,a){handle.call(n,new Handler(t,e,i,a))}))},Promise.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new Promise((function(t,n){if(0===e.length)return t([]);var i=e.length;function res(a,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){res(a,t)}),n)}e[a]=u,0==--i&&t(e)}catch(t){n(t)}}for(var a=0;a<e.length;a++)res(a,e[a])}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise?t:new Promise((function(e){e(t)}))},Promise.reject=function(t){return new Promise((function(e,n){n(t)}))},Promise.race=function(t){return new Promise((function(e,n){for(var i=0,a=t.length;i<a;i++)t[i].then(e,n)}))},Promise}(),wrappedSetTimeout=function(t,e){return"number"!=typeof e&&(e=0),n.setTimeout(t,e)},wrappedSetInterval=function(t,e){return"number"!=typeof e&&(e=1),n.setInterval(t,e)},debounce=function(t,e){var i,a;return(a=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];n.clearTimeout(i),i=wrappedSetTimeout((function(){t.apply(this,a)}),e)}).stop=function(){n.clearTimeout(i)},a},ut={requestAnimationFrame:function(t,e){nt?nt.then(t):nt=new at((function(t){e||(e=n.document.body),function(t,e){var i,a=n.window.requestAnimationFrame,u=["ms","moz","webkit"];for(i=0;i<u.length&&!a;i++)a=n.window[u[i]+"RequestAnimationFrame"];a||(a=function(t){n.window.setTimeout(t,0)}),a(t,e)}(t,e)})).then(t)},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(t,e,n){return wrappedSetTimeout((function(){t.removed||e()}),n)},setEditorInterval:function(t,e,i){var a;return a=wrappedSetInterval((function(){t.removed?n.clearInterval(a):e()}),i)},debounce:debounce,throttle:debounce,clearInterval:function(t){return n.clearInterval(t)},clearTimeout:function(t){return n.clearTimeout(t)}},ct=n.navigator.userAgent,st=detect$3(),lt=st.browser,ft=st.os,dt=st.deviceType,mt=/WebKit/.test(ct)&&!lt.isEdge(),gt="FormData"in n.window&&"FileReader"in n.window&&"URL"in n.window&&!!n.URL.createObjectURL,ht=-1!==ct.indexOf("Windows Phone"),pt={opera:lt.isOpera(),webkit:mt,ie:!(!lt.isIE()&&!lt.isEdge())&&lt.version.major,gecko:lt.isFirefox(),mac:ft.isOSX()||ft.isiOS(),iOS:dt.isiPad()||dt.isiPhone(),android:ft.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:n.window.getSelection&&"Range"in n.window,documentMode:lt.isIE()?n.document.documentMode||7:10,fileApi:gt,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!lt.isIE(),desktop:dt.isDesktop(),windowsPhone:ht,browser:{current:lt.current,version:lt.version,isChrome:lt.isChrome,isEdge:lt.isEdge,isFirefox:lt.isFirefox,isIE:lt.isIE,isOpera:lt.isOpera,isSafari:lt.isSafari},os:{current:ft.current,version:ft.version,isAndroid:ft.isAndroid,isChromeOS:ft.isChromeOS,isFreeBSD:ft.isFreeBSD,isiOS:ft.isiOS,isLinux:ft.isLinux,isOSX:ft.isOSX,isSolaris:ft.isSolaris,isWindows:ft.isWindows},deviceType:{isDesktop:dt.isDesktop,isiPad:dt.isiPad,isiPhone:dt.isiPhone,isPhone:dt.isPhone,isTablet:dt.isTablet,isTouch:dt.isTouch,isWebView:dt.isWebView}},vt=Array.isArray,each$2=function(t,e,n){var i,a;if(!t)return 0;if(n=n||t,void 0!==t.length){for(i=0,a=t.length;i<a;i++)if(!1===e.call(n,t[i],i,t))return 0}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return 0;return 1},findIndex$1=function(t,e,n){var i,a;for(i=0,a=t.length;i<a;i++)if(e.call(n,t[i],i,t))return i;return-1},bt={isArray:vt,toArray:function(t){var e,n,i=t;if(!vt(t))for(i=[],e=0,n=t.length;e<n;e++)i[e]=t[e];return i},each:each$2,map:function(t,e){var n=[];return each$2(t,(function(i,a){n.push(e(i,a,t))})),n},filter:function(t,e){var n=[];return each$2(t,(function(i,a){e&&!e(i,a,t)||n.push(i)})),n},indexOf:function(t,e){var n,i;if(t)for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},reduce:function(t,e,n,i){var a=0;for(arguments.length<3&&(n=t[0]);a<t.length;a++)n=e.call(i,n,t[a],a);return n},findIndex:findIndex$1,find:function(t,e,n){var i=findIndex$1(t,e,n);if(-1!==i)return t[i]},last:function(t){return t[t.length-1]}},yt=/^\s*|\s*$/g,trim$1=function(t){return null==t?"":(""+t).replace(yt,"")},is$1=function(t,e){return e?!("array"!==e||!bt.isArray(t))||typeof t===e:void 0!==t},walk=function(t,e,n,i){i=i||this,t&&(n&&(t=t[n]),bt.each(t,(function(t,a){if(!1===e.call(i,t,a,n))return!1;walk(t,e,n,i)})))},xt={trim:trim$1,isArray:bt.isArray,is:is$1,toArray:bt.toArray,makeMap:function(t,e,n){var i;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},i=t.length;i--;)n[t[i]]={};return n},each:bt.each,map:bt.map,grep:bt.filter,inArray:bt.indexOf,hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t,e){for(var n,i,a,u=[],c=2;c<arguments.length;c++)u[c-2]=arguments[c];var s,l=arguments;for(n=1,i=l.length;n<i;n++)for(a in e=l[n])e.hasOwnProperty(a)&&void 0!==(s=e[a])&&(t[a]=s);return t},create:function(t,e,n){var i,a,u,c,s,l=0;if(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t),u=t[3].match(/(^|\.)(\w+)$/i)[2],!(a=this.createNS(t[3].replace(/\.\w+$/,""),n))[u]){if("static"===t[2])return a[u]=e,void(this.onCreate&&this.onCreate(t[2],t[3],a[u]));e[u]||(e[u]=function(){},l=1),a[u]=e[u],this.extend(a[u].prototype,e),t[5]&&(i=this.resolve(t[5]).prototype,c=t[5].match(/\.(\w+)$/i)[1],s=a[u],a[u]=l?function(){return i[c].apply(this,arguments)}:function(){return this.parent=i[c],s.apply(this,arguments)},a[u].prototype[u]=a[u],this.each(i,(function(t,e){a[u].prototype[e]=i[e]})),this.each(e,(function(t,e){i[e]?a[u].prototype[e]=function(){return this.parent=i[e],t.apply(this,arguments)}:e!==u&&(a[u].prototype[e]=t)}))),this.each(e.static,(function(t,e){a[u][e]=t}))}},walk:walk,createNS:function(t,e){var i,a;for(e=e||n.window,t=t.split("."),i=0;i<t.length;i++)e[a=t[i]]||(e[a]={}),e=e[a];return e},resolve:function(t,e){var i,a;for(e=e||n.window,i=0,a=(t=t.split(".")).length;i<a&&(e=e[t[i]]);i++);return e},explode:function(t,e){return!t||is$1(t,"array")?t:bt.map(t.split(e||","),trim$1)},_addCacheSuffix:function(t){var e=pt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}};function StyleSheetLoader(t,e){void 0===e&&(e={});var i,a=0,u={};i=e.maxLoadTime||5e3;var appendToHead=function(e){t.getElementsByTagName("head")[0].appendChild(e)},load=function(c,s,l){var f,d,m,g,resolve=function(t){g.status=t,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},passed=function(){for(var t=g.passed,e=t.length;e--;)t[e]();resolve(2)},failed=function(){for(var t=g.failed,e=t.length;e--;)t[e]();resolve(3)},wait=function(t,e){t()||((new Date).getTime()-m<i?ut.setTimeout(e):failed())},waitForWebKitLinkLoaded=function(){wait((function(){for(var e,n,i=t.styleSheets,a=i.length;a--;)if((n=(e=i[a]).ownerNode?e.ownerNode:e.owningElement)&&n.id===f.id)return passed(),!0}),waitForWebKitLinkLoaded)},waitForGeckoLinkLoaded=function(){wait((function(){try{var t=d.sheet.cssRules;return passed(),!!t}catch(t){}}),waitForGeckoLinkLoaded)};if(c=xt._addCacheSuffix(c),u[c]?g=u[c]:(g={passed:[],failed:[]},u[c]=g),s&&g.passed.push(s),l&&g.failed.push(l),1!==g.status)if(2!==g.status)if(3!==g.status){if(g.status=1,(f=t.createElement("link")).rel="stylesheet",f.type="text/css",f.id="u"+a++,f.async=!1,f.defer=!1,m=(new Date).getTime(),e.contentCssCors&&(f.crossOrigin="anonymous"),e.referrerPolicy&&set(C.fromDom(f),"referrerpolicy",e.referrerPolicy),!("onload"in f)||(h=n.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(h[1],10)<536){if(n.navigator.userAgent.indexOf("Firefox")>0)return(d=t.createElement("style")).textContent='@import "'+c+'"',waitForGeckoLinkLoaded(),void appendToHead(d);waitForWebKitLinkLoaded()}else f.onload=waitForWebKitLinkLoaded,f.onerror=failed;var h;appendToHead(f),f.href=c}else failed();else passed()},loadF=function(t){return Future_nu((function(e){load(t,compose(e,constant(it.value(t))),compose(e,constant(it.error(t))))}))},unbox=function(t){return t.fold(identity,identity)};return{load:load,loadAll:function(t,e,n){var i;(i=map(t,loadF),par(i,Future_nu)).get((function(t){var i=function(t,e){for(var n=[],i=[],a=0,u=t.length;a<u;a++){var c=t[a];(e(c,a)?n:i).push(c)}return{pass:n,fail:i}}(t,(function(t){return t.isValue()}));i.fail.length>0?n(i.fail.map(unbox)):e(i.pass.map(unbox))}))},_setReferrerPolicy:function(t){e.referrerPolicy=t}}}var wt,Ct,St,lazyLookup=function(t){var e;return function(n){return(e=e||function(t,e){for(var n={},i=0,a=t.length;i<a;i++){var u=t[i];n[String(u)]=e(u,i)}return n}(t,constant(!0))).hasOwnProperty(H(n))}},kt=lazyLookup(["h1","h2","h3","h4","h5","h6"]),Et=lazyLookup(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),isInline=function(t){return L(t)&&!Et(t)},isBr$1=function(t){return L(t)&&"br"===H(t)},Tt=lazyLookup(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Ot=lazyLookup(["ul","ol","dl"]),_t=lazyLookup(["li","dd","dt"]),Nt=lazyLookup(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),At=lazyLookup(["thead","tbody","tfoot"]),zt=lazyLookup(["td","th"]),Dt=lazyLookup(["pre","script","textarea","style"]),isBookmarkNode=function(t){return t&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},trimNode=function(t,e){var n,i=e.childNodes;if(!Z.isElement(e)||!isBookmarkNode(e)){for(n=i.length-1;n>=0;n--)trimNode(t,i[n]);if(!1===Z.isDocument(e)){if(Z.isText(e)&&e.nodeValue.length>0){var a=xt.trim(e.nodeValue).length;if(t.isBlock(e.parentNode)||a>0)return;if(0===a&&function(t){var e=t.previousSibling&&"SPAN"===t.previousSibling.nodeName,n=t.nextSibling&&"SPAN"===t.nextSibling.nodeName;return e&&n}(e))return}else if(Z.isElement(e)&&(1===(i=e.childNodes).length&&isBookmarkNode(i[0])&&e.parentNode.insertBefore(i[0],e),i.length||Nt(C.fromDom(e))))return;t.remove(e)}return e}},Mt={trimNode:trimNode},Bt=xt.makeMap,Rt=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pt=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,It=/[<>&\"\']/g,Ht=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Lt={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};Ct={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},St={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var buildEntitiesLookup=function(t,e){var n,i,a,u={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)i=String.fromCharCode(parseInt(t[n],e)),Ct[i]||(a="&"+t[n+1]+";",u[i]=a,u[a]=i);return u}};wt=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var encodeRaw=function(t,e){return t.replace(e?Rt:Pt,(function(t){return Ct[t]||t}))},encodeNumeric=function(t,e){return t.replace(e?Rt:Pt,(function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":Ct[t]||"&#"+t.charCodeAt(0)+";"}))},encodeNamed=function(t,e,n){return n=n||wt,t.replace(e?Rt:Pt,(function(t){return Ct[t]||n[t]||t}))},Ft={encodeRaw:encodeRaw,encodeAllRaw:function(t){return(""+t).replace(It,(function(t){return Ct[t]||t}))},encodeNumeric:encodeNumeric,encodeNamed:encodeNamed,getEncodeFunc:function(t,e){var n=buildEntitiesLookup(e)||wt,i=Bt(t.replace(/\+/g,","));return i.named&&i.numeric?function(t,e){return t.replace(e?Rt:Pt,(function(t){return void 0!==Ct[t]?Ct[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"}))}:i.named?e?function(t,e){return encodeNamed(t,e,n)}:encodeNamed:i.numeric?encodeNumeric:encodeRaw},decode:function(t){return t.replace(Ht,(function(t,e){return e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):Lt[e]||String.fromCharCode(e):St[t]||wt[t]||function(t){var e;return(e=C.fromTag("div").dom()).innerHTML=t,e.textContent||e.innerText||t}(t)}))}},Vt={},Ut={},jt=xt.makeMap,Wt=xt.each,qt=xt.extend,$t=xt.explode,Gt=xt.inArray,split=function(t,e){return(t=xt.trim(t))?t.split(e||" "):[]},compileElementMap=function(t,e){var n;return t&&(n={},"string"==typeof t&&(t={"*":t}),Wt(t,(function(t,i){n[i]=n[i.toUpperCase()]="map"===e?jt(t,/[, ]/):$t(t,/[, ]/)}))),n};function Schema(t){var e,n,i,a,u,c,s,l,f,d,m,g,h,p={},v={},b=[],y={},x={},createLookupTable=function(e,n,i){var a=t[e];return a?a=jt(a,/[, ]/,jt(a.toUpperCase(),/[, ]/)):(a=Vt[e])||(a=jt(n," ",jt(n.toUpperCase()," ")),a=qt(a,i),Vt[e]=a),a};i=function(t){var e,n,i,a,u,c,s={},add=function(t,n,i){var a,u,c,arrayToMap=function(t,e){var n,i,a={};for(n=0,i=t.length;n<i;n++)a[t[n]]=e||{};return a};for(n=n||"","string"==typeof(i=i||[])&&(i=split(i)),a=(t=split(t)).length;a--;)c={attributes:arrayToMap(u=split([e,n].join(" "))),attributesOrder:u,children:arrayToMap(i,Ut)},s[t[a]]=c},addAttrs=function(t,e){var n,i,a,u;for(n=(t=split(t)).length,e=split(e);n--;)for(i=s[t[n]],a=0,u=e.length;a<u;a++)i.attributes[e[a]]={},i.attributesOrder.push(e[a])};return Vt[t]?Vt[t]:(e="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(e+=" xml:lang",i=[i,c="acronym applet basefont big font strike tt"].join(" "),Wt(split(c),(function(t){add(t,"",i)})),n=[n,u="center dir isindex noframes"].join(" "),a=[n,i].join(" "),Wt(split(u),(function(t){add(t,"",a)}))),a=a||[n,i].join(" "),add("html","manifest","head body"),add("head","","base command link meta noscript script style title"),add("title hr noscript br"),add("base","href target"),add("link","href rel media hreflang type sizes hreflang"),add("meta","name http-equiv content charset"),add("style","media type scoped"),add("script","src async defer type charset"),add("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),add("address dt dd div caption","",a),add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),add("blockquote","cite",a),add("ol","reversed start type","li"),add("ul","","li"),add("li","value",a),add("dl","","dt dd"),add("a","href target rel media hreflang type",i),add("q","cite",i),add("ins del","cite datetime",a),add("img","src sizes srcset alt usemap ismap width height"),add("iframe","src name width height",a),add("embed","src type width height"),add("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),add("param","name value"),add("map","name",[a,"area"].join(" ")),add("area","alt coords shape href target rel media hreflang type"),add("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),add("colgroup","span","col"),add("col","span"),add("tbody thead tfoot","","tr"),add("tr","","td th"),add("td","colspan rowspan headers",a),add("th","colspan rowspan headers scope abbr",a),add("form","accept-charset action autocomplete enctype method name novalidate target",a),add("fieldset","disabled form name",[a,"legend"].join(" ")),add("label","form for",i),add("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),add("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?a:i),add("select","disabled form multiple name required size","option optgroup"),add("optgroup","disabled label","option"),add("option","disabled label selected value"),add("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),add("menu","type label",[a,"li"].join(" ")),add("noscript","",a),"html4"!==t&&(add("wbr"),add("ruby","",[i,"rt rp"].join(" ")),add("figcaption","",a),add("mark rt rp summary bdi","",i),add("canvas","width height",a),add("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),add("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),add("picture","","img source"),add("source","src srcset type media sizes"),add("track","kind src srclang label default"),add("datalist","",[i,"option"].join(" ")),add("article section nav aside main header footer","",a),add("hgroup","","h1 h2 h3 h4 h5 h6"),add("figure","",[a,"figcaption"].join(" ")),add("time","datetime",i),add("dialog","open",a),add("command","type label icon disabled checked radiogroup command"),add("output","for form name",i),add("progress","value max",i),add("meter","value min max low high optimum",i),add("details","open",[a,"summary"].join(" ")),add("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(addAttrs("script","language xml:space"),addAttrs("style","xml:space"),addAttrs("object","declare classid code codebase codetype archive standby align border hspace vspace"),addAttrs("embed","align name hspace vspace"),addAttrs("param","valuetype type"),addAttrs("a","charset name rev shape coords"),addAttrs("br","clear"),addAttrs("applet","codebase archive code object alt name width height align hspace vspace"),addAttrs("img","name longdesc align border hspace vspace"),addAttrs("iframe","longdesc frameborder marginwidth marginheight scrolling align"),addAttrs("font basefont","size color face"),addAttrs("input","usemap align"),addAttrs("select"),addAttrs("textarea"),addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption","align"),addAttrs("ul","type compact"),addAttrs("li","type"),addAttrs("ol dl menu dir","compact"),addAttrs("pre","width xml:space"),addAttrs("hr","align noshade size width"),addAttrs("isindex","prompt"),addAttrs("table","summary width frame rules cellspacing cellpadding align bgcolor"),addAttrs("col","width align char charoff valign"),addAttrs("colgroup","width align char charoff valign"),addAttrs("thead","align char charoff valign"),addAttrs("tr","align char charoff valign bgcolor"),addAttrs("th","axis align char charoff valign nowrap bgcolor width height"),addAttrs("form","accept"),addAttrs("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),addAttrs("tfoot","align char charoff valign"),addAttrs("tbody","align char charoff valign"),addAttrs("area","nohref"),addAttrs("body","background bgcolor text link vlink alink")),"html4"!==t&&(addAttrs("input button select textarea","autofocus"),addAttrs("input textarea","placeholder"),addAttrs("a","download"),addAttrs("link script img","crossorigin"),addAttrs("img","loading"),addAttrs("iframe","sandbox seamless allowfullscreen loading")),Wt(split("a form meter progress dfn"),(function(t){s[t]&&delete s[t].children[t]})),delete s.caption.children.table,delete s.script,Vt[t]=s,s)}((t=t||{}).schema),!1===t.verify_html&&(t.valid_elements="*[*]"),e=compileElementMap(t.valid_styles),n=compileElementMap(t.invalid_styles,"map"),l=compileElementMap(t.valid_classes,"map"),a=createLookupTable("whitespace_elements","pre script noscript style textarea video audio iframe object code"),u=createLookupTable("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),c=createLookupTable("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=createLookupTable("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),d=createLookupTable("non_empty_elements","td th iframe video audio object script pre code",c),m=createLookupTable("move_caret_before_on_enter_elements","table",d),g=createLookupTable("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),f=createLookupTable("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",g),h=createLookupTable("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Wt((t.special||"script noscript noframes noembed title style textarea xmp").split(" "),(function(t){x[t]=new RegExp("</"+t+"[^>]*>","gi")}));var patternToRegExp=function(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")},addValidElements=function(t){var e,n,i,a,u,c,s,l,f,d,m,g,h,v,y,x,w,C,S,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,E=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(t)for(t=split(t,","),p["@"]&&(x=p["@"].attributes,w=p["@"].attributesOrder),e=0,n=t.length;e<n;e++)if(u=k.exec(t[e])){if(v=u[1],f=u[2],y=u[3],l=u[5],c={attributes:g={},attributesOrder:h=[]},"#"===v&&(c.paddEmpty=!0),"-"===v&&(c.removeEmpty=!0),"!"===u[4]&&(c.removeEmptyAttrs=!0),x){for(C in x)g[C]=x[C];h.push.apply(h,w)}if(l)for(i=0,a=(l=split(l,"|")).length;i<a;i++)if(u=E.exec(l[i])){if(s={},m=u[1],d=u[2].replace(/[\\:]:/g,":"),v=u[3],S=u[4],"!"===m&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(d),s.required=!0),"-"===m){delete g[d],h.splice(Gt(h,d),1);continue}v&&("="===v&&(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:d,value:S}),s.defaultValue=S),":"===v&&(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:d,value:S}),s.forcedValue=S),"<"===v&&(s.validValues=jt(S,"?"))),T.test(d)?(c.attributePatterns=c.attributePatterns||[],s.pattern=patternToRegExp(d),c.attributePatterns.push(s)):(g[d]||h.push(d),g[d]=s)}x||"@"!==f||(x=g,w=h),y&&(c.outputName=f,p[y]=c),T.test(f)?(c.pattern=patternToRegExp(f),b.push(c)):p[f]=c}},setValidElements=function(t){p={},b=[],addValidElements(t),Wt(i,(function(t,e){v[e]=t.children}))},addCustomElements=function(t){var e=/^(~)?(.+)$/;t&&(Vt.text_block_elements=Vt.block_elements=null,Wt(split(t,","),(function(t){var n=e.exec(t),i="~"===n[1],a=i?"span":"div",u=n[2];if(v[u]=v[a],y[u]=a,i||(f[u.toUpperCase()]={},f[u]={}),!p[u]){var c=p[a];delete(c=qt({},c)).removeEmptyAttrs,delete c.removeEmpty,p[u]=c}Wt(v,(function(t,e){t[a]&&(v[e]=t=qt({},v[e]),t[u]=t[a])}))})))},addValidChildren=function(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Vt[t.schema]=null,e&&Wt(split(e,","),(function(t){var e,i,a=n.exec(t);a&&(i=a[1],e=i?v[a[2]]:v[a[2]]={"#comment":{}},e=v[a[2]],Wt(split(a[3],"|"),(function(t){"-"===i?delete e[t]:e[t]={}})))}))},getElementRule=function(t){var e,n=p[t];if(n)return n;for(e=b.length;e--;)if((n=b[e]).pattern.test(t))return n};t.valid_elements?setValidElements(t.valid_elements):(Wt(i,(function(t,e){p[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},v[e]=t.children})),"html5"!==t.schema&&Wt(split("strong/b em/i"),(function(t){t=split(t,"/"),p[t[1]].outputName=t[0]})),Wt(split("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(t){p[t]&&(p[t].removeEmpty=!0)})),Wt(split("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(t){p[t].paddEmpty=!0})),Wt(split("span"),(function(t){p[t].removeEmptyAttrs=!0}))),addCustomElements(t.custom_elements),addValidChildren(t.valid_children),addValidElements(t.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),Wt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(t,e){p[e]&&(p[e].parentsRequired=split(t))})),t.invalid_elements&&Wt($t(t.invalid_elements),(function(t){p[t]&&delete p[t]})),getElementRule("span")||addValidElements("span[!data-mce-type|*]");return{children:v,elements:p,getValidStyles:function(){return e},getValidClasses:function(){return l},getBlockElements:function(){return f},getInvalidStyles:function(){return n},getShortEndedElements:function(){return c},getTextBlockElements:function(){return g},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:getElementRule,getSelfClosingElements:function(){return u},getNonEmptyElements:function(){return d},getMoveCaretBeforeOnEnterElements:function(){return m},getWhiteSpaceElements:function(){return a},getSpecialElements:function(){return x},isValidChild:function(t,e){var n=v[t.toLowerCase()];return!(!n||!n[e.toLowerCase()])},isValid:function(t,e){var n,i,a=getElementRule(t);if(a){if(!e)return!0;if(a.attributes[e])return!0;if(n=a.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(t))return!0}return!1},getCustomElements:function(){return y},addValidElements:addValidElements,setValidElements:setValidElements,addCustomElements:addCustomElements,addValidChildren:addValidChildren}}var Xt,Kt,Yt,Jt,Zt,Qt,te,ee,ne,re,oe,ie,ae,ue,ce,se,le,fe,toHex=function(t,e,n,i){var hex=function(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t};return"#"+hex(e)+hex(n)+hex(i)},Styles=function(t,e){var n,i,a,u,c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,d={};for(t=t||{},e&&(a=e.getValidStyles(),u=e.getInvalidStyles()),i="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<i.length;n++)d[i[n]]="\ufeff"+n,d["\ufeff"+n]=i[n];return{toHex:function(t){return t.replace(c,toHex)},parse:function(e){var i,a,u,m,g,h,p,v,b={},y=t.url_converter,x=t.url_converter_scope||this,compress=function(t,e,i){var a,u,c,s;if((a=b[t+"-top"+e])&&(u=b[t+"-right"+e])&&(c=b[t+"-bottom"+e])&&(s=b[t+"-left"+e])){var l=[a,u,c,s];for(n=l.length-1;n--&&l[n]===l[n+1];);n>-1&&i||(b[t+e]=-1===n?l[0]:l.join(" "),delete b[t+"-top"+e],delete b[t+"-right"+e],delete b[t+"-bottom"+e],delete b[t+"-left"+e])}},canCompress=function(t){var e,n=b[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return b[t]=n[0],!0}},encode=function(t){return m=!0,d[t]},decode=function(t,e){return m&&(t=t.replace(/\uFEFF[0-9]/g,(function(t){return d[t]}))),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t},decodeSingleHexSequence=function(t){return String.fromCharCode(parseInt(t.slice(1),16))},decodeHexSequences=function(t){return t.replace(/\\[0-9a-f]+/gi,decodeSingleHexSequence)},processUrl=function(e,n,i,a,u,c){if(u=u||c)return"'"+(u=decode(u)).replace(/\'/g,"\\'")+"'";if(n=decode(n||i||a),!t.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return y&&(n=y.call(x,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(t){return t.replace(/[;:]/g,encode)}));i=l.exec(e);)if(l.lastIndex=i.index+i[0].length,a=i[1].replace(f,"").toLowerCase(),u=i[2].replace(f,""),a&&u){if(a=decodeHexSequences(a),u=decodeHexSequences(u),-1!==a.indexOf("\ufeff")||-1!==a.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"===a||/expression\s*\(|\/\*|\*\//.test(u)))continue;"font-weight"===a&&"700"===u?u="bold":"color"!==a&&"background-color"!==a||(u=u.toLowerCase()),u=(u=u.replace(c,toHex)).replace(s,processUrl),b[a]=m?decode(u,!0):u}compress("border","",!0),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),g="border",p="border-style",v="border-color",canCompress(h="border-width")&&canCompress(p)&&canCompress(v)&&(b[g]=b[h]+" "+b[p]+" "+b[v],delete b[h],delete b[p],delete b[v]),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(t,e){var n,i,c="",serializeStyles=function(e){var n,i,u,s;if(n=a[e])for(i=0,u=n.length;i<u;i++)e=n[i],(s=t[e])&&(c+=(c.length>0?" ":"")+e+": "+s+";")},isValid=function(t,e){var n;return(!(n=u["*"])||!n[t])&&(!(n=u[e])||!n[t])};if(e&&a)serializeStyles("*"),serializeStyles(e);else for(n in t)!(i=t[n])||u&&!isValid(n,e)||(c+=(c.length>0?" ":"")+n+": "+i+";");return c}}},de=/^(?:mouse|contextmenu)|click/,me={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},returnFalse=function(){return!1},returnTrue=function(){return!0},addEvent=function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)},removeEvent=function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)},fix=function(t,e){var i,a=e||{};for(i in t)me[i]||(a[i]=t[i]);if(a.target||(a.target=a.srcElement||n.document),pt.experimentalShadowDom&&(a.target=function(t,e){if(t.composedPath){var n=t.composedPath();if(n&&n.length>0)return n[0]}return e}(t,a.target)),t&&de.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var u=a.target.ownerDocument||n.document,c=u.documentElement,s=u.body;a.pageX=t.clientX+(c&&c.scrollLeft||s&&s.scrollLeft||0)-(c&&c.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(c&&c.scrollTop||s&&s.scrollTop||0)-(c&&c.clientTop||s&&s.clientTop||0)}return a.preventDefault=function(){a.isDefaultPrevented=returnTrue,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},a.stopPropagation=function(){a.isPropagationStopped=returnTrue,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},a.stopImmediatePropagation=function(){a.isImmediatePropagationStopped=returnTrue,a.stopPropagation()},!1===function(t){return t.isDefaultPrevented===returnTrue||t.isDefaultPrevented===returnFalse}(a)&&(a.isDefaultPrevented=returnFalse,a.isPropagationStopped=returnFalse,a.isImmediatePropagationStopped=returnFalse),void 0===a.metaKey&&(a.metaKey=!1),a},bindOnReady=function(t,e,n){var i=t.document,a={type:"ready"};if(n.domLoaded)e(a);else{var readyHandler=function(){removeEvent(t,"DOMContentLoaded",readyHandler),removeEvent(t,"load",readyHandler),n.domLoaded||(n.domLoaded=!0,e(a))};"complete"===i.readyState||"interactive"===i.readyState&&i.body?readyHandler():addEvent(t,"DOMContentLoaded",readyHandler),addEvent(t,"load",readyHandler)}},ge=function(){function EventUtils(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in n.document.documentElement,this.hasFocusIn="onfocusin"in n.document.documentElement,this.count=1}return EventUtils.prototype.bind=function(t,e,i,a){var u,c,s,l,f,d,m,g=this,h=n.window,defaultNativeHandler=function(t){g.executeHandlers(fix(t||h.event),u)};if(t&&3!==t.nodeType&&8!==t.nodeType){t[g.expando]?u=t[g.expando]:(u=g.count++,t[g.expando]=u,g.events[u]={}),a=a||t;var p=e.split(" ");for(s=p.length;s--;)d=defaultNativeHandler,f=m=!1,"DOMContentLoaded"===(l=p[s])&&(l="ready"),g.domLoaded&&"ready"===l&&"complete"===t.readyState?i.call(a,fix({type:l})):(g.hasMouseEnterLeave||(f=g.mouseEnterLeave[l])&&(d=function(t){var e,n;if(e=t.currentTarget,(n=t.relatedTarget)&&e.contains)n=e.contains(n);else for(;n&&n!==e;)n=n.parentNode;n||((t=fix(t||h.event)).type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,g.executeHandlers(t,u))}),g.hasFocusIn||"focusin"!==l&&"focusout"!==l||(m=!0,f="focusin"===l?"focus":"blur",d=function(t){(t=fix(t||h.event)).type="focus"===t.type?"focusin":"focusout",g.executeHandlers(t,u)}),(c=g.events[u][l])?"ready"===l&&g.domLoaded?i(fix({type:l})):c.push({func:i,scope:a}):(g.events[u][l]=c=[{func:i,scope:a}],c.fakeName=f,c.capture=m,c.nativeHandler=d,"ready"===l?bindOnReady(t,d,g):addEvent(t,f||l,d,m)));return t=c=0,i}},EventUtils.prototype.unbind=function(t,e,n){var i,a,u,c,s,l;if(!t||3===t.nodeType||8===t.nodeType)return this;if(i=t[this.expando]){if(l=this.events[i],e){var f=e.split(" ");for(u=f.length;u--;)if(a=l[s=f[u]]){if(n)for(c=a.length;c--;)if(a[c].func===n){var d=a.nativeHandler,m=a.fakeName,g=a.capture;(a=a.slice(0,c).concat(a.slice(c+1))).nativeHandler=d,a.fakeName=m,a.capture=g,l[s]=a}n&&0!==a.length||(delete l[s],removeEvent(t,a.fakeName||s,a.nativeHandler,a.capture))}}else{for(s in l)a=l[s],removeEvent(t,a.fakeName||s,a.nativeHandler,a.capture);l={}}for(s in l)return this;delete this.events[i];try{delete t[this.expando]}catch(e){t[this.expando]=null}}return this},EventUtils.prototype.fire=function(t,e,n){var i;if(!t||3===t.nodeType||8===t.nodeType)return this;var a=fix(null,n);a.type=e,a.target=t;do{(i=t[this.expando])&&this.executeHandlers(a,i),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!a.isPropagationStopped());return this},EventUtils.prototype.clean=function(t){var e,n;if(!t||3===t.nodeType||8===t.nodeType)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[this.expando]&&this.unbind(t);return this},EventUtils.prototype.destroy=function(){this.events={}},EventUtils.prototype.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1},EventUtils.prototype.executeHandlers=function(t,e){var n,i,a,u,c=this.events[e];if(n=c&&c[t.type])for(i=0,a=n.length;i<a;i++)if((u=n[i])&&!1===u.func.call(u.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return},EventUtils.Event=new EventUtils,EventUtils}(),he="sizzle"+-new Date,pe=n.window.document,ve=0,be=0,ye=createCache(),xe=createCache(),we=createCache(),sortOrder=function(t,e){return t===e&&(oe=!0),0},Ce={}.hasOwnProperty,Se=[],ke=Se.pop,Ee=Se.push,Te=Se.push,Oe=Se.slice,_e=Se.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},Ne="[\\x20\\t\\r\\n\\f]",Ae="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ze="\\["+Ne+"*("+Ae+")(?:"+Ne+"*([*^$|!~]?=)"+Ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ae+"))|)"+Ne+"*\\]",De=":("+Ae+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ze+")*)|.*)\\)|)",Me=new RegExp("^"+Ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ne+"+$","g"),Be=new RegExp("^"+Ne+"*,"+Ne+"*"),Re=new RegExp("^"+Ne+"*([>+~]|"+Ne+")"+Ne+"*"),Pe=new RegExp("="+Ne+"*([^\\]'\"]*?)"+Ne+"*\\]","g"),Ie=new RegExp(De),He=new RegExp("^"+Ae+"$"),Le={ID:new RegExp("^#("+Ae+")"),CLASS:new RegExp("^\\.("+Ae+")"),TAG:new RegExp("^("+Ae+"|[*])"),ATTR:new RegExp("^"+ze),PSEUDO:new RegExp("^"+De),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ne+"*(even|odd|(([+-]|)(\\d*)n|)"+Ne+"*(?:([+-]|)"+Ne+"*(\\d+)|))"+Ne+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ne+"*((?:-\\d)?\\d*)"+Ne+"*\\)|)(?=[^-]|$)","i")},Fe=/^(?:input|select|textarea|button)$/i,Ve=/^h\d$/i,Ue=/^[^{]+\{\s*\[native \w/,je=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,We=/[+~]/,qe=/'|\\/g,$e=new RegExp("\\\\([\\da-f]{1,6}"+Ne+"?|("+Ne+")|.)","ig"),funescape=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Te.apply(Se=Oe.call(pe.childNodes),pe.childNodes),Se[pe.childNodes.length].nodeType}catch(t){Te={apply:Se.length?function(t,e){Ee.apply(t,Oe.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}var Sizzle=function(t,e,n,i){var a,u,c,s,l,f,d,m,g,h;if((e?e.ownerDocument||e:pe)!==ae&&ie(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||ae).nodeType)&&9!==s)return[];if(ce&&!i){if(a=je.exec(t))if(c=a[1]){if(9===s){if(!(u=e.getElementById(c))||!u.parentNode)return n;if(u.id===c)return n.push(u),n}else if(e.ownerDocument&&(u=e.ownerDocument.getElementById(c))&&fe(e,u)&&u.id===c)return n.push(u),n}else{if(a[2])return Te.apply(n,e.getElementsByTagName(t)),n;if((c=a[3])&&Kt.getElementsByClassName)return Te.apply(n,e.getElementsByClassName(c)),n}if(Kt.qsa&&(!se||!se.test(t))){if(m=d=he,g=e,h=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(f=Qt(t),(d=e.getAttribute("id"))?m=d.replace(qe,"\\$&"):e.setAttribute("id",m),m="[id='"+m+"'] ",l=f.length;l--;)f[l]=m+toSelector(f[l]);g=We.test(t)&&testContext(e.parentNode)||e,h=f.join(",")}if(h)try{return Te.apply(n,g.querySelectorAll(h)),n}catch(t){}finally{d||e.removeAttribute("id")}}}return ee(t.replace(Me,"$1"),e,n,i)};function createCache(){var t=[];return function cache(e,n){return t.push(e+" ")>Yt.cacheLength&&delete cache[t.shift()],cache[e+" "]=n}}function markFunction(t){return t[he]=!0,t}function siblingCheck(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function createInputPseudo(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function createButtonPseudo(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function createPositionalPseudo(t){return markFunction((function(e){return e=+e,markFunction((function(n,i){for(var a,u=t([],n.length,e),c=u.length;c--;)n[a=u[c]]&&(n[a]=!(i[a]=n[a]))}))}))}function testContext(t){return t&&void 0!==t.getElementsByTagName&&t}for(Xt in Kt=Sizzle.support={},Zt=Sizzle.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},ie=Sizzle.setDocument=function(t){var e,n=t?t.ownerDocument||t:pe,i=n.defaultView;return n!==ae&&9===n.nodeType&&n.documentElement?(ae=n,ue=n.documentElement,ce=!Zt(n),i&&i!==function getTop(t){try{return t.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",(function(){ie()}),!1):i.attachEvent&&i.attachEvent("onunload",(function(){ie()}))),Kt.attributes=!0,Kt.getElementsByTagName=!0,Kt.getElementsByClassName=Ue.test(n.getElementsByClassName),Kt.getById=!0,Yt.find.ID=function(t,e){if(void 0!==e.getElementById&&ce){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},Yt.filter.ID=function(t){var e=t.replace($e,funescape);return function(t){return t.getAttribute("id")===e}},Yt.find.TAG=Kt.getElementsByTagName?function(t,e){if(void 0!==e.getElementsByTagName)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],a=0,u=e.getElementsByTagName(t);if("*"===t){for(;n=u[a++];)1===n.nodeType&&i.push(n);return i}return u},Yt.find.CLASS=Kt.getElementsByClassName&&function(t,e){if(ce)return e.getElementsByClassName(t)},le=[],se=[],Kt.disconnectedMatch=!0,se=se.length&&new RegExp(se.join("|")),le=le.length&&new RegExp(le.join("|")),e=Ue.test(ue.compareDocumentPosition),fe=e||Ue.test(ue.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},sortOrder=e?function(t,e){if(t===e)return oe=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!Kt.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===pe&&fe(pe,t)?-1:e===n||e.ownerDocument===pe&&fe(pe,e)?1:re?_e.call(re,t)-_e.call(re,e):0:4&i?-1:1)}:function(t,e){if(t===e)return oe=!0,0;var i,a=0,u=t.parentNode,c=e.parentNode,s=[t],l=[e];if(!u||!c)return t===n?-1:e===n?1:u?-1:c?1:re?_e.call(re,t)-_e.call(re,e):0;if(u===c)return siblingCheck(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;s[a]===l[a];)a++;return a?siblingCheck(s[a],l[a]):s[a]===pe?-1:l[a]===pe?1:0},n):ae},Sizzle.matches=function(t,e){return Sizzle(t,null,null,e)},Sizzle.matchesSelector=function(t,e){if((t.ownerDocument||t)!==ae&&ie(t),e=e.replace(Pe,"='$1']"),Kt.matchesSelector&&ce&&(!le||!le.test(e))&&(!se||!se.test(e)))try{var n=(void 0).call(t,e);if(n||Kt.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return Sizzle(e,ae,null,[t]).length>0},Sizzle.contains=function(t,e){return(t.ownerDocument||t)!==ae&&ie(t),fe(t,e)},Sizzle.attr=function(t,e){(t.ownerDocument||t)!==ae&&ie(t);var n=Yt.attrHandle[e.toLowerCase()],i=n&&Ce.call(Yt.attrHandle,e.toLowerCase())?n(t,e,!ce):void 0;return void 0!==i?i:Kt.attributes||!ce?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},Sizzle.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},Sizzle.uniqueSort=function(t){var e,n=[],i=0,a=0;if(oe=!Kt.detectDuplicates,re=!Kt.sortStable&&t.slice(0),t.sort(sortOrder),oe){for(;e=t[a++];)e===t[a]&&(i=n.push(a));for(;i--;)t.splice(n[i],1)}return re=null,t},Jt=Sizzle.getText=function(t){var e,n="",i=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=Jt(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[i++];)n+=Jt(e);return n},(Yt=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:Le,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace($e,funescape),t[3]=(t[3]||t[4]||t[5]||"").replace($e,funescape),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Sizzle.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Sizzle.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Le.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Ie.test(n)&&(e=Qt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace($e,funescape).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=ye[t+" "];return e||(e=new RegExp("(^|"+Ne+")"+t+"("+Ne+"|$)"))&&ye(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var a=Sizzle.attr(i,t);return null==a?"!="===e:!e||(a+="","="===e?a===n:"!="===e?a!==n:"^="===e?n&&0===a.indexOf(n):"*="===e?n&&a.indexOf(n)>-1:"$="===e?n&&a.slice(-n.length)===n:"~="===e?(" "+a+" ").indexOf(n)>-1:"|="===e&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,a){var u="nth"!==t.slice(0,3),c="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===a?function(t){return!!t.parentNode}:function(e,n,l){var f,d,m,g,h,p,v=u!==c?"nextSibling":"previousSibling",b=e.parentNode,y=s&&e.nodeName.toLowerCase(),x=!l&&!s;if(b){if(u){for(;v;){for(m=e;m=m[v];)if(s?m.nodeName.toLowerCase()===y:1===m.nodeType)return!1;p=v="only"===t&&!p&&"nextSibling"}return!0}if(p=[c?b.firstChild:b.lastChild],c&&x){for(h=(f=(d=b[he]||(b[he]={}))[t]||[])[0]===ve&&f[1],g=f[0]===ve&&f[2],m=h&&b.childNodes[h];m=++h&&m&&m[v]||(g=h=0)||p.pop();)if(1===m.nodeType&&++g&&m===e){d[t]=[ve,h,g];break}}else if(x&&(f=(e[he]||(e[he]={}))[t])&&f[0]===ve)g=f[1];else for(;(m=++h&&m&&m[v]||(g=h=0)||p.pop())&&((s?m.nodeName.toLowerCase()!==y:1!==m.nodeType)||!++g||(x&&((m[he]||(m[he]={}))[t]=[ve,g]),m!==e)););return(g-=a)===i||g%i==0&&g/i>=0}}},PSEUDO:function(t,e){var n,i=Yt.pseudos[t]||Yt.setFilters[t.toLowerCase()]||Sizzle.error("unsupported pseudo: "+t);return i[he]?i(e):i.length>1?(n=[t,t,"",e],Yt.setFilters.hasOwnProperty(t.toLowerCase())?markFunction((function(t,n){for(var a,u=i(t,e),c=u.length;c--;)t[a=_e.call(t,u[c])]=!(n[a]=u[c])})):function(t){return i(t,0,n)}):i}},pseudos:{not:markFunction((function(t){var e=[],n=[],i=te(t.replace(Me,"$1"));return i[he]?markFunction((function(t,e,n,a){for(var u,c=i(t,null,a,[]),s=t.length;s--;)(u=c[s])&&(t[s]=!(e[s]=u))})):function(t,a,u){return e[0]=t,i(e,null,u,n),!n.pop()}})),has:markFunction((function(t){return function(e){return Sizzle(t,e).length>0}})),contains:markFunction((function(t){return t=t.replace($e,funescape),function(e){return(e.textContent||e.innerText||Jt(e)).indexOf(t)>-1}})),lang:markFunction((function(t){return He.test(t||"")||Sizzle.error("unsupported lang: "+t),t=t.replace($e,funescape).toLowerCase(),function(e){var n;do{if(n=ce?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=n.window.location&&n.window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===ue},focus:function(t){return t===ae.activeElement&&(!ae.hasFocus||ae.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!Yt.pseudos.empty(t)},header:function(t){return Ve.test(t.nodeName)},input:function(t){return Fe.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(t,e){return[e-1]})),eq:createPositionalPseudo((function(t,e,n){return[n<0?n+e:n]})),even:createPositionalPseudo((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:createPositionalPseudo((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:createPositionalPseudo((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:createPositionalPseudo((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=Yt.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Yt.pseudos[Xt]=createInputPseudo(Xt);for(Xt in{submit:!0,reset:!0})Yt.pseudos[Xt]=createButtonPseudo(Xt);function setFilters(){}function toSelector(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function addCombinator(t,e,n){var i=e.dir,a=n&&"parentNode"===i,u=be++;return e.first?function(e,n,u){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,u)}:function(e,n,c){var s,l,f=[ve,u];if(c){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||a){if((s=(l=e[he]||(e[he]={}))[i])&&s[0]===ve&&s[1]===u)return f[2]=s[2];if(l[i]=f,f[2]=t(e,n,c))return!0}}}function elementMatcher(t){return t.length>1?function(e,n,i){for(var a=t.length;a--;)if(!t[a](e,n,i))return!1;return!0}:t[0]}function condense(t,e,n,i,a){for(var u,c=[],s=0,l=t.length,f=null!=e;s<l;s++)(u=t[s])&&(n&&!n(u,i,a)||(c.push(u),f&&e.push(s)));return c}function setMatcher(t,e,n,i,a,u){return i&&!i[he]&&(i=setMatcher(i)),a&&!a[he]&&(a=setMatcher(a,u)),markFunction((function(u,c,s,l){var f,d,m,g=[],h=[],p=c.length,v=u||function multipleContexts(t,e,n){for(var i=0,a=e.length;i<a;i++)Sizzle(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),b=!t||!u&&e?v:condense(v,g,t,s,l),y=n?a||(u?t:p||i)?[]:c:b;if(n&&n(b,y,s,l),i)for(f=condense(y,h),i(f,[],s,l),d=f.length;d--;)(m=f[d])&&(y[h[d]]=!(b[h[d]]=m));if(u){if(a||t){if(a){for(f=[],d=y.length;d--;)(m=y[d])&&f.push(b[d]=m);a(null,y=[],f,l)}for(d=y.length;d--;)(m=y[d])&&(f=a?_e.call(u,m):g[d])>-1&&(u[f]=!(c[f]=m))}}else y=condense(y===c?y.splice(p,y.length):y),a?a(null,c,y,l):Te.apply(c,y)}))}function matcherFromTokens(t){for(var e,n,i,a=t.length,u=Yt.relative[t[0].type],c=u||Yt.relative[" "],s=u?1:0,l=addCombinator((function(t){return t===e}),c,!0),f=addCombinator((function(t){return _e.call(e,t)>-1}),c,!0),d=[function(t,n,i){return!u&&(i||n!==ne)||((e=n).nodeType?l(t,n,i):f(t,n,i))}];s<a;s++)if(n=Yt.relative[t[s].type])d=[addCombinator(elementMatcher(d),n)];else{if((n=Yt.filter[t[s].type].apply(null,t[s].matches))[he]){for(i=++s;i<a&&!Yt.relative[t[i].type];i++);return setMatcher(s>1&&elementMatcher(d),s>1&&toSelector(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(Me,"$1"),n,s<i&&matcherFromTokens(t.slice(s,i)),i<a&&matcherFromTokens(t=t.slice(i)),i<a&&toSelector(t))}d.push(n)}return elementMatcher(d)}setFilters.prototype=Yt.filters=Yt.pseudos,Yt.setFilters=new setFilters,Qt=Sizzle.tokenize=function(t,e){var n,i,a,u,c,s,l,f=xe[t+" "];if(f)return e?0:f.slice(0);for(c=t,s=[],l=Yt.preFilter;c;){for(u in n&&!(i=Be.exec(c))||(i&&(c=c.slice(i[0].length)||c),s.push(a=[])),n=!1,(i=Re.exec(c))&&(n=i.shift(),a.push({value:n,type:i[0].replace(Me," ")}),c=c.slice(n.length)),Yt.filter)Yt.filter.hasOwnProperty(u)&&(!(i=Le[u].exec(c))||l[u]&&!(i=l[u](i))||(n=i.shift(),a.push({value:n,type:u,matches:i}),c=c.slice(n.length)));if(!n)break}return e?c.length:c?Sizzle.error(t):xe(t,s).slice(0)},te=Sizzle.compile=function(t,e){var n,i=[],a=[],u=we[t+" "];if(!u){for(e||(e=Qt(t)),n=e.length;n--;)(u=matcherFromTokens(e[n]))[he]?i.push(u):a.push(u);(u=we(t,function matcherFromGroupMatchers(t,e){var n=e.length>0,i=t.length>0,superMatcher=function(a,u,c,s,l){var f,d,m,g=0,h="0",p=a&&[],v=[],b=ne,y=a||i&&Yt.find.TAG("*",l),x=ve+=null==b?1:Math.random()||.1,w=y.length;for(l&&(ne=u!==ae&&u);h!==w&&null!=(f=y[h]);h++){if(i&&f){for(d=0;m=t[d++];)if(m(f,u,c)){s.push(f);break}l&&(ve=x)}n&&((f=!m&&f)&&g--,a&&p.push(f))}if(g+=h,n&&h!==g){for(d=0;m=e[d++];)m(p,v,u,c);if(a){if(g>0)for(;h--;)p[h]||v[h]||(v[h]=ke.call(s));v=condense(v)}Te.apply(s,v),l&&!a&&v.length>0&&g+e.length>1&&Sizzle.uniqueSort(s)}return l&&(ve=x,ne=b),p};return n?markFunction(superMatcher):superMatcher}(a,i))).selector=t}return u},ee=Sizzle.select=function(t,e,n,i){var a,u,c,s,l,f="function"==typeof t&&t,d=!i&&Qt(t=f.selector||t);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&Kt.getById&&9===e.nodeType&&ce&&Yt.relative[u[1].type]){if(!(e=(Yt.find.ID(c.matches[0].replace($e,funescape),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(a=Le.needsContext.test(t)?0:u.length;a--&&(c=u[a],!Yt.relative[s=c.type]);)if((l=Yt.find[s])&&(i=l(c.matches[0].replace($e,funescape),We.test(u[0].type)&&testContext(e.parentNode)||e))){if(u.splice(a,1),!(t=i.length&&toSelector(u)))return Te.apply(n,i),n;break}}return(f||te(t,d))(i,e,!ce,n,We.test(t)&&testContext(e.parentNode)||e),n},Kt.sortStable=he.split("").sort(sortOrder).join("")===he,Kt.detectDuplicates=!!oe,ie(),Kt.sortDetached=!0;var Ge=n.document,Xe=Array.prototype.push,Ke=Array.prototype.slice,Ye=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Je=ge.Event,Ze=xt.makeMap("children,contents,next,prev"),isDefined=function(t){return void 0!==t},isString$1=function(t){return"string"==typeof t},createFragment=function(t,e){var n,i,a;for(a=(e=e||Ge).createElement("div"),n=e.createDocumentFragment(),a.innerHTML=t;i=a.firstChild;)n.appendChild(i);return n},domManipulate=function(t,e,n,i){var a;if(isString$1(e))e=createFragment(e,getElementDocument(t[0]));else if(e.length&&!e.nodeType){if(e=un.makeArray(e),i)for(a=e.length-1;a>=0;a--)domManipulate(t,e[a],n,i);else for(a=0;a<e.length;a++)domManipulate(t,e[a],n,i);return t}if(e.nodeType)for(a=t.length;a--;)n.call(t[a],e);return t},hasClass=function(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},wrap$1=function(t,e,n){var i,a;return e=un(e)[0],t.each((function(){n&&i===this.parentNode||(i=this.parentNode,a=e.cloneNode(!1),this.parentNode.insertBefore(a,this)),a.appendChild(this)})),t},Qe=xt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),tn=xt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),en={for:"htmlFor",class:"className",readonly:"readOnly"},nn={float:"cssFloat"},rn={},on={},DomQueryConstructor=function(t,e){return new un.fn.init(t,e)},an=/^\s*|\s*$/g,trim$2=function(t){return null==t?"":(""+t).replace(an,"")},each$4=function(t,e){var n,i,a,u;if(t)if(void 0===(n=t.length)){for(i in t)if(t.hasOwnProperty(i)&&(u=t[i],!1===e.call(u,i,u)))break}else for(a=0;a<n&&(u=t[a],!1!==e.call(u,a,u));a++);return t},grep=function(t,e){var n=[];return each$4(t,(function(t,i){e(i,t)&&n.push(i)})),n},getElementDocument=function(t){return t?9===t.nodeType?t:t.ownerDocument:Ge};DomQueryConstructor.fn=DomQueryConstructor.prototype={constructor:DomQueryConstructor,selector:"",context:null,length:0,init:function(t,e){var i,a;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if(e&&e.nodeType)this.context=e;else{if(e)return un(t).attr(e);this.context=e=n.document}if(isString$1(t)){if(this.selector=t,!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:Ye.exec(t)))return un(e).find(t);if(i[1])for(a=createFragment(t,getElementDocument(e)).firstChild;a;)Xe.call(this,a),a=a.nextSibling;else{if(!(a=getElementDocument(e).getElementById(i[2])))return this;if(a.id!==i[2])return this.find(t);this.length=1,this[0]=a}}else this.add(t,!1);return this},toArray:function(){return xt.toArray(this)},add:function(t,e){var n,i;if(isString$1(t))return this.add(un(t));if(!1!==e)for(n=un.unique(this.toArray().concat(un.makeArray(t))),this.length=n.length,i=0;i<n.length;i++)this[i]=n[i];else Xe.apply(this,un.makeArray(t));return this},attr:function(t,e){var n,i=this;if("object"==typeof t)each$4(t,(function(t,e){i.attr(t,e)}));else{if(!isDefined(e)){if(i[0]&&1===i[0].nodeType){if((n=rn[t])&&n.get)return n.get(i[0],t);if(tn[t])return i.prop(t)?t:void 0;null===(e=i[0].getAttribute(t,2))&&(e=void 0)}return e}this.each((function(){var n;if(1===this.nodeType){if((n=rn[t])&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}}))}return i},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=en[t]||t))each$4(t,(function(t,e){n.prop(t,e)}));else{if(!isDefined(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each((function(){1===this.nodeType&&(this[t]=e)}))}return n},css:function(t,e){var n,i,a=this,camel=function(t){return t.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()}))},dashed=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t}))};if("object"==typeof t)each$4(t,(function(t,e){a.css(t,e)}));else if(isDefined(e))t=camel(t),"number"!=typeof e||Qe[t]||(e=e.toString()+"px"),a.each((function(){var n=this.style;if((i=on[t])&&i.set)i.set(this,e);else{try{this.style[nn[t]||t]=e}catch(t){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(dashed(t)):n.removeAttribute(t))}}));else{if(n=a[0],(i=on[t])&&i.get)return i.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[camel(t)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(dashed(t))}catch(t){return}}return a},remove:function(){for(var t,e=this.length;e--;)t=this[e],Je.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this.length;e--;)for(t=this[e];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e;if(isDefined(t)){e=this.length;try{for(;e--;)this[e].innerHTML=t}catch(n){un(this[e]).empty().append(t)}return this}return this[0]?this[0].innerHTML:""},text:function(t){var e;if(isDefined(t)){for(e=this.length;e--;)"innerText"in this[e]?this[e].innerText=t:this[0].textContent=t;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return domManipulate(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)}))},prepend:function(){return domManipulate(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)}),!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?domManipulate(t,arguments,(function(t){this.parentNode.insertBefore(t,this)})):t},after:function(){var t=this;return t[0]&&t[0].parentNode?domManipulate(t,arguments,(function(t){this.parentNode.insertBefore(t,this.nextSibling)}),!0):t},appendTo:function(t){return un(t).append(this),this},prependTo:function(t){return un(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return wrap$1(this,t)},wrapAll:function(t){return wrap$1(this,t,!0)},wrapInner:function(t){return this.each((function(){un(this).contents().wrapAll(t)})),this},unwrap:function(){return this.parent().each((function(){un(this).replaceWith(this.childNodes)}))},clone:function(){var t=[];return this.each((function(){t.push(this.cloneNode(!0))})),un(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!=typeof t||(-1!==t.indexOf(" ")?each$4(t.split(" "),(function(){n.toggleClass(this,e)})):n.each((function(n,i){var a,u;(u=hasClass(i,t))!==e&&(a=i.className,u?i.className=trim$2((" "+a+" ").replace(" "+t+" "," ")):i.className+=a?" "+t:t)}))),n},hasClass:function(t){return hasClass(this[0],t)},each:function(t){return each$4(this,t)},on:function(t,e){return this.each((function(){Je.bind(this,t,e)}))},off:function(t,e){return this.each((function(){Je.unbind(this,t,e)}))},trigger:function(t){return this.each((function(){"object"==typeof t?Je.fire(this,t.type,t):Je.fire(this,t)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new un(Ke.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,i=[];for(e=0,n=this.length;e<n;e++)un.find(t,this[e],i);return un(i)},filter:function(t){return un("function"==typeof t?grep(this.toArray(),(function(e,n){return t(n,e)})):un.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof un&&(t=t[0]),this.each((function(n,i){for(;i;){if("string"==typeof t&&un(i).is(t)){e.push(i);break}if(i===t){e.push(i);break}i=i.parentNode}})),un(e)},offset:function(t){var e,n,i,a,u=0,c=0;return t?this.css(t):((e=this[0])&&(i=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(u=(a=e.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,c=a.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:u,top:c})},push:Xe,sort:Array.prototype.sort,splice:Array.prototype.splice},xt.extend(DomQueryConstructor,{extend:xt.extend,makeArray:function(t){return(e=t)&&e===e.window||t.nodeType?[t]:xt.toArray(t);var e},inArray:function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},isArray:xt.isArray,each:each$4,trim:trim$2,grep:grep,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(t,e,n){var i=e.length;for(n&&(t=":not("+t+")");i--;)1!==e[i].nodeType&&e.splice(i,1);return e=1===e.length?un.find.matchesSelector(e[0],t)?[e[0]]:[]:un.find.matches(t,e)}});var dir=function(t,e,n){var i=[],a=t[e];for("string"!=typeof n&&n instanceof un&&(n=n[0]);a&&9!==a.nodeType;){if(void 0!==n){if(a===n)break;if("string"==typeof n&&un(a).is(n))break}1===a.nodeType&&i.push(a),a=a[e]}return i},sibling=function(t,e,n,i){var a=[];for(i instanceof un&&(i=i[0]);t;t=t[e])if(!n||t.nodeType===n){if(void 0!==i){if(t===i)break;if("string"==typeof i&&un(t).is(i))break}a.push(t)}return a},firstSibling=function(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType===n)return t;return null};each$4({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return dir(t,"parentNode")},next:function(t){return firstSibling(t,"nextSibling",1)},prev:function(t){return firstSibling(t,"previousSibling",1)},children:function(t){return sibling(t.firstChild,"nextSibling",1)},contents:function(t){return xt.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},(function(t,e){DomQueryConstructor.fn[t]=function(n){var i=[];this.each((function(){var t=e.call(i,this,n,i);t&&(un.isArray(t)?i.push.apply(i,t):i.push(t))})),this.length>1&&(Ze[t]||(i=un.unique(i)),0===t.indexOf("parents")&&(i=i.reverse()));var a=un(i);return n?a.filter(n):a}})),each$4({parentsUntil:function(t,e){return dir(t,"parentNode",e)},nextUntil:function(t,e){return sibling(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return sibling(t,"previousSibling",1,e).slice(1)}},(function(t,e){DomQueryConstructor.fn[t]=function(n,i){var a=[];this.each((function(){var t=e.call(a,this,n,a);t&&(un.isArray(t)?a.push.apply(a,t):a.push(t))})),this.length>1&&(a=un.unique(a),0!==t.indexOf("parents")&&"prevUntil"!==t||(a=a.reverse()));var u=un(a);return i?u.filter(i):u}})),DomQueryConstructor.fn.is=function(t){return!!t&&this.filter(t).length>0},DomQueryConstructor.fn.init.prototype=DomQueryConstructor.fn,DomQueryConstructor.overrideDefaults=function(t){var e,sub=function(n,i){return e=e||t(),0===arguments.length&&(n=e.element),i||(i=e.context),new sub.fn.init(n,i)};return un.extend(sub,this),sub},DomQueryConstructor.attrHooks=rn,DomQueryConstructor.cssHooks=on;var un=DomQueryConstructor,cn=function(){function TreeWalker(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return TreeWalker.prototype.current=function(){return this.node},TreeWalker.prototype.next=function(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node},TreeWalker.prototype.prev=function(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node},TreeWalker.prototype.prev2=function(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node},TreeWalker.prototype.findSibling=function(t,e,n,i){var a,u;if(t){if(!i&&t[e])return t[e];if(t!==this.rootNode){if(a=t[n])return a;for(u=t.parentNode;u&&u!==this.rootNode;u=u.parentNode)if(a=u[n])return a}}},TreeWalker.prototype.findPreviousNode=function(t,e,n,i){var a,u,c;if(t){if(a=t[n],this.rootNode&&a===this.rootNode)return;if(a){if(!i)for(c=a[e];c;c=c[e])if(!c[e])return c;return a}if((u=t.parentNode)&&u!==this.rootNode)return u}},TreeWalker}(),sn=xt.each,ln=xt.grep,fn=pt.ie,dn=/^([a-z0-9],?)+$/i,mn=/^[ \t\r\n]*$/,updateInternalStyleAttr=function(t,e){var n=e.attr("style"),i=t.serialize(t.parse(n),e[0].nodeName);i||(i=null),e.attr("data-mce-style",i)},findNodeIndex=function(t,e){var n,i,a=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)i=t.nodeType,(!e||3!==i||i!==n&&t.nodeValue.length)&&(a++,n=i);return a};function DOMUtils(t,e){var i,a=this;void 0===e&&(e={});var u={},c=n.window,l={},f=0,d=StyleSheetLoader(t,{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),m=[],g=e.schema?e.schema:Schema({}),h=Styles({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),p=e.ownEvents?new ge:ge.Event,v=g.getBlockElements(),b=un.overrideDefaults((function(){return{context:t,element:x.getRoot()}})),get=function(e){if(e&&t&&"string"==typeof e){var n=t.getElementById(e);return n&&n.id!==e?t.getElementsByName(e)[1]:n}return e},$$=function(t){return"string"==typeof t&&(t=get(t)),b(t)},getAttrib=function(t,e,n){var a,u,c=$$(t);return c.length&&(u=(a=i[e])&&a.get?a.get(c,e):c.attr(e)),void 0===u&&(u=n||""),u},getAttribs=function(t){var e=get(t);return e?e.attributes:[]},setAttrib=function(t,n,a){var u,c;""===a&&(a=null);var s=$$(t);u=s.attr(n),s.length&&((c=i[n])&&c.set?c.set(s,a,n):s.attr(n,a),u!==a&&e.onSetAttrib&&e.onSetAttrib({attrElm:s,attrName:n,attrValue:a}))},getRoot=function(){return e.root_element||t.body},getPos=function(e,n){return Position$1_getPos(t.body,get(e),n)},getStyle=function(t,e,n){var i=$$(t);return n?i.css(e):("float"===(e=e.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()})))&&(e=pt.browser.isIE()?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[e]:void 0)},getSize=function(t){var e,n;return t=get(t),e=getStyle(t,"width"),n=getStyle(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},is=function(t,e){var n;if(!t)return!1;if(!Array.isArray(t)){if("*"===e)return 1===t.nodeType;if(dn.test(e)){var i=e.toLowerCase().split(/,/),a=t.nodeName.toLowerCase();for(n=i.length-1;n>=0;n--)if(i[n]===a)return!0;return!1}if(t.nodeType&&1!==t.nodeType)return!1}var u=Array.isArray(t)?t:[t];return Sizzle(e,u[0].ownerDocument||u[0],null,u).length>0},getParents=function(t,e,n,i){var a,u=[],c=get(t);for(i=void 0===i,n=n||("BODY"!==getRoot().nodeName?getRoot().parentNode:null),xt.is(e,"string")&&(a=e,e="*"===e?function(t){return 1===t.nodeType}:function(t){return is(t,a)});c&&c!==n&&c.nodeType&&9!==c.nodeType;){if(!e||"function"==typeof e&&e(c)){if(!i)return[c];u.push(c)}c=c.parentNode}return i?u:null},_findSib=function(t,e,n){var i=e;if(t)for("string"==typeof e&&(i=function(t){return is(t,e)}),t=t[n];t;t=t[n])if("function"==typeof i&&i(t))return t;return null},run=function(t,e,n){var i,u="string"==typeof t?get(t):t;if(!u)return!1;if(xt.isArray(u)&&(u.length||0===u.length))return i=[],sn(u,(function(t,a){t&&("string"==typeof t&&(t=get(t)),i.push(e.call(n,t,a)))})),i;var c=n||a;return e.call(c,u)},setAttribs=function(t,e){$$(t).each((function(t,n){sn(e,(function(t,e){setAttrib(n,e,t)}))}))},setHTML=function(t,e){var n=$$(t);fn?n.each((function(t,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+e,n.removeChild(n.firstChild)}catch(t){un("<div></div>").html("<br>"+e).contents().slice(1).appendTo(n)}return e}})):n.html(e)},add=function(e,n,i,a,u){return run(e,(function(e){var c="string"==typeof n?t.createElement(n):n;return setAttribs(c,i),a&&("string"!=typeof a&&a.nodeType?c.appendChild(a):"string"==typeof a&&setHTML(c,a)),u?c:e.appendChild(c)}))},create=function(e,n,i){return add(t.createElement(e),e,n,i,!0)},y=Ft.encodeAllRaw,remove=function(t,e){var n=$$(t);return e?n.each((function(){for(var t;t=this.firstChild;)3===t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)})).remove():n.remove(),n.length>1?n.toArray():n[0]},toggleClass=function(t,e,n){$$(t).toggleClass(e,n).each((function(){""===this.className&&un(this).attr("class",null)}))},replace=function(t,e,n){return run(e,(function(e){return xt.is(e,"array")&&(t=t.cloneNode(!0)),n&&sn(ln(e.childNodes),(function(e){t.appendChild(e)})),e.parentNode.replaceChild(t,e)}))},createRng=function(){return t.createRange()},bind=function(n,i,a,u){if(xt.isArray(n)){for(var s=n.length,l=[];s--;)l[s]=bind(n[s],i,a,u);return l}return!e.collect||n!==t&&n!==c||m.push([n,i,a,u]),p.bind(n,i,a,u||x)},unbind=function(e,n,i){var a;if(xt.isArray(e)){a=e.length;for(var u=[];a--;)u[a]=unbind(e[a],n,i);return u}if(m&&(e===t||e===c))for(a=m.length;a--;){var s=m[a];e!==s[0]||n&&n!==s[1]||i&&i!==s[2]||p.unbind(s[0],s[1],s[2])}return p.unbind(e,n,i)},getContentEditable=function(t){if(t&&Z.isElement(t)){var e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},x={doc:t,settings:e,win:c,files:l,stdMode:!0,boxModel:!0,styleSheetLoader:d,boundEvents:m,styles:h,schema:g,events:p,isBlock:function(t){if("string"==typeof t)return!!v[t];if(t){var e=t.nodeType;if(e)return!(1!==e||!v[t.nodeName])}return!1},$:b,$$:$$,root:null,clone:function(e,n){if(!fn||1!==e.nodeType||n)return e.cloneNode(n);if(!n){var i=t.createElement(e.nodeName);return sn(getAttribs(e),(function(t){setAttrib(i,t.nodeName,getAttrib(e,t.nodeName))})),i}return null},getRoot:getRoot,getViewPort:function(t){var e=getBounds(t);return{x:e.x(),y:e.y(),w:e.width(),h:e.height()}},getRect:function(t){var e,n;return t=get(t),e=getPos(t),n=getSize(t),{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:getSize,getParent:function(t,e,n){var i=getParents(t,e,n,!1);return i&&i.length>0?i[0]:null},getParents:getParents,get:get,getNext:function(t,e){return _findSib(t,e,"nextSibling")},getPrev:function(t,e){return _findSib(t,e,"previousSibling")},select:function(n,i){return Sizzle(n,get(i)||e.root_element||t,[])},is:is,add:add,create:create,createHTML:function(t,e,n){var i,a="";for(i in a+="<"+t,e)e.hasOwnProperty(i)&&null!==e[i]&&void 0!==e[i]&&(a+=" "+i+'="'+y(e[i])+'"');return void 0!==n?a+">"+n+"</"+t+">":a+" />"},createFragment:function(e){var n,i=t.createElement("div"),a=t.createDocumentFragment();for(e&&(i.innerHTML=e);n=i.firstChild;)a.appendChild(n);return a},remove:remove,setStyle:function(t,n,i){var a=s(n)?$$(t).css(n,i):$$(t).css(n);e.update_styles&&updateInternalStyleAttr(h,a)},getStyle:getStyle,setStyles:function(t,n){var i=$$(t).css(n);e.update_styles&&updateInternalStyleAttr(h,i)},removeAllAttribs:function(t){return run(t,(function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))}))},setAttrib:setAttrib,setAttribs:setAttribs,getAttrib:getAttrib,getPos:getPos,parseStyle:function(t){return h.parse(t)},serializeStyle:function(t,e){return h.serialize(t,e)},addStyle:function(e){var i,a;if(x!==DOMUtils.DOM&&t===n.document){if(u[e])return;u[e]=!0}(a=t.getElementById("mceDefaultStyles"))||((a=t.createElement("style")).id="mceDefaultStyles",a.type="text/css",(i=t.getElementsByTagName("head")[0]).firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(t.createTextNode(e))},loadCSS:function(i){var a;x===DOMUtils.DOM||t!==n.document?(i||(i=""),a=t.getElementsByTagName("head")[0],sn(i.split(","),(function(t){var n;t=xt._addCacheSuffix(t),l[t]||(l[t]=!0,n=create("link",__assign(__assign({rel:"stylesheet",type:"text/css",href:t},e.contentCssCors?{crossOrigin:"anonymous"}:{}),e.referrerPolicy?{referrerPolicy:e.referrerPolicy}:{})),a.appendChild(n))}))):DOMUtils.DOM.loadCSS(i)},addClass:function(t,e){$$(t).addClass(e)},removeClass:function(t,e){toggleClass(t,e,!1)},hasClass:function(t,e){return $$(t).hasClass(e)},toggleClass:toggleClass,show:function(t){$$(t).show()},hide:function(t){$$(t).hide()},isHidden:function(t){return"none"===$$(t).css("display")},uniqueId:function(t){return(t||"mce_")+f++},setHTML:setHTML,getOuterHTML:function(t){var e="string"==typeof t?get(t):t;return Z.isElement(e)?e.outerHTML:un("<div></div>").append(un(e).clone()).html()},setOuterHTML:function(t,e){$$(t).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}remove(un(this).html(e),!0)}))},decode:Ft.decode,encode:y,insertAfter:function(t,e){var n=get(e);return run(t,(function(t){var e,i;return e=n.parentNode,(i=n.nextSibling)?e.insertBefore(t,i):e.appendChild(t),t}))},replace:replace,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=create(e),sn(getAttribs(t),(function(e){setAttrib(n,e.nodeName,getAttrib(t,e.nodeName))})),replace(n,t,!0)),n||t},findCommonAncestor:function(t,e){for(var n,i=t;i;){for(n=e;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&t.ownerDocument?t.ownerDocument.documentElement:i},toHex:function(t){return h.toHex(xt.trim(t))},run:run,getAttribs:getAttribs,isEmpty:function(t,e){var n,i,a,u,c=0;if(t=t.firstChild){var s=new cn(t,t.parentNode),l=g?g.getWhiteSpaceElements():{};e=e||(g?g.getNonEmptyElements():null);do{if(a=t.nodeType,Z.isElement(t)){var f=t.getAttribute("data-mce-bogus");if(f){t=s.next("all"===f);continue}if(u=t.nodeName.toLowerCase(),e&&e[u]){if("br"===u){c++,t=s.next();continue}return!1}for(n=(i=getAttribs(t)).length;n--;)if("name"===(u=i[n].nodeName)||"data-mce-bookmark"===u)return!1}if(8===a)return!1;if(3===a&&!mn.test(t.nodeValue))return!1;if(3===a&&t.parentNode&&l[t.parentNode.nodeName]&&mn.test(t.nodeValue))return!1;t=s.next()}while(t)}return c<=1},createRng:createRng,nodeIndex:findNodeIndex,split:function(t,e,n){var i,a,u,c=createRng();if(t&&e)return c.setStart(t.parentNode,findNodeIndex(t)),c.setEnd(e.parentNode,findNodeIndex(e)),i=c.extractContents(),(c=createRng()).setStart(e.parentNode,findNodeIndex(e)+1),c.setEnd(t.parentNode,findNodeIndex(t)+1),a=c.extractContents(),(u=t.parentNode).insertBefore(Mt.trimNode(x,i),t),n?u.insertBefore(n,t):u.insertBefore(e,t),u.insertBefore(Mt.trimNode(x,a),t),remove(t),n||e},bind:bind,unbind:unbind,fire:function(t,e,n){return p.fire(t,e,n)},getContentEditable:getContentEditable,getContentEditableParent:function(t){for(var e=getRoot(),n=null;t&&t!==e&&null===(n=getContentEditable(t));t=t.parentNode);return n},destroy:function(){if(m)for(var t=m.length;t--;){var e=m[t];p.unbind(e[0],e[1],e[2])}Sizzle.setDocument&&Sizzle.setDocument()},isChildOf:function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset}};return i=function(t,e,n){var i=e.keep_values,a={set:function(t,i,a){e.url_converter&&(i=e.url_converter.call(e.url_converter_scope||n(),i,a,t[0])),t.attr("data-mce-"+a,i).attr(a,i)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},u={style:{set:function(e,n){null===n||"object"!=typeof n?(i&&e.attr("data-mce-style",n),null!==n&&"string"==typeof n?(e.removeAttr("style"),e.css(t.parse(n))):e.attr("style",n)):e.css(n)},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return n=t.serialize(t.parse(n),e[0].nodeName)}}};return i&&(u.href=u.src=a),u}(h,e,(function(){return x})),x}!function(t){t.DOM=t(n.document),t.nodeIndex=findNodeIndex}(DOMUtils||(DOMUtils={}));var gn=DOMUtils,hn=gn.DOM,pn=xt.each,vn=xt.grep,bn=function(){function ScriptLoader(t){void 0===t&&(t={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=t}return ScriptLoader.prototype._setReferrerPolicy=function(t){this.settings.referrerPolicy=t},ScriptLoader.prototype.loadScript=function(t,e,i){var a,u,c=hn;u=c.uniqueId(),(a=n.document.createElement("script")).id=u,a.type="text/javascript",a.src=xt._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=function(){c.remove(u),a&&(a.onreadystatechange=a.onload=a=null),e()},a.onerror=function(){g(i)?i():void 0!==n.console&&n.console.log&&n.console.log("Failed to load script: "+t)},(n.document.getElementsByTagName("head")[0]||n.document.body).appendChild(a)},ScriptLoader.prototype.isDone=function(t){return 2===this.states[t]},ScriptLoader.prototype.markDone=function(t){this.states[t]=2},ScriptLoader.prototype.add=function(t,e,n,i){void 0===this.states[t]&&(this.queue.push(t),this.states[t]=0),e&&(this.scriptLoadedCallbacks[t]||(this.scriptLoadedCallbacks[t]=[]),this.scriptLoadedCallbacks[t].push({success:e,failure:i,scope:n||this}))},ScriptLoader.prototype.load=function(t,e,n,i){return this.add(t,e,n,i)},ScriptLoader.prototype.remove=function(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]},ScriptLoader.prototype.loadQueue=function(t,e,n){this.loadScripts(this.queue,t,e,n)},ScriptLoader.prototype.loadScripts=function(t,e,n,i){var a,u=this,c=[],execCallbacks=function(t,e){pn(u.scriptLoadedCallbacks[e],(function(e){g(e[t])&&e[t].call(e.scope)})),u.scriptLoadedCallbacks[e]=void 0};u.queueLoadedCallbacks.push({success:e,failure:i,scope:n||this}),(a=function(){var e=vn(t);if(t.length=0,pn(e,(function(t){2!==u.states[t]?3!==u.states[t]?1!==u.states[t]&&(u.states[t]=1,u.loading++,u.loadScript(t,(function(){u.states[t]=2,u.loading--,execCallbacks("success",t),a()}),(function(){u.states[t]=3,u.loading--,c.push(t),execCallbacks("failure",t),a()}))):execCallbacks("failure",t):execCallbacks("success",t)})),!u.loading){var n=u.queueLoadedCallbacks.slice(0);u.queueLoadedCallbacks.length=0,pn(n,(function(t){0===c.length?g(t.success)&&t.success.call(t.scope):g(t.failure)&&t.failure.call(t.scope,c)}))}})()},ScriptLoader.ScriptLoader=new ScriptLoader,ScriptLoader}(),yn={},xn=Cell("en"),getLanguageData=function(){return get(yn,xn.get())},wn={getData:function(){return map$1(yn,(function(t){return __assign({},t)}))},setCode:function(t){t&&xn.set(t)},getCode:function(){return xn.get()},add:function(t,e){var n=yn[t];n||(yn[t]=n={}),each$1(e,(function(t,e){n[e.toLowerCase()]=t}))},translate:function(t){var e,n=getLanguageData().getOr({}),toString=function(t){return g(t)?Object.prototype.toString.call(t):isEmpty(t)?"":""+t},isEmpty=function(t){return""===t||null==t},getLangData=function(t){var e=toString(t);return get(n,e.toLowerCase()).map(toString).getOr(e)},removeContext=function(t){return t.replace(/{context:\w+}$/,"")};if(isEmpty(t))return"";if(l(e=t)&&has(e,"raw"))return toString(t.raw);if(function(t){return f(t)&&t.length>1}(t)){var i=t.slice(1);return removeContext(getLangData(t[0]).replace(/\{([0-9]+)\}/g,(function(t,e){return has(i,e)?toString(i[e]):t})))}return removeContext(getLangData(t))},isRtl:function(){return getLanguageData().bind((function(t){return get(t,"_dir")})).exists((function(t){return"rtl"===t}))},hasCode:function(t){return has(yn,t)}};function AddOnManager(){var t=this,e=[],n={},i={},a=[],runListeners=function(t,e){var n=filter(a,(function(n){return n.name===t&&n.state===e}));each(n,(function(t){return t.callback()}))},dependencies=function(t){var e;return i[t]&&(e=i[t].dependencies),e||[]},createUrl=function(t,e){return"object"==typeof e?e:"string"==typeof t?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}},load=function(t,e,a,u,c){if(!n[t]){var s="string"==typeof e?e:e.prefix+e.resource+e.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=AddOnManager.baseURL+"/"+s),n[t]=s.substring(0,s.lastIndexOf("/"));var done=function(){runListeners(t,"loaded"),function(t,e,n,i){var a=dependencies(t);each(a,(function(t){var n=createUrl(e,t);load(n.resource,n,void 0,void 0)})),n&&(i?n.call(i):n.call(bn))}(t,e,a,u)};i[t]?done():bn.ScriptLoader.add(s,done,u,c)}},waitFor=function(t,e,u){void 0===u&&(u="added"),has(i,t)&&"added"===u||has(n,t)&&"loaded"===u?e():a.push({name:t,state:u,callback:e})};return{items:e,urls:n,lookup:i,_listeners:a,get:function(t){if(i[t])return i[t].instance},dependencies:dependencies,requireLangPack:function(t,e){!1!==AddOnManager.languageLoad&&waitFor(t,(function(){var i=wn.getCode();!i||e&&-1===(","+(e||"")+",").indexOf(","+i+",")||bn.ScriptLoader.add(n[t]+"/langs/"+i+".js")}),"loaded")},add:function(t,n,a){var u=n;return e.push(u),i[t]={instance:u,dependencies:a},runListeners(t,"added"),u},remove:function(t){delete n[t],delete i[t]},createUrl:createUrl,addComponents:function(e,n){var i=t.urls[e];each(n,(function(t){bn.ScriptLoader.add(i+"/"+t)}))},load:load,waitFor:waitFor}}!function(t){t.PluginManager=t(),t.ThemeManager=t()}(AddOnManager||(AddOnManager={}));var Cn=AddOnManager,first=function(t,e){var i=null;return{cancel:function(){null!==i&&(n.clearTimeout(i),i=null)},throttle:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];null===i&&(i=n.setTimeout((function(){t.apply(null,a),i=null}),e))}}},last$2=function(t,e){var i=null;return{cancel:function(){null!==i&&(n.clearTimeout(i),i=null)},throttle:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];null!==i&&n.clearTimeout(i),i=n.setTimeout((function(){t.apply(null,a),i=null}),e)}}},read=function(t,e){var n=get$3(t,e);return void 0===n||""===n?[]:n.split(" ")},supports=function(t){return void 0!==t.dom().classList},add$2=function(t,e){return function(t,e,n){var i=read(t,e).concat([n]);return set(t,e,i.join(" ")),!0}(t,"class",e)},remove$3=function(t,e){return function(t,e,n){var i=filter(read(t,e),(function(t){return t!==n}));return i.length>0?set(t,e,i.join(" ")):remove$1(t,e),!1}(t,"class",e)},add$3=function(t,e){supports(t)?t.dom().classList.add(e):add$2(t,e)},cleanClass=function(t){0===(supports(t)?t.dom().classList:function(t){return read(t,"class")}(t)).length&&remove$1(t,"class")},has$2=function(t,e){return supports(t)&&t.dom().classList.contains(e)},descendants=function(t,e){var n=[];return each(children(t),(function(t){e(t)&&(n=n.concat([t])),n=n.concat(descendants(t,e))})),n},descendants$1=function(t,e){return function(t,e){var i=void 0===e?n.document:e.dom();return bypassSelector(i)?[]:map(i.querySelectorAll(t),C.fromDom)}(e,t)};function ClosestOrAncestor(t,e,n,i,a){return t(n,i)?c.some(n):g(a)&&a(n)?c.none():e(n,i,a)}var ancestor=function(t,e,n){for(var i=t.dom(),a=g(n)?n:constant(!1);i.parentNode;){i=i.parentNode;var u=C.fromDom(i);if(e(u))return c.some(u);if(a(u))break}return c.none()},closest=function(t,e,n){return ClosestOrAncestor((function(t,e){return e(t)}),ancestor,t,e,n)},ancestor$1=function(t,e,n){return ancestor(t,(function(t){return is(t,e)}),n)},descendant=function(t,e){return function(t,e){var i=void 0===e?n.document:e.dom();return bypassSelector(i)?c.none():c.from(i.querySelector(t)).map(C.fromDom)}(e,t)},closest$1=function(t,e,n){return ClosestOrAncestor(is,ancestor$1,t,e,n)},Sn=constant("mce-annotation"),kn=constant("data-mce-annotation"),En=constant("data-mce-annotation-uid"),identify=function(t,e){var n=t.selection.getRng(),i=C.fromDom(n.startContainer),a=C.fromDom(t.getBody()),u=e.fold((function(){return"."+Sn()}),(function(t){return"["+kn()+'="'+t+'"]'})),s=child(i,n.startOffset).getOr(i),l=closest$1(s,u,(function(t){return eq(t,a)})),getAttr=function(t,e){return function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)}(t,e)?c.some(get$3(t,e)):c.none()};return l.bind((function(e){return getAttr(e,""+En()).bind((function(n){return getAttr(e,""+kn()).map((function(e){var i=findMarkers(t,n);return{uid:n,name:e,elements:i}}))}))}))},findMarkers=function(t,e){var n=C.fromDom(t.getBody());return descendants$1(n,"["+En()+'="'+e+'"]')},setup=function(t,e){var n=Cell({}),withCallbacks=function(t,e){updateCallbacks(t,(function(t){return e(t),t}))},updateCallbacks=function(t,e){var i=n.get(),a=e(i.hasOwnProperty(t)?i[t]:{listeners:[],previous:Cell(c.none())});i[t]=a,n.set(i)},i=last$2((function(){var e,i,a,u=n.get(),s=(e=x(u),(a=p.call(e,0)).sort(i),a);each(s,(function(e){updateCallbacks(e,(function(n){var i=n.previous.get();return identify(t,c.some(e)).fold((function(){i.isSome()&&(!function(t){withCallbacks(t,(function(e){each(e.listeners,(function(e){return e(!1,t)}))}))}(e),n.previous.set(c.none()))}),(function(t){var e=t.uid,a=t.name,u=t.elements;i.is(e)||(!function(t,e,n){withCallbacks(t,(function(i){each(i.listeners,(function(i){return i(!0,t,{uid:e,nodes:map(n,(function(t){return t.dom()}))})}))}))}(a,e,u),n.previous.set(c.some(e)))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);t.on("remove",(function(){i.cancel()})),t.on("NodeChange",(function(){i.throttle()}));return{addListener:function(t,e){updateCallbacks(t,(function(t){return{previous:t.previous,listeners:t.listeners.concat([e])}}))}}},setup$1=function(t,e){t.on("init",(function(){t.serializer.addNodeFilter("span",(function(t){each(t,(function(t){(function(t){return c.from(t.attr(kn())).bind(e.lookup)})(t).each((function(e){!1===e.persistent&&t.unwrap()}))}))}))}))},Tn=0,set$1=function(t,e){var i,a,u=owner(t).dom(),c=C.fromDom(u.createDocumentFragment()),s=(i=e,(a=(u||n.document).createElement("div")).innerHTML=i,children(C.fromDom(a)));append$1(c,s),empty(t),append(t,c)},clone=function(t,e){return C.fromDom(t.dom().cloneNode(e))},shallow=function(t){return clone(t,!1)},deep=function(t){return clone(t,!0)},On={isZwsp:function(t){return"\ufeff"===t},ZWSP:"\ufeff",trim:function(t){return t.replace(new RegExp("\ufeff","g"),"")}},_n=Z.isElement,Nn=Z.isText,isCaretContainerBlock=function(t){return Nn(t)&&(t=t.parentNode),_n(t)&&t.hasAttribute("data-mce-caret")},isCaretContainerInline=function(t){return Nn(t)&&On.isZwsp(t.data)},isCaretContainer=function(t){return isCaretContainerBlock(t)||isCaretContainerInline(t)},hasContent=function(t){return t.firstChild!==t.lastChild||!Z.isBr(t.firstChild)},isBeforeInline=function(t){var e=t.container();return!(!t||!Z.isText(e))&&(e.data.charAt(t.offset())===On.ZWSP||t.isAtStart()&&isCaretContainerInline(e.previousSibling))},isAfterInline=function(t){var e=t.container();return!(!t||!Z.isText(e))&&(e.data.charAt(t.offset()-1)===On.ZWSP||t.isAtEnd()&&isCaretContainerInline(e.nextSibling))},insertBlock=function(t,e,i){var a,u,c;return(a=e.ownerDocument.createElement(t)).setAttribute("data-mce-caret",i?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(((c=n.document.createElement("br")).setAttribute("data-mce-bogus","1"),c)),u=e.parentNode,i?u.insertBefore(a,e):e.nextSibling?u.insertBefore(a,e.nextSibling):u.appendChild(a),a},startsWithCaretContainer=function(t){return Nn(t)&&t.data[0]===On.ZWSP},endsWithCaretContainer=function(t){return Nn(t)&&t.data[t.data.length-1]===On.ZWSP},showCaretContainerBlock=function(t){return t&&t.hasAttribute("data-mce-caret")?(e=t.getElementsByTagName("br"),n=e[e.length-1],Z.isBogus(n)&&n.parentNode.removeChild(n),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null;var e,n},An=Z.isContentEditableTrue,zn=Z.isContentEditableFalse,Dn=Z.isBr,Mn=Z.isText,Bn=Z.matchNodeNames(["script","style","textarea"]),Rn=Z.matchNodeNames(["img","input","textarea","hr","iframe","video","audio","object"]),Pn=Z.matchNodeNames(["table"]),In=isCaretContainer,isCaretCandidate=function(t){return!In(t)&&(Mn(t)?!Bn(t.parentNode):Rn(t)||Dn(t)||Pn(t)||isNonUiContentEditableFalse(t))},isNonUiContentEditableFalse=function(t){return!1===function(t){return Z.isElement(t)&&"true"===t.getAttribute("unselectable")}(t)&&zn(t)},isEditableCaretCandidate=function(t,e){return isCaretCandidate(t)&&function(t,e){for(t=t.parentNode;t&&t!==e;t=t.parentNode){if(isNonUiContentEditableFalse(t))return!1;if(An(t))return!0}return!0}(t,e)},Hn=Math.round,clone$1=function(t){return t?{left:Hn(t.left),top:Hn(t.top),bottom:Hn(t.bottom),right:Hn(t.right),width:Hn(t.width),height:Hn(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},collapse=function(t,e){return t=clone$1(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t},isValidOverflow=function(t,e,n){return t>=0&&t<=Math.min(e.height,n.height)/2},isAbove=function(t,e){return t.bottom-t.height/2<e.top||!(t.top>e.bottom)&&isValidOverflow(e.top-t.bottom,t,e)},isBelow=function(t,e){return t.top>e.bottom||!(t.bottom<e.top)&&isValidOverflow(e.bottom-t.top,t,e)},containsXY=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},getSelectedNode=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},getNode=function(t,e){return 1===t.nodeType&&t.hasChildNodes()&&(e>=t.childNodes.length&&(e=t.childNodes.length-1),t=t.childNodes[e]),t},Ln=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),isExtendingChar=function(t){return"string"==typeof t&&t.charCodeAt(0)>=768&&Ln.test(t)},lift2=function(t,e,n){return t.isSome()&&e.isSome()?c.some(n(t.getOrDie(),e.getOrDie())):c.none()},Fn=[].slice,Predicate_and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Fn.call(arguments);return function(t){for(var e=0;e<n.length;e++)if(!n[e](t))return!1;return!0}},Predicate_or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Fn.call(arguments);return function(t){for(var e=0;e<n.length;e++)if(n[e](t))return!0;return!1}},Vn=Z.isElement,Un=isCaretCandidate,jn=Z.matchStyleValues("display","block table"),Wn=Z.matchStyleValues("float","left right"),qn=Predicate_and(Vn,Un,not(Wn)),$n=not(Z.matchStyleValues("white-space","pre pre-line pre-wrap")),Gn=Z.isText,Xn=Z.isBr,Kn=gn.nodeIndex,Yn=getNode,createRange=function(t){return"createRange"in t?t.createRange():gn.DOM.createRng()},isWhiteSpace=function(t){return t&&/[\r\n\t ]/.test(t)},isRange=function(t){return!!t.setStart&&!!t.setEnd},isHiddenWhiteSpaceRange=function(t){var e,n=t.startContainer,i=t.startOffset;return!!(isWhiteSpace(t.toString())&&$n(n.parentNode)&&Z.isText(n)&&(e=n.data,isWhiteSpace(e[i-1])||isWhiteSpace(e[i+1])))},isZeroRect=function(t){return 0===t.left&&0===t.right&&0===t.top&&0===t.bottom},getBoundingClientRect=function(t){var e,n;return e=(n=t.getClientRects()).length>0?clone$1(n[0]):clone$1(t.getBoundingClientRect()),!isRange(t)&&Xn(t)&&isZeroRect(e)?function(t){var e,n=t.ownerDocument,i=createRange(n),a=n.createTextNode(" "),u=t.parentNode;return u.insertBefore(a,t),i.setStart(a,0),i.setEnd(a,1),e=clone$1(i.getBoundingClientRect()),u.removeChild(a),e}(t):isZeroRect(e)&&isRange(t)?function(t){var e=t.startContainer,n=t.endContainer,i=t.startOffset,a=t.endOffset;if(e===n&&Z.isText(n)&&0===i&&1===a){var u=t.cloneRange();return u.setEndAfter(n),getBoundingClientRect(u)}return null}(t):e},collapseAndInflateWidth=function(t,e){var n=collapse(t,e);return n.width=1,n.right=n.left+1,n},getCaretPositionClientRects=function(t){var e,n,i=[],addUniqueAndValidRect=function(t){var e,n;0!==t.height&&(i.length>0&&(e=t,n=i[i.length-1],e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right)||i.push(t))},addCharacterOffset=function(t,e){var n=createRange(t.ownerDocument);if(e<t.data.length){if(isExtendingChar(t.data[e]))return i;if(isExtendingChar(t.data[e-1])&&(n.setStart(t,e),n.setEnd(t,e+1),!isHiddenWhiteSpaceRange(n)))return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!1)),i}e>0&&(n.setStart(t,e-1),n.setEnd(t,e),isHiddenWhiteSpaceRange(n)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!1))),e<t.data.length&&(n.setStart(t,e),n.setEnd(t,e+1),isHiddenWhiteSpaceRange(n)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!0)))};if(Gn(t.container()))return addCharacterOffset(t.container(),t.offset()),i;if(Vn(t.container()))if(t.isAtEnd())n=Yn(t.container(),t.offset()),Gn(n)&&addCharacterOffset(n,n.data.length),qn(n)&&!Xn(n)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!1));else{if(n=Yn(t.container(),t.offset()),Gn(n)&&addCharacterOffset(n,0),qn(n)&&t.isAtEnd())return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!1)),i;e=Yn(t.container(),t.offset()-1),qn(e)&&!Xn(e)&&(jn(e)||jn(n)||!qn(n))&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(e),!1)),qn(n)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(n),!0))}return i};function CaretPosition(t,e,n){var getClientRects=function(){return n||(n=getCaretPositionClientRects(CaretPosition(t,e))),n};return{container:constant(t),offset:constant(e),toRange:function(){var n;return(n=createRange(t.ownerDocument)).setStart(t,e),n.setEnd(t,e),n},getClientRects:getClientRects,isVisible:function(){return getClientRects().length>0},isAtStart:function(){return Gn(t),0===e},isAtEnd:function(){return Gn(t)?e>=t.data.length:e>=t.childNodes.length},isEqual:function(n){return n&&t===n.container()&&e===n.offset()},getNode:function(n){return Yn(t,n?e-1:e)}}}!function(t){t.fromRangeStart=function(e){return t(e.startContainer,e.startOffset)},t.fromRangeEnd=function(e){return t(e.endContainer,e.endOffset)},t.after=function(e){return t(e.parentNode,Kn(e)+1)},t.before=function(e){return t(e.parentNode,Kn(e))},t.isAbove=function(t,e){return lift2(head(e.getClientRects()),last(t.getClientRects()),isAbove).getOr(!1)},t.isBelow=function(t,e){return lift2(last(e.getClientRects()),head(t.getClientRects()),isBelow).getOr(!1)},t.isAtStart=function(t){return!!t&&t.isAtStart()},t.isAtEnd=function(t){return!!t&&t.isAtEnd()},t.isTextPosition=function(t){return!!t&&Z.isText(t.container())},t.isElementPosition=function(e){return!1===t.isTextPosition(e)}}(CaretPosition||(CaretPosition={}));var Jn,Zn=CaretPosition,Qn=Z.isText,tr=Z.isBogus,er=gn.nodeIndex,normalizedParent=function(t){var e=t.parentNode;return tr(e)?normalizedParent(e):e},getChildNodes=function(t){return t?bt.reduce(t.childNodes,(function(t,e){return tr(e)&&"BR"!==e.nodeName?t=t.concat(getChildNodes(e)):t.push(e),t}),[]):[]},equal=function(t){return function(e){return t===e}},createPathItem=function(t){return(Qn(t)?"text()":t.nodeName.toLowerCase())+"["+function(t){var e,n,i;return e=getChildNodes(normalizedParent(t)),n=bt.findIndex(e,equal(t),t),e=e.slice(0,n+1),i=bt.reduce(e,(function(t,n,i){return Qn(n)&&Qn(e[i-1])&&t++,t}),0),e=bt.filter(e,Z.matchNodeNames([t.nodeName])),(n=bt.findIndex(e,equal(t),t))-i}(t)+"]"},create$2=function(t,e){var n,i,a,u,c,s=[];return n=e.container(),i=e.offset(),Qn(n)?a=function(t,e){for(;(t=t.previousSibling)&&Qn(t);)e+=t.data.length;return e}(n,i):(i>=(u=n.childNodes).length?(a="after",i=u.length-1):a="before",n=u[i]),s.push(createPathItem(n)),c=function(t,e,n){var i=[];for(e=e.parentNode;e!==t&&(!n||!n(e));e=e.parentNode)i.push(e);return i}(t,n),c=bt.filter(c,not(Z.isBogus)),(s=s.concat(bt.map(c,(function(t){return createPathItem(t)})))).reverse().join("/")+","+a},resolve$1=function(t,e){var n,i,a;return e?(n=e.split(","),e=n[0].split("/"),a=n.length>1?n[1]:"before",(i=bt.reduce(e,(function(t,e){return(e=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e))?("text()"===e[1]&&(e[1]="#text"),function(t,e,n){var i=getChildNodes(t);return i=bt.filter(i,(function(t,e){return!Qn(t)||!Qn(i[e-1])})),(i=bt.filter(i,Z.matchNodeNames([e])))[n]}(t,e[1],parseInt(e[2],10))):null}),t))?Qn(i)?function(t,e){for(var n,i=t,a=0;Qn(i);){if(n=i.data.length,e>=a&&e<=a+n){t=i,e-=a;break}if(!Qn(i.nextSibling)){t=i,e=n;break}a+=n,i=i.nextSibling}return Qn(t)&&e>t.data.length&&(e=t.data.length),Zn(t,e)}(i,parseInt(a,10)):(a="after"===a?er(i)+1:er(i),Zn(i.parentNode,a)):null):null},trimEmptyTextNode=function(t,e){Z.isText(e)&&0===e.data.length&&t.remove(e)},rangeInsertNode=function(t,e,n){Z.isDocumentFragment(n)?function(t,e,n){var i=c.from(n.firstChild),a=c.from(n.lastChild);e.insertNode(n),i.each((function(e){return trimEmptyTextNode(t,e.previousSibling)})),a.each((function(e){return trimEmptyTextNode(t,e.nextSibling)}))}(t,e,n):function(t,e,n){e.insertNode(n),trimEmptyTextNode(t,n.previousSibling),trimEmptyTextNode(t,n.nextSibling)}(t,e,n)},nr=Z.isContentEditableFalse,getPoint=function(t,e,n,i,a){var u,c=i[a?"startContainer":"endContainer"],s=i[a?"startOffset":"endOffset"],l=[],f=0,d=t.getRoot();for(Z.isText(c)?l.push(n?function(t,e,n){var i,a;for(a=t(e.data.slice(0,n)).length,i=e.previousSibling;i&&Z.isText(i);i=i.previousSibling)a+=t(i.data).length;return a}(e,c,s):s):(s>=(u=c.childNodes).length&&u.length&&(f=1,s=Math.max(0,u.length-1)),l.push(t.nodeIndex(u[s],n)+f));c&&c!==d;c=c.parentNode)l.push(t.nodeIndex(c,n));return l},findIndex$2=function(t,e,n){var i=0;return xt.each(t.select(e),(function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!==n&&void i++})),i},moveEndPoint=function(t,e){var n,i,a,u=e?"start":"end";n=t[u+"Container"],i=t[u+"Offset"],Z.isElement(n)&&"TR"===n.nodeName&&(n=(a=n.childNodes)[Math.min(e?i:i-1,a.length-1)])&&(i=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,i))},normalizeTableCellSelection=function(t){return moveEndPoint(t,!0),moveEndPoint(t,!1),t},findSibling=function(t,e){var n;if(Z.isElement(t)&&(t=getNode(t,e),nr(t)))return t;if(isCaretContainer(t)){if(Z.isText(t)&&isCaretContainerBlock(t)&&(t=t.parentNode),n=t.previousSibling,nr(n))return n;if(n=t.nextSibling,nr(n))return n}},getOffsetBookmark=function(t,e,n){var i=n.getNode(),a=i?i.nodeName:null,u=n.getRng();if(nr(i)||"IMG"===a)return{name:a,index:findIndex$2(n.dom,a,i)};var c=function(t){return findSibling(t.startContainer,t.startOffset)||findSibling(t.endContainer,t.endOffset)}(u);return c?{name:a=c.tagName,index:findIndex$2(n.dom,a,c)}:function(t,e,n,i){var a=e.dom,u={};return u.start=getPoint(a,t,n,i,!0),e.isCollapsed()||(u.end=getPoint(a,t,n,i,!1)),u}(t,n,e,u)},createBookmarkSpan=function(t,e,n){var i={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",i,"&#xFEFF;"):t.create("span",i)},getPersistentBookmark=function(t,e){var n=t.dom,i=t.getRng(),a=n.uniqueId(),u=t.isCollapsed(),c=t.getNode(),s=c.nodeName;if("IMG"===s)return{name:s,index:findIndex$2(n,s,c)};var l=normalizeTableCellSelection(i.cloneRange());if(!u){l.collapse(!1);var f=createBookmarkSpan(n,a+"_end",e);rangeInsertNode(n,l,f)}(i=normalizeTableCellSelection(i)).collapse(!0);var d=createBookmarkSpan(n,a+"_start",e);return rangeInsertNode(n,i,d),t.moveToBookmark({id:a,keep:1}),{id:a}},rr={getBookmark:function(t,e,n){return 2===e?getOffsetBookmark(On.trim,n,t):3===e?function(t){var e=t.getRng();return{start:create$2(t.dom.getRoot(),Zn.fromRangeStart(e)),end:create$2(t.dom.getRoot(),Zn.fromRangeEnd(e))}}(t):e?function(t){return{rng:t.getRng()}}(t):getPersistentBookmark(t,!1)},getUndoBookmark:curry(getOffsetBookmark,identity,!0),getPersistentBookmark:getPersistentBookmark},TextWalker=function(t,e,n){void 0===n&&(n=i);var a=new cn(t,e),walk=function(t){var e;do{e=a[t]()}while(e&&!Z.isText(e)&&!n(e));return c.from(e).filter(Z.isText)};return{current:function(){return c.from(a.current()).filter(Z.isText)},next:function(){return walk("next")},prev:function(){return walk("prev")},prev2:function(){return walk("prev2")}}},TextSeeker=function(t,e){var n=e||function(e){return t.isBlock(e)||Z.isBr(e)||Z.isContentEditableFalse(e)},walk=function(t,e,n,i){if(Z.isText(t)){var a=i(t,e,t.data);if(-1!==a)return c.some({container:t,offset:a})}return n().bind((function(t){return walk(t.container,t.offset,n,i)}))};return{backwards:function(t,e,i,a){var u=TextWalker(t,a,n);return walk(t,e,(function(){return u.prev().map((function(t){return{container:t,offset:t.length}}))}),i).getOrNull()},forwards:function(t,e,i,a){var u=TextWalker(t,a,n);return walk(t,e,(function(){return u.next().map((function(t){return{container:t,offset:0}}))}),i).getOrNull()}}},isCaretNode=function(t){return Z.isElement(t)&&"_mce_caret"===t.id},getParentCaretContainer=function(t,e){for(;e&&e!==t;){if("_mce_caret"===e.id)return e;e=e.parentNode}return null},or=Z.isElement,ir=Z.isText,removeNode=function(t){var e=t.parentNode;e&&e.removeChild(t)},setNodeValue=function(t,e){0===e.length?removeNode(t):t.nodeValue=e},trimCount=function(t){var e=On.trim(t);return{count:t.length-e.length,text:e}},removeUnchanged=function(t,e){return remove$5(t),e},removeElementAndReposition=function(t,e){var n=e.container(),i=function(t,e){var n=rawIndexOf(t,e);return-1===n?c.none():c.some(n)}(y(n.childNodes),t).map((function(t){return t<e.offset()?Zn(n,e.offset()-1):e})).getOr(e);return remove$5(t),i},removeTextCaretContainer=function(t,e){return ir(t)&&e.container()===t?function(t,e){var n=trimCount(t.data.substr(0,e.offset())),i=trimCount(t.data.substr(e.offset())),a=n.text+i.text;return a.length>0?(setNodeValue(t,a),Zn(t,e.offset()-n.count)):e}(t,e):removeUnchanged(t,e)},remove$5=function(t){if(or(t)&&isCaretContainer(t)&&(hasContent(t)?t.removeAttribute("data-mce-caret"):removeNode(t)),ir(t)){var e=On.trim(function(t){try{return t.nodeValue}catch(t){return""}}(t));setNodeValue(t,e)}},ar={removeAndReposition:function(t,e){return Zn.isTextPosition(e)?removeTextCaretContainer(t,e):function(t,e){return e.container()===t.parentNode?removeElementAndReposition(t,e):removeUnchanged(t,e)}(t,e)},remove:remove$5},ur=gn.DOM,getBodySetting=function(t,e,n){var i=t.getParam(e,n);if(-1!==i.indexOf("=")){var a=t.getParam(e,"","hash");return a.hasOwnProperty(t.id)?a[t.id]:n}return i},Settings_getIframeAttrs=function(t){return t.getParam("iframe_attrs",{})},Settings_getDocType=function(t){return t.getParam("doctype","<!DOCTYPE html>")},Settings_getDocumentBaseUrl=function(t){return t.getParam("document_base_url","")},Settings_getBodyId=function(t){return getBodySetting(t,"body_id","tinymce")},Settings_getBodyClass=function(t){return getBodySetting(t,"body_class","")},Settings_getContentSecurityPolicy=function(t){return t.getParam("content_security_policy","")},Settings_shouldPutBrInPre=function(t){return t.getParam("br_in_pre",!0)},Settings_getForcedRootBlock=function(t){if(t.getParam("force_p_newlines",!1))return"p";var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Settings_getForcedRootBlockAttrs=function(t){return t.getParam("forced_root_block_attrs",{})},Settings_getBrNewLineSelector=function(t){return t.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Settings_getNoNewLineSelector=function(t){return t.getParam("no_newline_selector","")},Settings_shouldKeepStyles=function(t){return t.getParam("keep_styles",!0)},Settings_shouldEndContainerOnEmptyBlock=function(t){return t.getParam("end_container_on_empty_block",!1)},Settings_getFontStyleValues=function(t){return xt.explode(t.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},Settings_getFontSizeClasses=function(t){return xt.explode(t.getParam("font_size_classes",""))},Settings_getIconPackName=function(t){return t.getParam("icons","","string")},Settings_getIconsUrl=function(t){return t.getParam("icons_url","","string")},Settings_getImagesDataImgFilter=function(t){return t.getParam("images_dataimg_filter",constant(!0),"function")},Settings_isAutomaticUploadsEnabled=function(t){return t.getParam("automatic_uploads",!0,"boolean")},Settings_shouldReuseFileName=function(t){return t.getParam("images_reuse_filename",!1,"boolean")},Settings_shouldReplaceBlobUris=function(t){return t.getParam("images_replace_blob_uris",!0,"boolean")},Settings_getImageUploadUrl=function(t){return t.getParam("images_upload_url","","string")},Settings_getImageUploadBasePath=function(t){return t.getParam("images_upload_base_path","","string")},Settings_getImagesUploadCredentials=function(t){return t.getParam("images_upload_credentials",!1,"boolean")},Settings_getImagesUploadHandler=function(t){return t.getParam("images_upload_handler",null,"function")},Settings_shouldUseContentCssCors=function(t){return t.getParam("content_css_cors",!1,"boolean")},Settings_getReferrerPolicy=function(t){return t.getParam("referrer_policy","","string")},Settings_getLanguageCode=function(t){return t.getParam("language","en","string")},Settings_getLanguageUrl=function(t){return t.getParam("language_url","","string")},Settings_shouldIndentUseMargin=function(t){return t.getParam("indent_use_margin",!1)},Settings_getIndentation=function(t){return t.getParam("indentation","40px","string")},Settings_getContentCss=function(t){var e=t.settings.content_css;return s(e)?map(e.split(","),trim):f(e)?e:!1===e||t.inline?[]:["default"]},Settings_getDirectionality=function(t){return t.getParam("directionality",wn.isRtl()?"rtl":void 0)},Settings_getInlineBoundarySelector=function(t){return t.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Settings_getObjectResizing=function(t){return t.getParam("object_resizing")},Settings_getResizeImgProportional=function(t){return t.getParam("resize_img_proportional",!0,"boolean")},Settings_getPlaceholder=function(t){return t.getParam("placeholder",ur.getAttrib(t.getElement(),"placeholder"),"string")},cr=detect$3().browser,sr=Z.isContentEditableFalse,getAbsoluteClientRect=function(t,e,n){var i,a,u,c,s,l=collapse(e.getBoundingClientRect(),n);return"BODY"===t.tagName?(i=t.ownerDocument.documentElement,a=t.scrollLeft||i.scrollLeft,u=t.scrollTop||i.scrollTop):(s=t.getBoundingClientRect(),a=t.scrollLeft-s.left,u=t.scrollTop-s.top),l.left+=a,l.right+=a,l.top+=u,l.bottom+=u,l.width=1,(c=e.offsetWidth-e.clientWidth)>0&&(n&&(c*=-1),l.left+=c,l.right+=c),l},FakeCaret=function(t,e,n,i){var a,u,s=Cell(c.none()),l=Settings_getForcedRootBlock(t),f=l.length>0?l:"p",hide=function(){!function(t){var e,n,i,a,u;for(e=un("*[contentEditable=false]",t),a=0;a<e.length;a++)i=(n=e[a]).previousSibling,endsWithCaretContainer(i)&&(1===(u=i.data).length?i.parentNode.removeChild(i):i.deleteData(u.length-1,1)),i=n.nextSibling,startsWithCaretContainer(i)&&(1===(u=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}(e),u&&(ar.remove(u),u=null),s.get().each((function(t){un(t.caret).remove(),s.set(c.none())})),ut.clearInterval(a)},startBlink=function(){a=ut.setInterval((function(){i()?un("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):un("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}),500)};return{show:function(t,i){var a,l,d;if(hide(),d=i,Z.isElement(d)&&/^(TD|TH)$/i.test(d.tagName))return null;if(!n(i))return u=function(t,e){var n,i,a;if(i=t.ownerDocument.createTextNode(On.ZWSP),a=t.parentNode,e){if(n=t.previousSibling,Nn(n)){if(isCaretContainer(n))return n;if(endsWithCaretContainer(n))return n.splitText(n.data.length-1)}a.insertBefore(i,t)}else{if(n=t.nextSibling,Nn(n)){if(isCaretContainer(n))return n;if(startsWithCaretContainer(n))return n.splitText(1),n}t.nextSibling?a.insertBefore(i,t.nextSibling):a.appendChild(i)}return i}(i,t),l=i.ownerDocument.createRange(),sr(u.nextSibling)?(l.setStart(u,0),l.setEnd(u,0)):(l.setStart(u,1),l.setEnd(u,1)),l;u=insertBlock(f,i,t),a=getAbsoluteClientRect(e,i,t),un(u).css("top",a.top);var m=un('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(e)[0];return s.set(c.some({caret:m,element:i,before:t})),s.get().each((function(e){t&&un(e.caret).addClass("mce-visual-caret-before")})),startBlink(),(l=i.ownerDocument.createRange()).setStart(u,0),l.setEnd(u,0),l},hide:hide,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){s.get().each((function(t){var n=getAbsoluteClientRect(e,t.element,t.before);un(t.caret).css(__assign({},n))}))},destroy:function(){return ut.clearInterval(a)}}},isFakeCaretTableBrowser=function(){return cr.isIE()||cr.isEdge()||cr.isFirefox()},isFakeCaretTarget=function(t){return sr(t)||Z.isTable(t)&&isFakeCaretTableBrowser()},lr=Z.isContentEditableFalse,fr=Z.matchStyleValues("display","block table table-cell table-caption list-item"),dr=isCaretContainer,mr=isCaretContainerBlock,gr=Z.isElement,hr=isCaretCandidate,isForwards=function(t){return t>0},isBackwards=function(t){return t<0},skipCaretContainers=function(t,e){for(var n;n=t(e);)if(!mr(n))return n;return null},findNode=function(t,e,n,i,a){var u=new cn(t,i);if(isBackwards(e)){if((lr(t)||mr(t))&&n(t=skipCaretContainers(u.prev,!0)))return t;for(;t=skipCaretContainers(u.prev,a);)if(n(t))return t}if(isForwards(e)){if((lr(t)||mr(t))&&n(t=skipCaretContainers(u.next,!0)))return t;for(;t=skipCaretContainers(u.next,a);)if(n(t))return t}return null},getParentBlock=function(t,e){for(;t&&t!==e;){if(fr(t))return t;t=t.parentNode}return null},isInSameBlock=function(t,e,n){return getParentBlock(t.container(),n)===getParentBlock(e.container(),n)},getChildNodeAtRelativeOffset=function(t,e){var n,i;return e?(n=e.container(),i=e.offset(),gr(n)?n.childNodes[i+t]:null):null},beforeAfter=function(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},isNodesInSameBlock=function(t,e,n){return getParentBlock(e,t)===getParentBlock(n,t)},lean=function(t,e,n){var i,a;for(a=t?"previousSibling":"nextSibling";n&&n!==e;){if(i=n[a],dr(i)&&(i=i[a]),lr(i)){if(isNodesInSameBlock(e,i,n))return i;break}if(hr(i))break;n=n.parentNode}return null},pr=curry(beforeAfter,!0),vr=curry(beforeAfter,!1),normalizeRange=function(t,e,n){var i,a,u,c,s=curry(lean,!0,e),l=curry(lean,!1,e);if(a=n.startContainer,u=n.startOffset,isCaretContainerBlock(a)){if(gr(a)||(a=a.parentNode),"before"===(c=a.getAttribute("data-mce-caret"))&&(i=a.nextSibling,isFakeCaretTarget(i)))return pr(i);if("after"===c&&(i=a.previousSibling,isFakeCaretTarget(i)))return vr(i)}if(!n.collapsed)return n;if(Z.isText(a)){if(dr(a)){if(1===t){if(i=l(a))return pr(i);if(i=s(a))return vr(i)}if(-1===t){if(i=s(a))return vr(i);if(i=l(a))return pr(i)}return n}if(endsWithCaretContainer(a)&&u>=a.data.length-1)return 1===t&&(i=l(a))?pr(i):n;if(startsWithCaretContainer(a)&&u<=1)return-1===t&&(i=s(a))?vr(i):n;if(u===a.data.length)return(i=l(a))?pr(i):n;if(0===u)return(i=s(a))?vr(i):n}return n},getRelativeCefElm=function(t,e){return c.from(getChildNodeAtRelativeOffset(t?0:-1,e)).filter(lr)},getNormalizedRangeEndPoint=function(t,e,n){var i=normalizeRange(t,e,n);return-1===t?CaretPosition.fromRangeStart(i):CaretPosition.fromRangeEnd(i)},getElementFromPosition=function(t){return c.from(t.getNode()).map(C.fromDom)},getVisualCaretPosition=function(t,e){for(;e=t(e);)if(e.isVisible())return e;return e},isMoveInsideSameBlock=function(t,e){var n=isInSameBlock(t,e);return!(n||!Z.isBr(t.getNode()))||n};!function(t){t[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards"}(Jn||(Jn={}));var br,yr=Z.isContentEditableFalse,xr=Z.isText,wr=Z.isElement,Cr=Z.isBr,Sr=isCaretCandidate,isAtomic$1=function(t){return Rn(t)||function(t){return!!isNonUiContentEditableFalse(t)&&!0!==foldl(y(t.getElementsByTagName("*")),(function(t,e){return t||An(e)}),!1)}(t)},kr=isEditableCaretCandidate,nodeAtIndex=function(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null},getCaretCandidatePosition=function(t,e){if(isForwards(t)){if(Sr(e.previousSibling)&&!xr(e.previousSibling))return Zn.before(e);if(xr(e))return Zn(e,0)}if(isBackwards(t)){if(Sr(e.nextSibling)&&!xr(e.nextSibling))return Zn.after(e);if(xr(e))return Zn(e,e.data.length)}return isBackwards(t)?Cr(e)?Zn.before(e):Zn.after(e):Zn.before(e)},findCaretPosition=function(t,e,n){var i,a,u,c,s;if(!wr(n)||!e)return null;if(e.isEqual(Zn.after(n))&&n.lastChild){if(s=Zn.after(n.lastChild),isBackwards(t)&&Sr(n.lastChild)&&wr(n.lastChild))return Cr(n.lastChild)?Zn.before(n.lastChild):s}else s=e;var l=s.container(),f=s.offset();if(xr(l)){if(isBackwards(t)&&f>0)return Zn(l,--f);if(isForwards(t)&&f<l.length)return Zn(l,++f);i=l}else{if(isBackwards(t)&&f>0&&(a=nodeAtIndex(l,f-1),Sr(a)))return!isAtomic$1(a)&&(u=findNode(a,t,kr,a))?xr(u)?Zn(u,u.data.length):Zn.after(u):xr(a)?Zn(a,a.data.length):Zn.before(a);if(isForwards(t)&&f<l.childNodes.length&&(a=nodeAtIndex(l,f),Sr(a)))return Cr(a)?function(t,e){var n=e.nextSibling;return n&&Sr(n)?xr(n)?Zn(n,0):Zn.before(n):findCaretPosition(Jn.Forwards,Zn.after(e),t)}(n,a):!isAtomic$1(a)&&(u=findNode(a,t,kr,a))?xr(u)?Zn(u,0):Zn.before(u):xr(a)?Zn(a,0):Zn.after(a);i=a||s.getNode()}return(isForwards(t)&&s.isAtEnd()||isBackwards(t)&&s.isAtStart())&&(i=findNode(i,t,constant(!0),n,!0),kr(i,n))?getCaretCandidatePosition(t,i):(a=findNode(i,t,kr,n),!(c=bt.last(filter(function(t,e){for(var n=[];t&&t!==e;)n.push(t),t=t.parentNode;return n}(l,n),yr)))||a&&c.contains(a)?a?getCaretCandidatePosition(t,a):null:s=isForwards(t)?Zn.after(c):Zn.before(c))},CaretWalker=function(t){return{next:function(e){return findCaretPosition(Jn.Forwards,e,t)},prev:function(e){return findCaretPosition(Jn.Backwards,e,t)}}},isBeforeOrStart=function(t){return Zn.isTextPosition(t)?0===t.offset():isCaretCandidate(t.getNode())},isAfterOrEnd=function(t){if(Zn.isTextPosition(t)){var e=t.container();return t.offset()===e.data.length}return isCaretCandidate(t.getNode(!0))},isBeforeAfterSameElement=function(t,e){return!Zn.isTextPosition(t)&&!Zn.isTextPosition(e)&&t.getNode()===e.getNode(!0)},shouldSkipPosition=function(t,e,n){return t?!isBeforeAfterSameElement(e,n)&&(i=e,!(!Zn.isTextPosition(i)&&Z.isBr(i.getNode())))&&isAfterOrEnd(e)&&isBeforeOrStart(n):!isBeforeAfterSameElement(n,e)&&isBeforeOrStart(e)&&isAfterOrEnd(n);var i},fromPosition=function(t,e,n){var i=CaretWalker(e);return c.from(t?i.next(n):i.prev(n))},navigate=function(t,e,n){return fromPosition(t,e,n).bind((function(i){return isInSameBlock(n,i,e)&&shouldSkipPosition(t,n,i)?fromPosition(t,e,i):c.some(i)}))},navigateIgnore=function(t,e,n,i){return navigate(t,e,n).bind((function(n){return i(n)?navigateIgnore(t,e,n,i):c.some(n)}))},positionIn=function(t,e){var n,i=t?e.firstChild:e.lastChild;return Z.isText(i)?c.some(Zn(i,t?0:i.data.length)):i?isCaretCandidate(i)?c.some(t?Zn.before(i):(n=i,Z.isBr(n)?Zn.before(n):Zn.after(n))):function(t,e,n){var i=t?Zn.before(n):Zn.after(n);return fromPosition(t,e,i)}(t,e,i):c.none()},Er=curry(fromPosition,!0),Tr=curry(fromPosition,!1),Or={fromPosition:fromPosition,nextPosition:Er,prevPosition:Tr,navigate:navigate,navigateIgnore:navigateIgnore,positionIn:positionIn,firstPositionIn:curry(positionIn,!0),lastPositionIn:curry(positionIn,!1)},addBogus=function(t,e){return Z.isElement(e)&&t.isBlock(e)&&!e.innerHTML&&!pt.ie&&(e.innerHTML='<br data-mce-bogus="1" />'),e},tryFindRangePosition=function(t,e){return Or.lastPositionIn(t).fold((function(){return!1}),(function(t){return e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0}))},padEmptyCaretContainer=function(t,e,n){return!(!function(t){return!1===t.hasChildNodes()}(e)||!getParentCaretContainer(t,e))&&(function(t,e){var n=t.ownerDocument.createTextNode(On.ZWSP);t.appendChild(n),e.setStart(n,0),e.setEnd(n,0)}(e,n),!0)},setEndPoint=function(t,e,n,i){var a,u,c,s,l=n[e?"start":"end"],f=t.getRoot();if(l){for(c=l[0],u=f,a=l.length-1;a>=1;a--){if(s=u.childNodes,padEmptyCaretContainer(f,u,i))return!0;if(l[a]>s.length-1)return!!padEmptyCaretContainer(f,u,i)||tryFindRangePosition(u,i);u=s[l[a]]}3===u.nodeType&&(c=Math.min(l[0],u.nodeValue.length)),1===u.nodeType&&(c=Math.min(l[0],u.childNodes.length)),e?i.setStart(u,c):i.setEnd(u,c)}return!0},isValidTextNode=function(t){return Z.isText(t)&&t.data.length>0},restoreEndPoint=function(t,e,n){var i,a,u,s,l,f,d=t.get(n.id+"_"+e),m=n.keep;if(d){if(i=d.parentNode,"start"===e?(m?d.hasChildNodes()?(i=d.firstChild,a=1):isValidTextNode(d.nextSibling)?(i=d.nextSibling,a=0):isValidTextNode(d.previousSibling)?(i=d.previousSibling,a=d.previousSibling.data.length):(i=d.parentNode,a=t.nodeIndex(d)+1):a=t.nodeIndex(d),l=i,f=a):(m?d.hasChildNodes()?(i=d.firstChild,a=1):isValidTextNode(d.previousSibling)?(i=d.previousSibling,a=d.previousSibling.data.length):(i=d.parentNode,a=t.nodeIndex(d)):a=t.nodeIndex(d),l=i,f=a),!m){for(s=d.previousSibling,u=d.nextSibling,xt.each(xt.grep(d.childNodes),(function(t){Z.isText(t)&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))}));d=t.get(n.id+"_"+e);)t.remove(d,!0);s&&u&&s.nodeType===u.nodeType&&Z.isText(s)&&!pt.opera&&(a=s.nodeValue.length,s.appendData(u.nodeValue),t.remove(u),l=s,f=a)}return c.some(Zn(l,f))}return c.none()},ResolveBookmark_resolve=function(t,e){var n=t.dom;if(e){if(function(t){return xt.isArray(t.start)}(e))return function(t,e){var n=t.createRng();return setEndPoint(t,!0,e,n)&&setEndPoint(t,!1,e,n)?c.some(n):c.none()}(n,e);if(function(t){return"string"==typeof t.start}(e))return c.some(function(t,e){var n,i;return n=t.createRng(),i=resolve$1(t.getRoot(),e.start),n.setStart(i.container(),i.offset()),i=resolve$1(t.getRoot(),e.end),n.setEnd(i.container(),i.offset()),n}(n,e));if(function(t){return t.hasOwnProperty("id")}(e))return function(t,e){var n=restoreEndPoint(t,"start",e),i=restoreEndPoint(t,"end",e);return lift2(n,i.or(n),(function(e,n){var i=t.createRng();return i.setStart(addBogus(t,e.container()),e.offset()),i.setEnd(addBogus(t,n.container()),n.offset()),i}))}(n,e);if(function(t){return t.hasOwnProperty("name")}(e))return function(t,e){return c.from(t.select(e.name)[e.index]).map((function(e){var n=t.createRng();return n.selectNode(e),n}))}(n,e);if(function(t){return t.hasOwnProperty("rng")}(e))return c.some(e.rng)}return c.none()},Bookmarks_getBookmark=function(t,e,n){return rr.getBookmark(t,e,n)},Bookmarks_moveToBookmark=function(t,e){ResolveBookmark_resolve(t,e).each((function(e){t.setRng(e)}))},Bookmarks_isBookmarkNode=function(t){return Z.isElement(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},_r=(br=" ",function(t){return br===t}),isWhiteSpace$1=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},isContent=function(t){return!isWhiteSpace$1(t)&&!_r(t)},isNode=function(t){return!!t.nodeType},moveStart=function(t,e,n){var i,a,u,c=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(t){return t&&/^(IMG)$/.test(t.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(c<(u=s.childNodes).length?(s=u[c],i=new cn(s,t.getParent(s,t.isBlock))):(s=u[u.length-1],(i=new cn(s,t.getParent(s,t.isBlock))).next(!0)),a=i.current();a;a=i.next())if(3===a.nodeType&&!isWhiteSpaceNode(a))return n.setStart(a,0),void e.setRng(n)},getNonWhiteSpaceSibling=function(t,e,n){if(t){var i=e?"nextSibling":"previousSibling";for(t=n?t:t[i];t;t=t[i])if(1===t.nodeType||!isWhiteSpaceNode(t))return t}},isTextBlock$1=function(t,e){return isNode(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]},isValid=function(t,e,n){return t.schema.isValidChild(e,n)},isWhiteSpaceNode=function(t){return t&&Z.isText(t)&&/^([\t \r\n]+|)$/.test(t.nodeValue)},replaceVars=function(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,(function(t,n){return e[n]||t}))),t},isEq=function(t,e){return e=e||"",t=""+((t=t||"").nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()},normalizeStyleValue=function(t,e,n){return"color"!==n&&"backgroundColor"!==n||(e=t.toHex(e)),"fontWeight"===n&&700===e&&(e="bold"),"fontFamily"===n&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e},getStyle=function(t,e,n){return normalizeStyleValue(t,t.getStyle(e,n),n)},getTextDecoration=function(t,e){var n;return t.getParent(e,(function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n})),n},getParents$1=function(t,e,n){return t.getParents(e,n,t.getRoot())},Nr=Bookmarks_isBookmarkNode,Ar=getParents$1,zr=isWhiteSpaceNode,Dr=isTextBlock$1,findParentContentEditable=function(t,e){for(var n=e;n;){if(Z.isElement(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},walkText=function(t,e,n,i){for(var a=e.data,u=n;t?u>=0:u<a.length;t?u--:u++)if(i(a.charAt(u)))return t?u+1:u;return-1},findSpace=function(t,e,n){return walkText(t,e,n,(function(t){return _r(t)||isWhiteSpace$1(t)}))},findContent=function(t,e,n){return walkText(t,e,n,isContent)},findWordEndPoint=function(t,e,n,i,a,u){var s,l=t.getParent(n,t.isBlock)||e,walk=function(e,n,i){var u=TextSeeker(t),f=a?u.backwards:u.forwards;return c.from(f(e,n,(function(t,e){return Nr(t.parentNode)?-1:(s=t,i(a,t,e))}),l))};return walk(n,i,findSpace).bind((function(t){return u?walk(t.container,t.offset+(a?-1:0),findContent):c.some(t)})).orThunk((function(){return s?c.some({container:s,offset:a?0:s.length}):c.none()}))},findSelectorEndPoint=function(t,e,n,i,a){Z.isText(i)&&0===i.nodeValue.length&&i[a]&&(i=i[a]);for(var u=Ar(t,i),c=0;c<u.length;c++)for(var s=0;s<e.length;s++){var l=e[s];if((!("collapsed"in l)||l.collapsed===n.collapsed)&&t.is(u[c],l.selector))return u[c]}return i},findBlockEndPoint=function(t,e,n,i){var a,u=t.dom,c=u.getRoot();if(e[0].wrapper||(a=u.getParent(n,e[0].block,c)),!a){var s=u.getParent(n,"LI,TD,TH");a=u.getParent(Z.isText(n)?n.parentNode:n,(function(e){return e!==c&&Dr(t,e)}),s)}if(a&&e[0].wrapper&&(a=Ar(u,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a[i]&&!u.isBlock(a[i])&&(a=a[i],!isEq(a,"br")););return a||n},findParentContainer=function(t,e,n,i,a,u,c){var s,l,f,d,m,g;if(s=l=c?n:a,d=c?"previousSibling":"nextSibling",m=t.getRoot(),Z.isText(s)&&!zr(s)&&(c?i>0:u<s.nodeValue.length))return s;for(;;){if(!e[0].block_expand&&t.isBlock(l))return l;for(f=l[d];f;f=f[d])if(!Nr(f)&&!zr(f)&&("BR"!==(g=f).nodeName||!g.getAttribute("data-mce-bogus")||g.nextSibling))return l;if(l===m||l.parentNode===m){s=l;break}l=l.parentNode}return s},expandRng=function(t,e,n,i){void 0===i&&(i=!1);var a=e.startContainer,u=e.startOffset,c=e.endContainer,s=e.endOffset,l=t.dom;(Z.isElement(a)&&a.hasChildNodes()&&(a=getNode(a,u),Z.isText(a)&&(u=0)),Z.isElement(c)&&c.hasChildNodes()&&(c=getNode(c,e.collapsed?s:s-1),Z.isText(c)&&(s=c.nodeValue.length)),a=findParentContentEditable(l,a),c=findParentContentEditable(l,c),(Nr(a.parentNode)||Nr(a))&&(a=Nr(a)?a:a.parentNode,a=e.collapsed?a.previousSibling||a:a.nextSibling||a,Z.isText(a)&&(u=e.collapsed?a.length:0)),(Nr(c.parentNode)||Nr(c))&&(c=Nr(c)?c:c.parentNode,c=e.collapsed?c.nextSibling||c:c.previousSibling||c,Z.isText(c)&&(s=e.collapsed?0:c.length)),e.collapsed)&&(findWordEndPoint(l,t.getBody(),a,u,!0,i).each((function(t){var e=t.container,n=t.offset;a=e,u=n})),findWordEndPoint(l,t.getBody(),c,s,!1,i).each((function(t){var e=t.container,n=t.offset;c=e,s=n})));return(n[0].inline||n[0].block_expand)&&(n[0].inline&&Z.isText(a)&&0!==u||(a=findParentContainer(l,n,a,u,c,s,!0)),n[0].inline&&Z.isText(c)&&s!==c.nodeValue.length||(c=findParentContainer(l,n,a,u,c,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(a=findSelectorEndPoint(l,n,e,a,"previousSibling"),c=findSelectorEndPoint(l,n,e,c,"nextSibling")),(n[0].block||n[0].selector)&&(a=findBlockEndPoint(t,n,a,"previousSibling"),c=findBlockEndPoint(t,n,c,"nextSibling"),n[0].block&&(l.isBlock(a)||(a=findParentContainer(l,n,a,u,c,s,!0)),l.isBlock(c)||(c=findParentContainer(l,n,a,u,c,s,!1)))),Z.isElement(a)&&(u=l.nodeIndex(a),a=a.parentNode),Z.isElement(c)&&(s=l.nodeIndex(c)+1,c=c.parentNode),{startContainer:a,startOffset:u,endContainer:c,endOffset:s}},Mr=xt.each,RangeWalk_walk=function(t,e,n){var i=e.startContainer,a=e.startOffset,u=e.endContainer,c=e.endOffset,s=t.select("td[data-mce-selected],th[data-mce-selected]");if(s.length>0)Mr(s,(function(t){n([t])}));else{var l,f,d,exclude=function(t){var e;return 3===(e=t[0]).nodeType&&e===i&&a>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===c&&t.length>0&&e===u&&3===e.nodeType&&t.splice(t.length-1,1),t},collectSiblings=function(t,e,n){for(var i=[];t&&t!==n;t=t[e])i.push(t);return i},findEndPoint=function(t,e){do{if(t.parentNode===e)return t;t=t.parentNode}while(t)},walkBoundary=function(t,e,i){for(var a=i?"nextSibling":"previousSibling",u=t,c=u.parentNode;u&&u!==e;u=c){c=u.parentNode;var s=collectSiblings(u===t?u:u[a],a);s.length&&(i||s.reverse(),n(exclude(s)))}};if(1===i.nodeType&&i.hasChildNodes()&&(i=i.childNodes[a]),1===u.nodeType&&u.hasChildNodes()&&(f=c,d=(l=u).childNodes,--f>d.length-1?f=d.length-1:f<0&&(f=0),u=d[f]||l),i===u)return n(exclude([i]));for(var m=t.findCommonAncestor(i,u),g=i;g;g=g.parentNode){if(g===u)return walkBoundary(i,m,!0);if(g===m)break}for(g=u;g;g=g.parentNode){if(g===i)return walkBoundary(u,m);if(g===m)break}var h=findEndPoint(i,m)||i,p=findEndPoint(u,m)||u;walkBoundary(i,h,!0);var v=collectSiblings(h===i?h:h.nextSibling,"nextSibling",p===u?p.nextSibling:p);v.length&&n(exclude(v)),walkBoundary(u,p)}};var Br=function NodeValue(t,e){var getOption=function(e){return t(e)?c.from(e.dom().nodeValue):c.none()};return{get:function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return getOption(n).getOr("")},getOption:getOption,set:function(n,i){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=i}}}(F,"text"),get$7=function(t){return Br.get(t)},context=function(t,e,n,i){return parent(e).fold((function(){return"skipping"}),(function(a){return"br"===i||function(t){return F(t)&&"\ufeff"===get$7(t)}(e)?"valid":function(t){return L(t)&&has$2(t,Sn())}(e)?"existing":isCaretNode(e)?"caret":isValid(t,n,i)&&isValid(t,H(a),n)?"valid":"invalid-child"}))},makeAnnotation=function(t,e,n,i){var a,u,c=e.uid,s=void 0===c?(a="mce-annotation",u=(new Date).getTime(),a+"_"+Math.floor(1e9*Math.random())+ ++Tn+String(u)):c,l=function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n}(e,["uid"]),f=C.fromTag("span",t);add$3(f,Sn()),set(f,""+En(),s),set(f,""+kn(),n);var d=i(s,l),m=d.attributes,g=void 0===m?{}:m,h=d.classes,p=void 0===h?[]:h;return setAll(f,g),function(t,e){each(e,(function(e){add$3(t,e)}))}(f,p),f},annotate=function(t,e,n,i,a){var u=[],s=makeAnnotation(t.getDoc(),a,n,i),l=Cell(c.none()),finishWrapper=function(){l.set(c.none())},processElements=function(t){each(t,processElement)},processElement=function(e){switch(context(t,e,"span",H(e))){case"invalid-child":finishWrapper();var n=children(e);processElements(n),finishWrapper();break;case"valid":!function(t,e){I(t,e),append(e,t)}(e,l.get().getOrThunk((function(){var t=shallow(s);return u.push(t),l.set(c.some(t)),t})))}};return RangeWalk_walk(t.dom,e,(function(t){finishWrapper(),function(t){var e=map(t,C.fromDom);processElements(e)}(t)})),u},annotateWithBookmark=function(t,e,n,i){t.undoManager.transact((function(){var a=t.selection.getRng();if(a.collapsed&&function(t,e){var n=expandRng(t,e,[{inline:!0}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)}(t,a),t.selection.getRng().collapsed){var u=makeAnnotation(t.getDoc(),i,e,n.decorate);set$1(u," "),t.selection.getRng().insertNode(u.dom()),t.selection.select(u.dom())}else{var c=rr.getPersistentBookmark(t.selection,!1),s=t.selection.getRng();annotate(t,s,e,n.decorate,i),t.selection.moveToBookmark(c)}}))},Annotator=function(t){var e,n=(e={},{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?c.from(e[t]).map((function(t){return t.settings})):c.none()}});setup$1(t,n);var i=setup(t);return{register:function(t,e){n.register(t,e)},annotate:function(e,i){n.lookup(e).each((function(n){annotateWithBookmark(t,e,n,i)}))},annotationChanged:function(t,e){i.addListener(t,e)},remove:function(e){identify(t,c.some(e)).each((function(t){var e=t.elements;each(e,unwrap)}))},getAll:function(e){var n=function(t,e){var n=C.fromDom(t.getBody()),i=descendants$1(n,"["+kn()+'="'+e+'"]'),a={};return each(i,(function(t){var e=get$3(t,En()),n=a.hasOwnProperty(e)?a[e]:[];a[e]=n.concat([t])})),a}(t,e);return map$1(n,(function(t){return map(t,(function(t){return t.dom()}))}))}}},Rr=/^[ \t\r\n]*$/,Pr={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},walk$2=function(t,e,n){var i=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[i])return t[i];if(t!==e){var u=t[a];if(u)return u;for(var c=t.parent;c&&c!==e;c=c.parent)if(u=c[a])return u}},isEmptyTextNode$1=function(t){if(!Rr.test(t.value))return!1;var e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)},Ir=function(){function Node(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}return Node.create=function(t,e){var n=new Node(t,Pr[t]||1);if(e)for(var i in e)n.attr(i,e[i]);return n},Node.prototype.replace=function(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this},Node.prototype.attr=function(t,e){var n;if("string"!=typeof t){for(var i in t)this.attr(i,t[i]);return this}if(n=this.attributes){if(void 0!==e){if(null===e){if(t in n.map){delete n.map[t];for(var a=n.length;a--;)if(n[a].name===t)return n.splice(a,1),this}return this}if(t in n.map){for(a=n.length;a--;)if(n[a].name===t){n[a].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,this}return n.map[t]}},Node.prototype.clone=function(){var t,e=new Node(this.name,this.type);if(t=this.attributes){var n=[];n.map={};for(var i=0,a=t.length;i<a;i++){var u=t[i];"id"!==u.name&&(n[n.length]={name:u.name,value:u.value},n.map[u.name]=u.value)}e.attributes=n}return e.value=this.value,e.shortEnded=this.shortEnded,e},Node.prototype.wrap=function(t){return this.parent.insert(t,this),t.append(this),this},Node.prototype.unwrap=function(){for(var t=this.firstChild;t;){var e=t.next;this.insert(t,this,!0),t=e}this.remove()},Node.prototype.remove=function(){var t=this.parent,e=this.next,n=this.prev;return t&&(t.firstChild===this?(t.firstChild=e,e&&(e.prev=null)):n.next=e,t.lastChild===this?(t.lastChild=n,n&&(n.next=null)):e.prev=n,this.parent=this.next=this.prev=null),this},Node.prototype.append=function(t){t.parent&&t.remove();var e=this.lastChild;return e?(e.next=t,t.prev=e,this.lastChild=t):this.lastChild=this.firstChild=t,t.parent=this,t},Node.prototype.insert=function(t,e,n){t.parent&&t.remove();var i=e.parent||this;return n?(e===i.firstChild?i.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===i.lastChild?i.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=i,t},Node.prototype.getAll=function(t){for(var e=[],n=this.firstChild;n;n=walk$2(n,this))n.name===t&&e.push(n);return e},Node.prototype.empty=function(){if(this.firstChild){for(var t=[],e=this.firstChild;e;e=walk$2(e,this))t.push(e);for(var n=t.length;n--;){(e=t[n]).parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return this.firstChild=this.lastChild=null,this},Node.prototype.isEmpty=function(t,e,n){void 0===e&&(e={});var i=this.firstChild;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(t[i.name])return!1;for(var a=i.attributes.length;a--;){var u=i.attributes[a].name;if("name"===u||0===u.indexOf("data-mce-bookmark"))return!1}}if(8===i.type)return!1;if(3===i.type&&!isEmptyTextNode$1(i))return!1;if(3===i.type&&i.parent&&e[i.parent.name]&&Rr.test(i.value))return!1;if(n&&n(i))return!1}while(i=walk$2(i,this));return!0},Node.prototype.walk=function(t){return walk$2(this,null,t)},Node}(),findEndTagIndex=function(t,e,n){var i,a,u,c,s=1;for(c=t.getShortEndedElements(),(u=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;a=u.exec(e);){if(i=u.lastIndex,"/"===a[1])s--;else if(!a[1]){if(a[2]in c)continue;s++}if(0===s)break}return i},checkBogusAttribute=function(t,e){var n=t.exec(e);if(n){var i=n[1],a=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?a:null}return null};function SaxParser(t,e){void 0===e&&(e=Schema());var noop=function(){};!1!==(t=t||{}).fix_self_closing&&(t.fix_self_closing=!0);var n=t.comment?t.comment:noop,i=t.cdata?t.cdata:noop,a=t.text?t.text:noop,u=t.start?t.start:noop,c=t.end?t.end:noop,s=t.pi?t.pi:noop,l=t.doctype?t.doctype:noop;return{parse:function(f,d){void 0===d&&(d="html");var m,g,h,p,v,b,y,x,w,C,S,k,E,T,O,_,N,A,z,D,M,B,R,P,I,H,L,F,V,U=0,j=[],W=0,q=Ft.decode,$=xt.makeMap("src,href,data,background,formaction,poster,xlink:href"),G=/((java|vb)script|mhtml):/i,X="html"===d?0:1,processEndTag=function(t){var e,n;for(e=j.length;e--&&j[e].name!==t;);if(e>=0){for(n=j.length-1;n>=e;n--)(t=j[n]).valid&&c(t.name);j.length=e}},processComment=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),t.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),n(e))},processMalformedComment=function(t,e){var n=t||"",i=!startsWith(n,"--"),a=function(t,e,n){void 0===n&&(n=0);var i=t.toLowerCase();if(-1!==i.indexOf("[if ",n)&&function(t,e){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(t.substr(e))}(i,n)){var a=i.indexOf("[endif]",n);return i.indexOf(">",a)}if(e){var u=i.indexOf(">",n);return-1!==u?u:i.length}var c=/--!?>/;c.lastIndex=n;var s=c.exec(t);return s?s.index+s[0].length:i.length}(f,i,e);return t=f.substr(e,a-e),processComment(i?n+t:t),a+1},parseAttribute=function(e,n,i,a,u){var c,s;if(i=(n=n.toLowerCase())in S?n:q(i||a||u||""),E&&!x&&!1===function(t){return 0===t.indexOf("data-")||0===t.indexOf("aria-")}(n)){if(!(c=A[n])&&z){for(s=z.length;s--&&!(c=z[s]).pattern.test(n););-1===s&&(c=null)}if(!c)return;if(c.validValues&&!(i in c.validValues))return}if($[n]&&!t.allow_script_urls){var l=i.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}if(G.test(l))return;if(function(t,e){return!t.allow_html_data_urls&&(/^data:image\//i.test(e)?!1===t.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(e):/^data:/i.test(e))}(t,l))return}x&&(n in $||0===n.indexOf("on"))||(p.map[n]=i,p.push({name:n,value:i}))};for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,C=e.getShortEndedElements(),P=t.self_closing_elements||e.getSelfClosingElements(),S=e.getBoolAttrs(),E=t.validate,w=t.remove_internals,V=t.fix_self_closing,L=e.getSpecialElements(),R=f+">";m=I.exec(R);){var K=m[0];if(U<m.index&&a(q(f.substr(U,m.index-U))),g=m[7])":"===(g=g.toLowerCase()).charAt(0)&&(g=g.substr(1)),processEndTag(g);else if(g=m[8]){if(m.index+K.length>f.length){a(q(f.substr(m.index))),U=m.index+K.length;continue}":"===(g=g.toLowerCase()).charAt(0)&&(g=g.substr(1)),k=g in C,V&&P[g]&&j.length>0&&j[j.length-1].name===g&&processEndTag(g);var Y=checkBogusAttribute(H,m[9]);if(null!==Y){if("all"===Y){U=findEndTagIndex(e,f,I.lastIndex),I.lastIndex=U;continue}O=!1}if(!E||(T=e.getElementRule(g))){if(O=!0,E&&(A=T.attributes,z=T.attributePatterns),(N=m[9])?((x=-1!==N.indexOf("data-mce-type"))&&w&&(O=!1),(p=[]).map={},N.replace(H,parseAttribute)):(p=[]).map={},E&&!x){if(D=T.attributesRequired,M=T.attributesDefault,B=T.attributesForced,T.removeEmptyAttrs&&!p.length&&(O=!1),B)for(v=B.length;v--;)y=(_=B[v]).name,"{$uid}"===(F=_.value)&&(F="mce_"+W++),p.map[y]=F,p.push({name:y,value:F});if(M)for(v=M.length;v--;)(y=(_=M[v]).name)in p.map||("{$uid}"===(F=_.value)&&(F="mce_"+W++),p.map[y]=F,p.push({name:y,value:F}));if(D){for(v=D.length;v--&&!(D[v]in p.map););-1===v&&(O=!1)}if(_=p.map["data-mce-bogus"]){if("all"===_){U=findEndTagIndex(e,f,I.lastIndex),I.lastIndex=U;continue}O=!1}}O&&u(g,p,k)}else O=!1;if(h=L[g]){h.lastIndex=U=m.index+K.length,(m=h.exec(f))?(O&&(b=f.substr(U,m.index-U)),U=m.index+m[0].length):(b=f.substr(U),U=f.length),O&&(b.length>0&&a(b,!0),c(g)),I.lastIndex=U;continue}k||(N&&N.indexOf("/")===N.length-1?O&&c(g):j.push({name:g,valid:O}))}else if(g=m[1])processComment(g);else if(g=m[2]){if(!(1===X||t.preserve_cdata||j.length>0&&e.isValidChild(j[j.length-1].name,"#cdata"))){U=processMalformedComment("",m.index+2),I.lastIndex=U;continue}i(g)}else if(g=m[3])l(g);else{if((g=m[4])||"<!"===K){U=processMalformedComment(g,m.index+K.length),I.lastIndex=U;continue}if(g=m[5]){if(1!==X){U=processMalformedComment("?",m.index+2),I.lastIndex=U;continue}s(g,m[6])}}U=m.index+K.length}for(U<f.length&&a(q(f.substr(U))),v=j.length-1;v>=0;v--)(g=j[v]).valid&&c(g.name)}}}!function(t){t.findEndTag=findEndTagIndex}(SaxParser||(SaxParser={}));var Hr,Lr,Fr,Vr=SaxParser,trimInternal=function(t,e){var n,i,a,u,c,s=e,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,f=t.schema;for(s=function(t,e){var n=new RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return e.replace(n,"")}(t.getTempAttrs(),s),c=f.getShortEndedElements();u=l.exec(s);)i=l.lastIndex,a=u[0].length,n=c[u[1]]?i:Vr.findEndTag(f,s,i),s=s.substring(0,i-a)+s.substring(n),l.lastIndex=i-a;return On.trim(s)},Ur={trimExternal:trimInternal,trimInternal:trimInternal},getContentFromBody=function(t,e,n){var i;if(e.format=e.format?e.format:"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),"raw"===e.format)i=xt.trim(Ur.trimExternal(t.serializer,n.innerHTML));else if("text"===e.format)i=On.trim(n.innerText||n.textContent);else{if("tree"===e.format)return t.serializer.serialize(n,e);i=function(t,e){var n=Settings_getForcedRootBlock(t),i=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return e.replace(i,"")}(t,t.serializer.serialize(n,e))}return"text"===e.format||Dt(C.fromDom(n))?e.content=i:e.content=xt.trim(i),e.no_events||t.fire("GetContent",e),e.content},jr=xt.makeMap,Writer=function(t){var e,n,i,a,u,c=[];return e=(t=t||{}).indent,n=jr(t.indent_before||""),i=jr(t.indent_after||""),a=Ft.getEncodeFunc(t.entity_encoding||"raw",t.entities),u="html"===t.element_format,{start:function(t,s,l){var f,d,m,g;if(e&&n[t]&&c.length>0&&(g=c[c.length-1]).length>0&&"\n"!==g&&c.push("\n"),c.push("<",t),s)for(f=0,d=s.length;f<d;f++)m=s[f],c.push(" ",m.name,'="',a(m.value,!0),'"');c[c.length]=!l||u?">":" />",l&&e&&i[t]&&c.length>0&&(g=c[c.length-1]).length>0&&"\n"!==g&&c.push("\n")},end:function(t){var n;c.push("</",t,">"),e&&i[t]&&c.length>0&&(n=c[c.length-1]).length>0&&"\n"!==n&&c.push("\n")},text:function(t,e){t.length>0&&(c[c.length]=e?t:a(t))},cdata:function(t){c.push("<![CDATA[",t,"]]>")},comment:function(t){c.push("\x3c!--",t,"--\x3e")},pi:function(t,n){n?c.push("<?",t," ",a(n),"?>"):c.push("<?",t,"?>"),e&&c.push("\n")},doctype:function(t){c.push("<!DOCTYPE",t,">",e?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}},Serializer=function(t,e){void 0===e&&(e=Schema());var n=Writer(t);(t=t||{}).validate=!("validate"in t)||t.validate;return{serialize:function(i){var a,u;u=t.validate,a={3:function(t){n.text(t.value,t.raw)},8:function(t){n.comment(t.value)},7:function(t){n.pi(t.name,t.value)},10:function(t){n.doctype(t.value)},4:function(t){n.cdata(t.value)},11:function(t){if(t=t.firstChild)do{walk(t)}while(t=t.next)}},n.reset();var walk=function(t){var i,c,s,l,f,d,m,g,h,p=a[t.type];if(p)p(t);else{if(i=t.name,c=t.shortEnded,s=t.attributes,u&&s&&s.length>1&&((d=[]).map={},h=e.getElementRule(t.name))){for(m=0,g=h.attributesOrder.length;m<g;m++)(l=h.attributesOrder[m])in s.map&&(f=s.map[l],d.map[l]=f,d.push({name:l,value:f}));for(m=0,g=s.length;m<g;m++)(l=s[m].name)in d.map||(f=s.map[l],d.map[l]=f,d.push({name:l,value:f}));s=d}if(n.start(t.name,s,c),!c){if(t=t.firstChild)do{walk(t)}while(t=t.next);n.end(i)}}};return 1!==i.type||t.inner?a[11](i):walk(i),n.getContent()}}},traverse=function(t,e){e(t),t.firstChild&&traverse(t.firstChild,e),t.next&&traverse(t.next,e)},filter$2=function(t,e,n){var i=function(t,e,n){var i={},a={},u=[];for(var c in n.firstChild&&traverse(n.firstChild,(function(n){each(t,(function(t){t.name===n.name&&(i[t.name]?i[t.name].nodes.push(n):i[t.name]={filter:t,nodes:[n]})})),each(e,(function(t){"string"==typeof n.attr(t.name)&&(a[t.name]?a[t.name].nodes.push(n):a[t.name]={filter:t,nodes:[n]})}))})),i)i.hasOwnProperty(c)&&u.push(i[c]);for(var s in a)a.hasOwnProperty(s)&&u.push(a[s]);return u}(t,e,n);each(i,(function(t){each(t.filter.callbacks,(function(e){e(t.nodes,t.filter.name,{})}))}))},hasFocus=function(t){var e=owner(t).dom();return t.dom()===e.activeElement},active=function(t){var e=void 0!==t?t.dom():n.document;return c.from(e.activeElement).map(C.fromDom)},Adt_generate=function(t){if(!f(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],i={};return each(t,(function(a,u){var c=x(a);if(1!==c.length)throw new Error("one and only one name per case");var s=c[0],l=a[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!f(l))throw new Error("case arguments must be an array");e.push(s),i[s]=function(){var i=arguments.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+i);for(var a=new Array(i),c=0;c<a.length;c++)a[c]=arguments[c];var match=function(t){var n=x(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!forall(e,(function(t){return contains(n,t)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[s].apply(null,a)};return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);var e=arguments[u];return e.apply(null,a)},match:match,log:function(t){n.console.log(t,{constructors:e,constructor:s,params:a})}}}})),i},Wr={create:Immutable("start","soffset","finish","foffset")},qr=Adt_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$r=(qr.before,qr.on,qr.after,function(t){return t.fold(identity,identity,identity)}),Gr=Adt_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xr={domRange:Gr.domRange,relative:Gr.relative,exact:Gr.exact,exactFromRange:function(t){return Gr.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var e=function(t){return t.match({domRange:function(t){return C.fromDom(t.startContainer)},relative:function(t,e){return $r(t)},exact:function(t,e,n,i){return t}})}(t);return defaultView(e)},range:Wr.create},Kr=detect$3().browser,clamp=function(t,e){var n=F(e)?get$7(e).length:children(e).length+1;return t>n?n:t<0?0:t},normalizeRng=function(t){return Xr.range(t.start(),clamp(t.soffset(),t.start()),t.finish(),clamp(t.foffset(),t.finish()))},isOrContains=function(t,e){return!Z.isRestrictedNode(e.dom())&&(P(t,e)||eq(t,e))},isRngInRoot=function(t){return function(e){return isOrContains(t,e.start())&&isOrContains(t,e.finish())}},shouldStore=function(t){return!0===t.inline||Kr.isIE()},nativeRangeToSelectionRange=function(t){return Xr.range(C.fromDom(t.startContainer),t.startOffset,C.fromDom(t.endContainer),t.endOffset)},readRange=function(t){var e=t.getSelection();return(e&&0!==e.rangeCount?c.from(e.getRangeAt(0)):c.none()).map(nativeRangeToSelectionRange)},getBookmark$2=function(t){var e=defaultView(t);return readRange(e.dom()).filter(isRngInRoot(t))},validate=function(t,e){return c.from(e).filter(isRngInRoot(t)).map(normalizeRng)},bookmarkToNativeRng=function(t){var e=n.document.createRange();try{return e.setStart(t.start().dom(),t.soffset()),e.setEnd(t.finish().dom(),t.foffset()),c.some(e)}catch(t){return c.none()}},getRng=function(t){return(t.bookmark?t.bookmark:c.none()).bind((function(e){return validate(C.fromDom(t.getBody()),e)})).bind(bookmarkToNativeRng)},SelectionBookmark_store=function(t){var e=shouldStore(t)?getBookmark$2(C.fromDom(t.getBody())):c.none();t.bookmark=e.isSome()?e:t.bookmark},SelectionBookmark_restore=function(t){getRng(t).each((function(e){t.selection.setRng(e)}))},Yr=getRng,Jr={isEditorUIElement:function(t){var e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},registerEditorEvents=function(t,e){detect$3().browser.isIE()?function(t){t.on("focusout",(function(){SelectionBookmark_store(t)}))}(t):function(t,e){t.on("mouseup touchend",(function(t){e.throttle()}))}(t,e),t.on("keyup NodeChange",(function(e){(function(t){return"nodechange"===t.type&&t.selectionChange})(e)||SelectionBookmark_store(t)}))},SelectionRestore_register=function(t){var e=first((function(){SelectionBookmark_store(t)}),0);t.on("init",(function(){t.inline&&function(t,e){var mouseUpPage=function(){e.throttle()};gn.DOM.bind(n.document,"mouseup",mouseUpPage),t.on("remove",(function(){gn.DOM.unbind(n.document,"mouseup",mouseUpPage)}))}(t,e),registerEditorEvents(t,e)})),t.on("remove",(function(){e.cancel()}))},Zr=gn.DOM,isEditorUIElement$1=function(t){return Jr.isEditorUIElement(t)},isUIElement=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==Zr.getParent(e,(function(e){return isEditorUIElement$1(e)||!!n&&t.dom.is(e,n)}))},registerEvents=function(t,e){var i=e.editor;SelectionRestore_register(i),i.on("focusin",(function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),t.focusedEditor=this,this.fire("focus",{blurredEditor:e}),this.focus(!0))})),i.on("focusout",(function(){var e=this;ut.setEditorTimeout(e,(function(){var i=t.focusedEditor;isUIElement(e,function(){try{return n.document.activeElement}catch(t){return n.document.body}}())||i!==e||(e.fire("blur",{focusedEditor:null}),t.focusedEditor=null)}))})),Hr||(Hr=function(e){var i,a=t.activeEditor;i=e.target,a&&i.ownerDocument===n.document&&(i===n.document.body||isUIElement(a,i)||t.focusedEditor!==a||(a.fire("blur",{focusedEditor:null}),t.focusedEditor=null))},Zr.bind(n.document,"focusin",Hr))},unregisterDocumentEvents=function(t,e){t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(Zr.unbind(n.document,"focusin",Hr),Hr=null)},FocusController_setup=function(t){t.on("AddEditor",curry(registerEvents,t)),t.on("RemoveEditor",curry(unregisterDocumentEvents,t))},FocusController_isEditorContentAreaElement=function(t){var e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Qr=isUIElement,getFocusInElement=function(t,e){return function(t){return t.collapsed?c.from(getNode(t.startContainer,t.startOffset)).map(C.fromDom):c.none()}(e).bind((function(e){return At(e)?c.some(e):!1===P(t,e)?c.some(t):c.none()}))},normalizeSelection=function(t,e){getFocusInElement(C.fromDom(t.getBody()),e).bind((function(t){return Or.firstPositionIn(t.dom())})).fold((function(){t.selection.normalize()}),(function(e){return t.selection.setRng(e.toRange())}))},focusBody=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},hasElementFocus=function(t){return hasFocus(t)||(e=t,active(owner(e)).filter((function(t){return e.dom().contains(t.dom())}))).isSome();var e},hasFocus$1=function(t){return t.inline?function(t){var e=t.getBody();return e&&hasElementFocus(C.fromDom(e))}(t):function(t){return t.iframeElement&&hasFocus(C.fromDom(t.iframeElement))}(t)},activateEditor=function(t){return t.editorManager.setActive(t)},EditorFocus_focus=function(t,e){t.removed||(e?activateEditor(t):function(t){var e=t.selection,n=t.getBody(),i=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===hasFocus$1(t)&&Yr(t).each((function(e){t.selection.setRng(e),i=e}));var a=function(t,e){return t.dom.getParent(e,(function(e){return"true"===t.dom.getContentEditable(e)}))}(t,e.getNode());if(t.$.contains(n,a))return focusBody(a),normalizeSelection(t,i),void activateEditor(t);t.inline||(pt.opera||focusBody(n),t.getWin().focus()),(pt.gecko||t.inline)&&(focusBody(n),normalizeSelection(t,i)),activateEditor(t)}(t))},eo=hasFocus$1,EditorFocus_hasEditorOrUiFocus=function(t){return hasFocus$1(t)||function(t){return active().filter((function(e){return!FocusController_isEditorContentAreaElement(e.dom())&&Qr(t,e.dom())})).isSome()}(t)},isTreeNode=function(t){return t instanceof Ir},setEditorHtml=function(t,e){t.dom.setHTML(t.getBody(),e),function(t){eo(t)&&Or.firstPositionIn(t.getBody()).each((function(e){var n=e.getNode(),i=Z.isTable(n)?Or.firstPositionIn(n).getOr(e):e;t.selection.setRng(i.toRange())}))}(t)},setContent=function(t,e,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=isTreeNode(e)?"":e,isTreeNode(e)||n.no_events||(t.fire("BeforeSetContent",n),e=n.content),c.from(t.getBody()).fold(constant(e),(function(i){return isTreeNode(e)?function(t,e,n,i){filter$2(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);var a=Serializer({validate:t.validate},t.schema).serialize(n);return i.content=Dt(C.fromDom(e))?a:xt.trim(a),setEditorHtml(t,i.content),i.no_events||t.fire("SetContent",i),n}(t,i,e,n):function(t,e,n,i){var a,u;return 0===n.length||/^\s+$/.test(n)?(u='<br data-mce-bogus="1">',"TABLE"===e.nodeName?n="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+u+"</li>"),(a=Settings_getForcedRootBlock(t))&&t.schema.isValidChild(e.nodeName.toLowerCase(),a.toLowerCase())?(n=u,n=t.dom.createHTML(a,t.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),setEditorHtml(t,n),t.fire("SetContent",i)):("raw"!==i.format&&(n=Serializer({validate:t.validate},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0}))),i.content=Dt(C.fromDom(e))?n:xt.trim(n),setEditorHtml(t,i.content),i.no_events||t.fire("SetContent",i)),i.content}(t,i,e,n)}))},no=gn.DOM,safeDestroy=function(t){return c.from(t).each((function(t){return t.destroy()}))},remove$6=function(t){if(!t.removed){var e=t._selectionOverrides,n=t.editorUpload,i=t.getBody(),a=t.getElement();i&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&a&&no.remove(a.nextSibling),function(t){t.fire("remove")}(t),t.editorManager.remove(t),!t.inline&&i&&function(t){no.setStyle(t.id,"display",t.orgDisplay)}(t),function(t){t.fire("detach")}(t),no.remove(t.getContainer()),safeDestroy(e),safeDestroy(n),t.destroy()}},destroy=function(t,e){var n=t.selection,i=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),safeDestroy(n),safeDestroy(i)),function(t){var e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),no.unbind(e,"submit reset",t.formEventDelegate))}(t),function(t){t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null)}(t),t.destroyed=!0):t.remove())},ro=Object.prototype.hasOwnProperty,oo=(Lr=function(t,e){return l(t)&&l(e)?oo(t,e):e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<t.length;i++){var a=t[i];for(var u in a)ro.call(a,u)&&(n[u]=Lr(n[u],a[u]))}return n}),io=Immutable("sections","settings"),ao=detect$3().deviceType,uo=ao.isTouch(),co=ao.isPhone(),so=ao.isTablet(),lo=["lists","autolink","autosave"],fo={table_grid:!1,object_resizing:!1,resize:!1},normalizePlugins=function(t){var e=f(t)?t.join(" "):t,n=map(s(e)?e.split(" "):[],trim);return filter(n,(function(t){return t.length>0}))},extractSections=function(t,e){var n=bifilter(e,(function(e,n){return contains(t,n)}));return io(n.t,n.f)},hasSection=function(t,e){return t.sections().hasOwnProperty(e)},getToolbarMode=function(t,e){return get(t,"toolbar_mode").orThunk((function(){return get(t,"toolbar_drawer").map((function(t){return!1===t?"wrap":t}))})).getOr(e)},getDefaultMobileSettings=function(t,e){var n={resize:!1,toolbar_mode:getToolbarMode(t,"scrolling"),toolbar_sticky:!1};return __assign(__assign(__assign({},fo),n),e?{menubar:!1}:{})},getExternalPlugins=function(t,e){var n=e.external_plugins?e.external_plugins:{};return t&&t.external_plugins?xt.extend({},t.external_plugins,n):n},processPlugins=function(t,e,n,i){var a=normalizePlugins(n.forced_plugins),u=normalizePlugins(i.plugins),c=function(t,e){return hasSection(t,e)?t.sections()[e]:{}}(e,"mobile"),s=c.plugins?normalizePlugins(c.plugins):u,l=function(t,e){return[].concat(normalizePlugins(t)).concat(normalizePlugins(e))}(a,t&&function(t,e,n){var i=t.sections();return hasSection(t,e)&&i[e].theme===n}(e,"mobile","mobile")?filter(s,curry(contains,lo)):t&&hasSection(e,"mobile")?s:u);return xt.extend(i,{plugins:l.join(" ")})},combineSettings=function(t,e,n,i,a){var u=t?{mobile:getDefaultMobileSettings(a,e)}:{},c=extractSections(["mobile"],oo(u,a)),s=xt.extend(n,i,c.settings(),function(t,e){return t&&hasSection(e,"mobile")}(t,c)?function(t,e,n){void 0===n&&(n={});var i=t.sections(),a=i.hasOwnProperty(e)?i[e]:{};return xt.extend({},n,a)}(c,"mobile"):{},{validate:!0,external_plugins:getExternalPlugins(i,c.settings())});return processPlugins(t,c,i,s)},getEditorSettings=function(t,e,n,i,a){var u=function(t,e,n,i,a){var u={id:e,theme:"silver",toolbar_mode:getToolbarMode(t,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a};return __assign(__assign({},u),i?fo:{})}(a,e,n,uo,t);return combineSettings(co||so,co,u,i,a)},getFiltered=function(t,e,n){return c.from(e.settings[n]).filter(t)},getParam=function(t,e,n,i){var a,u=e in t.settings?t.settings[e]:n;return"hash"===i?function(t){var e={};return"string"==typeof t?each(t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),(function(t){var n=t.split("=");n.length>1?e[xt.trim(n[0])]=xt.trim(n[1]):e[xt.trim(n[0])]=xt.trim(n[0])})):e=t,e}(u):"string"===i?getFiltered(s,t,e).getOr(n):"number"===i?getFiltered(h,t,e).getOr(n):"boolean"===i?getFiltered(m,t,e).getOr(n):"object"===i?getFiltered(l,t,e).getOr(n):"array"===i?getFiltered(f,t,e).getOr(n):"string[]"===i?getFiltered((a=s,function(t){return f(t)&&forall(t,a)}),t,e).getOr(n):"function"===i?getFiltered(g,t,e).getOr(n):u},mo=(Fr={},{add:function(t,e){Fr[t]=e},get:function(t){return Fr[t]?Fr[t]:{icons:{}}},has:function(t){return has(Fr,t)}}),getProp=function(t,e){return e.dom()[t]},getComputedSizeProp=function(t,e){return parseInt(get$4(e,t),10)},ho=curry(getProp,"clientWidth"),po=curry(getProp,"clientHeight"),vo=curry(getComputedSizeProp,"margin-top"),bo=curry(getComputedSizeProp,"margin-left"),EditorView_isXYInContentArea=function(t,e,n){var i,a=C.fromDom(t.getBody()),u=t.inline?a:(i=a,C.fromDom(i.dom().ownerDocument.documentElement)),c=function(t,e,n,i){var a=function(t){return t.dom().getBoundingClientRect()}(e);return{x:n-(t?a.left+e.dom().clientLeft+bo(e):0),y:i-(t?a.top+e.dom().clientTop+vo(e):0)}}(t.inline,u,e,n);return function(t,e,n){var i=ho(t),a=po(t);return e>=0&&n>=0&&e<=i&&n<=a}(u,c.x,c.y)},EditorView_isEditorAttachedToDom=function(t){var e,n=t.inline?t.getBody():t.getContentAreaContainer();return(e=n,c.from(e).map(C.fromDom)).map((function(t){return P(owner(t),t)})).getOr(!1)};function NotificationManager(t){var e=[],getImplementation=function(){var e=t.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():function NotificationManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:unimplemented,close:unimplemented,reposition:unimplemented,getArgs:unimplemented}}()},reposition=function(){e.length>0&&getImplementation().reposition(e)},closeNotification=function(t){findIndex(e,(function(e){return e===t})).each((function(t){e.splice(t,1)}))},open=function(n){if(!t.removed&&EditorView_isEditorAttachedToDom(t))return find(e,(function(t){return e=getImplementation().getArgs(t),i=n,!(e.type!==i.type||e.text!==i.text||e.progressBar||e.timeout||i.progressBar||i.timeout);var e,i})).getOrThunk((function(){t.editorManager.setActive(t);var i=getImplementation().open(n,(function(){closeNotification(i),reposition()}));return function(t){e.push(t)}(i),reposition(),i}))};return function(t){t.on("SkinLoaded",(function(){var e=t.settings.service_message;e&&open({text:e,type:"warning",timeout:0})})),t.on("ResizeEditor ResizeWindow NodeChange",(function(){ut.requestAnimationFrame(reposition)})),t.on("remove",(function(){each(e.slice(),(function(t){getImplementation().close(t)}))}))}(t),{open:open,close:function(){c.from(e[0]).each((function(t){getImplementation().close(t),closeNotification(t),reposition()}))},getNotifications:function(){return e}}}var yo=Cn.PluginManager,xo=Cn.ThemeManager;var WindowManager=function(t){var e=[],getImplementation=function(){var e=t.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():function WindowManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:unimplemented,openUrl:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented}}()},funcBind=function(t,e){return function(){return e?e.apply(t,arguments):void 0}},addDialog=function(n){e.push(n),function(e){t.fire("OpenWindow",{dialog:e})}(n)},closeDialog=function(n){!function(e){t.fire("CloseWindow",{dialog:e})}(n),0===(e=filter(e,(function(t){return t!==n}))).length&&t.focus()},storeSelectionAndOpenDialog=function(e){t.editorManager.setActive(t),SelectionBookmark_store(t);var n=e();return addDialog(n),n};return t.on("remove",(function(){each(e,(function(t){getImplementation().close(t)}))})),{open:function(t,e){return storeSelectionAndOpenDialog((function(){return getImplementation().open(t,e,closeDialog)}))},openUrl:function(t){return storeSelectionAndOpenDialog((function(){return getImplementation().openUrl(t,closeDialog)}))},alert:function(t,e,n){getImplementation().alert(t,funcBind(n||this,e))},confirm:function(t,e,n){getImplementation().confirm(t,funcBind(n||this,e))},close:function(){c.from(e[e.length-1]).each((function(t){getImplementation().close(t),closeDialog(t)}))}}},displayNotification=function(t,e){t.notificationManager.open({type:"error",text:e})},displayError=function(t,e){t._skinLoaded?displayNotification(t,e):t.on("SkinLoaded",(function(){displayNotification(t,e)}))},logError=function(t,e,i){!function(t,e,n){t.fire(e,n)}(t,e,{message:i}),n.console.error(i)},createLoadError=function(t,e,n){return n?"Failed to load "+t+": "+n+" from url "+e:"Failed to load "+t+" url: "+e},initError=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var a=n.window.console;a&&(a.error?a.error.apply(a,arguments):a.log.apply(a,arguments))},wo={pluginLoadError:function(t,e,n){logError(t,"PluginLoadError",createLoadError("plugin",e,n))},iconsLoadError:function(t,e,n){logError(t,"IconsLoadError",createLoadError("icons",e,n))},languageLoadError:function(t,e,n){logError(t,"LanguageLoadError",createLoadError("language",e,n))},pluginInitError:function(t,e,n){var i=wn.translate(["Failed to initialize plugin: {0}",e]);initError(i,n),displayError(t,i)},uploadError:function(t,e){displayError(t,wn.translate(["Failed to upload image: {0}",e]))},displayError:displayError,initError:initError},appendContentCssFromSettings=function(t){t.contentCSS=t.contentCSS.concat(function(t){var e=Settings_getContentCss(t),n=t.editorManager.baseURL+"/skins/content",i="content"+t.editorManager.suffix+".css",a=!0===t.inline;return map(e,(function(e){return function(t){return/^[a-z0-9\-]+$/i.test(t)}(e)&&!a?n+"/"+e+"/"+i:t.documentBaseURI.toAbsolute(e)}))}(t))};function BookmarkManager(t){return{getBookmark:curry(Bookmarks_getBookmark,t),moveToBookmark:curry(Bookmarks_moveToBookmark,t)}}!function(t){t.isBookmarkNode=Bookmarks_isBookmarkNode}(BookmarkManager||(BookmarkManager={}));var Co=BookmarkManager,RangePoint_isXYWithinRange=function(t,e,n){if(n.collapsed)return!1;if(pt.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var i=n.startContainer.childNodes[n.startOffset];if(Z.isElement(i))return exists(i.getClientRects(),(function(n){return containsXY(n,t,e)}))}return exists(n.getClientRects(),(function(n){return containsXY(n,t,e)}))},So={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||this.metaKeyPressed(t)},metaKeyPressed:function(t){return pt.mac?t.metaKey:t.ctrlKey&&!t.altKey}},ko=Z.isContentEditableFalse,Eo=Z.isContentEditableTrue,ControlSelection=function(t,e){var i,a,u,c,s,l,f,d,m,g,h,p,v,b,y,x,w,S=e.dom,k=xt.each,E=e.getDoc(),T=n.document,O=Math.abs,_=Math.round,N=e.getBody();c={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var isImage=function(t){return t&&("IMG"===t.nodeName||e.dom.is(t,"figure.image"))},contextMenuSelectImage=function(t){var n=t.target;(function(t,e){if("longpress"===t.type||0===t.type.indexOf("touch")){var n=t.touches[0];return isImage(t.target)&&!RangePoint_isXYWithinRange(n.clientX,n.clientY,e)}return isImage(t.target)&&!RangePoint_isXYWithinRange(t.clientX,t.clientY,e)})(t,e.selection.getRng())&&!t.isDefaultPrevented()&&e.selection.select(n)},getResizeTarget=function(t){return e.dom.is(t,"figure.image")?t.querySelector("img"):t},isResizable=function(t){var n=Settings_getObjectResizing(e);return!1!==n&&!pt.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==t.getAttribute("data-mce-resize")&&(t!==e.getBody()&&is(C.fromDom(t),n)))},resizeGhostElement=function(t){var n,c,C,k;n=t.screenX-l,c=t.screenY-f,b=n*s[2]+g,y=c*s[3]+h,b=b<5?5:b,y=y<5?5:y,(isImage(i)&&!1!==Settings_getResizeImgProportional(e)?!So.modifierPressed(t):So.modifierPressed(t))&&(O(n)>O(c)?(y=_(b*p),b=_(y/p)):(b=_(y/p),y=_(b*p))),S.setStyles(getResizeTarget(a),{width:b,height:y}),C=(C=s.startPos.x+n)>0?C:0,k=(k=s.startPos.y+c)>0?k:0,S.setStyles(u,{left:C,top:k,display:"block"}),u.innerHTML=b+" &times; "+y,s[2]<0&&a.clientWidth<=b&&S.setStyle(a,"left",d+(g-b)),s[3]<0&&a.clientHeight<=y&&S.setStyle(a,"top",m+(h-y)),(n=N.scrollWidth-x)+(c=N.scrollHeight-w)!==0&&S.setStyles(u,{left:C-n,top:k-c}),v||(!function(t,e,n,i){t.fire("ObjectResizeStart",{target:e,width:n,height:i})}(e,i,g,h),v=!0)},endGhostResize=function(){v=!1;var setSizeProp=function(t,n){n&&(i.style[t]||!e.schema.isValid(i.nodeName.toLowerCase(),t)?S.setStyle(getResizeTarget(i),t,n):S.setAttrib(getResizeTarget(i),t,n))};setSizeProp("width",b),setSizeProp("height",y),S.unbind(E,"mousemove",resizeGhostElement),S.unbind(E,"mouseup",endGhostResize),T!==E&&(S.unbind(T,"mousemove",resizeGhostElement),S.unbind(T,"mouseup",endGhostResize)),S.remove(a),S.remove(u),showResizeRect(i),function(t,e,n,i){t.fire("ObjectResized",{target:e,width:n,height:i})}(e,i,b,y),S.setAttrib(i,"style",S.getAttrib(i,"style")),e.nodeChanged()},showResizeRect=function(t){var n,v,C,O,_;hideResizeRect(),unbindResizeHandleEvents(),n=S.getPos(t,N),d=n.x,m=n.y,_=t.getBoundingClientRect(),v=_.width||_.right-_.left,C=_.height||_.bottom-_.top,i!==t&&(i=t,b=y=0),O=e.fire("ObjectSelected",{target:t}),isResizable(t)&&!O.isDefaultPrevented()?k(c,(function(t,e){var n;(n=S.get("mceResizeHandle"+e))&&S.remove(n),n=S.add(N,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===pt.ie&&(n.contentEditable=!1),S.bind(n,"mousedown",(function(e){e.stopImmediatePropagation(),e.preventDefault(),function(e){l=e.screenX,f=e.screenY,g=getResizeTarget(i).clientWidth,h=getResizeTarget(i).clientHeight,p=h/g,s=t,t.startPos={x:v*t[0]+d,y:C*t[1]+m},x=N.scrollWidth,w=N.scrollHeight,a=i.cloneNode(!0),S.addClass(a,"mce-clonedresizable"),S.setAttrib(a,"data-mce-bogus","all"),a.contentEditable=!1,a.unSelectabe=!0,S.setStyles(a,{left:d,top:m,margin:0}),a.removeAttribute("data-mce-selected"),N.appendChild(a),S.bind(E,"mousemove",resizeGhostElement),S.bind(E,"mouseup",endGhostResize),T!==E&&(S.bind(T,"mousemove",resizeGhostElement),S.bind(T,"mouseup",endGhostResize)),u=S.add(N,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+h)}(e)})),t.elm=n,S.setStyles(n,{left:v*t[0]+d-n.offsetWidth/2,top:C*t[1]+m-n.offsetHeight/2})})):hideResizeRect(),i.setAttribute("data-mce-selected","1")},hideResizeRect=function(){var t,e;for(t in unbindResizeHandleEvents(),i&&i.removeAttribute("data-mce-selected"),c)(e=S.get("mceResizeHandle"+t))&&(S.unbind(e),S.remove(e))},updateResizeRect=function(n){var i,isChildOrEqual=function(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)};v||e.removed||(k(S.select("img[data-mce-selected],hr[data-mce-selected]"),(function(t){t.removeAttribute("data-mce-selected")})),i="mousedown"===n.type?n.target:t.getNode(),isChildOrEqual(i=S.$(i).closest("table,img,figure.image,hr")[0],N)&&(disableGeckoResize(),isChildOrEqual(t.getStart(!0),i)&&isChildOrEqual(t.getEnd(!0),i))?showResizeRect(i):hideResizeRect())},isWithinContentEditableFalse=function(t){return ko(function(t,e){for(;e&&e!==t;){if(Eo(e)||ko(e))return e;e=e.parentNode}return null}(e.getBody(),t))},unbindResizeHandleEvents=function(){for(var t in c){var e=c[t];e.elm&&(S.unbind(e.elm),delete e.elm)}},disableGeckoResize=function(){try{e.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(t){}};e.on("init",(function(){if(disableGeckoResize(),pt.browser.isIE()||pt.browser.isEdge()){e.on("mousedown click",(function(t){var n=t.target,i=n.nodeName;v||!/^(TABLE|IMG|HR)$/.test(i)||isWithinContentEditableFalse(n)||(2!==t.button&&e.selection.select(n,"TABLE"===i),"mousedown"===t.type&&e.nodeChanged())}));var handleMSControlSelect_1=function(t){var delayedSelect=function(t){ut.setEditorTimeout(e,(function(){return e.selection.select(t)}))};if(isWithinContentEditableFalse(t.target))return t.preventDefault(),void delayedSelect(t.target);/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"===t.target.tagName&&delayedSelect(t.target))};S.bind(N,"mscontrolselect",handleMSControlSelect_1),e.on("remove",(function(){return S.unbind(N,"mscontrolselect",handleMSControlSelect_1)}))}var t=ut.throttle((function(t){e.composing||updateResizeRect(t)}));e.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),e.on("keyup compositionend",(function(e){i&&"TABLE"===i.nodeName&&t(e)})),e.on("hide blur",hideResizeRect),e.on("contextmenu longpress",contextMenuSelectImage,!0)})),e.on("remove",unbindResizeHandleEvents);return{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:function(){i=a=null}}};var To=function Dimension(t,e){var get=function(n){var i=e(n);if(i<=0||null===i){var a=get$4(n,t);return parseFloat(a)||0}return i},aggregate=function(t,e){return foldl(e,(function(e,n){var i=get$4(t,n),a=void 0===i?0:parseInt(i,10);return isNaN(a)?e:e+a}),0)};return{set:function(e,n){if(!h(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var i=e.dom();isSupported(i)&&(i.style[t]=n+"px")},get:get,getOuter:get,aggregate:aggregate,max:function(t,e,n){var i=aggregate(t,n);return e>i?e-i:0}}}("height",(function(t){var e=t.dom();return inBody(t)?e.getBoundingClientRect().height:e.offsetHeight})),walkUp=function(t,e){return t.view(e).fold(constant([]),(function(e){var n=t.owner(e),i=walkUp(t,n);return[e].concat(i)}))},Oo=Object.freeze({__proto__:null,view:function(t){return(t.dom()===n.document?c.none():c.from(t.dom().defaultView.frameElement)).map(C.fromDom)},owner:function(t){return owner(t)}}),find$3=function(t){var e=C.fromDom(n.document),i=get$1(e),a=function(t,e){var n=e.owner(t);return walkUp(e,n)}(t,Oo),u=viewport(t),c=foldr(a,(function(t,e){var n=viewport(e);return{left:t.left+n.left(),top:t.top+n.top()}}),{left:0,top:0});return V(c.left+u.left()+i.left(),c.top+u.top()+i.top())},excludeFromDescend=function(t){return"textarea"===H(t)},markerInfo=function(t,e){var n=function(t){var e=t.dom().ownerDocument,n=e.body,i=e.defaultView,a=e.documentElement;if(n===t.dom())return V(n.offsetLeft,n.offsetTop);var u=firstDefinedOrZero(i.pageYOffset,a.scrollTop),c=firstDefinedOrZero(i.pageXOffset,a.scrollLeft),s=firstDefinedOrZero(a.clientTop,n.clientTop),l=firstDefinedOrZero(a.clientLeft,n.clientLeft);return viewport(t).translate(c-l,u-s)}(t),i=function(t){return To.get(t)}(t);return{element:t,bottom:n.top()+i,height:i,pos:n,cleanup:e}},createMarker=function(t,e){var n=function(t,e){var n=children(t);if(0===n.length||excludeFromDescend(t))return{element:t,offset:e};if(e<n.length&&!excludeFromDescend(n[e]))return{element:n[e],offset:0};var i=n[n.length-1];return excludeFromDescend(i)?{element:t,offset:e}:"img"===H(i)?{element:i,offset:1}:F(i)?{element:i,offset:get$7(i).length}:{element:i,offset:children(i).length}}(t,e),i=C.fromHtml('<span data-mce-bogus="all">'+On.ZWSP+"</span>");return I(n.element,i),markerInfo(i,(function(){return remove(i)}))},withMarker=function(t,e,n,i){preserveWith(t,(function(a,u){return applyWithMarker(t,e,n,i)}),n)},withScrollEvents=function(t,e,n,i,a){var u={elm:i.element.dom(),alignToTop:a};(function(t,e){return t.fire("ScrollIntoView",e).isDefaultPrevented()})(t,u)||(n(e,get$1(e).top(),i,a),function(t,e){t.fire("AfterScrollIntoView",e)}(t,u))},applyWithMarker=function(t,e,n,i){var a=C.fromDom(t.getBody()),u=C.fromDom(t.getDoc());a.dom().offsetWidth;var c=createMarker(C.fromDom(n.startContainer),n.startOffset);withScrollEvents(t,u,e,c,i),c.cleanup()},withElement=function(t,e,n,i){var a=C.fromDom(t.getDoc());withScrollEvents(t,a,n,function(t){return markerInfo(C.fromDom(t),noop)}(e),i)},preserveWith=function(t,e,n){var i=n.startContainer,a=n.startOffset,u=n.endContainer,c=n.endOffset;e(C.fromDom(i),C.fromDom(u));var s=t.dom.createRng();s.setStart(i,a),s.setEnd(u,c),t.selection.setRng(n)},scrollToMarker=function(t,e,n,i){var a=t.pos;if(n)to(a.left(),a.top(),i);else{var u=a.top()-e+t.height;to(a.left(),u,i)}},intoWindowIfNeeded=function(t,e,n,i,a){var u=n+e,c=i.pos.top(),s=i.bottom,l=s-c>=n;if(c<e)scrollToMarker(i,n,!1!==a,t);else if(c>u){scrollToMarker(i,n,l?!1!==a:!0===a,t)}else s>u&&!l&&scrollToMarker(i,n,!0===a,t)},intoWindow=function(t,e,n,i){var a=t.dom().defaultView.innerHeight;intoWindowIfNeeded(t,e,a,n,i)},intoFrame=function(t,e,i,a){var u=t.dom().defaultView.innerHeight;intoWindowIfNeeded(t,e,u,i,a);var c=find$3(i.element),s=getBounds(n.window);c.top()<s.y()?intoView(i.element,!1!==a):c.top()>s.bottom()&&intoView(i.element,!0===a)},rangeIntoWindow=function(t,e,n){return withMarker(t,intoWindow,e,n)},elementIntoWindow=function(t,e,n){return withElement(t,e,intoWindow,n)},rangeIntoFrame=function(t,e,n){return withMarker(t,intoFrame,e,n)},elementIntoFrame=function(t,e,n){return withElement(t,e,intoFrame,n)},ScrollIntoView_scrollElementIntoView=function(t,e,n){(t.inline?elementIntoWindow:elementIntoFrame)(t,e,n)},ScrollIntoView_scrollRangeIntoView=function(t,e,n){(t.inline?rangeIntoWindow:rangeIntoFrame)(t,e,n)},hasCeProperty=function(t){return Z.isContentEditableTrue(t)||Z.isContentEditableFalse(t)},CaretRangeFromPoint_fromPoint=function(t,e,n){var i,a,u=n;if(u.caretPositionFromPoint)(a=u.caretPositionFromPoint(t,e))&&((i=n.createRange()).setStart(a.offsetNode,a.offset),i.collapse(!0));else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(t,e);else if(u.body.createTextRange){i=u.body.createTextRange();try{i.moveToPoint(t,e),i.collapse(!0)}catch(a){i=function(t,e,n){var i,a,u;if(i=n.elementFromPoint(t,e),a=n.body.createTextRange(),i&&"HTML"!==i.tagName||(i=n.body),a.moveToElementText(i),(u=(u=xt.toArray(a.getClientRects())).sort((function(t,n){return(t=Math.abs(Math.max(t.top-e,t.bottom-e)))-(n=Math.abs(Math.max(n.top-e,n.bottom-e)))}))).length>0){e=(u[0].bottom+u[0].top)/2;try{return a.moveToPoint(t,e),a.collapse(!0),a}catch(t){}}return null}(t,e,n)}return function(t,e){var n=t&&t.parentElement?t.parentElement():null;return Z.isContentEditableFalse(function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(n,e,hasCeProperty))?null:t}(i,n.body)}return i},EventProcessRanges_processRanges=function(t,e){return map(e,(function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e}))},fromElements=function(t,e){var i=(e||n.document).createDocumentFragment();return each(t,(function(t){i.appendChild(t.dom())})),C.fromDom(i)},parentsUntil$1=function(t,e,n){return P(e,t)?function(t,e){for(var n=g(e)?e:i,a=t.dom(),u=[];null!==a.parentNode&&void 0!==a.parentNode;){var c=a.parentNode,s=C.fromDom(c);if(u.push(s),!0===n(s))break;a=c}return u}(t,(function(t){return n(t)||eq(t,e)})).slice(0,-1):[]},parents$1=function(t,e){return parentsUntil$1(t,e,constant(!1))},_o=parents$1,Parents_parentsAndSelf=function(t,e){return[t].concat(parents$1(t,e))},getFirstChildren=function(t){return firstChild(t).fold(constant([t]),(function(e){return[t].concat(getFirstChildren(e))}))},getLastChildren=function(t){return lastChild(t).fold(constant([t]),(function(e){return"br"===H(e)?prevSibling(e).map((function(e){return[t].concat(getLastChildren(e))})).getOr([]):[t].concat(getLastChildren(e))}))},hasAllContentsSelected=function(t,e){return lift2(function(t){var e=t.startContainer,n=t.startOffset;return Z.isText(e)?0===n?c.some(C.fromDom(e)):c.none():c.from(e.childNodes[n]).map(C.fromDom)}(e),function(t){var e=t.endContainer,n=t.endOffset;return Z.isText(e)?n===e.data.length?c.some(C.fromDom(e)):c.none():c.from(e.childNodes[n-1]).map(C.fromDom)}(e),(function(e,n){var i=find(getFirstChildren(t),curry(eq,e)),a=find(getLastChildren(t),curry(eq,n));return i.isSome()&&a.isSome()})).getOr(!1)},moveEndPoint$1=function(t,e,n,i){var a=n,u=new cn(n,a),c=t.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==xt.trim(n.nodeValue).length)return void(i?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(c[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=i?u.next():u.prev());"BODY"===a.nodeName&&(i?e.setStart(a,0):e.setEnd(a,a.childNodes.length))},hasAnyRanges=function(t){var e=t.selection.getSel();return e&&e.rangeCount>0},No=Immutable("element","width","rows"),Ao=Immutable("element","cells"),zo=Immutable("x","y"),getSpan=function(t,e){var n=parseInt(get$3(t,e),10);return isNaN(n)?1:n},cellExists=function(t,e,n){var i=t.rows();return!!(i[n]?i[n].cells():[])[e]},getWidth=function(t){return foldl(t,(function(t,e){return e.cells().length>t?e.cells().length:t}),0)},findElementPos=function(t,e){for(var n=t.rows(),i=0;i<n.length;i++)for(var a=n[i].cells(),u=0;u<a.length;u++)if(eq(a[u],e))return c.some(zo(u,i));return c.none()},extractRows=function(t,e,n,i,a){for(var u=[],c=t.rows(),s=n;s<=a;s++){var l=c[s].cells(),f=e<i?l.slice(e,i+1):l.slice(i,e+1);u.push(Ao(c[s].element(),f))}return u},SimpleTableModel_fromDom=function(t){var e=No(shallow(t),0,[]);return each(descendants$1(t,"tr"),(function(t,n){each(descendants$1(t,"td,th"),(function(i,a){!function(t,e,n,i,a){for(var u=getSpan(a,"rowspan"),c=getSpan(a,"colspan"),s=t.rows(),l=n;l<n+u;l++){s[l]||(s[l]=Ao(deep(i),[]));for(var f=e;f<e+c;f++){s[l].cells()[f]=l===n&&f===e?a:shallow(a)}}}(e,function(t,e,n){for(;cellExists(t,e,n);)e++;return e}(e,a,n),n,t,i)}))})),No(e.element(),getWidth(e.rows()),e.rows())},SimpleTableModel_toDom=function(t){return function(t,e){var n=shallow(t.element()),i=C.fromTag("tbody");return append$1(i,e),append(n,i),n}(t,function(t){return map(t.rows(),(function(t){var e=map(t.cells(),(function(t){var e=deep(t);return remove$1(e,"colspan"),remove$1(e,"rowspan"),e})),n=shallow(t.element());return append$1(n,e),n}))}(t))},SimpleTableModel_subsection=function(t,e,n){return findElementPos(t,e).bind((function(e){return findElementPos(t,n).map((function(n){return function(t,e,n){var i=e.x(),a=e.y(),u=n.x(),c=n.y(),s=a<c?extractRows(t,i,a,u,c):extractRows(t,i,c,u,a);return No(t.element(),getWidth(s),s)}(t,e,n)}))}))},getRanges=function(t){var e=[];if(t)for(var n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Do=getRanges,MultiRange_getSelectedNodes=function(t){return bind(t,(function(t){var e=getSelectedNode(t);return e?[C.fromDom(e)]:[]}))},MultiRange_hasMultipleRanges=function(t){return getRanges(t).length>1},getCellsFromRanges=function(t){return filter(MultiRange_getSelectedNodes(t),zt)},getCellsFromElement=function(t){return descendants$1(t,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges=function(t,e){var n=getCellsFromElement(e),i=getCellsFromRanges(t);return n.length>0?n:i},Mo=getCellsFromElementOrRanges,TableCellSelection_getCellsFromEditor=function(t){return getCellsFromElementOrRanges(Do(t.selection.getSel()),C.fromDom(t.getBody()))},getFullySelectedListWrappers=function(t,e){return find(t,(function(t){return"li"===H(t)&&hasAllContentsSelected(t,e)})).fold(constant([]),(function(e){return function(t){return find(t,(function(t){return"ul"===H(t)||"ol"===H(t)}))}(t).map((function(t){return[C.fromTag("li"),C.fromTag(H(t))]})).getOr([])}))},getWrapElements=function(t,e){var n=C.fromDom(e.commonAncestorContainer),i=Parents_parentsAndSelf(n,t),a=filter(i,(function(t){return isInline(t)||kt(t)})),u=getFullySelectedListWrappers(i,e),c=a.concat(u.length?u:function(t){return _t(t)?parent(t).filter(Ot).fold(constant([]),(function(e){return[t,e]})):Ot(t)?[t]:[]}(n));return map(c,shallow)},emptyFragment=function(){return fromElements([])},getFragmentFromRange=function(t,e){return n=C.fromDom(e.cloneContents()),i=getWrapElements(t,e),a=foldl(i,(function(t,e){return append(e,t),e}),n),i.length>0?fromElements([a]):a;var n,i,a},getTableFragment=function(t,e){return(n=t,i=e[0],ancestor$1(i,"table",curry(eq,n))).bind((function(t){var n=e[0],i=e[e.length-1],a=SimpleTableModel_fromDom(t);return SimpleTableModel_subsection(a,n,i).map((function(t){return fromElements([SimpleTableModel_toDom(t)])}))})).getOrThunk(emptyFragment);var n,i},FragmentReader_read=function(t,e){var n=Mo(e,t);return n.length>0?getTableFragment(t,n):function(t,e){return e.length>0&&e[0].collapsed?emptyFragment():getFragmentFromRange(t,e[0])}(t,e)},GetSelectionContent_getContent=function(t,e){if(void 0===e&&(e={}),e.get=!0,e.format=e.format||"html",e.selection=!0,(e=t.fire("BeforeGetContent",e)).isDefaultPrevented())return t.fire("GetContent",e),e.content;if("text"===e.format)return function(t){return c.from(t.selection.getRng()).map((function(e){var n=t.dom.add(t.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),i=On.trim(n.innerText);return t.dom.remove(n),i})).getOr("")}(t);e.getInner=!0;var n=function(t,e){var n,i=t.selection.getRng(),a=t.dom.create("body"),u=t.selection.getSel(),c=EventProcessRanges_processRanges(t,Do(u));return(n=e.contextual?FragmentReader_read(C.fromDom(t.getBody()),c).dom():i.cloneContents())&&a.appendChild(n),t.selection.serializer.serialize(a,e)}(t,e);return"tree"===e.format?n:(e.content=t.selection.isCollapsed()?"":n,t.fire("GetContent",e),e.content)},RangeCompare_isEq=function(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},hasParent=function(t,e,n){return null!==function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(t,e,n)},hasParentWithName=function(t,e,n){return hasParent(t,e,(function(t){return t.nodeName===n}))},isTable$3=function(t){return t&&"TABLE"===t.nodeName},isTableCell$2=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},isCeFalseCaretContainer=function(t,e){return isCaretContainer(t)&&!1===hasParent(t,e,isCaretNode)},hasBrBeforeAfter=function(t,e,n){for(var i=new cn(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());e=i[n?"prev":"next"]();)if(Z.isBr(e))return!0},findTextNodeRelative=function(t,e,n,i,a){var u,s,l=t.getRoot(),f=t.schema.getNonEmptyElements(),d=t.getParent(a.parentNode,t.isBlock)||l;if(i&&Z.isBr(a)&&e&&t.isEmpty(d))return c.some(CaretPosition(a.parentNode,t.nodeIndex(a)));for(var m=new cn(a,d);s=m[i?"prev":"next"]();){if("false"===t.getContentEditableParent(s)||isCeFalseCaretContainer(s,l))return c.none();if(Z.isText(s)&&s.nodeValue.length>0)return!1===hasParentWithName(s,l,"A")?c.some(CaretPosition(s,i?s.nodeValue.length:0)):c.none();if(t.isBlock(s)||f[s.nodeName.toLowerCase()])return c.none();u=s}return n&&u?c.some(CaretPosition(u,0)):c.none()},normalizeEndPoint=function(t,e,n,i){var a,u,s,l,f,d,m=t.getRoot(),g=!1;if(a=i[(n?"start":"end")+"Container"],u=i[(n?"start":"end")+"Offset"],d=Z.isElement(a)&&u===a.childNodes.length,l=t.schema.getNonEmptyElements(),f=n,isCaretContainer(a))return c.none();if(Z.isElement(a)&&u>a.childNodes.length-1&&(f=!1),Z.isDocument(a)&&(a=m,u=0),a===m){if(f&&(s=a.childNodes[u>0?u-1:0])){if(isCaretContainer(s))return c.none();if(l[s.nodeName]||isTable$3(s))return c.none()}if(a.hasChildNodes()){if(u=Math.min(!f&&u>0?u-1:u,a.childNodes.length-1),a=a.childNodes[u],u=Z.isText(a)&&d?a.data.length:0,!e&&a===m.lastChild&&isTable$3(a))return c.none();if(function(t,e){for(;e&&e!==t;){if(Z.isContentEditableFalse(e))return!0;e=e.parentNode}return!1}(m,a)||isCaretContainer(a))return c.none();if(a.hasChildNodes()&&!1===isTable$3(a)){s=a;var h=new cn(a,m);do{if(Z.isContentEditableFalse(s)||isCaretContainer(s)){g=!1;break}if(Z.isText(s)&&s.nodeValue.length>0){u=f?0:s.nodeValue.length,a=s,g=!0;break}if(l[s.nodeName.toLowerCase()]&&!isTableCell$2(s)){u=t.nodeIndex(s),a=s.parentNode,f||u++,g=!0;break}}while(s=f?h.next():h.prev())}}}return e&&(Z.isText(a)&&0===u&&findTextNodeRelative(t,d,e,!0,a).each((function(t){a=t.container(),u=t.offset(),g=!0})),Z.isElement(a)&&((s=a.childNodes[u])||(s=a.childNodes[u-1]),!s||!Z.isBr(s)||function(t,e){return t.previousSibling&&t.previousSibling.nodeName===e}(s,"A")||hasBrBeforeAfter(t,s,!1)||hasBrBeforeAfter(t,s,!0)||findTextNodeRelative(t,d,e,!0,s).each((function(t){a=t.container(),u=t.offset(),g=!0})))),f&&!e&&Z.isText(a)&&u===a.nodeValue.length&&findTextNodeRelative(t,d,e,!1,a).each((function(t){a=t.container(),u=t.offset(),g=!0})),g?c.some(CaretPosition(a,u)):c.none()},NormalizeRange_normalize=function(t,e){var n=e.collapsed,i=e.cloneRange(),a=CaretPosition.fromRangeStart(e);return normalizeEndPoint(t,n,!0,i).each((function(t){n&&CaretPosition.isAbove(a,t)||i.setStart(t.container(),t.offset())})),n||normalizeEndPoint(t,n,!1,i).each((function(t){i.setEnd(t.container(),t.offset())})),n&&i.collapse(!0),RangeCompare_isEq(e,i)?c.none():c.some(i)},removeEmpty=function(t){return 0===t.dom().length?(remove(t),c.none()):c.some(t)},SetSelectionContent_setContent=function(t,e,n){if((n=function(t,e){return(t=t||{format:"html"}).set=!0,t.selection=!0,t.content=e,t}(n,e)).no_events||!(n=t.fire("BeforeSetContent",n)).isDefaultPrevented()){var i=t.selection.getRng();!function(t,e){var n=c.from(e.firstChild).map(C.fromDom),i=c.from(e.lastChild).map(C.fromDom);t.deleteContents(),t.insertNode(e);var a=n.bind(prevSibling).filter(F).bind(removeEmpty),u=i.bind(nextSibling).filter(F).bind(removeEmpty);lift2(a,n.filter(F),(function(t,e){!function(t,e){t.insertData(0,e)}(e.dom(),t.dom().data),remove(t)})),lift2(u,i.filter(F),(function(e,n){var i=n.dom().length;n.dom().appendData(e.dom().data),t.setEnd(n.dom(),i),remove(e)})),t.collapse(!1)}(i,i.createContextualFragment(n.content)),t.selection.setRng(i),ScrollIntoView_scrollRangeIntoView(t,i),n.no_events||t.fire("SetContent",n)}else t.fire("SetContent",n)},getEndpointElement=function(t,e,n,i,a){var u=n?e.startContainer:e.endContainer,s=n?e.startOffset:e.endOffset;return c.from(u).map(C.fromDom).map((function(t){return i&&e.collapsed?t:child(t,a(t,s)).getOr(t)})).bind((function(t){return L(t)?c.some(t):parent(t)})).map((function(t){return t.dom()})).getOr(t)},getStart$2=function(t,e,n){return getEndpointElement(t,e,!0,n,(function(t,e){return Math.min(t.dom().childNodes.length,e)}))},getEnd=function(t,e,n){return getEndpointElement(t,e,!1,n,(function(t,e){return e>0?e-1:e}))},skipEmptyTextNodes=function(t,e){for(var n=t;t&&Z.isText(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},deleteFromCallbackMap=function(t,e,n){if(t&&t.hasOwnProperty(e)){var i=filter(t[e],(function(t){return t!==n}));0===i.length?delete t[e]:t[e]=i}};var isNativeIeSelection=function(t){return!!t.select},isAttachedToDom=function(t){return!(!t||!t.ownerDocument)&&P(C.fromDom(t.ownerDocument),C.fromDom(t))},Selection$1=function(t,e,n,i){var a,u,s,l,f=function SelectorChanged(t,e){var n,i;return{selectorChangedWithUnbind:function(a,u){return n||(n={},i={},e.on("NodeChange",(function(e){var a=e.element,u=t.getParents(a,null,t.getRoot()),c={};xt.each(n,(function(e,n){xt.each(u,(function(a){if(t.is(a,n))return i[n]||(xt.each(e,(function(t){t(!0,{node:a,selector:n,parents:u})})),i[n]=e),c[n]=e,!1}))})),xt.each(i,(function(t,e){c[e]||(delete i[e],xt.each(t,(function(t){t(!1,{node:a,selector:e,parents:u})})))}))}))),n[a]||(n[a]=[]),n[a].push(u),{unbind:function(){deleteFromCallbackMap(n,a,u),deleteFromCallbackMap(i,a,u)}}}}}(t,i).selectorChangedWithUnbind,setContent=function(t,e){return SetSelectionContent_setContent(i,t,e)},collapse=function(t){var e=getRng();e.collapse(!!t),setRng(e)},getSel=function(){return e.getSelection?e.getSelection():e.document.selection},getRng=function(){var n,a,u,c,tryCompareBoundaryPoints=function(t,e,n){try{return e.compareBoundaryPoints(t,n)}catch(t){return-1}};if(!e)return null;if(null==(c=e.document))return null;if(void 0!==i.bookmark&&!1===eo(i)){var f=Yr(i);if(f.isSome())return f.map((function(t){return EventProcessRanges_processRanges(i,[t])[0]})).getOr(c.createRange())}try{(n=getSel())&&!Z.isRestrictedNode(n.anchorNode)&&(a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():c.createRange())}catch(t){}return(a=EventProcessRanges_processRanges(i,[a])[0])||(a=c.createRange?c.createRange():c.body.createTextRange()),a.setStart&&9===a.startContainer.nodeType&&a.collapsed&&(u=t.getRoot(),a.setStart(u,0),a.setEnd(u,0)),s&&l&&(0===tryCompareBoundaryPoints(a.START_TO_START,a,s)&&0===tryCompareBoundaryPoints(a.END_TO_END,a,s)?a=l:(s=null,l=null)),a},setRng=function(t,e){var n,a;if(function(t){return!!t&&(!!isNativeIeSelection(t)||isAttachedToDom(t.startContainer)&&isAttachedToDom(t.endContainer))}(t)){var u=isNativeIeSelection(t)?t:null;if(u){l=null;try{u.select()}catch(t){}}else{if(n=getSel(),t=i.fire("SetSelectionRange",{range:t,forward:e}).range,n){l=t;try{n.removeAllRanges(),n.addRange(t)}catch(t){}!1===e&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),s=n.rangeCount>0?n.getRangeAt(0):null}t.collapsed||t.startContainer!==t.endContainer||!n.setBaseAndExtent||pt.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(a=t.startContainer.childNodes[t.startOffset])&&"IMG"===a.tagName&&(n.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),n.anchorNode===t.startContainer&&n.focusNode===t.endContainer||n.setBaseAndExtent(a,0,a,1)),i.fire("AfterSetSelectionRange",{range:t,forward:e})}}},isForward=function(){var e,n,i=getSel();return!(i&&i.anchorNode&&i.focusNode)||((e=t.createRng()).setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),(n=t.createRng()).setStart(i.focusNode,i.focusOffset),n.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,n)<=0)},d={bookmarkManager:null,controlSelection:null,dom:t,win:e,serializer:n,editor:i,collapse:collapse,setCursorLocation:function(e,n){var a=t.createRng();e?(a.setStart(e,n),a.setEnd(e,n),setRng(a),collapse(!1)):(moveEndPoint$1(t,a,i.getBody(),!0),setRng(a))},getContent:function(t){return GetSelectionContent_getContent(i,t)},setContent:setContent,getBookmark:function(t,e){return a.getBookmark(t,e)},moveToBookmark:function(t){return a.moveToBookmark(t)},select:function(e,n){return function(t,e,n){return c.from(e).map((function(e){var i=t.nodeIndex(e),a=t.createRng();return a.setStart(e.parentNode,i),a.setEnd(e.parentNode,i+1),n&&(moveEndPoint$1(t,a,e,!0),moveEndPoint$1(t,a,e,!1)),a}))}(t,e,n).each(setRng),e},isCollapsed:function(){var t=getRng(),e=getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},isForward:isForward,setNode:function(e){return setContent(t.getOuterHTML(e)),e},getNode:function(){return t=i.getBody(),(e=getRng())?(a=e.startContainer,u=e.endContainer,c=e.startOffset,s=e.endOffset,n=e.commonAncestorContainer,!e.collapsed&&(a===u&&s-c<2&&a.hasChildNodes()&&(n=a.childNodes[c]),3===a.nodeType&&3===u.nodeType&&(a=a.length===c?skipEmptyTextNodes(a.nextSibling,!0):a.parentNode,u=0===s?skipEmptyTextNodes(u.previousSibling,!1):u.parentNode,a&&a===u))?a:n&&3===n.nodeType?n.parentNode:n):t;var t,e,n,a,u,c,s},getSel:getSel,setRng:setRng,getRng:getRng,getStart:function(t){return getStart$2(i.getBody(),getRng(),t)},getEnd:function(t){return getEnd(i.getBody(),getRng(),t)},getSelectedBlocks:function(e,n){return function(t,e,n,i){var a,u,c=[];if(u=t.getRoot(),n=t.getParent(n||getStart$2(u,e,e.collapsed),t.isBlock),i=t.getParent(i||getEnd(u,e,e.collapsed),t.isBlock),n&&n!==u&&c.push(n),n&&i&&n!==i){a=n;for(var s=new cn(n,u);(a=s.next())&&a!==i;)t.isBlock(a)&&c.push(a)}return i&&n!==i&&i!==u&&c.push(i),c}(t,getRng(),e,n)},normalize:function(){var e=getRng(),n=getSel();if(!MultiRange_hasMultipleRanges(n)&&hasAnyRanges(i)){var a=NormalizeRange_normalize(t,e);return a.each((function(t){setRng(t,isForward())})),a.getOr(e)}return e},selectorChanged:function(t,e){return f(t,e),d},selectorChangedWithUnbind:f,getScrollContainer:function(){for(var e,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){e=n;break}n=n.parentNode}return e},scrollIntoView:function(t,e){return ScrollIntoView_scrollElementIntoView(i,t,e)},placeCaretAt:function(t,e){return setRng(CaretRangeFromPoint_fromPoint(t,e,i.getDoc()))},getBoundingClientRect:function(){var t=getRng();return t.collapsed?Zn.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){e=s=l=null,u.destroy()}};return a=Co(d),u=ControlSelection(d,i),d.bookmarkManager=a,d.controlSelection=u,d},addFontToSpansFilter=function(t,e,n){t.addNodeFilter("font",(function(t){each(t,(function(t){var i=e.parse(t.attr("style")),a=t.attr("color"),u=t.attr("face"),c=t.attr("size");a&&(i.color=a),u&&(i["font-family"]=u),c&&(i["font-size"]=n[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",e.serialize(i)),function(t,e){each(e,(function(e){t.attr(e,null)}))}(t,["color","face","size"])}))}))},addFilters=function(t,e){var n=Styles();e.convert_fonts_to_spans&&addFontToSpansFilter(t,n,xt.explode(e.font_size_legacy_values)),function(t,e){t.addNodeFilter("strike",(function(t){each(t,(function(t){var n=e.parse(t.attr("style"));n["text-decoration"]="line-through",t.name="span",t.attr("style",e.serialize(n))}))}))}(t,n)},LegacyFilter_register=function(t,e){e.inline_styles&&addFilters(t,e)},paddEmptyNode=function(t,e,n,i){(t.padd_empty_with_br||e.insert)&&n[i.name]?i.empty().append(new Ir("br",1)).shortEnded=!0:i.empty().append(new Ir("#text",3)).value=" "},hasOnlyChild=function(t,e){return t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e},isEmpty$1=function(t,e,n,i){return i.isEmpty(e,n,(function(e){return function(t,e){var n=t.getElementRule(e.name);return n&&n.paddEmpty}(t,e)}))},Bo=xt.makeMap,Ro=xt.each,Po=xt.explode,Io=xt.extend,DomParser=function(t,e){void 0===e&&(e=Schema());var n={},i=[],a={},u={};(t=t||{}).validate=!("validate"in t)||t.validate,t.root_name=t.root_name||"body";var filterNode=function(t){var e,c,s;(c=t.name)in n&&((s=a[c])?s.push(t):a[c]=[t]),e=i.length;for(;e--;)(c=i[e].name)in t.attributes.map&&((s=u[c])?s.push(t):u[c]=[t]);return t},c={schema:e,addAttributeFilter:function(t,e){Ro(Po(t),(function(t){var n;for(n=0;n<i.length;n++)if(i[n].name===t)return void i[n].callbacks.push(e);i.push({name:t,callbacks:[e]})}))},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(t,e){Ro(Po(t),(function(t){var i=n[t];i||(n[t]=i=[]),i.push(e)}))},getNodeFilters:function(){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push({name:e,callbacks:n[e]});return t},filterNode:filterNode,parse:function(c,s){var l,f,d,m,g,h,p,v,b,y,x,w=[];s=s||{},a={},u={},b=Io(Bo("script,style,head,html,body,title,meta,param"),e.getBlockElements());var C=e.getNonEmptyElements(),S=e.children,k=t.validate,E=function(t){return!1===t?"":!0===t?"p":t}("forced_root_block"in s?s.forced_root_block:t.forced_root_block),T=e.getWhiteSpaceElements(),O=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/;y=T.hasOwnProperty(s.context)||T.hasOwnProperty(t.root_name);var createNode=function(t,e){var i,u=new Ir(t,e);return t in n&&((i=a[t])?i.push(u):a[t]=[u]),u},removeWhitespaceBefore=function(t){var n,i,a,u,c=e.getBlockElements();for(n=t.prev;n&&3===n.type;){if((a=n.value.replace(_,"")).length>0)return void(n.value=a);if(i=n.next){if(3===i.type&&i.value.length){n=n.prev;continue}if(!c[i.name]&&"script"!==i.name&&"style"!==i.name){n=n.prev;continue}}u=n.prev,n.remove(),n=u}};l=Vr({validate:k,allow_script_urls:t.allow_script_urls,allow_conditional_comments:t.allow_conditional_comments,preserve_cdata:t.preserve_cdata,self_closing_elements:function(t){var e,n={};for(e in t)"li"!==e&&"p"!==e&&(n[e]=t[e]);return n}(e.getSelfClosingElements()),cdata:function(t){x.append(createNode("#cdata",4)).value=t},text:function(t,e){var n;y||(t=t.replace(N," "),function(t,e){return t&&(e[t.name]||"br"===t.name)}(x.lastChild,b)&&(t=t.replace(O,""))),0!==t.length&&((n=createNode("#text",3)).raw=!!e,x.append(n).value=t)},comment:function(t){x.append(createNode("#comment",8)).value=t},pi:function(t,e){x.append(createNode(t,7)).value=e,removeWhitespaceBefore(x)},doctype:function(t){x.append(createNode("#doctype",10)).value=t,removeWhitespaceBefore(x)},start:function(t,n,a){var c,s,l,f,d;if(l=k?e.getElementRule(t):{}){for((c=createNode(l.outputName||t,1)).attributes=n,c.shortEnded=a,x.append(c),(d=S[x.name])&&S[c.name]&&!d[c.name]&&w.push(c),s=i.length;s--;)(f=i[s].name)in n.map&&((p=u[f])?p.push(c):u[f]=[c]);b[t]&&removeWhitespaceBefore(c),a||(x=c),!y&&T[t]&&(y=!0)}},end:function(n){var i,a,u,c,l;if(a=k?e.getElementRule(n):{}){if(b[n]&&!y){if((i=x.firstChild)&&3===i.type)if((u=i.value.replace(O,"")).length>0)i.value=u,i=i.next;else for(c=i.next,i.remove(),i=c;i&&3===i.type;)u=i.value,c=i.next,(0===u.length||A.test(u))&&(i.remove(),i=c),i=c;if((i=x.lastChild)&&3===i.type)if((u=i.value.replace(_,"")).length>0)i.value=u,i=i.prev;else for(c=i.prev,i.remove(),i=c;i&&3===i.type;)u=i.value,c=i.prev,(0===u.length||A.test(u))&&(i.remove(),i=c),i=c}if(y&&T[n]&&(y=!1),a.removeEmpty&&isEmpty$1(e,C,T,x)&&!x.attr("name")&&!x.attr("id"))return l=x.parent,b[x.name]?x.empty().remove():x.unwrap(),void(x=l);a.paddEmpty&&(function(t){return hasOnlyChild(t,"#text")&&" "===t.firstChild.value}(x)||isEmpty$1(e,C,T,x))&&paddEmptyNode(t,s,b,x),x=x.parent}}},e);var z=x=new Ir(s.context||t.root_name,11);if(l.parse(c,s.format),k&&w.length&&(s.context?s.invalid=!0:function(t){var n,i,a,u,c,s,l,f,d,m,g,h,p,v,b,y;for(h=Bo("tr,td,th,tbody,thead,tfoot,table"),m=e.getNonEmptyElements(),g=e.getWhiteSpaceElements(),p=e.getTextBlockElements(),v=e.getSpecialElements(),n=0;n<t.length;n++)if((i=t[n]).parent&&!i.fixed)if(p[i.name]&&"li"===i.parent.name){for(b=i.next;b&&p[b.name];)b.name="li",b.fixed=!0,i.parent.insert(b,i.parent),b=b.next;i.unwrap(i)}else{for(u=[i],a=i.parent;a&&!e.isValidChild(a.name,i.name)&&!h[a.name];a=a.parent)u.push(a);if(a&&u.length>1){for(u.reverse(),c=s=filterNode(u[0].clone()),d=0;d<u.length-1;d++){for(e.isValidChild(s.name,u[d].name)?(l=filterNode(u[d].clone()),s.append(l)):l=s,f=u[d].firstChild;f&&f!==u[d+1];)y=f.next,l.append(f),f=y;s=l}isEmpty$1(e,m,g,c)?a.insert(i,u[0],!0):(a.insert(c,u[0],!0),a.insert(i,c)),a=u[0],(isEmpty$1(e,m,g,a)||hasOnlyChild(a,"br"))&&a.empty().remove()}else if(i.parent){if("li"===i.name){if((b=i.prev)&&("ul"===b.name||"ul"===b.name)){b.append(i);continue}if((b=i.next)&&("ul"===b.name||"ul"===b.name)){b.insert(i,b.firstChild,!0);continue}i.wrap(filterNode(new Ir("ul",1)));continue}e.isValidChild(i.parent.name,"div")&&e.isValidChild("div",i.name)?i.wrap(filterNode(new Ir("div",1))):v[i.name]?i.empty().remove():i.unwrap()}}}(w)),E&&("body"===z.name||s.isRootContent)&&function(){var n,i,a=z.firstChild,trim=function(t){t&&((a=t.firstChild)&&3===a.type&&(a.value=a.value.replace(O,"")),(a=t.lastChild)&&3===a.type&&(a.value=a.value.replace(_,"")))};if(e.isValidChild(z.name,E.toLowerCase())){for(;a;)n=a.next,3===a.type||1===a.type&&"p"!==a.name&&!b[a.name]&&!a.attr("data-mce-type")?(i||((i=createNode(E,1)).attr(t.forced_root_block_attrs),z.insert(i,a)),i.append(a)):(trim(i),i=null),a=n;trim(i)}}(),!s.invalid){for(v in a)if(a.hasOwnProperty(v)){for(p=n[v],g=(f=a[v]).length;g--;)f[g].parent||f.splice(g,1);for(d=0,m=p.length;d<m;d++)p[d](f,v,s)}for(d=0,m=i.length;d<m;d++)if((p=i[d]).name in u){for(g=(f=u[p.name]).length;g--;)f[g].parent||f.splice(g,1);for(g=0,h=p.callbacks.length;g<h;g++)p.callbacks[g](f,p.name,s)}}return z}};return function(t,e){var n=t.schema;e.remove_trailing_brs&&t.addNodeFilter("br",(function(t,i,a){var u,c,s,l,f,d,m,g,h=t.length,p=xt.extend({},n.getBlockElements()),v=n.getNonEmptyElements(),b=n.getNonEmptyElements();for(p.body=1,u=0;u<h;u++)if(s=(c=t[u]).parent,p[c.parent.name]&&c===s.lastChild){for(f=c.prev;f;){if("span"!==(d=f.name)||"bookmark"!==f.attr("data-mce-type")){if("br"!==d)break;if("br"===d){c=null;break}}f=f.prev}c&&(c.remove(),isEmpty$1(n,v,b,s)&&(m=n.getElementRule(s.name))&&(m.removeEmpty?s.remove():m.paddEmpty&&paddEmptyNode(e,a,p,s)))}else{for(l=c;s&&s.firstChild===l&&s.lastChild===l&&(l=s,!p[s.name]);)s=s.parent;l===s&&!0!==e.padd_empty_with_br&&((g=new Ir("#text",3)).value=" ",c.replace(g))}})),t.addAttributeFilter("href",(function(t){var n,i,a,u=t.length;if(!e.allow_unsafe_link_target)for(;u--;)"a"===(n=t[u]).name&&"_blank"===n.attr("target")&&n.attr("rel",(i=n.attr("rel"),a=void 0,a=i?xt.trim(i):"",/\b(noopener)\b/g.test(a)?a:function(t){return t.split(" ").filter((function(t){return t.length>0})).concat(["noopener"]).sort().join(" ")}(a)))})),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",(function(t){for(var e,n,i,a,u=t.length;u--;)if("a"===(a=t[u]).name&&a.firstChild&&!a.attr("href")){i=a.parent,e=a.lastChild;do{n=e.prev,i.insert(e,a),e=n}while(e)}})),e.fix_list_elements&&t.addNodeFilter("ul,ol",(function(t){for(var e,n,i=t.length;i--;)if("ul"===(n=(e=t[i]).parent).name||"ol"===n.name)if(e.prev&&"li"===e.prev.name)e.prev.append(e);else{var a=new Ir("li",1);a.attr("style","list-style-type: none"),e.wrap(a)}})),e.validate&&n.getValidClasses()&&t.addAttributeFilter("class",(function(t){for(var e,i,a,u,c,s,l,f=t.length,d=n.getValidClasses();f--;){for(i=(e=t[f]).attr("class").split(" "),c="",a=0;a<i.length;a++)u=i[a],l=!1,(s=d["*"])&&s[u]&&(l=!0),s=d[e.name],!l&&s&&s[u]&&(l=!0),l&&(c&&(c+=" "),c+=u);c.length||(c=null),e.attr("class",c)}}))}(c,t),LegacyFilter_register(c,t),c},DomSerializerFilters_register=function(t,e,n){t.addAttributeFilter("data-mce-tabindex",(function(t,e){for(var n,i=t.length;i--;)(n=t[i]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(e,null)})),t.addAttributeFilter("src,href,style",(function(t,i){for(var a,u,c=t.length,s="data-mce-"+i,l=e.url_converter,f=e.url_converter_scope;c--;)void 0!==(u=(a=t[c]).attr(s))?(a.attr(i,u.length>0?u:null),a.attr(s,null)):(u=a.attr(i),"style"===i?u=n.serializeStyle(n.parseStyle(u),a.name):l&&(u=l.call(f,u,i,a.name)),a.attr(i,u.length>0?u:null))})),t.addAttributeFilter("class",(function(t){for(var e,n,i=t.length;i--;)(n=(e=t[i]).attr("class"))&&(n=e.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),e.attr("class",n.length>0?n:null))})),t.addAttributeFilter("data-mce-type",(function(t,e,n){for(var i,a=t.length;a--;){if("bookmark"===(i=t[a]).attr("data-mce-type")&&!n.cleanup)c.from(i.firstChild).exists((function(t){return!On.isZwsp(t.value)}))?i.unwrap():i.remove()}})),t.addNodeFilter("noscript",(function(t){for(var e,n=t.length;n--;)(e=t[n].firstChild)&&(e.value=Ft.decode(e.value))})),t.addNodeFilter("script,style",(function(t,n){for(var i,a,u,c=t.length,trim=function(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};c--;)a=(i=t[c]).firstChild?i.firstChild.value:"","script"===n?((u=i.attr("type"))&&i.attr("type","mce-no/type"===u?null:u.replace(/^mce\-/,"")),"xhtml"===e.element_format&&a.length>0&&(i.firstChild.value="// <![CDATA[\n"+trim(a)+"\n// ]]>")):"xhtml"===e.element_format&&a.length>0&&(i.firstChild.value="\x3c!--\n"+trim(a)+"\n--\x3e")})),t.addNodeFilter("#comment",(function(t){for(var i,a=t.length;a--;)i=t[a],e.preserve_cdata&&0===i.value.indexOf("[CDATA[")?(i.name="#cdata",i.type=4,i.value=n.decode(i.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===i.value.indexOf("mce:protected ")&&(i.name="#text",i.type=3,i.raw=!0,i.value=unescape(i.value).substr(14))})),t.addNodeFilter("xml:namespace,input",(function(t,e){for(var n,i=t.length;i--;)7===(n=t[i]).type?n.remove():1===n.type&&("input"!==e||n.attr("type")||n.attr("type","text"))})),t.addAttributeFilter("data-mce-type",(function(e){each(e,(function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())}))})),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}))},DomSerializerFilters_trimTrailingBr=function(t){var e,n,isBr=function(t){return t&&"br"===t.name};isBr(e=t.lastChild)&&isBr(n=e.prev)&&(e.remove(),n.remove())},DomSerializerPreProcess_process=function(t,e,i){return function(t,e){return t&&t.hasEventListeners("PreProcess")&&!e.no_events}(t,i)?function(t,e,i){var a,u,c,s=t.dom;return e=e.cloneNode(!0),(a=n.document.implementation).createHTMLDocument&&(u=a.createHTMLDocument(""),xt.each("BODY"===e.nodeName?e.childNodes:[e],(function(t){u.body.appendChild(u.importNode(t,!0))})),e="BODY"!==e.nodeName?u.body.firstChild:u.body,c=s.doc,s.doc=u),function(t,e){t.fire("PreProcess",e)}(t,__assign(__assign({},i),{node:e})),c&&(s.doc=c),e}(t,e,i):e},addTempAttr=function(t,e,n){-1===xt.inArray(e,n)&&(t.addAttributeFilter(n,(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})),e.push(n))},toHtml=function(t,e,n,i,a){return function(t,e,n){return!e.no_events&&t?function(t,e){return t.fire("PostProcess",e)}(t,__assign(__assign({},e),{content:n})).content:n}(t,a,function(t,e,n){return Serializer(t,e).serialize(n)}(e,n,i))},DomSerializer=function(t,e){var n=["data-mce-selected"],i=e&&e.dom?e.dom:gn.DOM,a=e&&e.schema?e.schema:Schema(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;var u=DomParser(t,a);DomSerializerFilters_register(u,t,i);return{schema:a,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:function(n,c){void 0===c&&(c={});var s=__assign({format:"html"},c),l=DomSerializerPreProcess_process(e,n,s),f=function(t,e,n){var i=On.trim(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||Dt(C.fromDom(e))?i:xt.trim(i)}(i,l,s),d=function(t,e,n){var i=n.selection?__assign({forced_root_block:!1},n):n,a=t.parse(e,i);return DomSerializerFilters_trimTrailingBr(a),a}(u,f,s);return"tree"===s.format?d:toHtml(e,t,a,d,s)},addRules:function(t){a.addValidElements(t)},setRules:function(t){a.setValidElements(t)},addTempAttr:curry(addTempAttr,u,n),getTempAttrs:function(){return n},getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters}},Serializer$1=function(t,e){var n=DomSerializer(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},parseDataUri=function(t){var e,n,i=decodeURIComponent(t).split(",");return(n=/data:([^;]+)/.exec(i[0]))&&(e=n[1]),{type:e,data:i[1]}},Conversions_uriToBlob=function(t){return 0===t.indexOf("blob:")?function(t){return new at((function(e,i){var rejectWithError=function(){i("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var a=new n.XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(){200===this.status?e(this.response):rejectWithError()},a.onerror=rejectWithError,a.send()}catch(t){rejectWithError()}}))}(t):0===t.indexOf("data:")?(e=t,new at((function(t){var i,a,u,c=parseDataUri(e);try{i=n.atob(c.data)}catch(e){return void t(new n.Blob([]))}for(a=new Uint8Array(i.length),u=0;u<a.length;u++)a[u]=i.charCodeAt(u);t(new n.Blob([a],{type:c.type}))}))):null;var e},Conversions_blobToDataUri=function(t){return new at((function(e){var i=new n.FileReader;i.onloadend=function(){e(i.result)},i.readAsDataURL(t)}))},Ho=parseDataUri,Lo=0,uniqueId=function(t){return(t||"blobid")+Lo++};function ImageScanner(t,e){var n={};return{findAll:function(i,a){var u;a||(a=constant(!0)),u=filter(function(t){return t?y(t.getElementsByTagName("img")):[]}(i),(function(e){var n=e.src;return!!pt.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!n||n===pt.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&a(e):0===n.indexOf("data:")&&a(e)))))}));var c=map(u,(function(t){if(n[t.src])return new at((function(e){n[t.src].then((function(n){if("string"==typeof n)return n;e({image:t,blobInfo:n.blobInfo})}))}));var i=new at((function(n,i){!function(t,e,n,i){var a,u;0!==e.src.indexOf("blob:")?(a=Ho(e.src).data,(u=t.findFirst((function(t){return t.base64()===a})))?n({image:e,blobInfo:u}):Conversions_uriToBlob(e.src).then((function(i){u=t.create(uniqueId(),i,a),t.add(u),n({image:e,blobInfo:u})}),(function(t){i(t)}))):(u=t.getByUri(e.src))?n({image:e,blobInfo:u}):Conversions_uriToBlob(e.src).then((function(i){Conversions_blobToDataUri(i).then((function(c){a=Ho(c).data,u=t.create(uniqueId(),i,a),t.add(u),n({image:e,blobInfo:u})}))}),(function(t){i(t)}))}(e,t,n,i)})).then((function(t){return delete n[t.image.src],t})).catch((function(e){return delete n[t.src],e}));return n[t.src]=i,i}));return at.all(c)}}}function Uploader(t,e){var i={},defaultHandler=function(t,i,a,u){var c,s;(c=new n.XMLHttpRequest).open("POST",e.url),c.withCredentials=e.credentials,c.upload.onprogress=function(t){u(t.loaded/t.total*100)},c.onerror=function(){a("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var t,n,u;c.status<200||c.status>=300?a("HTTP Error: "+c.status):(t=JSON.parse(c.responseText))&&"string"==typeof t.location?i((n=e.basePath,u=t.location,n?n.replace(/\/$/,"")+"/"+u.replace(/^\//,""):u)):a("Invalid JSON: "+c.responseText)},(s=new n.FormData).append("file",t.blob(),t.filename()),c.send(s)},handlerSuccess=function(t,e){return{url:e,blobInfo:t,status:!0}},handlerFailure=function(t,e){return{url:"",blobInfo:t,status:!1,error:e}},resolvePending=function(t,e){xt.each(i[t],(function(t){t(e)})),delete i[t]},uploadBlobs=function(n,a){return n=xt.grep(n,(function(e){return!t.isUploaded(e.blobUri())})),at.all(xt.map(n,(function(n){return t.isPending(n.blobUri())?function(t){var e=t.blobUri();return new at((function(t){i[e]=i[e]||[],i[e].push(t)}))}(n):function(e,n,i){return t.markPending(e.blobUri()),new at((function(a){var u,noop=function(){};try{var closeNotification_1=function(){u&&(u.close(),noop)};n(e,(function(n){closeNotification_1(),t.markUploaded(e.blobUri(),n),resolvePending(e.blobUri(),handlerSuccess(e,n)),a(handlerSuccess(e,n))}),(function(n){closeNotification_1(),t.removeFailed(e.blobUri()),resolvePending(e.blobUri(),handlerFailure(e,n)),a(handlerFailure(e,n))}),(function(t){t<0||t>100||(u||(u=i()),u.progressBar.value(t))}))}catch(t){a(handlerFailure(e,t.message))}}))}(n,e.handler,a)})))};return!1===g(e.handler)&&(e.handler=defaultHandler),{upload:function(t,n){return e.url||e.handler!==defaultHandler?uploadBlobs(t,n):new at((function(t){t([])}))}}}var Fo=0,Uuid_uuid=function(t){return t+Fo+++(e=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+e()+e()+e());var e},EditorUpload=function(t){var e,i,a=function(){var t=[],toBlobInfo=function(t){var e,i,a;if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return e=t.id||Uuid_uuid("blobid"),i=t.name||e,{id:constant(e),name:constant(i),filename:constant(i+"."+(a=t.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[a.toLowerCase()]||"dat")),blob:constant(t.blob),base64:constant(t.base64),blobUri:constant(t.blobUri||n.URL.createObjectURL(t.blob)),uri:constant(t.uri)}},get=function(t){return findFirst((function(e){return e.id()===t}))},findFirst=function(e){return filter(t,e)[0]};return{create:function(t,e,n,i){if(s(t))return toBlobInfo({id:t,name:i,blob:e,base64:n});if(l(t))return toBlobInfo(t);throw new Error("Unknown input type")},add:function(e){get(e.id())||t.push(e)},get:get,getByUri:function(t){return findFirst((function(e){return e.blobUri()===t}))},findFirst:findFirst,removeByUri:function(e){t=filter(t,(function(t){return t.blobUri()!==e||(n.URL.revokeObjectURL(t.blobUri()),!1)}))},destroy:function(){each(t,(function(t){n.URL.revokeObjectURL(t.blobUri())})),t=[]}}}(),u=function UploadStatus(){var t={},createStatus=function(t,e){return{status:t,resultUri:e}},hasBlobUri=function(e){return e in t};return{hasBlobUri:hasBlobUri,getResultUri:function(e){var n=t[e];return n?n.resultUri:null},isPending:function(e){return!!hasBlobUri(e)&&1===t[e].status},isUploaded:function(e){return!!hasBlobUri(e)&&2===t[e].status},markPending:function(e){t[e]=createStatus(1,null)},markUploaded:function(e,n){t[e]=createStatus(2,n)},removeFailed:function(e){delete t[e]},destroy:function(){t={}}}}(),c=[],aliveGuard=function(e){return function(n){return t.selection?e(n):[]}},replaceString=function(t,e,n){var i=0;do{-1!==(i=t.indexOf(e,i))&&(t=t.substring(0,i)+n+t.substr(i+e.length),i+=n.length-e.length+1)}while(-1!==i);return t},replaceImageUrl=function(t,e,n){return t=replaceString(t,'src="'+e+'"','src="'+n+'"'),t=replaceString(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')},replaceUrlInUndoStack=function(e,n){each(t.undoManager.data,(function(t){"fragmented"===t.type?t.fragments=map(t.fragments,(function(t){return replaceImageUrl(t,e,n)})):t.content=replaceImageUrl(t.content,e,n)}))},openNotification=function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},uploadImages=function(n){return e||(e=Uploader(u,{url:Settings_getImageUploadUrl(t),basePath:Settings_getImageUploadBasePath(t),credentials:Settings_getImagesUploadCredentials(t),handler:Settings_getImagesUploadHandler(t)})),scanForImages().then(aliveGuard((function(i){var u=map(i,(function(t){return t.blobInfo}));return e.upload(u,openNotification).then(aliveGuard((function(e){var u=map(e,(function(e,n){var u=i[n].image;return e.status&&Settings_shouldReplaceBlobUris(t)?function(e,n){var i;a.removeByUri(e.src),replaceUrlInUndoStack(e.src,n),t.$(e).attr({src:Settings_shouldReuseFileName(t)?(i=n,i+(-1===i.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":t.convertURL(n,"src")})}(u,e.url):e.error&&wo.uploadError(t,e.error),{element:u,status:e.status}}));return n&&n(u),u})))})))},uploadImagesAuto=function(e){if(Settings_isAutomaticUploadsEnabled(t))return uploadImages(e)},isValidDataUriImage=function(e){return!1!==forall(c,(function(t){return t(e)}))&&(0!==e.getAttribute("src").indexOf("data:")||Settings_getImagesDataImgFilter(t)(e))},scanForImages=function(){return i||(i=ImageScanner(u,a)),i.findAll(t.getBody(),isValidDataUriImage).then(aliveGuard((function(e){return e=filter(e,(function(e){return"string"!=typeof e||(wo.displayError(t,e),!1)})),each(e,(function(t){replaceUrlInUndoStack(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")})),e})))},replaceBlobUris=function(e){return e.replace(/src="(blob:[^"]+)"/g,(function(e,n){var i=u.getResultUri(n);if(i)return'src="'+i+'"';var c=a.getByUri(n);return c||(c=foldl(t.editorManager.get(),(function(t,e){return t||e.editorUpload&&e.editorUpload.blobCache.getByUri(n)}),null)),c?'src="data:'+c.blob().type+";base64,"+c.base64()+'"':e}))};return t.on("SetContent",(function(){Settings_isAutomaticUploadsEnabled(t)?uploadImagesAuto():scanForImages()})),t.on("RawSaveContent",(function(t){t.content=replaceBlobUris(t.content)})),t.on("GetContent",(function(t){t.source_view||"raw"===t.format||(t.content=replaceBlobUris(t.content))})),t.on("PostRender",(function(){t.parser.addNodeFilter("img",(function(t){each(t,(function(t){var e=t.attr("src");if(!a.getByUri(e)){var n=u.getResultUri(e);n&&t.attr("src",n)}}))}))})),{blobCache:a,addFilter:function(t){c.push(t)},uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:function(){a.destroy(),u.destroy(),i=e=null}}},PaddingBr_removeTrailingBr=function(t){var e=descendants$1(t,"br"),n=filter(function(t){for(var e=[],n=t.dom();n;)e.push(C.fromDom(n)),n=n.lastChild;return e}(t).slice(-1),isBr$1);e.length===n.length&&each(n,remove)},PaddingBr_fillWithPaddingBr=function(t){empty(t),append(t,C.fromHtml('<br data-mce-bogus="1">'))},PaddingBr_trimBlockTrailingBr=function(t){lastChild(t).each((function(e){prevSibling(e).each((function(n){Et(t)&&isBr$1(e)&&Et(n)&&remove(e)}))}))},Vo=isEq,matchesUnInheritedFormatSelector=function(t,e,n){var i=t.formatter.get(n);if(i)for(var a=0;a<i.length;a++)if(!1===i[a].inherit&&t.dom.is(e,i[a].selector))return!0;return!1},matchParents=function(t,e,n,i){var a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,(function(e){return!!matchesUnInheritedFormatSelector(t,e,n)||(e.parentNode===a||!!matchNode(t,e,n,i,!0))})),matchNode(t,e,n,i))},matchName=function(t,e,n){return!!Vo(e,n.inline)||(!!Vo(e,n.block)||(n.selector?1===e.nodeType&&t.is(e,n.selector):void 0))},matchItems=function(t,e,n,i,a,u){var c,s,l,f=n[i];if(n.onmatch)return n.onmatch(e,n,i);if(f)if(void 0===f.length){for(c in f)if(f.hasOwnProperty(c)){if(s="attributes"===i?t.getAttrib(e,c):getStyle(t,e,c),a&&!s&&!n.exact)return;if((!a||n.exact)&&!Vo(s,normalizeStyleValue(t,replaceVars(f[c],u),c)))return}}else for(l=0;l<f.length;l++)if("attributes"===i?t.getAttrib(e,f[l]):getStyle(t,e,f[l]))return n;return n},matchNode=function(t,e,n,i,a){var u,c,s,l,f=t.formatter.get(n),d=t.dom;if(f&&e)for(c=0;c<f.length;c++)if(u=f[c],matchName(t.dom,e,u)&&matchItems(d,e,u,"attributes",a,i)&&matchItems(d,e,u,"styles",a,i)){if(l=u.classes)for(s=0;s<l.length;s++)if(!t.dom.hasClass(e,l[s]))return;return u}},match=function(t,e,n,i){var a;return i?matchParents(t,i,e,n):(i=t.selection.getNode(),!!matchParents(t,i,e,n)||!((a=t.selection.getStart())===i||!matchParents(t,a,e,n)))},matchAll=function(t,e,n){var i,a=[],u={};return i=t.selection.getStart(),t.dom.getParent(i,(function(i){var c,s;for(c=0;c<e.length;c++)s=e[c],!u[s]&&matchNode(t,i,s,n)&&(u[s]=!0,a.push(s))}),t.dom.getRoot()),a},canApply=function(t,e){var n,i,a,u,c,s=t.formatter.get(e),l=t.dom;if(s)for(n=t.selection.getStart(),i=getParents$1(l,n),u=s.length-1;u>=0;u--){if(!(c=s[u].selector)||s[u].defaultBlock)return!0;for(a=i.length-1;a>=0;a--)if(l.is(i[a],c))return!0}return!1},splitText=function(t,e){return t.splitText(e)},split$1=function(t){var e=t.startContainer,n=t.startOffset,i=t.endContainer,a=t.endOffset;return e===i&&Z.isText(e)?n>0&&n<e.nodeValue.length&&(e=(i=splitText(e,n)).previousSibling,a>n?(e=i=splitText(i,a-=n).previousSibling,a=i.nodeValue.length,n=0):a=0):(Z.isText(e)&&n>0&&n<e.nodeValue.length&&(e=splitText(e,n),n=0),Z.isText(i)&&a>0&&a<i.nodeValue.length&&(a=(i=splitText(i,a).previousSibling).nodeValue.length)),{startContainer:e,startOffset:n,endContainer:i,endOffset:a}},normalize$1=function(t,e,n){if(0!==n){var i=t.data.slice(e,e+n),a=e+n>=t.data.length,u=0===e;t.replaceData(e,n,function(t,e,n){return foldl(t,(function(i,a){return isWhiteSpace$1(a)||_r(a)?i.previousCharIsSpace||""===i.str&&e||i.str.length===t.length-1&&n?{previousCharIsSpace:!1,str:i.str+" "}:{previousCharIsSpace:!0,str:i.str+" "}:{previousCharIsSpace:!1,str:i.str+a}}),{previousCharIsSpace:!1,str:""}).str}(i,u,a))}},normalizeWhitespaceAfter=function(t,e){var n,i=t.data.slice(e),a=i.length-(n=i,n.replace(/^\s+/g,"")).length;return normalize$1(t,e,a)},hasWhitespacePreserveParent=function(t,e){var n,i,a,u=C.fromDom(t),c=C.fromDom(e);return n=c,i="pre,code",a=curry(eq,u),ancestor$1(n,i,a).isSome()},isContent$1=function(t,e){return isCaretCandidate(e)&&!1===function(t,e){return Z.isText(e)&&/^[ \t\r\n]*$/.test(e.data)&&!1===hasWhitespacePreserveParent(t,e)}(t,e)||function(t){return Z.isElement(t)&&"A"===t.nodeName&&t.hasAttribute("name")}(e)||Uo(e)},Uo=Z.hasAttribute("data-mce-bookmark"),jo=Z.hasAttribute("data-mce-bogus"),Wo=Z.hasAttributeValue("data-mce-bogus","all"),Empty_isEmpty=function(t,e){return void 0===e&&(e=!0),function(t,e){var n,i=0;if(isContent$1(t,t))return!1;if(!(n=t.firstChild))return!0;var a=new cn(n,t);do{if(e){if(Wo(n)){n=a.next(!0);continue}if(jo(n)){n=a.next();continue}}if(Z.isBr(n))i++,n=a.next();else{if(isContent$1(t,n))return!1;n=a.next()}}while(n);return i<=1}(t.dom(),e)},reposition=function(t,e){return function(t,e){var n=t.container(),i=t.offset();return!1===Zn.isTextPosition(t)&&n===e.parentNode&&i>Zn.before(e).offset()}(e,t)?Zn(e.container(),e.offset()-1):e},getPreviousSiblingCaretPosition=function(t){return isCaretCandidate(t.previousSibling)?c.some((e=t.previousSibling,Z.isText(e)?Zn(e,e.data.length):Zn.after(e))):t.previousSibling?Or.lastPositionIn(t.previousSibling):c.none();var e},getNextSiblingCaretPosition=function(t){return isCaretCandidate(t.nextSibling)?c.some((e=t.nextSibling,Z.isText(e)?Zn(e,0):Zn.before(e))):t.nextSibling?Or.firstPositionIn(t.nextSibling):c.none();var e},findCaretPositionBackwards=function(t,e){return getPreviousSiblingCaretPosition(e).orThunk((function(){return getNextSiblingCaretPosition(e)})).orThunk((function(){return function(t,e){var n=Zn.before(e.previousSibling?e.previousSibling:e.parentNode);return Or.prevPosition(t,n).fold((function(){return Or.nextPosition(t,Zn.after(e))}),c.some)}(t,e)}))},findCaretPositionForward=function(t,e){return getNextSiblingCaretPosition(e).orThunk((function(){return getPreviousSiblingCaretPosition(e)})).orThunk((function(){return function(t,e){return Or.nextPosition(t,Zn.after(e)).fold((function(){return Or.prevPosition(t,Zn.before(e))}),c.some)}(t,e)}))},findCaretPosOutsideElmAfterDelete=function(t,e,n){return function(t,e,n){return t?findCaretPositionForward(e,n):findCaretPositionBackwards(e,n)}(t,e,n).map(curry(reposition,n))},setSelection=function(t,e,n){n.fold((function(){t.focus()}),(function(n){t.selection.setRng(n.toRange(),e)}))},isBlock$2=function(t,e){return e&&t.schema.getBlockElements().hasOwnProperty(H(e))},paddEmptyBlock=function(t){if(Empty_isEmpty(t)){var e=C.fromHtml('<br data-mce-bogus="1">');return empty(t),append(t,e),c.some(Zn.before(e.dom()))}return c.none()},deleteNormalized=function(t,e,n){var i,a,u,s,l=prevSibling(t).filter(F),f=nextSibling(t).filter(F);return remove(t),(i=l,a=f,u=e,s=function(t,e,i){var a=t.dom(),u=e.dom(),c=a.data.length;return function(t,e,n){var i=rTrim(t.data).length;t.appendData(e.data),remove(C.fromDom(e)),n&&normalizeWhitespaceAfter(t,i)}(a,u,n),i.container()===u?Zn(a,c):i},i.isSome()&&a.isSome()&&u.isSome()?c.some(s(i.getOrDie(),a.getOrDie(),u.getOrDie())):c.none()).orThunk((function(){return n&&(l.each((function(t){return e=t.dom(),n=t.dom().length,i=e.data.slice(0,n),a=i.length-rTrim(i).length,normalize$1(e,n-a,a);var e,n,i,a})),f.each((function(t){return normalizeWhitespaceAfter(t.dom(),0)}))),e}))},DeleteElement_deleteElement=function(t,e,n,i){void 0===i&&(i=!0);var a,u=findCaretPosOutsideElmAfterDelete(e,t.getBody(),n.dom()),s=ancestor(n,curry(isBlock$2,t),(a=t.getBody(),function(t){return t.dom()===a})),l=deleteNormalized(n,u,function(t,e){return has(t.schema.getTextInlineElements(),H(e))}(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(paddEmptyBlock).fold((function(){i&&setSelection(t,e,l)}),(function(n){i&&setSelection(t,e,c.some(n))}))},qo=On.ZWSP,isCaretContainerEmpty=function(t){return function(t){for(var e=[];t;){if(3===t.nodeType&&t.nodeValue!==qo||t.childNodes.length>1)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e}(t).length>0},findFirstTextNode=function(t){if(t){var e=new cn(t,t);for(t=e.current();t;t=e.next())if(Z.isText(t))return t}return null},createCaretContainer=function(t){var e=C.fromTag("span");return setAll(e,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&append(e,C.fromText(qo)),e},removeCaretContainerNode=function(t,e,n){void 0===n&&(n=!0);var i=t.dom,a=t.selection;if(isCaretContainerEmpty(e))DeleteElement_deleteElement(t,!1,C.fromDom(e),n);else{var u=a.getRng(),c=i.getParent(e,i.isBlock),s=function(t){var e=findFirstTextNode(t);return e&&e.nodeValue.charAt(0)===qo&&e.deleteData(0,1),e}(e);u.startContainer===s&&u.startOffset>0&&u.setStart(s,u.startOffset-1),u.endContainer===s&&u.endOffset>0&&u.setEnd(s,u.endOffset-1),i.remove(e,!0),c&&i.isEmpty(c)&&PaddingBr_fillWithPaddingBr(C.fromDom(c)),a.setRng(u)}},removeCaretContainer=function(t,e,n){void 0===n&&(n=!0);var i=t.dom,a=t.selection;if(e)removeCaretContainerNode(t,e,n);else if(!(e=getParentCaretContainer(t.getBody(),a.getStart())))for(;e=i.get("_mce_caret");)removeCaretContainerNode(t,e,!1)},insertCaretContainerNode=function(t,e,n){var i=t.dom,a=i.getParent(n,curry(isTextBlock$1,t));a&&i.isEmpty(a)?n.parentNode.replaceChild(e,n):(PaddingBr_removeTrailingBr(C.fromDom(n)),i.isEmpty(n)?n.parentNode.replaceChild(e,n):i.insertAfter(e,n))},appendNode=function(t,e){return t.appendChild(e),e},insertFormatNodesIntoCaretContainer=function(t,e){var n=foldr(t,(function(t,e){return appendNode(t,e.cloneNode(!1))}),e);return appendNode(n,n.ownerDocument.createTextNode(qo))},setup$3=function(t){t.on("mouseup keydown",(function(e){!function(t,e){var n=t.selection,i=t.getBody();removeCaretContainer(t,null,!1),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==qo||removeCaretContainer(t,getParentCaretContainer(i,n.getStart())),37!==e&&39!==e||removeCaretContainer(t,getParentCaretContainer(i,n.getStart()))}(t,e.keyCode)}))},isFormatElement=function(t,e){return t.schema.getTextInlineElements().hasOwnProperty(H(e))&&!isCaretNode(e.dom())&&!Z.isBogus(e.dom())},$o={},Go=bt.filter,Xo=bt.each;!function(t,e){var n=$o[t];n||($o[t]=n=[]),$o[t].push(e)}("pre",(function(t){var e,n,i=t.selection.getRng();e=Z.matchNodeNames(["pre"]),i.collapsed||(n=t.selection.getSelectedBlocks(),Xo(Go(Go(n,e),(function(t){return e(t.previousSibling)&&-1!==bt.indexOf(n,t.previousSibling)})),(function(t){var e,n;e=t.previousSibling,un(n=t).remove(),un(e).append("<br><br>").append(n.childNodes)})))}));var Ko=xt.each,ElementUtils=function(t){this.compare=function(e,n){if(e.nodeName!==n.nodeName)return!1;var getAttribs=function(e){var n={};return Ko(t.getAttribs(e),(function(i){var a=i.nodeName.toLowerCase();0!==a.indexOf("_")&&"style"!==a&&0!==a.indexOf("data-")&&(n[a]=t.getAttrib(e,a))})),n},compareObjects=function(t,e){var n,i;for(i in t)if(t.hasOwnProperty(i)){if(void 0===(n=e[i]))return!1;if(t[i]!==n)return!1;delete e[i]}for(i in e)if(e.hasOwnProperty(i))return!1;return!0};return!!compareObjects(getAttribs(e),getAttribs(n))&&(!!compareObjects(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style")))&&(!Bookmarks_isBookmarkNode(e)&&!Bookmarks_isBookmarkNode(n)))}},Yo=/^(src|href|style)$/,Jo=xt.each,Zo=isEq,isChildOfInlineParent=function(t,e,n){return t.isChildOf(e,n)&&e!==n&&!t.isBlock(n)},getContainer=function(t,e,n){var i,a;if(i=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],Z.isElement(i)){var u=i.childNodes.length-1;!n&&a&&a--,i=i.childNodes[a>u?u:a]}return Z.isText(i)&&n&&a>=i.nodeValue.length&&(i=new cn(i,t.getBody()).next()||i),Z.isText(i)&&!n&&0===a&&(i=new cn(i,t.getBody()).prev()||i),i},wrap$3=function(t,e,n,i){var a=t.create(n,i);return e.parentNode.insertBefore(a,e),a.appendChild(e),a},wrapWithSiblings=function(t,e,n,i,a){var u=C.fromDom(e),c=C.fromDom(t.create(i,a)),s=n?nextSiblings(u):prevSiblings(u);return append$1(c,s),n?(I(u,c),prepend(c,u)):(after(u,c),append(c,u)),c.dom()},find$4=function(t,e,n,i){return!(e=getNonWhiteSpaceSibling(e,n,i))||"BR"===e.nodeName||t.isBlock(e)},removeFormat=function(t,e,n,i,a){var u,c=t.dom;if(!function(t,e,n){return!!Zo(e,n.inline)||(!!Zo(e,n.block)||(n.selector?Z.isElement(e)&&t.is(e,n.selector):void 0))}(c,i,e)&&!function(t,e){return e.links&&"A"===t.nodeName}(i,e))return!1;var s=i;if("all"!==e.remove){Jo(e.styles,(function(t,i){t=normalizeStyleValue(c,replaceVars(t,n),i),"number"==typeof i&&(i=t,a=null),(e.remove_similar||!a||Zo(getStyle(c,a,i),t))&&c.setStyle(s,i,""),u=!0})),u&&""===c.getAttrib(s,"style")&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style")),Jo(e.attributes,(function(t,i){var u;if(t=replaceVars(t,n),"number"==typeof i&&(i=t,a=null),e.remove_similar||!a||Zo(c.getAttrib(a,i),t)){if("class"===i&&(t=c.getAttrib(s,i))&&(u="",Jo(t.split(/\s+/),(function(t){/mce\-\w+/.test(t)&&(u+=(u?" ":"")+t)})),u))return void c.setAttrib(s,i,u);"class"===i&&s.removeAttribute("className"),Yo.test(i)&&s.removeAttribute("data-mce-"+i),s.removeAttribute(i)}})),Jo(e.classes,(function(t){t=replaceVars(t,n),a&&!c.hasClass(a,t)||c.removeClass(s,t)}));for(var l=c.getAttribs(s),f=0;f<l.length;f++){var d=l[f].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return!1}}return"none"!==e.remove?(function(t,e,n){var i,a=e.parentNode,u=t.dom,c=Settings_getForcedRootBlock(t);n.block&&(c?a===u.getRoot()&&(n.list_block&&Zo(e,n.list_block)||Jo(xt.grep(e.childNodes),(function(e){isValid(t,c,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=wrap$3(u,e,c),u.setAttribs(i,t.settings.forced_root_block_attrs)):i=0}))):u.isBlock(e)&&!u.isBlock(a)&&(find$4(u,e,!1)||find$4(u,e.firstChild,!0,!0)||e.insertBefore(u.create("br"),e.firstChild),find$4(u,e,!0)||find$4(u,e.lastChild,!1,!0)||e.appendChild(u.create("br")))),n.selector&&n.inline&&!Zo(n.inline,e)||u.remove(e,!0)}(t,s,e),!0):void 0},remove$7=function(t,e,n,i,a){var u,s,l=t.formatter.get(e),f=l[0],d=!0,m=t.dom,g=t.selection,splitToFormatRoot=function(i){var u=function(t,e,n,i,a){var u;return Jo(getParents$1(t.dom,e.parentNode).reverse(),(function(e){var c;u||"_start"===e.id||"_end"===e.id||(c=matchNode(t,e,n,i,a))&&!1!==c.split&&(u=e)})),u}(t,i,e,n,a);return function(t,e,n,i,a,u,c,s){var l,f,d,m,g,h,p=t.dom;if(n){for(h=n.parentNode,l=i.parentNode;l&&l!==h;l=l.parentNode){for(f=p.clone(l,!1),g=0;g<e.length;g++)if(removeFormat(t,e[g],s,f,f)){f=0;break}f&&(d&&f.appendChild(d),m||(m=f),d=f)}!u||c.mixed&&p.isBlock(n)||(i=p.split(n,i)),d&&(a.parentNode.insertBefore(d,a),m.appendChild(a))}return i}(t,l,u,i,i,!0,f,n)},process=function(e){var i,a,u,c,s;if(Z.isElement(e)&&m.getContentEditable(e)&&(c=d,d="true"===m.getContentEditable(e),s=!0),i=xt.grep(e.childNodes),d&&!s)for(a=0,u=l.length;a<u&&!removeFormat(t,l[a],n,e,e);a++);if(f.deep&&i.length){for(a=0,u=i.length;a<u;a++)process(i[a]);s&&(d=c)}},unwrap=function(t){var e=m.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return function(t){return Bookmarks_isBookmarkNode(t)&&Z.isElement(t)&&("_start"===t.id||"_end"===t.id)}(n)&&(n=n[t?"firstChild":"lastChild"]),Z.isText(n)&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),m.remove(e,!0),n},removeRngStyle=function(e){var n,i,a=e.commonAncestorContainer,u=expandRng(t,e,l,!0);if(f.split){if(u=split$1(u),(n=getContainer(t,u,!0))!==(i=getContainer(t,u))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),a&&/^T(HEAD|BODY|FOOT|R)$/.test(a.nodeName)&&function(t){return/^(TH|TD)$/.test(t.nodeName)}(i)&&i.firstChild&&(i=i.firstChild||i),isChildOfInlineParent(m,n,i)){var s=c.from(n.firstChild).getOr(n);return splitToFormatRoot(wrapWithSiblings(m,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void unwrap(!0)}if(isChildOfInlineParent(m,i,n)){s=c.from(i.lastChild).getOr(i);return splitToFormatRoot(wrapWithSiblings(m,s,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void unwrap(!1)}n=wrap$3(m,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=wrap$3(m,i,"span",{id:"_end","data-mce-type":"bookmark"});var d=m.createRng();d.setStartAfter(n),d.setEndBefore(i),RangeWalk_walk(m,d,(function(t){each(t,(function(t){Bookmarks_isBookmarkNode(t)||Bookmarks_isBookmarkNode(t.parentNode)||splitToFormatRoot(t)}))})),splitToFormatRoot(n),splitToFormatRoot(i),n=unwrap(!0),i=unwrap()}else n=i=splitToFormatRoot(n);u.startContainer=n.parentNode?n.parentNode:n,u.startOffset=m.nodeIndex(n),u.endContainer=i.parentNode?i.parentNode:i,u.endOffset=m.nodeIndex(i)+1}RangeWalk_walk(m,u,(function(e){Jo(e,(function(e){process(e),Z.isElement(e)&&"underline"===t.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===getTextDecoration(m,e.parentNode)&&removeFormat(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)}))}))};if(i)isNode(i)?((s=m.createRng()).setStartBefore(i),s.setEndAfter(i),removeRngStyle(s)):removeRngStyle(i);else if("false"!==m.getContentEditable(g.getNode()))g.isCollapsed()&&f.inline&&!m.select("td[data-mce-selected],th[data-mce-selected]").length?function(t,e,n,i){var a,u,c,s,l,f,d,m=t.dom,g=t.selection,h=[],p=g.getRng();for(a=p.startContainer,u=p.startOffset,l=a,3===a.nodeType&&(u!==a.nodeValue.length&&(s=!0),l=l.parentNode);l;){if(matchNode(t,l,e,n,i)){f=l;break}l.nextSibling&&(s=!0),h.push(l),l=l.parentNode}if(f)if(s){c=g.getBookmark(),p.collapse(!0);var v=expandRng(t,p,t.formatter.get(e),!0);v=split$1(v),t.formatter.remove(e,n,v),g.moveToBookmark(c)}else{d=getParentCaretContainer(t.getBody(),f);var b=createCaretContainer(!1).dom(),y=insertFormatNodesIntoCaretContainer(h,b);insertCaretContainerNode(t,b,d||f),removeCaretContainerNode(t,d,!1),g.setCursorLocation(y,1),m.isEmpty(f)&&m.remove(f)}}(t,e,n,a):(u=rr.getPersistentBookmark(t.selection,!0),removeRngStyle(g.getRng()),g.moveToBookmark(u),f.inline&&match(t,e,n,g.getStart())&&moveStart(m,g,g.getRng()),t.nodeChanged());else{i=g.getNode();for(var h=0,p=l.length;h<p&&(!l[h].ceFalseOverride||!removeFormat(t,l[h],n,i,i));h++);}},Qo=xt.each,isElementNode=function(t){return Z.isElement(t)&&!Bookmarks_isBookmarkNode(t)&&!isCaretNode(t)&&!Z.isBogus(t)},findElementSibling=function(t,e){var n;for(n=t;n;n=n[e]){if(Z.isText(n)&&0!==n.nodeValue.length)return t;if(Z.isElement(n)&&!Bookmarks_isBookmarkNode(n))return n}return t},mergeSiblingsNodes=function(t,e,n){var i,a,u=new ElementUtils(t);if(e&&n&&(e=findElementSibling(e,"previousSibling"),n=findElementSibling(n,"nextSibling"),u.compare(e,n))){for(i=e.nextSibling;i&&i!==n;)a=i,i=i.nextSibling,e.appendChild(a);return t.remove(n),xt.each(xt.grep(n.childNodes),(function(t){e.appendChild(t)})),e}return n},processChildElements=function(t,e,n){Qo(t.childNodes,(function(t){isElementNode(t)&&(e(t)&&n(t),t.hasChildNodes()&&processChildElements(t,e,n))}))},hasStyle=function(t,e){return curry((function(e,n){return!(!n||!getStyle(t,n,e))}),e)},applyStyle=function(t,e,n){return curry((function(e,n,i){t.setStyle(i,e,n),""===i.getAttribute("style")&&i.removeAttribute("style"),unwrapEmptySpan(t,i)}),e,n)},unwrapEmptySpan=function(t,e){"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},processUnderlineAndColor=function(t,e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=getTextDecoration(t,e.parentNode),t.getStyle(e,"color")&&n?t.setStyle(e,"text-decoration",n):t.getStyle(e,"text-decoration")===n&&t.setStyle(e,"text-decoration",null))},mergeWithChildren=function(t,e,n,i){Qo(e,(function(e){Qo(t.dom.select(e.inline,i),(function(i){isElementNode(i)&&removeFormat(t,e,n,i,e.exact?i:null)})),function(t,e,n){if(e.clear_child_styles){var i=e.links?"*:not(a)":"*";Qo(t.select(i,n),(function(n){isElementNode(n)&&Qo(e.styles,(function(e,i){t.setStyle(n,i,"")}))}))}}(t.dom,e,i)}))},normalizeBlockSelectionRange=function(t){var e=Zn.fromRangeStart(t),i=Zn.fromRangeEnd(t),a=t.commonAncestorContainer;return Or.fromPosition(!1,a,i).map((function(u){return!isInSameBlock(e,i,a)&&isInSameBlock(e,u,a)?function(t,e,i,a){var u=n.document.createRange();return u.setStart(t,e),u.setEnd(i,a),u}(e.container(),e.offset(),u.container(),u.offset()):t})).getOr(t)},RangeNormalizer_normalize=function(t){return t.collapsed?t:normalizeBlockSelectionRange(t)},ti=xt.each,applyFormat=function(t,e,n,i){var a,u,c=t.formatter.get(e),s=c[0],l=!i&&t.selection.isCollapsed(),f=t.dom,d=t.selection,setElementFormat=function(t,e){if(e=e||s,t){if(e.onformat&&e.onformat(t,e,n,i),ti(e.styles,(function(e,i){f.setStyle(t,i,replaceVars(e,n))})),e.styles){var a=f.getAttrib(t,"style");a&&f.setAttrib(t,"data-mce-style",a)}ti(e.attributes,(function(e,i){f.setAttrib(t,i,replaceVars(e,n))})),ti(e.classes,(function(e){e=replaceVars(e,n),f.hasClass(t,e)||f.addClass(t,e)}))}},applyNodeStyle=function(t,e){var n=!1;return!!s.selector&&(ti(t,(function(t){if(!("collapsed"in t)||t.collapsed===l)return f.is(e,t.selector)&&!isCaretNode(e)?(setElementFormat(e,t),n=!0,!1):void 0})),n)},applyRngStyle=function(i,a,u,l){var f,d,m=[],g=!0;f=s.inline||s.block,d=i.create(f),setElementFormat(d),RangeWalk_walk(i,a,(function(a){var u,process=function(a){var h=!1,p=g,v=a.nodeName.toLowerCase(),b=a.parentNode.nodeName.toLowerCase();if(Z.isElement(a)&&i.getContentEditable(a)&&(p=g,g="true"===i.getContentEditable(a),h=!0),isEq(v,"br"))return u=0,void(s.block&&i.remove(a));if(s.wrapper&&matchNode(t,a,e,n))u=0;else{if(g&&!h&&s.block&&!s.wrapper&&isTextBlock$1(t,v)&&isValid(t,b,f))return a=i.rename(a,f),setElementFormat(a),m.push(a),void(u=0);if(s.selector){var y=applyNodeStyle(c,a);if(!s.inline||y)return void(u=0)}!g||h||!isValid(t,f,v)||!isValid(t,b,f)||!l&&3===a.nodeType&&1===a.nodeValue.length&&65279===a.nodeValue.charCodeAt(0)||isCaretNode(a)||s.inline&&i.isBlock(a)?(u=0,ti(xt.grep(a.childNodes),process),h&&(g=p),u=0):(u||(u=i.clone(d,!1),a.parentNode.insertBefore(u,a),m.push(u)),u.appendChild(a))}};ti(a,process)})),!0===s.links&&ti(m,(function(t){var process=function(t){"A"===t.nodeName&&setElementFormat(t,s),ti(xt.grep(t.childNodes),process)};process(t)})),ti(m,(function(a){var u,getChildElementNode=function(t){var e=!1;return ti(t.childNodes,(function(t){if(function(t){return t&&1===t.nodeType&&!Bookmarks_isBookmarkNode(t)&&!isCaretNode(t)&&!Z.isBogus(t)}(t))return e=t,!1})),e};u=function(t){var e=0;return ti(t.childNodes,(function(t){(function(t){return t&&Z.isText(t)&&0===t.length})(t)||Bookmarks_isBookmarkNode(t)||e++})),e}(a),!(m.length>1)&&i.isBlock(a)||0!==u?(s.inline||s.wrapper)&&(s.exact||1!==u||(a=function(t){var e,n;return(e=getChildElementNode(t))&&!Bookmarks_isBookmarkNode(e)&&matchName(i,e,s)&&(n=i.clone(e,!1),setElementFormat(n),i.replace(n,t,!0),i.remove(e,!0)),n||t}(a)),mergeWithChildren(t,c,n,a),function(t,e,n,i,a){matchNode(t,a.parentNode,n,i)&&removeFormat(t,e,i,a)||e.merge_with_parents&&t.dom.getParent(a.parentNode,(function(u){if(matchNode(t,u,n,i))return removeFormat(t,e,i,a),!0}))}(t,s,e,n,a),function(t,e,n,i){e.styles&&e.styles.backgroundColor&&processChildElements(i,hasStyle(t,"fontSize"),applyStyle(t,"backgroundColor",replaceVars(e.styles.backgroundColor,n)))}(i,s,n,a),function(t,e,n,i){"sub"!==e.inline&&"sup"!==e.inline||(processChildElements(i,hasStyle(t,"fontSize"),applyStyle(t,"fontSize","")),t.remove(t.select("sup"===e.inline?"sub":"sup",i),!0))}(i,s,0,a),function(t,e,n,i){i&&!1!==e.merge_siblings&&(i=mergeSiblingsNodes(t,getNonWhiteSpaceSibling(i),i),i=mergeSiblingsNodes(t,i,getNonWhiteSpaceSibling(i,!0)))}(i,s,0,a)):i.remove(a,!0)}))};if("false"!==f.getContentEditable(d.getNode())){if(s){if(i)isNode(i)?applyNodeStyle(c,i)||((u=f.createRng()).setStartBefore(i),u.setEndAfter(i),applyRngStyle(f,expandRng(t,u,c),0,!0)):applyRngStyle(f,i,0,!0);else if(l&&s.inline&&!f.select("td[data-mce-selected],th[data-mce-selected]").length)!function(t,e,n){var i,a,u,c,s,l,f=t.selection;c=(i=f.getRng()).startOffset,l=i.startContainer.nodeValue,(a=getParentCaretContainer(t.getBody(),f.getStart()))&&(u=findFirstTextNode(a));var d,m,g=/[^\s\u00a0\u00ad\u200b\ufeff]/;l&&c>0&&c<l.length&&g.test(l.charAt(c))&&g.test(l.charAt(c-1))?(s=f.getBookmark(),i.collapse(!0),i=expandRng(t,i,t.formatter.get(e)),i=split$1(i),t.formatter.apply(e,n,i),f.moveToBookmark(s)):(a&&u.nodeValue===qo||(d=t.getDoc(),m=createCaretContainer(!0).dom(),u=(a=d.importNode(m,!0)).firstChild,i.insertNode(a),c=1),t.formatter.apply(e,n,a),f.setCursorLocation(u,c))}(t,e,n);else{var m=t.selection.getNode();t.settings.forced_root_block||!c[0].defaultBlock||f.getParent(m,f.isBlock)||applyFormat(t,c[0].defaultBlock),t.selection.setRng(RangeNormalizer_normalize(t.selection.getRng())),a=rr.getPersistentBookmark(t.selection,!0),applyRngStyle(f,expandRng(t,d.getRng(),c)),s.styles&&function(t,e,n,i){(e.styles.color||e.styles.textDecoration)&&(xt.walk(i,curry(processUnderlineAndColor,t),"childNodes"),processUnderlineAndColor(t,i))}(f,s,0,m),d.moveToBookmark(a),moveStart(f,d,d.getRng()),t.nodeChanged()}!function(t,e){Xo($o[t],(function(t){t(e)}))}(e,t)}}else{i=d.getNode();for(var g=0,h=c.length;g<h;g++)if(c[g].ceFalseOverride&&f.is(i,c[g].selector))return void setElementFormat(i,c[g])}},updateAndFireChangeCallbacks=function(t,e,n,i){var a=x(n.get()),u={},c={},s=filter(getParents$1(t.dom,e),(function(t){return 1===t.nodeType&&!t.getAttribute("data-mce-bogus")}));each$1(i,(function(e,n){xt.each(s,(function(i){return t.formatter.matchNode(i,n,{},e.similar)?(-1===a.indexOf(n)&&(each(e.callbacks,(function(t){t(!0,{node:i,format:n,parents:s})})),u[n]=e.callbacks),c[n]=e.callbacks,!1):!matchesUnInheritedFormatSelector(t,i,n)&&void 0}))}));var l=filterRemainingFormats(n.get(),c,e,s);n.set(__assign(__assign({},u),l))},filterRemainingFormats=function(t,e,n,i){return bifilter(t,(function(t,a){return!!has(e,a)||(each(t,(function(t){t(!1,{node:n,format:a,parents:i})})),!1)})).t},formatChanged=function(t,e,n,i,a){return null===e.get()&&function(t,e){var n=Cell({});t.set({}),e.on("NodeChange",(function(i){updateAndFireChangeCallbacks(e,i.element,n,t.get())}))}(e,t),function(t,e,n,i){var a=t.get();each(e.split(","),(function(t){a[t]||(a[t]={similar:i,callbacks:[]}),a[t].callbacks.push(n)})),t.set(a)}(e,n,i,a),{unbind:function(){return function(t,e,n){var i=t.get();each(e.split(","),(function(t){i[t].callbacks=filter(i[t].callbacks,(function(t){return t!==n})),0===i[t].callbacks.length&&delete i[t]})),t.set(i)}(e,n,i)}}},DefaultFormats_get=function(t){var e={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,n,i){xt.each(i,(function(n,i){t.setAttrib(e,i,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return xt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(t){e[t]={block:t,remove:"all"}})),e};var ei,ni=xt.each,ri=gn.DOM,parsedSelectorToHtml=function(t,e){var n,i,a,u=e&&e.schema||Schema({}),createElement=function(t){var e;return i="string"==typeof t?{name:t,classes:[],attrs:{}}:t,function(t,e){e.classes.length&&ri.addClass(t,e.classes.join(" ")),ri.setAttribs(t,e.attrs)}(e=ri.create(i.name),i),e},wrapInHtml=function(t,e,n){var i,a,c,s=e.length>0&&e[0],l=s&&s.name;if(c=function(t,e){var n="string"!=typeof t?t.nodeName.toLowerCase():t,i=u.getElementRule(n),a=i&&i.parentsRequired;return!(!a||!a.length)&&(e&&-1!==xt.inArray(a,e)?e:a[0])}(t,l))l===c?(a=e[0],e=e.slice(1)):a=c;else if(s)a=e[0],e=e.slice(1);else if(!n)return t;return a&&(i=createElement(a)).appendChild(t),n&&(i||(i=ri.create("div")).appendChild(t),xt.each(n,(function(e){var n=createElement(e);i.insertBefore(n,t)}))),wrapInHtml(i,e,a&&a.siblings)};return t&&t.length?(i=t[0],n=createElement(i),(a=ri.create("div")).appendChild(wrapInHtml(n,t.slice(1),i.siblings)),a):""},parseSelectorItem=function(t){var e,n={classes:[],attrs:{}};return"*"!==(t=n.selector=xt.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(t,e,i,a,u){switch(e){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==xt.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===a){var c=u.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""}))),n.name=e||"div",n},getCssText=function(t,e){var n,i,a,u,c,s,l="";if(!1===(s=t.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var f,removeVars=function(t){return t.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(s=e.preview)?"":(n=e.block||e.inline||"span",(u=(f=e.selector)&&"string"==typeof f?(f=(f=f.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),xt.map(f.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(t){var e=xt.map(t.split(/(?:~\+|~|\+)/),parseSelectorItem),n=e.pop();return e.length&&(n.siblings=e),n})).reverse()):[]).length?(u[0].name||(u[0].name=n),n=e.selector,i=parsedSelectorToHtml(u,t)):i=parsedSelectorToHtml([n],t),a=ri.select(n,i)[0]||i.firstChild,ni(e.styles,(function(t,e){(t=removeVars(t))&&ri.setStyle(a,e,t)})),ni(e.attributes,(function(t,e){(t=removeVars(t))&&ri.setAttrib(a,e,t)})),ni(e.classes,(function(t){t=removeVars(t),ri.hasClass(a,t)||ri.addClass(a,t)})),t.fire("PreviewFormats"),ri.setStyles(i,{position:"absolute",left:-65535}),t.getBody().appendChild(i),c=ri.getStyle(t.getBody(),"fontSize",!0),c=/px$/.test(c)?parseInt(c,10):0,ni(s.split(" "),(function(e){var n=ri.getStyle(a,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=ri.getStyle(t.getBody(),e,!0),"#ffffff"===ri.toHex(n).toLowerCase())||"color"===e&&"#000000"===ri.toHex(n).toLowerCase())){if("font-size"===e&&/em|%$/.test(n)){if(0===c)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*c+"px"}"border"===e&&n&&(l+="padding:0 2px;"),l+=e+":"+n+";"}})),t.fire("AfterPreviewFormats"),ri.remove(i),l)},toggle=function(t,e,n,i,a){var u=e.get(n);!match(t,n,i,a)||"toggle"in u[0]&&!u[0].toggle?applyFormat(t,n,i,a):remove$7(t,n,i,a)},FormatShortcuts_setup=function(t){t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(var e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])},Formatter=function(t){var e=function FormatRegistry(t){var e={},register=function(t,n){t&&("string"!=typeof t?xt.each(t,(function(t,e){register(e,t)})):(f(n)||(n=[n]),xt.each(n,(function(t){void 0===t.deep&&(t.deep=!t.selector),void 0===t.split&&(t.split=!t.selector||t.inline),void 0===t.remove&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))})),e[t]=n))};return register(DefaultFormats_get(t.dom)),register(t.settings.formats),{get:function(t){return t?e[t]:e},has:function(t){return has(e,t)},register:register,unregister:function(t){return t&&e[t]&&delete e[t],e}}}(t),n=Cell(null);return FormatShortcuts_setup(t),setup$3(t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:curry(applyFormat,t),remove:curry(remove$7,t),toggle:curry(toggle,t,e),match:curry(match,t),matchAll:curry(matchAll,t),matchNode:curry(matchNode,t),canApply:curry(canApply,t),formatChanged:curry(formatChanged,t,n),getCssText:curry(getCssText,t)}},oi=0,ii=2,ai=1,Diff_diff=function(t,e){var n=t.length+e.length+2,i=new Array(n),a=new Array(n),buildScript=function(n,i,a,u,c){var s=getMiddleSnake(n,i,a,u);if(null===s||s.start===i&&s.diag===i-u||s.end===n&&s.diag===n-a)for(var l=n,f=a;l<i||f<u;)l<i&&f<u&&t[l]===e[f]?(c.push([0,t[l]]),++l,++f):i-n>u-a?(c.push([2,t[l]]),++l):(c.push([1,e[f]]),++f);else{buildScript(n,s.start,a,s.start-s.diag,c);for(var d=s.start;d<s.end;++d)c.push([0,t[d]]);buildScript(s.end,i,s.end-s.diag,u,c)}},buildSnake=function(n,i,a,u){for(var c=n;c-i<u&&c<a&&t[c]===e[c-i];)++c;return function(t,e,n){return{start:t,end:e,diag:n}}(n,c,i)},getMiddleSnake=function(n,u,c,s){var l=u-n,f=s-c;if(0===l||0===f)return null;var d,m,g,h,p,v=l-f,b=f+l,y=(b%2==0?b:b+1)/2;for(i[1+y]=n,a[1+y]=u+1,d=0;d<=y;++d){for(m=-d;m<=d;m+=2){for(g=m+y,m===-d||m!==d&&i[g-1]<i[g+1]?i[g]=i[g+1]:i[g]=i[g-1]+1,p=(h=i[g])-n+c-m;h<u&&p<s&&t[h]===e[p];)i[g]=++h,++p;if(v%2!=0&&v-d<=m&&m<=v+d&&a[g-v]<=i[g])return buildSnake(a[g-v],m+n-c,u,s)}for(m=v-d;m<=v+d;m+=2){for(g=m+y-v,m===v-d||m!==v+d&&a[g+1]<=a[g-1]?a[g]=a[g+1]-1:a[g]=a[g-1],p=(h=a[g]-1)-n+c-m;h>=n&&p>=c&&t[h]===e[p];)a[g]=h--,p--;if(v%2==0&&-d<=m&&m<=d&&a[g]<=i[g+v])return buildSnake(a[g],m+n-c,u,s)}}},u=[];return buildScript(0,t.length,0,e.length,u),u},getOuterHtml=function(t){return Z.isElement(t)?t.outerHTML:Z.isText(t)?Ft.encodeRaw(t.data,!1):Z.isComment(t)?"\x3c!--"+t.data+"--\x3e":""},insertAt=function(t,e,i){var a=function(t){var e,i,a;for(a=n.document.createElement("div"),e=n.document.createDocumentFragment(),t&&(a.innerHTML=t);i=a.firstChild;)e.appendChild(i);return e}(e);if(t.hasChildNodes()&&i<t.childNodes.length){var u=t.childNodes[i];u.parentNode.insertBefore(a,u)}else t.appendChild(a)},Fragments_read=function(t){return filter(map(y(t.childNodes),getOuterHtml),(function(t){return t.length>0}))},Fragments_write=function(t,e){var n=map(y(e.childNodes),getOuterHtml);return function(t,e){var n=0;each(t,(function(t){t[0]===oi?n++:t[0]===ai?(insertAt(e,t[1],n),n++):t[0]===ii&&function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}}(e,n)}))}(Diff_diff(n,t),e),e},ui=Cell(c.none()),createFragmentedLevel=function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel=function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}},getLevelContent=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content},getCleanLevelContent=function(t){var e=C.fromTag("body",ui.get().getOrThunk((function(){var t=n.document.implementation.createHTMLDocument("undo");return ui.set(c.some(t)),t})));return set$1(e,getLevelContent(t)),each(descendants$1(e,"*[data-mce-bogus]"),unwrap),e.dom().innerHTML},Levels_createFromEditor=function(t){var e,n,i;return e=Fragments_read(t.getBody()),n=(i=bind(e,(function(e){var n=Ur.trimInternal(t.serializer,e);return n.length>0?[n]:[]}))).join(""),-1!==n.indexOf("</iframe>")?createFragmentedLevel(i):createCompleteLevel(n)},Levels_applyToEditor=function(t,e,n){"fragmented"===e.type?Fragments_write(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(n?e.beforeBookmark:e.bookmark)},Levels_isEq=function(t,e){return!(!t||!e)&&(!!function(t,e){return getLevelContent(t)===getLevelContent(e)}(t,e)||function(t,e){return getCleanLevelContent(t)===getCleanLevelContent(e)}(t,e))},isUnlocked=function(t){return 0===t.get()},setTyping=function(t,e,n){isUnlocked(n)&&(t.typing=e)},endTyping=function(t,e){t.typing&&(setTyping(t,!1,e),t.add())},UndoManager=function(t){var e=Cell(c.none()),n=Cell(0),i=Cell(0),a={data:[],typing:!1,beforeChange:function(){!function(t,e,n){isUnlocked(e)&&n.set(c.some(rr.getUndoBookmark(t.selection)))}(t,n,e)},add:function(u,c){return function(t,e,n,i,a,u,c){var s=t.settings,l=Levels_createFromEditor(t);if(u=u||{},u=xt.extend(u,l),!1===isUnlocked(i)||t.removed)return null;var f=e.data[n.get()];if(t.fire("BeforeAddUndo",{level:u,lastLevel:f,originalEvent:c}).isDefaultPrevented())return null;if(f&&Levels_isEq(f,u))return null;if(e.data[n.get()]&&a.get().each((function(t){e.data[n.get()].beforeBookmark=t})),s.custom_undo_redo_levels&&e.data.length>s.custom_undo_redo_levels){for(var d=0;d<e.data.length-1;d++)e.data[d]=e.data[d+1];e.data.length--,n.set(e.data.length)}u.bookmark=rr.getUndoBookmark(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(u),n.set(e.data.length-1);var m={level:u,lastLevel:f,originalEvent:c};return t.fire("AddUndo",m),n.get()>0&&(t.setDirty(!0),t.fire("change",m)),u}(t,a,i,n,e,u,c)},undo:function(){return function(t,e,n,i){var a;return e.typing&&(e.add(),e.typing=!1,setTyping(e,!1,n)),i.get()>0&&(i.set(i.get()-1),a=e.data[i.get()],Levels_applyToEditor(t,a,!0),t.setDirty(!0),t.fire("Undo",{level:a})),a}(t,a,n,i)},redo:function(){return function(t,e,n){var i;return e.get()<n.length-1&&(e.set(e.get()+1),i=n[e.get()],Levels_applyToEditor(t,i,!1),t.setDirty(!0),t.fire("Redo",{level:i})),i}(t,i,a.data)},clear:function(){!function(t,e,n){e.data=[],n.set(0),e.typing=!1,t.fire("ClearUndos")}(t,a,i)},reset:function(){!function(t){t.clear(),t.add()}(a)},hasUndo:function(){return function(t,e,n){return n.get()>0||e.typing&&e.data[0]&&!Levels_isEq(Levels_createFromEditor(t),e.data[0])}(t,a,i)},hasRedo:function(){return function(t,e){return e.get()<t.data.length-1&&!t.typing}(a,i)},transact:function(t){return function(t,e,n){return endTyping(t,e),t.beforeChange(),t.ignore(n),t.add()}(a,n,t)},ignore:function(t){!function(t,e){try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}}(n,t)},extra:function(e,n){!function(t,e,n,i,a){if(e.transact(i)){var u=e.data[n.get()].bookmark,c=e.data[n.get()-1];Levels_applyToEditor(t,c,!0),e.transact(a)&&(e.data[n.get()-1].beforeBookmark=u)}}(t,a,i,e,n)}};return function(t,e,n){var i=Cell(!1),addNonTypingUndoLevel=function(t){setTyping(e,!1,n),e.add({},t)};t.on("init",(function(){e.add()})),t.on("BeforeExecCommand",(function(t){var i=t.command;"Undo"!==i&&"Redo"!==i&&"mceRepaint"!==i&&(endTyping(e,n),e.beforeChange())})),t.on("ExecCommand",(function(t){var e=t.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&addNonTypingUndoLevel(t)})),t.on("ObjectResizeStart cut",(function(){e.beforeChange()})),t.on("SaveContent ObjectResized blur",addNonTypingUndoLevel),t.on("dragend",addNonTypingUndoLevel),t.on("keyup",(function(n){var a=n.keyCode;n.isDefaultPrevented()||((a>=33&&a<=36||a>=37&&a<=40||45===a||n.ctrlKey)&&(addNonTypingUndoLevel(),t.nodeChanged()),46!==a&&8!==a||t.nodeChanged(),i.get()&&e.typing&&!1===Levels_isEq(Levels_createFromEditor(t),e.data[0])&&(!1===t.isDirty()&&(t.setDirty(!0),t.fire("change",{level:e.data[0],lastLevel:null})),t.fire("TypingUndo"),i.set(!1),t.nodeChanged()))})),t.on("keydown",(function(t){var a=t.keyCode;if(!t.isDefaultPrevented())if(a>=33&&a<=36||a>=37&&a<=40||45===a)e.typing&&addNonTypingUndoLevel(t);else{var u=t.ctrlKey&&!t.altKey||t.metaKey;!(a<16||a>20)||224===a||91===a||e.typing||u||(e.beforeChange(),setTyping(e,!0,n),e.add({},t),i.set(!0))}})),t.on("mousedown",(function(t){e.typing&&addNonTypingUndoLevel(t)}));t.on("input",(function(t){t.inputType&&("insertReplacementText"===t.inputType||function(t){return"insertText"===t.inputType&&null===t.data}(t))&&addNonTypingUndoLevel(t)})),t.on("AddUndo Undo Redo ClearUndos",(function(e){e.isDefaultPrevented()||t.nodeChanged()}))}(t,a,n),function(t){t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")}(t),a},ci=[9,27,So.HOME,So.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,So.DOWN,So.UP,So.LEFT,So.RIGHT].concat(pt.browser.isFirefox()?[224]:[]),isKeyboardEvent=function(t){return"keydown"===t.type||"keyup"===t.type},isDeleteEvent=function(t){var e=t.keyCode;return e===So.BACKSPACE||e===So.DELETE},setup$6=function(t){var e=t.dom,n=Settings_getForcedRootBlock(t),i=Settings_getPlaceholder(t),updatePlaceholder=function(a,u){if(!function(t){if(isKeyboardEvent(t)){var e=t.keyCode;return!isDeleteEvent(t)&&(So.metaKeyPressed(t)||t.altKey||e>=112&&e<=123||contains(ci,e))}return!1}(a)){var c=t.getBody(),s=!function(t){return isKeyboardEvent(t)&&!(isDeleteEvent(t)||"keyup"===t.type&&229===t.keyCode)}(a)&&function(t,e,n){if(Empty_isEmpty(C.fromDom(e),!1)){var i=""===n,a=e.firstElementChild;return!a||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&(i?!t.isBlock(a):n===a.nodeName.toLowerCase())}return!1}(e,c,n);(""!==e.getAttrib(c,"data-mce-placeholder")!==s||u)&&(e.setAttrib(c,"data-mce-placeholder",s?i:null),e.setAttrib(c,"aria-placeholder",s?i:null),function(t,e){t.fire("PlaceholderToggle",{state:e})}(t,s),t.on(s?"keydown":"keyup",updatePlaceholder),t.off(s?"keyup":"keydown",updatePlaceholder))}};i&&t.on("init",(function(n){updatePlaceholder(n,!0),t.on("change SetContent ExecCommand",updatePlaceholder),t.on("remove",(function(){var n=t.getBody();e.setAttrib(n,"data-mce-placeholder",null),e.setAttrib(n,"aria-placeholder",null)}))}))},getTouch=function(t){return void 0===t.touches||1!==t.touches.length?c.none():c.some(t.touches[0])},TouchEvents_setup=function(t){var e=Cell(c.none()),n=Cell(!1),i=last$2((function(e){t.fire("longpress",__assign(__assign({},e),{type:"longpress"})),n.set(!0)}),400);t.on("touchstart",(function(t){getTouch(t).each((function(a){i.cancel();var u={x:constant(a.clientX),y:constant(a.clientY),target:constant(t.target)};i.throttle(t),n.set(!1),e.set(c.some(u))}))}),!0),t.on("touchmove",(function(a){i.cancel(),getTouch(a).each((function(i){e.get().each((function(a){(function(t,e){var n=Math.abs(t.clientX-e.x()),i=Math.abs(t.clientY-e.y());return n>5||i>5})(i,a)&&(e.set(c.none()),n.set(!1),t.fire("longpresscancel"))}))}))}),!0),t.on("touchend touchcancel",(function(a){i.cancel(),"touchcancel"!==a.type&&e.get().filter((function(t){return t.target().isEqualNode(a.target)})).each((function(){n.get()?a.preventDefault():t.fire("tap",__assign(__assign({},a),{type:"tap"}))}))}),!0)},isBlockElement=function(t,e){return t.hasOwnProperty(e.nodeName)},isValidTarget=function(t,e){return!!Z.isText(e)||!!Z.isElement(e)&&(!isBlockElement(t,e)&&!Bookmarks_isBookmarkNode(e))},shouldRemoveTextNode=function(t,e){if(Z.isText(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||isBlockElement(t,e.nextSibling)))return!0}return!1},addRootBlocks=function(t){var e,n,i,a,u,c,s,l,f,d,m=t.dom,g=t.selection,h=t.schema,p=h.getBlockElements(),v=g.getStart(),b=t.getBody(),y=Settings_getForcedRootBlock(t);if(v&&Z.isElement(v)&&y&&(d=b.nodeName.toLowerCase(),h.isValidChild(d,y.toLowerCase())&&!function(t,e,n){return exists(_o(C.fromDom(n),C.fromDom(e)),(function(e){return isBlockElement(t,e.dom())}))}(p,b,v))){for(n=(e=g.getRng()).startContainer,i=e.startOffset,a=e.endContainer,u=e.endOffset,f=eo(t),v=b.firstChild;v;)if(isValidTarget(p,v)){if(shouldRemoveTextNode(p,v)){s=v,v=v.nextSibling,m.remove(s);continue}c||(c=m.create(y,Settings_getForcedRootBlockAttrs(t)),v.parentNode.insertBefore(c,v),l=!0),s=v,v=v.nextSibling,c.appendChild(s)}else c=null,v=v.nextSibling;l&&f&&(e.setStart(n,i),e.setEnd(a,u),g.setRng(e),t.nodeChanged())}},ForceBlocks_setup=function(t){Settings_getForcedRootBlock(t)&&t.on("NodeChange",curry(addRootBlocks,t))},si=Z.isText,startsWithCaretContainer$1=function(t){return si(t)&&t.data[0]===On.ZWSP},endsWithCaretContainer$1=function(t){return si(t)&&t.data[t.data.length-1]===On.ZWSP},createZwsp=function(t){return t.ownerDocument.createTextNode(On.ZWSP)},insertInline$1=function(t,e){return t?function(t){if(si(t.previousSibling))return endsWithCaretContainer$1(t.previousSibling)||t.previousSibling.appendData(On.ZWSP),t.previousSibling;if(si(t))return startsWithCaretContainer$1(t)||t.insertData(0,On.ZWSP),t;var e=createZwsp(t);return t.parentNode.insertBefore(e,t),e}(e):function(t){if(si(t.nextSibling))return startsWithCaretContainer$1(t.nextSibling)||t.nextSibling.insertData(0,On.ZWSP),t.nextSibling;if(si(t))return endsWithCaretContainer$1(t)||t.appendData(On.ZWSP),t;var e=createZwsp(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e}(e)},li=curry(insertInline$1,!0),fi=curry(insertInline$1,!1),insertInlinePos=function(t,e){return Z.isText(t.container())?insertInline$1(e,t.container()):insertInline$1(e,t.getNode())},isPosCaretContainer=function(t,e){var n=e.get();return n&&t.container()===n&&isCaretContainerInline(n)},BoundaryCaret_renderCaret=function(t,e){return e.fold((function(e){ar.remove(t.get());var n=li(e);return t.set(n),c.some(Zn(n,n.length-1))}),(function(e){return Or.firstPositionIn(e).map((function(e){if(isPosCaretContainer(e,t))return Zn(t.get(),1);ar.remove(t.get());var n=insertInlinePos(e,!0);return t.set(n),Zn(n,1)}))}),(function(e){return Or.lastPositionIn(e).map((function(e){if(isPosCaretContainer(e,t))return Zn(t.get(),t.get().length-1);ar.remove(t.get());var n=insertInlinePos(e,!1);return t.set(n),Zn(n,n.length-1)}))}),(function(e){ar.remove(t.get());var n=fi(e);return t.set(n),c.some(Zn(n,1))}))},di=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,normalizePosition=function(t,e){if(!e)return e;var n=e.container(),i=e.offset();return t?isCaretContainerInline(n)?Z.isText(n.nextSibling)?Zn(n.nextSibling,0):Zn.after(n):isBeforeInline(e)?Zn(n,i+1):e:isCaretContainerInline(n)?Z.isText(n.previousSibling)?Zn(n.previousSibling,n.previousSibling.data.length):Zn.before(n):isAfterInline(e)?Zn(n,i-1):e},mi={isInlineTarget:function(t,e){return is(C.fromDom(e),Settings_getInlineBoundarySelector(t))},findRootInline:function(t,e,n){var i=function(t,e,n){return filter(gn.DOM.getParents(n.container(),"*",e),t)}(t,e,n);return c.from(i[i.length-1])},isRtl:function(t){return"rtl"===gn.DOM.getStyle(t,"direction",!0)||(e=t.textContent,di.test(e));var e},isAtZwsp:function(t){return isBeforeInline(t)||isAfterInline(t)},normalizePosition:normalizePosition,normalizeForwards:curry(normalizePosition,!0),normalizeBackwards:curry(normalizePosition,!1),hasSameParentBlock:function(t,e,n){var i=getParentBlock(e,t),a=getParentBlock(n,t);return i&&i===a}},LazyEvaluator_evaluateUntil=function(t,e){for(var n=0;n<t.length;n++){var i=t[n].apply(null,e);if(i.isSome())return i}return c.none()},gi=Adt_generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rescope=function(t,e){var n=getParentBlock(e,t);return n||t},before$4=function(t,e,n){var i=mi.normalizeForwards(n),a=rescope(e,i.container());return mi.findRootInline(t,a,i).fold((function(){return Or.nextPosition(a,i).bind(curry(mi.findRootInline,t,a)).map((function(t){return gi.before(t)}))}),c.none)},isNotInsideFormatCaretContainer=function(t,e){return null===getParentCaretContainer(t,e)},findInsideRootInline=function(t,e,n){return mi.findRootInline(t,e,n).filter(curry(isNotInsideFormatCaretContainer,e))},start=function(t,e,n){var i=mi.normalizeBackwards(n);return findInsideRootInline(t,e,i).bind((function(t){return Or.prevPosition(t,i).isNone()?c.some(gi.start(t)):c.none()}))},end=function(t,e,n){var i=mi.normalizeForwards(n);return findInsideRootInline(t,e,i).bind((function(t){return Or.nextPosition(t,i).isNone()?c.some(gi.end(t)):c.none()}))},after$3=function(t,e,n){var i=mi.normalizeBackwards(n),a=rescope(e,i.container());return mi.findRootInline(t,a,i).fold((function(){return Or.prevPosition(a,i).bind(curry(mi.findRootInline,t,a)).map((function(t){return gi.after(t)}))}),c.none)},isValidLocation=function(t){return!1===mi.isRtl(getElement(t))},readLocation=function(t,e,n){return LazyEvaluator_evaluateUntil([before$4,start,end,after$3],[t,e,n]).filter(isValidLocation)},getElement=function(t){return t.fold(identity,identity,identity,identity)},getName=function(t){return t.fold(constant("before"),constant("start"),constant("end"),constant("after"))},outside=function(t){return t.fold(gi.before,gi.before,gi.after,gi.after)},betweenInlines=function(t,e,n,i,a,u){return lift2(mi.findRootInline(e,n,i),mi.findRootInline(e,n,a),(function(e,i){return e!==i&&mi.hasSameParentBlock(n,e,i)?gi.after(t?e:i):u})).getOr(u)},skipNoMovement=function(t,e){return t.fold(constant(!0),(function(t){return i=e,!(getName(n=t)===getName(i)&&getElement(n)===getElement(i));var n,i}))},findLocationSimple=function(t,e){return t?e.fold(compose(c.some,gi.start),c.none,compose(c.some,gi.after),c.none):e.fold(c.none,compose(c.some,gi.before),c.none,compose(c.some,gi.end))},findLocation=function(t,e,n,i){var a=mi.normalizePosition(t,i),u=readLocation(e,n,a);return readLocation(e,n,a).bind(curry(findLocationSimple,t)).orThunk((function(){return function(t,e,n,i,a){var u=mi.normalizePosition(t,a);return Or.fromPosition(t,n,u).map(curry(mi.normalizePosition,t)).fold((function(){return i.map(outside)}),(function(a){return readLocation(e,n,a).map(curry(betweenInlines,t,e,n,u,a)).filter(curry(skipNoMovement,i))})).filter(isValidLocation)}(t,e,n,u,i)}))},hi=readLocation,pi=findLocation,vi=(curry(findLocation,!1),curry(findLocation,!0),outside),BoundaryLocation_inside=function(t){return t.fold(gi.start,gi.start,gi.end,gi.end)},hasSelectionModifyApi=function(t){return g(t.selection.getSel().modify)},moveRel=function(t,e,n){var i=t?1:-1;return e.setRng(Zn(n.container(),n.offset()+i).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0},WordSelection_moveByWord=function(t,e){var n=e.selection.getRng(),i=t?Zn.fromRangeEnd(n):Zn.fromRangeStart(n);return!!hasSelectionModifyApi(e)&&(t&&isBeforeInline(i)?moveRel(!0,e.selection,i):!(t||!isAfterInline(i))&&moveRel(!1,e.selection,i))},setCaretPosition=function(t,e){var n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},isFeatureEnabled=function(t){return!1!==t.settings.inline_boundaries},setSelected=function(t,e){t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},renderCaretLocation=function(t,e,n){return BoundaryCaret_renderCaret(e,n).map((function(e){return setCaretPosition(t,e),n}))},moveWord=function(t,e,n){return function(){return!!isFeatureEnabled(e)&&WordSelection_moveByWord(t,e)}},bi={move:function(t,e,n){return function(){return!!isFeatureEnabled(t)&&function(t,e,n){var i=t.getBody(),a=Zn.fromRangeStart(t.selection.getRng()),u=curry(mi.isInlineTarget,t);return pi(n,u,i,a).bind((function(n){return renderCaretLocation(t,e,n)}))}(t,e,n).isSome()}},moveNextWord:curry(moveWord,!0),movePrevWord:curry(moveWord,!1),setupSelectedState:function(t){var e=Cell(null),n=curry(mi.isInlineTarget,t);return t.on("NodeChange",(function(i){isFeatureEnabled(t)&&(function(t,e,n){var i=filter(e.select('*[data-mce-selected="inline-boundary"]'),t),a=filter(n,t);each(difference(i,a),curry(setSelected,!1)),each(difference(a,i),curry(setSelected,!0))}(n,t.dom,i.parents),function(t,e){if(t.selection.isCollapsed()&&!0!==t.composing&&e.get()){var n=Zn.fromRangeStart(t.selection.getRng());Zn.isTextPosition(n)&&!1===mi.isAtZwsp(n)&&(setCaretPosition(t,ar.removeAndReposition(e.get(),n)),e.set(null))}}(t,e),function(t,e,n,i){if(e.selection.isCollapsed()){var a=filter(i,t);each(a,(function(i){var a=Zn.fromRangeStart(e.selection.getRng());hi(t,e.getBody(),a).bind((function(t){return renderCaretLocation(e,n,t)}))}))}}(n,t,e,i.parents))})),e},setCaretPosition:setCaretPosition},getClientRects=function(t){return foldl(t,(function(t,e){return t.concat(function(t){var toArrayWithNode=function(e){return map(e,(function(e){return(e=clone$1(e)).node=t,e}))};if(Z.isElement(t))return toArrayWithNode(t.getClientRects());if(Z.isText(t)){var e=t.ownerDocument.createRange();return e.setStart(t,0),e.setEnd(t,t.data.length),toArrayWithNode(e.getClientRects())}}(e))}),[])};!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(ei||(ei={}));var yi,walkUntil=function(t,e,n,i,a,u){var c,s,l=0,f=[],add=function(i){var u,c,d;for(d=getClientRects([i]),-1===t&&(d=d.reverse()),u=0;u<d.length;u++)if(c=d[u],!n(c,s)){if(f.length>0&&e(c,bt.last(f))&&l++,c.line=l,a(c))return!0;f.push(c)}};return(s=bt.last(u.getClientRects()))?(add(c=u.getNode()),function(t,e,n,i){for(;i=findNode(i,t,isEditableCaretCandidate,e);)if(n(i))return}(t,i,add,c),f):f},xi=curry(walkUntil,ei.Up,isAbove,isBelow),wi=curry(walkUntil,ei.Down,isBelow,isAbove),isAboveLine=function(t){return function(e){return function(t,e){return e.line>t}(t,e)}},isLine=function(t){return function(e){return function(t,e){return e.line===t}(t,e)}},Ci=Z.isContentEditableFalse,Si=findNode,distanceToRectLeft=function(t,e){return Math.abs(t.left-e)},distanceToRectRight=function(t,e){return Math.abs(t.right-e)},isInside=function(t,e){return t>=e.left&&t<=e.right},findClosestClientRect=function(t,e){return bt.reduce(t,(function(t,n){var i,a;return i=Math.min(distanceToRectLeft(t,e),distanceToRectRight(t,e)),a=Math.min(distanceToRectLeft(n,e),distanceToRectRight(n,e)),isInside(e,n)?n:isInside(e,t)?t:a===i&&Ci(n.node)||a<i?n:t}))},walkUntil$1=function(t,e,n,i){for(;i=Si(i,t,isEditableCaretCandidate,e);)if(n(i))return},closestCaret=function(t,e,n){var i,a=getClientRects(function(t){return filter(y(t.getElementsByTagName("*")),isFakeCaretTarget)}(t)),u=filter(a,(function(t){return n>=t.top&&n<=t.bottom}));return(i=findClosestClientRect(u,e))&&(i=findClosestClientRect(function(t,e){var n=[],collect=function(t,i){var a;return a=filter(getClientRects([i]),(function(n){return!t(n,e)})),n=n.concat(a),0===a.length};return n.push(e),walkUntil$1(ei.Up,t,curry(collect,isAbove),e.node),walkUntil$1(ei.Down,t,curry(collect,isBelow),e.node),n}(t,i),e))&&isFakeCaretTarget(i.node)?function(t,e){return{node:t.node,before:distanceToRectLeft(t,e)<distanceToRectRight(t,e)}}(i,e):null},ki=Z.isContentEditableTrue,Ei=Z.isContentEditableFalse,showCaret=function(t,e,n,i,a){return e._selectionOverrides.showCaret(t,n,i,a)},selectNode=function(t,e){return t.fire("BeforeObjectSelected",{target:e}).isDefaultPrevented()?null:function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e}(e)},renderCaretAtRange=function(t,e,n){var i=normalizeRange(1,t.getBody(),e),a=Zn.fromRangeStart(i),u=a.getNode();if(Ei(u))return showCaret(1,t,u,!a.isAtEnd(),!1);var c=a.getNode(!0);if(Ei(c))return showCaret(1,t,c,!1,!1);var s=t.dom.getParent(a.getNode(),(function(t){return Ei(t)||ki(t)}));return Ei(s)?showCaret(1,t,s,!1,n):null},renderRangeCaret=function(t,e,n){if(!e||!e.collapsed)return e;var i=renderCaretAtRange(t,e,n);return i||e},isChar=function(t,e,n){return c.from(n.container()).filter(Z.isText).exists((function(i){var a=t?0:-1;return e(i.data.charAt(n.offset()+a))}))},Ti=curry(isChar,!0,isWhiteSpace$1),Oi=curry(isChar,!1,isWhiteSpace$1),isEmptyText=function(t){var e=t.container();return Z.isText(e)&&0===e.data.length},matchesElementPosition=function(t,e){return function(n){return c.from(getChildNodeAtRelativeOffset(t?0:-1,n)).filter(e).isSome()}},isImageBlock=function(t){return"IMG"===t.nodeName&&"block"===get$4(C.fromDom(t),"display")},isCefNode=function(t){return Z.isContentEditableFalse(t)&&!Z.isBogusAll(t)},_i=matchesElementPosition(!0,isImageBlock),Ni=matchesElementPosition(!1,isImageBlock),Ai=matchesElementPosition(!0,Z.isTable),zi=matchesElementPosition(!1,Z.isTable),Di=matchesElementPosition(!0,isCefNode),Mi=matchesElementPosition(!1,isCefNode);!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(yi||(yi={}));var Bi,Ri,flip=function(t,e){return t===Jn.Backwards?reverse(e):e},walk$3=function(t,e,n){return t===Jn.Forwards?e.next(n):e.prev(n)},getBreakType=function(t,e,n,i){return Z.isBr(i.getNode(e===Jn.Forwards))?yi.Br:!1===isInSameBlock(n,i)?yi.Block:yi.Wrap},getPositionsUntil=function(t,e,n,i){for(var a,u=CaretWalker(n),s=i,l=[];s&&(a=walk$3(e,u,s));){if(Z.isBr(a.getNode(!1)))return e===Jn.Forwards?{positions:flip(e,l).concat([a]),breakType:yi.Br,breakAt:c.some(a)}:{positions:flip(e,l),breakType:yi.Br,breakAt:c.some(a)};if(a.isVisible()){if(t(s,a)){var f=getBreakType(0,e,s,a);return{positions:flip(e,l),breakType:f,breakAt:c.some(a)}}l.push(a),s=a}else s=a}return{positions:flip(e,l),breakType:yi.Eol,breakAt:c.none()}},getAdjacentLinePositions=function(t,e,n,i){return e(n,i).breakAt.map((function(i){var a=e(n,i).positions;return t===Jn.Backwards?a.concat(i):[i].concat(a)})).getOr([])},findClosestHorizontalPositionFromPoint=function(t,e){return foldl(t,(function(t,n){return t.fold((function(){return c.some(n)}),(function(i){return lift2(head(i.getClientRects()),head(n.getClientRects()),(function(t,a){var u=Math.abs(e-t.left);return Math.abs(e-a.left)<=u?n:i})).or(t)}))}),c.none())},findClosestHorizontalPosition=function(t,e){return head(e.getClientRects()).bind((function(e){return findClosestHorizontalPositionFromPoint(t,e.left)}))},Pi=curry(getPositionsUntil,CaretPosition.isAbove,-1),Ii=curry(getPositionsUntil,CaretPosition.isBelow,1),Hi=curry(getAdjacentLinePositions,-1,Pi),Li=curry(getAdjacentLinePositions,1,Ii),Fi=Z.isContentEditableFalse,Vi=getSelectedNode,moveToCeFalseHorizontally=function(t,e,n,i){var a=t===Jn.Forwards,u=a?Di:Mi;if(!i.collapsed){var c=Vi(i);if(Fi(c))return showCaret(t,e,c,t===Jn.Backwards,!0)}var s=function(t){return isCaretContainerBlock(t.startContainer)}(i),l=getNormalizedRangeEndPoint(t,e.getBody(),i);if(u(l))return selectNode(e,l.getNode(!a));var f=mi.normalizePosition(a,n(l));if(!f)return s?i:null;if(u(f))return showCaret(t,e,f.getNode(!a),a,!0);var d=n(f);return d&&u(d)&&isMoveInsideSameBlock(f,d)?showCaret(t,e,d.getNode(!a),a,!0):s?renderRangeCaret(e,f.toRange(),!0):null},moveToCeFalseVertically=function(t,e,n,i){var a,u,c,s,l,f,d,m,g;if(g=Vi(i),a=getNormalizedRangeEndPoint(t,e.getBody(),i),u=n(e.getBody(),isAboveLine(1),a),c=filter(u,isLine(1)),l=bt.last(a.getClientRects()),(Di(a)||Ai(a))&&(g=a.getNode()),(Mi(a)||zi(a))&&(g=a.getNode(!0)),!l)return null;if(f=l.left,(s=findClosestClientRect(c,f))&&Fi(s.node))return d=Math.abs(f-s.left),m=Math.abs(f-s.right),showCaret(t,e,s.node,d<m,!0);if(g){var h=function(t,e,n,i){var a,u,c,s,l,f,d=CaretWalker(e),m=[],g=0,getClientRect=function(t){return bt.last(t.getClientRects())};1===t?(a=d.next,u=isBelow,c=isAbove,s=Zn.after(i)):(a=d.prev,u=isAbove,c=isBelow,s=Zn.before(i)),f=getClientRect(s);do{if(s.isVisible()&&!c(l=getClientRect(s),f)){if(m.length>0&&u(l,bt.last(m))&&g++,(l=clone$1(l)).position=s,l.line=g,n(l))return m;m.push(l)}}while(s=a(s));return m}(t,e.getBody(),isAboveLine(1),g);if(s=findClosestClientRect(filter(h,isLine(1)),f))return renderRangeCaret(e,s.position.toRange(),!0);if(s=bt.last(filter(h,isLine(0))))return renderRangeCaret(e,s.position.toRange(),!0)}},exitPreBlock=function(t,e,n){var i,a,u=CaretWalker(t.getBody()),c=curry(getVisualCaretPosition,u.next),s=curry(getVisualCaretPosition,u.prev);if(n.collapsed&&t.settings.forced_root_block){if(!(i=t.dom.getParent(n.startContainer,"PRE")))return;(1===e?c(Zn.fromRangeStart(n)):s(Zn.fromRangeStart(n)))||(a=function(t){var e=t.dom.create(Settings_getForcedRootBlock(t));return(!pt.ie||pt.ie>=11)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(t),1===e?t.$(i).after(a):t.$(i).before(a),t.selection.select(a,!0),t.selection.collapse())}},moveH=function(t,e){return function(){var n=function(t,e){var n,i=CaretWalker(t.getBody()),a=curry(getVisualCaretPosition,i.next),u=curry(getVisualCaretPosition,i.prev),c=e?Jn.Forwards:Jn.Backwards,s=e?a:u,l=t.selection.getRng();return(n=moveToCeFalseHorizontally(c,t,s,l))?n:(n=exitPreBlock(t,c,l))||null}(t,e);return!!n&&(t.selection.setRng(n),!0)}},moveV=function(t,e){return function(){var n=function(t,e){var n,i=e?1:-1,a=e?wi:xi,u=t.selection.getRng();return(n=moveToCeFalseVertically(i,t,a,u))?n:(n=exitPreBlock(t,i,u))||null}(t,e);return!!n&&(t.selection.setRng(n),!0)}},moveToLineEndPoint=function(t,e){return function(){var n=e?Zn.fromRangeEnd(t.selection.getRng()):Zn.fromRangeStart(t.selection.getRng()),i=e?Ii(t.getBody(),n):Pi(t.getBody(),n);return(e?last(i.positions):head(i.positions)).filter(function(t){return function(e){return t?Mi(e):Di(e)}}(e)).fold(constant(!1),(function(e){return t.selection.setRng(e.toRange()),!0}))}},getClosestCell=function(t,e,n,i,a){var u=descendants$1(C.fromDom(n),"td,th,caption").map((function(t){return t.dom()}));return function(t,e,n){return foldl(t,(function(t,i){return t.fold((function(){return c.some(i)}),(function(t){var a=Math.sqrt(Math.abs(t.x-e)+Math.abs(t.y-n)),u=Math.sqrt(Math.abs(i.x-e)+Math.abs(i.y-n));return c.some(u<a?i:t)}))}),c.none())}(filter(function(t,e){return bind(e,(function(e){var n=function(t,e){return{left:t.left-e,top:t.top-e,right:t.right+2*e,bottom:t.bottom+2*e,width:t.width+e,height:t.height+e}}(clone$1(e.getBoundingClientRect()),-1);return[{x:n.left,y:t(n),cell:e},{x:n.right,y:t(n),cell:e}]}))}(t,u),(function(t){return e(t,a)})),i,a).map((function(t){return t.cell}))},Ui=curry(getClosestCell,(function(t){return t.bottom}),(function(t,e){return t.y<e})),ji=curry(getClosestCell,(function(t){return t.top}),(function(t,e){return t.y>e})),findClosestPositionInAboveCell=function(t,e){return head(e.getClientRects()).bind((function(e){return Ui(t,e.left,e.top)})).bind((function(t){return findClosestHorizontalPosition((n=t,Or.lastPositionIn(n).map((function(t){return Pi(n,t).positions.concat(t)})).getOr([])),e);var n}))},findClosestPositionInBelowCell=function(t,e){return last(e.getClientRects()).bind((function(e){return ji(t,e.left,e.top)})).bind((function(t){return findClosestHorizontalPosition((n=t,Or.firstPositionIn(n).map((function(t){return[t].concat(Ii(n,t).positions)})).getOr([])),e);var n}))},moveToRange=function(t,e){t.selection.setRng(e),ScrollIntoView_scrollRangeIntoView(t,e)},isAtTableCellLine=function(t,e,n){var i=t(e,n);return function(t){return t.breakType===yi.Wrap&&0===t.positions.length}(i)||!Z.isBr(n.getNode())&&function(t){return t.breakType===yi.Br&&1===t.positions.length}(i)?!function(t,e,n){return n.breakAt.map((function(n){return t(e,n).breakAt.isSome()})).getOr(!1)}(t,e,i):i.breakAt.isNone()},Wi=curry(isAtTableCellLine,Pi),qi=curry(isAtTableCellLine,Ii),navigateHorizontally=function(t,e,n,i){var a=t.selection.getRng(),u=e?1:-1;if(isFakeCaretTableBrowser()&&function(t,e,n){var i=Zn.fromRangeStart(e);return Or.positionIn(!t,n).map((function(t){return t.isEqual(i)})).getOr(!1)}(e,a,n)){var c=showCaret(u,t,n,!e,!0);return moveToRange(t,c),!0}return!1},getTable=function(t,e){var n=e.getNode(t);return Z.isElement(n)&&"TABLE"===n.nodeName?c.some(n):c.none()},moveCaret=function(t,e,n){var i=getTable(!!e,n),a=!1===e;i.fold((function(){return moveToRange(t,n.toRange())}),(function(i){return Or.positionIn(a,t.getBody()).filter((function(t){return t.isEqual(n)})).fold((function(){return moveToRange(t,n.toRange())}),(function(a){return function(t,e,n,i){var a=Settings_getForcedRootBlock(e);a?e.undoManager.transact((function(){var i=C.fromTag(a);setAll(i,Settings_getForcedRootBlockAttrs(e)),append(i,C.fromTag("br")),t?after(C.fromDom(n),i):I(C.fromDom(n),i);var u=e.dom.createRng();u.setStart(i.dom(),0),u.setEnd(i.dom(),0),moveToRange(e,u)})):moveToRange(e,i.toRange())}(e,t,i,n)}))}))},navigateVertically=function(t,e,n,i){var a=t.selection.getRng(),u=Zn.fromRangeStart(a),c=t.getBody();if(!e&&Wi(i,u)){var s=function(t,e,n){return findClosestPositionInAboveCell(e,n).orThunk((function(){return head(n.getClientRects()).bind((function(n){return findClosestHorizontalPositionFromPoint(Hi(t,Zn.before(e)),n.left)}))})).getOr(Zn.before(e))}(c,n,u);return moveCaret(t,e,s),!0}if(e&&qi(i,u)){s=function(t,e,n){return findClosestPositionInBelowCell(e,n).orThunk((function(){return head(n.getClientRects()).bind((function(n){return findClosestHorizontalPositionFromPoint(Li(t,Zn.after(e)),n.left)}))})).getOr(Zn.after(e))}(c,n,u);return moveCaret(t,e,s),!0}return!1},moveH$1=function(t,e){return function(){return c.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind((function(n){return c.from(t.dom.getParent(n,"table")).map((function(n){return navigateHorizontally(t,e,n)}))})).getOr(!1)}},moveV$1=function(t,e){return function(){return c.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind((function(n){return c.from(t.dom.getParent(n,"table")).map((function(i){return navigateVertically(t,e,i,n)}))})).getOr(!1)}},isTarget=function(t){return contains(["figcaption"],H(t))},rangeBefore=function(t){var e=n.document.createRange();return e.setStartBefore(t.dom()),e.setEndBefore(t.dom()),e},insertElement=function(t,e,n){n?append(t,e):prepend(t,e)},insertEmptyLine=function(t,e,n,i){return""===e?function(t,e){var n=C.fromTag("br");return insertElement(t,n,e),rangeBefore(n)}(t,i):function(t,e,n,i){var a=C.fromTag(n),u=C.fromTag("br");return setAll(a,i),append(a,u),insertElement(t,a,e),rangeBefore(u)}(t,i,e,n)},isAtFirstOrLastLine=function(t,e,n){return e?function(t,e){return Ii(t,e).breakAt.isNone()}(t.dom(),n):function(t,e){return Pi(t,e).breakAt.isNone()}(t.dom(),n)},moveCaretToNewEmptyLine=function(t,e){var n=C.fromDom(t.getBody()),i=Zn.fromRangeStart(t.selection.getRng()),a=Settings_getForcedRootBlock(t),u=Settings_getForcedRootBlockAttrs(t);return function(t,e){var n=curry(eq,e);return closest(C.fromDom(t.container()),Et,n).filter(isTarget)}(i,n).exists((function(){if(isAtFirstOrLastLine(n,e,i)){var c=insertEmptyLine(n,a,u,e);return t.selection.setRng(c),!0}return!1}))},moveV$2=function(t,e){return function(){return!!t.selection.isCollapsed()&&moveCaretToNewEmptyLine(t,e)}},match$1=function(t,e){return bind(function(t){return map(t,(function(t){return __assign({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:noop},t)}))}(t),(function(t){return function(t,e){return e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey}(t,e)?[t]:[]}))},MatchKeys_action=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,i)}},MatchKeys_execute=function(t,e){return find(match$1(t,e),(function(t){return t.action()}))},ArrowKeys_setup=function(t,e){t.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(t,e,n){var i=detect$3().os;MatchKeys_execute([{keyCode:So.RIGHT,action:moveH(t,!0)},{keyCode:So.LEFT,action:moveH(t,!1)},{keyCode:So.UP,action:moveV(t,!1)},{keyCode:So.DOWN,action:moveV(t,!0)},{keyCode:So.RIGHT,action:moveH$1(t,!0)},{keyCode:So.LEFT,action:moveH$1(t,!1)},{keyCode:So.UP,action:moveV$1(t,!1)},{keyCode:So.DOWN,action:moveV$1(t,!0)},{keyCode:So.RIGHT,action:bi.move(t,e,!0)},{keyCode:So.LEFT,action:bi.move(t,e,!1)},{keyCode:So.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:bi.moveNextWord(t,e)},{keyCode:So.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:bi.movePrevWord(t,e)},{keyCode:So.UP,action:moveV$2(t,!1)},{keyCode:So.DOWN,action:moveV$2(t,!0)}],n).each((function(t){n.preventDefault()}))}(t,e,n)}))},DeleteUtils_getParentBlock=function(t,e){return P(t,e)?closest(e,(function(t){return Tt(t)||_t(t)}),function(t){return function(e){return eq(t,C.fromDom(e.dom().parentNode))}}(t)):c.none()},DeleteUtils_paddEmptyBody=function(t){t.dom.isEmpty(t.getBody())&&(t.setContent(""),function(t){var e=t.getBody(),n=e.firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e;t.selection.setCursorLocation(n,0)}(t))},DeleteUtils_willDeleteLastPositionInElement=function(t,e,n){return lift2(Or.firstPositionIn(n),Or.lastPositionIn(n),(function(i,a){var u=mi.normalizePosition(!0,i),c=mi.normalizePosition(!1,a),s=mi.normalizePosition(!1,e);return t?Or.nextPosition(n,s).map((function(t){return t.isEqual(c)&&e.isEqual(u)})).getOr(!1):Or.prevPosition(n,s).map((function(t){return t.isEqual(u)&&e.isEqual(c)})).getOr(!1)})).getOr(!0)},blockBoundary=function(t,e){return{from:constant(t),to:constant(e)}},getBlockPosition=function(t,e){var n=C.fromDom(t),i=C.fromDom(e.container());return DeleteUtils_getParentBlock(n,i).map((function(t){return function(t,e){return{block:constant(t),position:constant(e)}}(t,e)}))},readFromRange=function(t,e,n){var i=getBlockPosition(t,Zn.fromRangeStart(n)),a=i.bind((function(n){return Or.fromPosition(e,t,n.position()).bind((function(n){return getBlockPosition(t,n).map((function(n){return function(t,e,n){return Z.isBr(n.position().getNode())&&!1===Empty_isEmpty(n.block())?Or.positionIn(!1,n.block().dom()).bind((function(i){return i.isEqual(n.position())?Or.fromPosition(e,t,i).bind((function(e){return getBlockPosition(t,e)})):c.some(n)})).getOr(n):n}(t,e,n)}))}))}));return lift2(i,a,blockBoundary).filter((function(t){return function(t){return!1===eq(t.from().block(),t.to().block())}(t)&&function(t){return parent(t.from().block()).bind((function(e){return parent(t.to().block()).filter((function(t){return eq(e,t)}))})).isSome()}(t)&&function(t){return!1===Z.isContentEditableFalse(t.from().block().dom())&&!1===Z.isContentEditableFalse(t.to().block().dom())}(t)}))},BlockMergeBoundary_read=function(t,e,n){return n.collapsed?readFromRange(t,e,n):c.none()},getChildrenUntilBlockBoundary=function(t){var e=children(t);return findIndex(e,Et).fold((function(){return e}),(function(t){return e.slice(0,t)}))},extractChildren=function(t){var e=getChildrenUntilBlockBoundary(t);return each(e,remove),e},removeEmptyRoot=function(t,e){var n=Parents_parentsAndSelf(e,t);return find(n.reverse(),(function(t){return Empty_isEmpty(t)})).each(remove)},nestedBlockMerge=function(t,e,n,i){if(Empty_isEmpty(n))return PaddingBr_fillWithPaddingBr(n),Or.firstPositionIn(n.dom());0===filter(prevSiblings(i),(function(t){return!Empty_isEmpty(t)})).length&&Empty_isEmpty(e)&&I(i,C.fromTag("br"));var a=Or.prevPosition(n.dom(),Zn.before(i.dom()));return each(extractChildren(e),(function(t){I(i,t)})),removeEmptyRoot(t,e),a},sidelongBlockMerge=function(t,e,n){if(Empty_isEmpty(n))return remove(n),Empty_isEmpty(e)&&PaddingBr_fillWithPaddingBr(e),Or.firstPositionIn(e.dom());var i=Or.lastPositionIn(n.dom());return each(extractChildren(e),(function(t){append(n,t)})),removeEmptyRoot(t,e),i},getInsertionPoint=function(t,e){return P(e,t)?function(t,e){var n=Parents_parentsAndSelf(e,t);return c.from(n[n.length-1])}(e,t):c.none()},trimBr=function(t,e){Or.positionIn(t,e.dom()).map((function(t){return t.getNode()})).map(C.fromDom).filter(isBr$1).each(remove)},mergeBlockInto=function(t,e,n){return trimBr(!0,e),trimBr(!1,n),getInsertionPoint(e,n).fold(curry(sidelongBlockMerge,t,e,n),curry(nestedBlockMerge,t,e,n))},MergeBlocks_mergeBlocks=function(t,e,n,i){return e?mergeBlockInto(t,i,n):mergeBlockInto(t,n,i)},BlockBoundaryDelete_backspaceDelete=function(t,e){var n=C.fromDom(t.getBody()),i=BlockMergeBoundary_read(n.dom(),e,t.selection.getRng()).bind((function(t){return MergeBlocks_mergeBlocks(n,e,t.from().block(),t.to().block())}));return i.each((function(e){t.selection.setRng(e.toRange())})),i.isSome()},isRawNodeInTable=function(t,e){var n=C.fromDom(e),i=curry(eq,t);return ancestor(n,zt,i).isSome()},isEverythingSelected=function(t,e){var n=Or.prevPosition(t.dom(),Zn.fromRangeStart(e)).isNone(),i=Or.nextPosition(t.dom(),Zn.fromRangeEnd(e)).isNone();return!function(t,e){return isRawNodeInTable(t,e.startContainer)||isRawNodeInTable(t,e.endContainer)}(t,e)&&n&&i},deleteRange=function(t){var e=C.fromDom(t.getBody()),n=t.selection.getRng();return isEverythingSelected(e,n)?function(t){return t.setContent(""),t.selection.setCursorLocation(),!0}(t):function(t,e){var n=e.getRng();return lift2(DeleteUtils_getParentBlock(t,C.fromDom(n.startContainer)),DeleteUtils_getParentBlock(t,C.fromDom(n.endContainer)),(function(i,a){return!1===eq(i,a)&&(n.deleteContents(),MergeBlocks_mergeBlocks(t,!0,i,a).each((function(t){e.setRng(t.toRange())})),!0)})).getOr(!1)}(e,t.selection)},BlockRangeDelete_backspaceDelete=function(t,e){return!t.selection.isCollapsed()&&deleteRange(t)},isBr$5=function(t){return getElementFromPosition(t).exists(isBr$1)},findBr=function(t,e,n){var i=filter(Parents_parentsAndSelf(C.fromDom(n.container()),e),Et),a=head(i).getOr(e);return Or.fromPosition(t,a.dom(),n).filter(isBr$5)},isBeforeBr=function(t,e){return getElementFromPosition(e).exists(isBr$1)||findBr(!0,t,e).isSome()},isAfterBr=function(t,e){return function(t){return c.from(t.getNode(!0)).map(C.fromDom)}(e).exists(isBr$1)||findBr(!1,t,e).isSome()},$i=curry(findBr,!1),Gi=curry(findBr,!0),Xi=Adt_generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),deleteEmptyBlockOrMoveToCef=function(t,e,n,i){var a=i.getNode(!1===e);return DeleteUtils_getParentBlock(C.fromDom(t),C.fromDom(n.getNode())).map((function(t){return Empty_isEmpty(t)?Xi.remove(t.dom()):Xi.moveToElement(a)})).orThunk((function(){return c.some(Xi.moveToElement(a))}))},findCefPosition=function(t,e,n){return Or.fromPosition(e,t,n).bind((function(i){return a=i.getNode(),zt(C.fromDom(a))||_t(C.fromDom(a))||function(t,e,n,i){var inSameBlock=function(e){return isInline(C.fromDom(e))&&!isInSameBlock(n,i,t)};return getRelativeCefElm(!e,n).fold((function(){return getRelativeCefElm(e,i).fold(constant(!1),inSameBlock)}),inSameBlock)}(t,e,n,i)?c.none():e&&Z.isContentEditableFalse(i.getNode())||!1===e&&Z.isContentEditableFalse(i.getNode(!0))?deleteEmptyBlockOrMoveToCef(t,e,n,i):e&&Mi(n)||!1===e&&Di(n)?c.some(Xi.moveToPosition(i)):c.none();var a}))},getContentEditableAction=function(t,e,n){return function(t,e){var n=e.getNode(!1===t),i=t?"after":"before";return Z.isElement(n)&&n.getAttribute("data-mce-caret")===i}(e,n)?function(t,e){return t&&Z.isContentEditableFalse(e.nextSibling)?c.some(Xi.moveToElement(e.nextSibling)):!1===t&&Z.isContentEditableFalse(e.previousSibling)?c.some(Xi.moveToElement(e.previousSibling)):c.none()}(e,n.getNode(!1===e)).fold((function(){return findCefPosition(t,e,n)}),c.some):findCefPosition(t,e,n).bind((function(e){return function(t,e,n){return n.fold((function(t){return c.some(Xi.remove(t))}),(function(t){return c.some(Xi.moveToElement(t))}),(function(n){return isInSameBlock(e,n,t)?c.none():c.some(Xi.moveToPosition(n))}))}(t,n,e)}))},getAncestorCe=function(t,e){return c.from(getContentEditableRoot$1(t.getBody(),e))},backspaceDeleteCaret=function(t,e){var n=t.selection.getNode();return getAncestorCe(t,n).filter(Z.isContentEditableFalse).fold((function(){return function(t,e,n){var i=normalizeRange(e?1:-1,t,n),a=Zn.fromRangeStart(i),u=C.fromDom(t);return!1===e&&Mi(a)?c.some(Xi.remove(a.getNode(!0))):e&&Di(a)?c.some(Xi.remove(a.getNode())):!1===e&&Di(a)&&isAfterBr(u,a)?$i(u,a).map((function(t){return Xi.remove(t.getNode())})):e&&Mi(a)&&isBeforeBr(u,a)?Gi(u,a).map((function(t){return Xi.remove(t.getNode())})):getContentEditableAction(t,e,a)}(t.getBody(),e,t.selection.getRng()).map((function(n){return n.fold(function(t,e){return function(n){return t._selectionOverrides.hideFakeCaret(),DeleteElement_deleteElement(t,e,C.fromDom(n)),!0}}(t,e),function(t,e){return function(n){var i=e?Zn.before(n):Zn.after(n);return t.selection.setRng(i.toRange()),!0}}(t,e),function(t){return function(e){return t.selection.setRng(e.toRange()),!0}}(t))})).getOr(!1)}),(function(){return!0}))},backspaceDeleteRange=function(t,e){var n=t.selection.getNode();return!!Z.isContentEditableFalse(n)&&getAncestorCe(t,n.parentNode).filter(Z.isContentEditableFalse).fold((function(){var n;return n=C.fromDom(t.getBody()),each(descendants$1(n,".mce-offscreen-selection"),remove),DeleteElement_deleteElement(t,e,C.fromDom(t.selection.getNode())),DeleteUtils_paddEmptyBody(t),!0}),(function(){return!0}))},getContentEditableRoot$1=function(t,e){for(;e&&e!==t;){if(Z.isContentEditableTrue(e)||Z.isContentEditableFalse(e))return e;e=e.parentNode}return null},CefDelete_backspaceDelete=function(t,e){return t.selection.isCollapsed()?backspaceDeleteCaret(t,e):backspaceDeleteRange(t,e)},CefDelete_paddEmptyElement=function(t){var e,n=getContentEditableRoot$1(t.getBody(),t.selection.getNode());return Z.isContentEditableTrue(n)&&t.dom.isBlock(n)&&t.dom.isEmpty(n)&&(e=t.dom.create("br",{"data-mce-bogus":"1"}),t.dom.setHTML(n,""),n.appendChild(e),t.selection.setRng(Zn.before(e).toRange())),!0},deleteContentAndShowCaret=function(t,e,n,i,a,u){var c=showCaret(i,t,u.getNode(!a),a,!0);if(e.collapsed){var s=e.cloneRange();a?s.setEnd(c.startContainer,c.startOffset):s.setStart(c.endContainer,c.endOffset),s.deleteContents()}else e.deleteContents();return t.selection.setRng(c),function(t,e){Z.isText(e)&&0===e.data.length&&t.remove(e)}(t.dom,n),!0},CefBoundaryDelete_backspaceDelete=function(t,e){return function(t,e){var n=t.selection.getRng();if(!Z.isText(n.commonAncestorContainer))return!1;var i=e?Jn.Forwards:Jn.Backwards,a=CaretWalker(t.getBody()),u=curry(getVisualCaretPosition,a.next),c=curry(getVisualCaretPosition,a.prev),s=e?u:c,l=e?Di:Mi,f=getNormalizedRangeEndPoint(i,t.getBody(),n),d=mi.normalizePosition(e,s(f));if(!d||!isMoveInsideSameBlock(f,d))return!1;if(l(d))return deleteContentAndShowCaret(t,n,f.getNode(),i,e,d);var m=s(d);return!!(m&&l(m)&&isMoveInsideSameBlock(d,m))&&deleteContentAndShowCaret(t,n,f.getNode(),i,e,m)}(t,e)},setCaretLocation=function(t,e){return function(n){return BoundaryCaret_renderCaret(e,n).map((function(e){return bi.setCaretPosition(t,e),!0})).getOr(!1)}},deleteFromTo=function(t,e,i,a){var u=t.getBody(),c=curry(mi.isInlineTarget,t);t.undoManager.ignore((function(){t.selection.setRng(function(t,e){var i=n.document.createRange();return i.setStart(t.container(),t.offset()),i.setEnd(e.container(),e.offset()),i}(i,a)),t.execCommand("Delete"),hi(c,u,Zn.fromRangeStart(t.selection.getRng())).map(BoundaryLocation_inside).map(setCaretLocation(t,e))})),t.nodeChanged()},backspaceDeleteCollapsed=function(t,e,n,i){var a=function(t,e){var n=getParentBlock(e,t);return n||t}(t.getBody(),i.container()),u=curry(mi.isInlineTarget,t),s=hi(u,a,i);return s.bind((function(t){return n?t.fold(constant(c.some(BoundaryLocation_inside(t))),c.none,constant(c.some(vi(t))),c.none):t.fold(c.none,constant(c.some(vi(t))),c.none,constant(c.some(BoundaryLocation_inside(t))))})).map(setCaretLocation(t,e)).getOrThunk((function(){var c=Or.navigate(n,a,i),l=c.bind((function(t){return hi(u,a,t)}));return s.isSome()&&l.isSome()?mi.findRootInline(u,a,i).map((function(e){return!!function(t){return lift2(Or.firstPositionIn(t),Or.lastPositionIn(t),(function(e,n){var i=mi.normalizePosition(!0,e),a=mi.normalizePosition(!1,n);return Or.nextPosition(t,i).map((function(t){return t.isEqual(a)})).getOr(!0)})).getOr(!0)}(e)&&(DeleteElement_deleteElement(t,n,C.fromDom(e)),!0)})).getOr(!1):l.bind((function(a){return c.map((function(a){return n?deleteFromTo(t,e,i,a):deleteFromTo(t,e,a,i),!0}))})).getOr(!1)}))},BoundaryDelete_backspaceDelete=function(t,e,n){if(t.selection.isCollapsed()&&function(t){return!1!==t.settings.inline_boundaries}(t)){var i=Zn.fromRangeStart(t.selection.getRng());return backspaceDeleteCollapsed(t,e,n,i)}return!1},hasOnlyOneChild=function(t){return 1===children(t).length},deleteLastPosition=function(t,e,n,i){var a=curry(isFormatElement,e),u=map(filter(i,a),(function(t){return t.dom()}));if(0===u.length)DeleteElement_deleteElement(e,t,n);else{var c=function(t,e){var n=createCaretContainer(!1),i=insertFormatNodesIntoCaretContainer(e,n.dom());return I(C.fromDom(t),n),remove(C.fromDom(t)),Zn(i,0)}(n.dom(),u);e.selection.setRng(c.toRange())}},deleteCaret=function(t,e){var n=C.fromDom(t.getBody()),i=C.fromDom(t.selection.getStart()),a=filter(function(t,e){var n=Parents_parentsAndSelf(e,t);return findIndex(n,Et).fold(constant(n),(function(t){return n.slice(0,t)}))}(n,i),hasOnlyOneChild);return last(a).map((function(n){var i,u=Zn.fromRangeStart(t.selection.getRng());return!(!DeleteUtils_willDeleteLastPositionInElement(e,u,n.dom())||(i=n,isCaretNode(i.dom())&&isCaretContainerEmpty(i.dom())))&&(deleteLastPosition(e,t,n,a),!0)})).getOr(!1)},InlineFormatDelete_backspaceDelete=function(t,e){return!!t.selection.isCollapsed()&&deleteCaret(t,e)},tableCellRng=function(t,e){return{start:constant(t),end:constant(e)}},Ki=Adt_generate([{removeTable:["element"]},{emptyCells:["cells"]}]),getClosestCell$1=function(t,e){return closest$1(C.fromDom(t),"td,th",e)},getClosestTable=function(t,e){return ancestor$1(t,"table",e)},isExpandedCellRng=function(t){return!1===eq(t.start(),t.end())},getTableFromCellRng=function(t,e){return getClosestTable(t.start(),e).bind((function(n){return getClosestTable(t.end(),e).bind((function(t){return e=eq(n,t),i=n,e?c.some(i):c.none();var e,i}))}))},getTableCells=function(t){return descendants$1(t,"td,th")},partialSelection=function(t,e){var n=getClosestCell$1(e.startContainer,t),i=getClosestCell$1(e.endContainer,t);return e.collapsed?c.none():lift2(n,i,tableCellRng).fold((function(){return n.fold((function(){return i.bind((function(e){return getClosestTable(e,t).bind((function(t){return head(getTableCells(t)).map((function(t){return tableCellRng(t,e)}))}))}))}),(function(e){return getClosestTable(e,t).bind((function(t){return last(getTableCells(t)).map((function(t){return tableCellRng(e,t)}))}))}))}),(function(e){return isWithinSameTable(t,e)?c.none():function(t,e){return getClosestTable(t.start(),e).bind((function(e){return last(getTableCells(e)).map((function(e){return tableCellRng(t.start(),e)}))}))}(e,t)}))},isWithinSameTable=function(t,e){return getTableFromCellRng(e,t).isSome()},getTableSelectionFromCellRng=function(t,e){return getTableFromCellRng(t,e).map((function(e){return function(t,e,n){return{rng:constant(t),table:constant(e),cells:constant(n)}}(t,e,getTableCells(e))}))},getTableSelectionFromRng=function(t,e){var n=function(t){return function(e){return eq(t,e)}}(t);return function(t,e){var n=getClosestCell$1(t.startContainer,e),i=getClosestCell$1(t.endContainer,e);return lift2(n,i,tableCellRng).filter(isExpandedCellRng).filter((function(t){return isWithinSameTable(e,t)})).orThunk((function(){return partialSelection(e,t)}))}(e,n).bind((function(t){return getTableSelectionFromCellRng(t,n)}))},getCellIndex=function(t,e){return findIndex(t,(function(t){return eq(t,e)}))},getAction=function(t){return function(t){return lift2(getCellIndex(t.cells(),t.rng().start()),getCellIndex(t.cells(),t.rng().end()),(function(e,n){return t.cells().slice(e,n+1)}))}(t).map((function(e){var n=t.cells();return e.length===n.length?Ki.removeTable(t.table()):Ki.emptyCells(e)}))},emptyCells=function(t,e){return each(e,PaddingBr_fillWithPaddingBr),t.selection.setCursorLocation(e[0].dom(),0),!0},deleteTableElement=function(t,e){return DeleteElement_deleteElement(t,!1,e),!0},deleteCellRange=function(t,e,n){return function(t,e){return getTableSelectionFromRng(t,e).bind(getAction)}(e,n).map((function(e){return e.fold(curry(deleteTableElement,t),curry(emptyCells,t))}))},deleteTableRange=function(t,e,n,i){return getParentCaption(e,i).fold((function(){return deleteCellRange(t,e,n)}),(function(e){return function(t,e){return emptyElement(t,e)}(t,e)})).getOr(!1)},getParentCell=function(t,e){return find(Parents_parentsAndSelf(e,t),zt)},getParentCaption=function(t,e){return find(Parents_parentsAndSelf(e,t),(function(t){return"caption"===H(t)}))},emptyElement=function(t,e){return PaddingBr_fillWithPaddingBr(e),t.selection.setCursorLocation(e.dom(),0),c.some(!0)},deleteCaretInsideCaption=function(t,e,n,i,a){return Or.navigate(n,t.getBody(),a).bind((function(u){return function(t,e,n,i){return Or.firstPositionIn(t.dom()).bind((function(a){return Or.lastPositionIn(t.dom()).map((function(t){return e?n.isEqual(a)&&i.isEqual(t):n.isEqual(t)&&i.isEqual(a)}))})).getOr(!0)}(i,n,a,u)?function(t,e){return emptyElement(t,e)}(t,i):function(t,e,n){return getParentCaption(t,C.fromDom(n.getNode())).map((function(t){return!1===eq(t,e)}))}(e,i,u)})).or(c.some(!0))},deleteCaretCells=function(t,e,n,i){var a=Zn.fromRangeStart(t.selection.getRng());return getParentCell(n,i).bind((function(i){return Empty_isEmpty(i)?emptyElement(t,i):function(t,e,n,i,a){return Or.navigate(n,t.getBody(),a).bind((function(t){return getParentCell(e,C.fromDom(t.getNode())).map((function(t){return!1===eq(t,i)}))}))}(t,n,e,i,a)})).getOr(!1)},isNearTable=function(t,e){return t?Ai(e):zi(e)},deleteCaret$1=function(t,e,n){var i=C.fromDom(t.getBody());return getParentCaption(i,n).fold((function(){return deleteCaretCells(t,e,i,n)||function(t,e){var n=Zn.fromRangeStart(t.selection.getRng());return isNearTable(e,n)||Or.fromPosition(e,t.getBody(),n).map((function(t){return isNearTable(e,t)})).getOr(!1)}(t,e)}),(function(n){return function(t,e,n,i){var a=Zn.fromRangeStart(t.selection.getRng());return Empty_isEmpty(i)?emptyElement(t,i):deleteCaretInsideCaption(t,n,e,i,a)}(t,e,i,n).getOr(!1)}))},TableDelete_backspaceDelete=function(t,e){var n=C.fromDom(t.selection.getStart(!0)),i=TableCellSelection_getCellsFromEditor(t);return t.selection.isCollapsed()&&0===i.length?deleteCaret$1(t,e,n):function(t,e){var n=C.fromDom(t.getBody()),i=t.selection.getRng(),a=TableCellSelection_getCellsFromEditor(t);return 0!==a.length?emptyCells(t,a):deleteTableRange(t,n,i,e)}(t,n)},PageBreakDelete_backspaceDelete=function(t,e){return!!t.selection.isCollapsed()&&function(t,e){var n=Zn.fromRangeStart(t.selection.getRng());return Or.fromPosition(e,t.getBody(),n).filter((function(t){return e?_i(t):Ni(t)})).bind((function(t){return c.from(getChildNodeAtRelativeOffset(e?0:-1,t))})).map((function(e){return t.selection.select(e),!0})).getOr(!1)}(t,e)},parseIndentValue=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},getIndentStyleName=function(t,e){return(t||"table"===H(e)?"margin":"padding")+("rtl"===get$4(e,"direction")?"-right":"-left")},canOutdent=function(t){var e=getBlocksToIndent(t);return!0!==t.readonly&&(e.length>1||function(t,e){return forall(e,(function(e){var n=getIndentStyleName(Settings_shouldIndentUseMargin(t),e),i=getRaw(e,n).map(parseIndentValue).getOr(0);return"false"!==t.dom.getContentEditable(e.dom())&&i>0}))}(t,e))},isListComponent=function(t){return Ot(t)||_t(t)},getBlocksToIndent=function(t){return filter(map(t.selection.getSelectedBlocks(),C.fromDom),(function(t){return!isListComponent(t)&&!function(t){return parent(t).map(isListComponent).getOr(!1)}(t)&&closest(t,(function(t){return Z.isContentEditableTrue(t.dom())||Z.isContentEditableFalse(t.dom())})).exists((function(t){return Z.isContentEditableTrue(t.dom())}))}))},handle=function(t,e){var n=t.dom,i=t.selection,a=t.formatter,u=Settings_getIndentation(t),c=/[a-z%]+$/i.exec(u)[0],s=parseInt(u,10),l=Settings_shouldIndentUseMargin(t),f=Settings_getForcedRootBlock(t);t.queryCommandState("InsertUnorderedList")||t.queryCommandState("InsertOrderedList")||""!==f||n.getParent(i.getNode(),n.isBlock)||a.apply("div"),each(getBlocksToIndent(t),(function(t){!function(t,e,n,i,a,u){var c=getIndentStyleName(n,C.fromDom(u));if("outdent"===e){var s=Math.max(0,parseIndentValue(u.style[c])-i);t.setStyle(u,c,s?s+a:"")}else{s=parseIndentValue(u.style[c])+i+a;t.setStyle(u,c,s)}}(n,e,l,s,c,t.dom())}))},navigateIgnoreEmptyTextNodes=function(t,e,n){return Or.navigateIgnore(t,e,n,isEmptyText)},getClosestBlock=function(t,e){return find(Parents_parentsAndSelf(C.fromDom(e.container()),t),Et)},isAtBeforeAfterBlockBoundary=function(t,e,n){return navigateIgnoreEmptyTextNodes(t,e.dom(),n).forall((function(t){return getClosestBlock(e,n).fold((function(){return!1===isInSameBlock(t,n,e.dom())}),(function(i){return!1===isInSameBlock(t,n,e.dom())&&P(i,C.fromDom(t.container()))}))}))},isAtBlockBoundary=function(t,e,n){return getClosestBlock(e,n).fold((function(){return navigateIgnoreEmptyTextNodes(t,e.dom(),n).forall((function(t){return!1===isInSameBlock(t,n,e.dom())}))}),(function(e){return navigateIgnoreEmptyTextNodes(t,e.dom(),n).isNone()}))},Yi=curry(isAtBlockBoundary,!1),Ji=curry(isAtBlockBoundary,!0),Zi=curry(isAtBeforeAfterBlockBoundary,!1),Qi=curry(isAtBeforeAfterBlockBoundary,!0),Outdent_backspaceDelete=function(t,e,n){if(t.selection.isCollapsed()&&canOutdent(t)){var i=t.dom,a=t.selection.getRng(),u=Zn.fromRangeStart(a),c=i.getParent(a.startContainer,i.isBlock);if(null!==c&&Yi(C.fromDom(c),u))return handle(t,"outdent"),!0}return!1},DeleteBackspaceKeys_setup=function(t,e){t.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(t,e,n){MatchKeys_execute([{keyCode:So.BACKSPACE,action:MatchKeys_action(Outdent_backspaceDelete,t,!1)},{keyCode:So.BACKSPACE,action:MatchKeys_action(CefDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(CefDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(CefBoundaryDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(CefBoundaryDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(BoundaryDelete_backspaceDelete,t,e,!1)},{keyCode:So.DELETE,action:MatchKeys_action(BoundaryDelete_backspaceDelete,t,e,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(TableDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(TableDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(PageBreakDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(PageBreakDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(BlockRangeDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(BlockRangeDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(BlockBoundaryDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(BlockBoundaryDelete_backspaceDelete,t,!0)},{keyCode:So.BACKSPACE,action:MatchKeys_action(InlineFormatDelete_backspaceDelete,t,!1)},{keyCode:So.DELETE,action:MatchKeys_action(InlineFormatDelete_backspaceDelete,t,!0)}],n).each((function(t){n.preventDefault()}))}(t,e,n)})),t.on("keyup",(function(e){!1===e.isDefaultPrevented()&&function(t,e){MatchKeys_execute([{keyCode:So.BACKSPACE,action:MatchKeys_action(CefDelete_paddEmptyElement,t)},{keyCode:So.DELETE,action:MatchKeys_action(CefDelete_paddEmptyElement,t)}],e)}(t,e)}))},getParentBlock$2=function(t){return c.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},NewLineUtils_moveToCaretPosition=function(t,e){var n,i,a=e,u=t.dom,c=t.schema.getMoveCaretBeforeOnEnterElements();if(e){if(/^(LI|DT|DD)$/.test(e.nodeName)){var s=function(t){for(;t;){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}}(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(u.doc.createTextNode(" "),e.firstChild)}if(i=u.createRng(),e.normalize(),e.hasChildNodes()){for(var l=new cn(e,e);n=l.current();){if(Z.isText(n)){i.setStart(n,0),i.setEnd(n,0);break}if(c[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}a=n,n=l.next()}n||(i.setStart(a,0),i.setEnd(a,0))}else Z.isBr(e)?e.nextSibling&&u.isBlock(e.nextSibling)?(i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)):(i.setStart(e,0),i.setEnd(e,0));t.selection.setRng(i),ScrollIntoView_scrollRangeIntoView(t,i)}},NewLineUtils_getEditableRoot=function(t,e){var n,i,a=t.getRoot();for(n=e;n!==a&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==a?i:a},ta=getParentBlock$2,NewLineUtils_getParentBlockName=function(t){return getParentBlock$2(t).fold(constant(""),(function(t){return t.nodeName.toUpperCase()}))},NewLineUtils_isListItemParentBlock=function(t){return getParentBlock$2(t).filter((function(t){return _t(C.fromDom(t))})).isSome()},hasParent$1=function(t,e){return t&&t.parentNode&&t.parentNode.nodeName===e},isListBlock=function(t){return t&&/^(OL|UL|LI)$/.test(t.nodeName)},getContainerBlock=function(t){var e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},isFirstOrLastLi=function(t,e,n){for(var i=t[n?"firstChild":"lastChild"];i&&!Z.isElement(i);)i=i[n?"nextSibling":"previousSibling"];return i===e},InsertLi_insert=function(t,e,n,i,a){var u=t.dom,c=t.selection.getRng();if(n!==t.getBody()){var s;isListBlock(s=n)&&isListBlock(s.parentNode)&&(a="LI");var l=a?e(a):u.create("BR");if(isFirstOrLastLi(n,i,!0)&&isFirstOrLastLi(n,i,!1))hasParent$1(n,"LI")?u.insertAfter(l,getContainerBlock(n)):u.replace(l,n);else if(isFirstOrLastLi(n,i,!0))hasParent$1(n,"LI")?(u.insertAfter(l,getContainerBlock(n)),l.appendChild(u.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n);else if(isFirstOrLastLi(n,i,!1))u.insertAfter(l,getContainerBlock(n));else{n=getContainerBlock(n);var f=c.cloneRange();f.setStartAfter(i),f.setEndAfter(n);var d=f.extractContents();"LI"===a&&function(t,e){return t.firstChild&&t.firstChild.nodeName===e}(d,"LI")?(l=d.firstChild,u.insertAfter(d,n)):(u.insertAfter(d,n),u.insertAfter(l,n))}u.remove(i),NewLineUtils_moveToCaretPosition(t,l)}},isEmptyAnchor=function(t,e){return e&&"A"===e.nodeName&&t.isEmpty(e)},emptyBlock=function(t){t.innerHTML='<br data-mce-bogus="1">'},containerAndSiblingName=function(t,e){return t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e},canSplitBlock=function(t,e){return e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e)},normalizeZwspOffset=function(t,e,n){return!1===Z.isText(e)?n:t?1===n&&e.data.charAt(n-1)===On.ZWSP?0:n:n===e.data.length-1&&e.data.charAt(n)===On.ZWSP?e.data.length:n},getEditableRoot$1=function(t,e){var n,i,a=t.getRoot();for(n=e;n!==a&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==a?i:a},setForcedBlockAttrs=function(t,e){var n=Settings_getForcedRootBlock(t);n&&n.toLowerCase()===e.tagName.toLowerCase()&&t.dom.setAttribs(e,Settings_getForcedRootBlockAttrs(t))},InsertBlock_insert=function(t,e){var n,i,a,u,c,s,l,f,d,m,g,h,p,v=t.dom,b=t.schema,y=b.getNonEmptyElements(),x=t.selection.getRng(),createNewBlock=function(e){var n,u,s,l=a,f=b.getTextInlineElements();if(e||"TABLE"===m||"HR"===m?(n=v.create(e||h),setForcedBlockAttrs(t,n)):n=c.cloneNode(!1),s=n,!1===Settings_shouldKeepStyles(t))v.setAttrib(n,"style",null),v.setAttrib(n,"class",null);else do{if(f[l.nodeName]){if(isCaretNode(l)||Bookmarks_isBookmarkNode(l))continue;u=l.cloneNode(!1),v.setAttrib(u,"id",""),n.hasChildNodes()?(u.appendChild(n.firstChild),n.appendChild(u)):(s=u,n.appendChild(u))}}while((l=l.parentNode)&&l!==i);return emptyBlock(s),n},isCaretAtStartOrEndOfBlock=function(t){var e,n,i=normalizeZwspOffset(t,a,u);if(Z.isText(a)&&(t?i>0:i<a.nodeValue.length))return!1;if(a.parentNode===c&&p&&!t)return!0;if(t&&Z.isElement(a)&&a===c.firstChild)return!0;if(containerAndSiblingName(a,"TABLE")||containerAndSiblingName(a,"HR"))return p&&!t||!p&&t;var s=new cn(a,c);for(Z.isText(a)&&(t&&0===i?s.prev():t||i!==a.nodeValue.length||s.next());e=s.current();){if(Z.isElement(e)){if(!e.getAttribute("data-mce-bogus")&&(n=e.nodeName.toLowerCase(),y[n]&&"br"!==n))return!1}else if(Z.isText(e)&&!/^[ \t\r\n]*$/.test(e.nodeValue))return!1;t?s.prev():s.next()}return!0},insertNewBlockAfter=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(m)&&"HGROUP"!==g?createNewBlock(h):createNewBlock(),Settings_shouldEndContainerOnEmptyBlock(t)&&canSplitBlock(v,d)&&v.isEmpty(c)?l=v.split(d,c):v.insertAfter(l,c),NewLineUtils_moveToCaretPosition(t,l)};NormalizeRange_normalize(v,x).each((function(t){x.setStart(t.startContainer,t.startOffset),x.setEnd(t.endContainer,t.endOffset)})),a=x.startContainer,u=x.startOffset,h=Settings_getForcedRootBlock(t),s=!(!e||!e.shiftKey);var w=!(!e||!e.ctrlKey);Z.isElement(a)&&a.hasChildNodes()&&(p=u>a.childNodes.length-1,a=a.childNodes[Math.min(u,a.childNodes.length-1)]||a,u=p&&Z.isText(a)?a.nodeValue.length:0),(i=getEditableRoot$1(v,a))&&((h&&!s||!h&&s)&&(a=function(t,e,n,i,a){var u,c,s,l,f,d,m=e||"P",g=t.dom,h=getEditableRoot$1(g,i);if(!(c=g.getParent(i,g.isBlock))||!canSplitBlock(g,c)){if(d=(c=c||h)===t.getBody()||function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}(c)?c.nodeName.toLowerCase():c.parentNode.nodeName.toLowerCase(),!c.hasChildNodes())return u=g.create(m),setForcedBlockAttrs(t,u),c.appendChild(u),n.setStart(u,0),n.setEnd(u,0),u;for(l=i;l.parentNode!==c;)l=l.parentNode;for(;l&&!g.isBlock(l);)s=l,l=l.previousSibling;if(s&&t.schema.isValidChild(d,m.toLowerCase())){for(u=g.create(m),setForcedBlockAttrs(t,u),s.parentNode.insertBefore(u,s),l=s;l&&!g.isBlock(l);)f=l.nextSibling,u.appendChild(l),l=f;n.setStart(i,a),n.setEnd(i,a)}}return i}(t,h,x,a,u)),c=v.getParent(a,v.isBlock),d=c?v.getParent(c.parentNode,v.isBlock):null,m=c?c.nodeName.toUpperCase():"","LI"!==(g=d?d.nodeName.toUpperCase():"")||w||(c=d,d=d.parentNode,m=g),/^(LI|DT|DD)$/.test(m)&&v.isEmpty(c)?InsertLi_insert(t,createNewBlock,d,c,h):h&&c===t.getBody()||(h=h||"P",isCaretContainerBlock(c)?(l=showCaretContainerBlock(c),v.isEmpty(c)&&emptyBlock(c),NewLineUtils_moveToCaretPosition(t,l)):isCaretAtStartOrEndOfBlock()?insertNewBlockAfter():isCaretAtStartOrEndOfBlock(!0)?(l=c.parentNode.insertBefore(createNewBlock(),c),NewLineUtils_moveToCaretPosition(t,containerAndSiblingName(c,"HR")?l:c)):((n=function(t){var e=t.cloneRange();return e.setStart(t.startContainer,normalizeZwspOffset(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,normalizeZwspOffset(!1,t.endContainer,t.endOffset)),e}(x).cloneRange()).setEndAfter(c),function(t){each(descendants(C.fromDom(t),F),(function(t){var e=t.dom();e.nodeValue=On.trim(e.nodeValue)}))}(f=n.extractContents()),function(t){do{Z.isText(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)}(f),l=f.firstChild,v.insertAfter(f,c),function(t,e,n){var i,a=n,u=[];if(a){for(;a=a.firstChild;){if(t.isBlock(a))return;Z.isElement(a)&&!e[a.nodeName.toLowerCase()]&&u.push(a)}for(i=u.length;i--;)(!(a=u[i]).hasChildNodes()||a.firstChild===a.lastChild&&""===a.firstChild.nodeValue||isEmptyAnchor(t,a))&&t.remove(a)}}(v,y,l),function(t,e){var n;e.normalize(),(n=e.lastChild)&&!/^(left|right)$/gi.test(t.getStyle(n,"float",!0))||t.add(e,"br")}(v,c),v.isEmpty(c)&&emptyBlock(c),l.normalize(),v.isEmpty(l)?(v.remove(l),insertNewBlockAfter()):NewLineUtils_moveToCaretPosition(t,l)),v.setAttrib(l,"id",""),t.fire("NewBlock",{newBlock:l})))},scrollToBr=function(t,e,n){var i=t.create("span",{},"&nbsp;");n.parentNode.insertBefore(i,n),e.scrollIntoView(i),t.remove(i)},moveSelectionToBr=function(t,e,n,i){var a=t.createRng();i?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),e.setRng(a)},insertBrAtCaret=function(t,e){var n,i,a=t.selection,u=t.dom,c=a.getRng();NormalizeRange_normalize(u,c).each((function(t){c.setStart(t.startContainer,t.startOffset),c.setEnd(t.endContainer,t.endOffset)}));var s=c.startOffset,l=c.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var f=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=f&&3===l.nodeType?l.nodeValue.length:0}var d=u.getParent(l,u.isBlock),m=d?u.getParent(d.parentNode,u.isBlock):null,g=m?m.nodeName.toUpperCase():"",h=!(!e||!e.ctrlKey);"LI"!==g||h||(d=m),l&&3===l.nodeType&&s>=l.nodeValue.length&&(function(t,e,n){for(var i,a=new cn(e,n),u=t.getNonEmptyElements();i=a.next();)if(u[i.nodeName.toLowerCase()]||i.length>0)return!0}(t.schema,l,d)||(n=u.create("br"),c.insertNode(n),c.setStartAfter(n),c.setEndAfter(n),i=!0)),n=u.create("br"),rangeInsertNode(u,c,n),scrollToBr(u,a,n),moveSelectionToBr(u,a,n,i),t.undoManager.add()},insertBrBefore=function(t,e){var n=C.fromTag("br");I(C.fromDom(e),n),t.undoManager.add()},insertBrAfter=function(t,e){hasBrAfter(t.getBody(),e)||after(C.fromDom(e),C.fromTag("br"));var n=C.fromTag("br");after(C.fromDom(e),n),scrollToBr(t.dom,t.selection,n.dom()),moveSelectionToBr(t.dom,t.selection,n.dom(),!1),t.undoManager.add()},hasBrAfter=function(t,e){return n=Zn.after(e),!!Z.isBr(n.getNode())||Or.nextPosition(t,Zn.after(e)).map((function(t){return Z.isBr(t.getNode())})).getOr(!1);var n},isAnchorLink=function(t){return t&&"A"===t.nodeName&&"href"in t},isInsideAnchor=function(t){return t.fold(constant(!1),isAnchorLink,isAnchorLink,constant(!1))},insertBrOutsideAnchor=function(t,e){e.fold(noop,curry(insertBrBefore,t),curry(insertBrAfter,t),noop)},InsertBr_insert=function(t,e){var n=function(t){var e=curry(mi.isInlineTarget,t),n=Zn.fromRangeStart(t.selection.getRng());return hi(e,t.getBody(),n).filter(isInsideAnchor)}(t);n.isSome()?n.each(curry(insertBrOutsideAnchor,t)):insertBrAtCaret(t,e)},matchesSelector=function(t,e){return ta(t).filter((function(t){return e.length>0&&is(C.fromDom(t),e)})).isSome()},ContextSelectors_shouldInsertBr=function(t){return matchesSelector(t,Settings_getBrNewLineSelector(t))},ContextSelectors_shouldBlockNewLine=function(t){return matchesSelector(t,Settings_getNoNewLineSelector(t))},ea=Adt_generate([{br:[]},{block:[]},{none:[]}]),shouldBlockNewLine$1=function(t,e){return ContextSelectors_shouldBlockNewLine(t)},isBrMode=function(t){return function(e,n){return""===Settings_getForcedRootBlock(e)===t}},inListBlock=function(t){return function(e,n){return NewLineUtils_isListItemParentBlock(e)===t}},inBlock=function(t,e){return function(n,i){return NewLineUtils_getParentBlockName(n)===t.toUpperCase()===e}},inPreBlock=function(t){return inBlock("pre",t)},shouldPutBrInPre$1=function(t){return function(e,n){return Settings_shouldPutBrInPre(e)===t}},inBrContext=function(t,e){return ContextSelectors_shouldInsertBr(t)},hasShiftKey=function(t,e){return e},canInsertIntoEditableRoot=function(t){var e=Settings_getForcedRootBlock(t),n=NewLineUtils_getEditableRoot(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e||"P")},match$2=function(t,e){return function(n,i){return foldl(t,(function(t,e){return t&&e(n,i)}),!0)?c.some(e):c.none()}},NewLineAction_getAction=function(t,e){return LazyEvaluator_evaluateUntil([match$2([shouldBlockNewLine$1],ea.none()),match$2([inBlock("summary",!0)],ea.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1),hasShiftKey],ea.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1)],ea.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0),hasShiftKey],ea.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0)],ea.br()),match$2([inListBlock(!0),hasShiftKey],ea.br()),match$2([inListBlock(!0)],ea.block()),match$2([isBrMode(!0),hasShiftKey,canInsertIntoEditableRoot],ea.block()),match$2([isBrMode(!0)],ea.br()),match$2([inBrContext],ea.br()),match$2([isBrMode(!1),hasShiftKey],ea.br()),match$2([canInsertIntoEditableRoot],ea.block())],[t,!(!e||!e.shiftKey)]).getOr(ea.none())},InsertNewLine_insert=function(t,e){NewLineAction_getAction(t,e).fold((function(){InsertBr_insert(t,e)}),(function(){InsertBlock_insert(t,e)}),noop)},EnterKey_setup=function(t){t.on("keydown",(function(e){e.keyCode===So.ENTER&&function(t,e){var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact((function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),InsertNewLine_insert(t,e)})))}(t,e)}))},insertTextAtPosition=function(t,e){var n=e.container(),i=e.offset();return Z.isText(n)?(n.insertData(i,t),c.some(CaretPosition(n,i+t.length))):getElementFromPosition(e).map((function(n){var i=C.fromText(t);return e.isAtEnd()?after(n,i):I(n,i),CaretPosition(i.dom(),t.length)}))},na=curry(insertTextAtPosition," "),ra=curry(insertTextAtPosition," "),isInMiddleOfText=function(t){return CaretPosition.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd()},getClosestBlock$1=function(t,e){var n=filter(Parents_parentsAndSelf(C.fromDom(e.container()),t),Et);return head(n).getOr(t)},hasSpaceBefore=function(t,e){return isInMiddleOfText(e)?Oi(e):Oi(e)||Or.prevPosition(getClosestBlock$1(t,e).dom(),e).exists(Oi)},hasSpaceAfter=function(t,e){return isInMiddleOfText(e)?Ti(e):Ti(e)||Or.nextPosition(getClosestBlock$1(t,e).dom(),e).exists(Ti)},isInPre=function(t){return getElementFromPosition(t).bind((function(t){return closest(t,L)})).exists((function(t){return function(t){return contains(["pre","pre-wrap"],t)}(get$4(t,"white-space"))}))},isAtLineBoundary=function(t,e){return function(t,e){return Or.prevPosition(t.dom(),e).isNone()}(t,e)||function(t,e){return Or.nextPosition(t.dom(),e).isNone()}(t,e)||Yi(t,e)||Ji(t,e)||isAfterBr(t,e)||isBeforeBr(t,e)},needsToBeNbspRight=function(t,e){var n=function(t){var e=t.container(),n=t.offset();return Z.isText(e)&&n<e.data.length?CaretPosition(e,n+1):t}(e);return!isInPre(n)&&(Ji(t,n)||Qi(t,n)||isBeforeBr(t,n)||hasSpaceAfter(t,n))},needsToBeNbsp=function(t,e){return function(t,e){return!isInPre(e)&&(Yi(t,e)||Zi(t,e)||isAfterBr(t,e)||hasSpaceBefore(t,e))}(t,e)||needsToBeNbspRight(t,e)},isNbspAt=function(t,e){return _r(t.charAt(e))},hasNbsp=function(t){var e=t.container();return Z.isText(e)&&contains$1(e.data," ")},normalizeNbspInMiddleOfTextNode=function(t){var e=t.data,n=function(t){var e=t.split("");return map(e,(function(t,n){return _r(t)&&n>0&&n<e.length-1&&isContent(e[n-1])&&isContent(e[n+1])?" ":t})).join("")}(e);return n!==e&&(t.data=n,!0)},normalizeNbsps=function(t,e){return c.some(e).filter(hasNbsp).bind((function(e){var n=e.container();return function(t,e){var n=e.data,i=CaretPosition(e,0);return!(!isNbspAt(n,0)||needsToBeNbsp(t,i))&&(e.data=" "+n.slice(1),!0)}(t,n)||normalizeNbspInMiddleOfTextNode(n)||function(t,e){var n=e.data,i=CaretPosition(e,n.length-1);return!(!isNbspAt(n,n.length-1)||needsToBeNbsp(t,i))&&(e.data=n.slice(0,-1)+" ",!0)}(t,n)?c.some(e):c.none()}))},normalizeNbspsInEditor=function(t){var e=C.fromDom(t.getBody());t.selection.isCollapsed()&&normalizeNbsps(e,CaretPosition.fromRangeStart(t.selection.getRng())).each((function(e){t.selection.setRng(e.toRange())}))},insertInlineBoundarySpaceOrNbsp=function(t,e){return function(n){return function(t,e){return!isInPre(e)&&(isAtLineBoundary(t,e)||hasSpaceBefore(t,e)||hasSpaceAfter(t,e))}(t,n)?na(e):ra(e)}},insertSpaceOrNbspAtSelection=function(t){var e=Zn.fromRangeStart(t.selection.getRng()),n=C.fromDom(t.getBody());if(t.selection.isCollapsed()){var i=curry(mi.isInlineTarget,t),a=Zn.fromRangeStart(t.selection.getRng());return hi(i,t.getBody(),a).bind(function(t){return function(e){return e.fold((function(e){return Or.prevPosition(t.dom(),Zn.before(e))}),(function(t){return Or.firstPositionIn(t)}),(function(t){return Or.lastPositionIn(t)}),(function(e){return Or.nextPosition(t.dom(),Zn.after(e))}))}}(n)).bind(insertInlineBoundarySpaceOrNbsp(n,e)).exists(function(t){return function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}}(t))}return!1},SpaceKey_setup=function(t){t.on("keydown",(function(e){!1===e.isDefaultPrevented()&&function(t,e){MatchKeys_execute([{keyCode:So.SPACEBAR,action:MatchKeys_action(insertSpaceOrNbspAtSelection,t)}],e).each((function(t){e.preventDefault()}))}(t,e)}))},showBlockCaretContainer=function(t,e){e.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(e),function(t){t.selection.setRng(t.selection.getRng())}(t),t.selection.scrollIntoView(e))},handleBlockContainer=function(t,e){var n=function(t){return descendant(C.fromDom(t.getBody()),"*[data-mce-caret]").fold(constant(null),(function(t){return t.dom()}))}(t);if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void showBlockCaretContainer(t,n)):void(hasContent(n)&&(showBlockCaretContainer(t,n),t.undoManager.add()))},CaretContainerInput_setup=function(t){t.on("keyup compositionstart",curry(handleBlockContainer,t))},oa=detect$3().browser,setup$e=function(t){!function(t){var e=first((function(){t.composing||normalizeNbspsInEditor(t)}),0);oa.isIE()&&(t.on("keypress",(function(t){e.throttle()})),t.on("remove",(function(t){e.cancel()})))}(t),t.on("input",(function(e){!1===e.isComposing&&normalizeNbspsInEditor(t)}))},HomeEndKeys_setup=function(t){t.on("keydown",(function(e){!1===e.isDefaultPrevented()&&function(t,e){MatchKeys_execute([{keyCode:So.END,action:moveToLineEndPoint(t,!0)},{keyCode:So.HOME,action:moveToLineEndPoint(t,!1)}],e).each((function(t){e.preventDefault()}))}(t,e)}))},KeyboardOverrides_setup=function(t){var e=bi.setupSelectedState(t);CaretContainerInput_setup(t),ArrowKeys_setup(t,e),DeleteBackspaceKeys_setup(t,e),EnterKey_setup(t),SpaceKey_setup(t),setup$e(t),HomeEndKeys_setup(t)},ia=function(){function NodeChange(t){var e;this.lastPath=[],this.editor=t;var n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(function(n){var i,a;a={startContainer:(i=t.selection.getRng()).startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!==n.type&&RangeCompare_isEq(a,e)||t.fire("SelectionChange"),e=a})),t.on("contextmenu",(function(){t.fire("SelectionChange")})),t.on("SelectionChange",(function(){var e=t.selection.getStart(!0);!e||!pt.range&&t.selection.isCollapsed()||hasAnyRanges(t)&&!n.isSameElementPath(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(function(e){!e.isDefaultPrevented()&&hasAnyRanges(t)&&("IMG"===t.selection.getNode().nodeName?ut.setEditorTimeout(t,(function(){t.nodeChanged()})):t.nodeChanged())}))}return NodeChange.prototype.nodeChanged=function(t){var e,n,i,a=this.editor.selection;this.editor.initialized&&a&&!this.editor.settings.disable_nodechange&&!this.editor.readonly&&(i=this.editor.getBody(),(e=a.getStart(!0)||i).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,i)||(e=i),n=[],this.editor.dom.getParent(e,(function(t){if(t===i)return!0;n.push(t)})),(t=t||{}).element=e,t.parents=n,this.editor.fire("NodeChange",t))},NodeChange.prototype.isSameElementPath=function(t){var e,n;if((n=this.editor.$(t).parentsUntil(this.editor.getBody()).add(t)).length===this.lastPath.length){for(e=n.length;e>=0&&n[e]===this.lastPath[e];e--);if(-1===e)return this.lastPath=n,!0}return this.lastPath=n,!1},NodeChange}(),setup$h=function(t){!function(t){t.on("click",(function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}))}(t),function(t){t.parser.addNodeFilter("details",(function(t){each(t,(function(t){t.attr("data-mce-open",t.attr("open")),t.attr("open","open")}))})),t.serializer.addNodeFilter("details",(function(t){each(t,(function(t){var e=t.attr("data-mce-open");t.attr("open",s(e)?e:null),t.attr("data-mce-open",null)}))}))}(t)},isTextBlockNode=function(t){return Z.isElement(t)&&Tt(C.fromDom(t))},setup$i=function(t){t.on("click",(function(e){e.detail>=3&&function(t){var e=t.selection.getRng(),n=CaretPosition.fromRangeStart(e),i=CaretPosition.fromRangeEnd(e);if(CaretPosition.isElementPosition(n)){var a=n.container();isTextBlockNode(a)&&Or.firstPositionIn(a).each((function(t){return e.setStart(t.container(),t.offset())}))}if(CaretPosition.isElementPosition(i)){a=n.container();isTextBlockNode(a)&&Or.lastPositionIn(a).each((function(t){return e.setEnd(t.container(),t.offset())}))}t.selection.setRng(RangeNormalizer_normalize(e))}(t)}))},getAbsolutePosition=function(t){var e,n,i,a;return a=t.getBoundingClientRect(),n=(e=t.ownerDocument).documentElement,i=e.defaultView,{top:a.top+i.pageYOffset-n.clientTop,left:a.left+i.pageXOffset-n.clientLeft}},MousePosition_calc=function(t,e){return function(t,e,n){return{pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}}(function(t){return t.inline?getAbsolutePosition(t.getBody()):{left:0,top:0}}(t),function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}}(t),function(t,e){if(e.target.ownerDocument!==t.getDoc()){var n=getAbsolutePosition(t.getContentAreaContainer()),i=function(t){var e=t.getBody(),n=t.getDoc().documentElement,i={left:e.scrollLeft,top:e.scrollTop},a={left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop};return t.inline?i:a}(t);return{left:e.pageX-n.left+i.left,top:e.pageY-n.top+i.top}}return{left:e.pageX,top:e.pageY}}(t,e))},aa=Z.isContentEditableFalse,ua=Z.isContentEditableTrue,removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},start$1=function(t,e){return function(n){if(function(t){return 0===t.button}(n)){var i=find(e.dom.getParents(n.target),Predicate_or(aa,ua)).getOr(null);if(s=e.getBody(),aa(l=i)&&l!==s){var a=e.dom.getPos(i),u=e.getBody(),c=e.getDoc().documentElement;t.element=i,t.screenX=n.screenX,t.screenY=n.screenY,t.maxX=(e.inline?u.scrollWidth:c.offsetWidth)-2,t.maxY=(e.inline?u.scrollHeight:c.offsetHeight)-2,t.relX=n.pageX-a.x,t.relY=n.pageY-a.y,t.width=i.offsetWidth,t.height=i.offsetHeight,t.ghost=function(t,e,n,i){var a=e.cloneNode(!0);t.dom.setStyles(a,{width:n,height:i}),t.dom.setAttrib(a,"data-mce-selected",null);var u=t.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return t.dom.setStyles(u,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),t.dom.setStyles(a,{margin:0,boxSizing:"border-box"}),u.appendChild(a),u}(e,i,t.width,t.height)}}var s,l}},drop=function(t,e){return function(n){if(t.dragging&&function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!aa(e)}(e,(s=e.selection,3===(l=s.getSel().getRangeAt(0).startContainer).nodeType?l.parentNode:l),t.element)){var i=(u=t.element,(c=u.cloneNode(!0)).removeAttribute("data-mce-selected"),c),a=e.fire("drop",{targetClone:i,clientX:n.clientX,clientY:n.clientY});a.isDefaultPrevented()||(i=a.targetClone,e.undoManager.transact((function(){removeElement(t.element),e.insertContent(e.dom.getOuterHTML(i)),e._selectionOverrides.hideFakeCaret()})))}var u,c,s,l;removeDragState(t)}},removeDragState=function(t){t.dragging=!1,t.element=null,removeElement(t.ghost)},bindFakeDragEvents=function(t){var e,i,a,u,c,s,l={};e=gn.DOM,s=n.document,i=start$1(l,t),a=function(t,e){var n=ut.throttle((function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)}),0);return function(i){var a,u,c=Math.max(Math.abs(i.screenX-t.screenX),Math.abs(i.screenY-t.screenY));if(function(t){return t.element}(t)&&!t.dragging&&c>10){if(e.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){var s=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}}(t,MousePosition_calc(e,i));a=t.ghost,u=e.getBody(),a.parentNode!==u&&u.appendChild(a),function(t,e,n,i,a,u){var c=0,s=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>a&&(c=e.pageX+n-a),e.pageY+i>u&&(s=e.pageY+i-u),t.style.width=n-c+"px",t.style.height=i-s+"px"}(t.ghost,s,t.width,t.height,t.maxX,t.maxY),n(i.clientX,i.clientY)}}}(l,t),u=drop(l,t),c=function(t,e){return function(){t.dragging&&e.fire("dragend"),removeDragState(t)}}(l,t),t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",u),e.bind(s,"mousemove",a),e.bind(s,"mouseup",c),t.on("remove",(function(){e.unbind(s,"mousemove",a),e.unbind(s,"mouseup",c)}))},DragDropOverrides_init=function(t){bindFakeDragEvents(t),function(t){t.on("drop",(function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(aa(n)||aa(t.dom.getContentEditableParent(n)))&&e.preventDefault()}))}(t)},CefFocus_setup=function(t){var e=first((function(){if(!t.removed&&t.getBody().contains(n.document.activeElement)&&t.selection.getRng().collapsed){var e=renderRangeCaret(t,t.selection.getRng(),!1);t.selection.setRng(e)}}),0);t.on("focus",(function(){e.throttle()})),t.on("blur",(function(){e.cancel()}))},ca=Z.isContentEditableTrue,sa=Z.isContentEditableFalse,getContentEditableRoot$2=function(t,e){for(var n=t.getBody();e&&e!==n;){if(ca(e)||sa(e))return e;e=e.parentNode}return null},SelectionOverrides=function(t){var e,n=t.getBody(),i=FakeCaret(t,n,(function(e){return t.dom.isBlock(e)}),(function(){return eo(t)})),a="sel-"+t.dom.uniqueId(),setRange=function(e){e&&t.selection.setRng(e)},getRange=function(){return t.selection.getRng()},showCaret=function(e,n,a,u){return void 0===u&&(u=!0),t.fire("ShowCaret",{target:n,direction:e,before:a}).isDefaultPrevented()?null:(u&&t.selection.scrollIntoView(n,-1===e),i.show(a,n))},isWithinCaretContainer=function(t){return isCaretContainer(t)||startsWithCaretContainer(t)||endsWithCaretContainer(t)},isRangeInCaretContainer=function(t){return isWithinCaretContainer(t.startContainer)||isWithinCaretContainer(t.endContainer)},normalizeShortEndedElementSelection=function(e){var n=t.schema.getShortEndedElements(),i=t.dom.createRng(),a=e.startContainer,u=e.startOffset,c=e.endContainer,s=e.endOffset;return has(n,a.nodeName.toLowerCase())?0===u?i.setStartBefore(a):i.setStartAfter(a):i.setStart(a,u),has(n,c.nodeName.toLowerCase())?0===s?i.setEndBefore(c):i.setEndAfter(c):i.setEnd(c,s),i},setContentEditableSelection=function(i,u){var c,s,l,f,d,m,g,h,p,v,b=t.$,y=t.dom;if(!i)return null;if(i.collapsed){if(!isRangeInCaretContainer(i))if(!1===u){if(h=getNormalizedRangeEndPoint(-1,n,i),isFakeCaretTarget(h.getNode(!0)))return showCaret(-1,h.getNode(!0),!1,!1);if(isFakeCaretTarget(h.getNode()))return showCaret(-1,h.getNode(),!h.isAtEnd(),!1)}else{if(h=getNormalizedRangeEndPoint(1,n,i),isFakeCaretTarget(h.getNode()))return showCaret(1,h.getNode(),!h.isAtEnd(),!1);if(isFakeCaretTarget(h.getNode(!0)))return showCaret(1,h.getNode(!0),!1,!1)}return null}if(f=i.startContainer,d=i.startOffset,m=i.endOffset,3===f.nodeType&&0===d&&sa(f.parentNode)&&(f=f.parentNode,d=y.nodeIndex(f),f=f.parentNode),1!==f.nodeType)return null;if(m===d+1&&f===i.endContainer&&(c=f.childNodes[d]),!sa(c))return null;if(p=v=c.cloneNode(!0),(g=t.fire("ObjectSelected",{target:c,targetClone:p})).isDefaultPrevented())return null;s=descendant(C.fromDom(t.getBody()),"#"+a).fold((function(){return b([])}),(function(t){return b([t.dom()])})),p=g.targetClone,0===s.length&&(s=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",a)).appendTo(t.getBody()),i=t.dom.createRng(),p===v&&pt.ie?(s.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(p),i.setStartAfter(s[0].firstChild.firstChild),i.setEndAfter(p)):(s.empty().append(" ").append(p).append(" "),i.setStart(s[0].firstChild,1),i.setEnd(s[0].lastChild,0)),s.css({top:y.getPos(c,t.getBody()).y}),s[0].focus(),(l=t.selection.getSel()).removeAllRanges(),l.addRange(i);var x=C.fromDom(c);return each(descendants$1(C.fromDom(t.getBody()),"*[data-mce-selected]"),(function(t){eq(x,t)||remove$1(t,"data-mce-selected")})),t.dom.getAttrib(c,"data-mce-selected")||c.setAttribute("data-mce-selected","1"),e=c,hideFakeCaret(),i},removeContentEditableSelection=function(){e&&(e.removeAttribute("data-mce-selected"),descendant(C.fromDom(t.getBody()),"#"+a).each(remove),e=null),descendant(C.fromDom(t.getBody()),"#"+a).each(remove),e=null},hideFakeCaret=function(){i.hide()};return pt.ceFalse&&function(){t.on("mouseup",(function(e){var n=getRange();n.collapsed&&EditorView_isXYInContentArea(t,e.clientX,e.clientY)&&setRange(renderCaretAtRange(t,n,!1))})),t.on("click",(function(e){var n;(n=getContentEditableRoot$2(t,e.target))&&(sa(n)&&(e.preventDefault(),t.focus()),ca(n)&&t.dom.isChildOf(n,t.selection.getNode())&&removeContentEditableSelection())})),t.on("blur NewBlock",(function(){removeContentEditableSelection()})),t.on("ResizeWindow FullscreenStateChanged",(function(){return i.reposition()}));var hasBetterMouseTarget=function(e,n){var i,a,u=t.dom.getParent(e,t.dom.isBlock),c=t.dom.getParent(n,t.dom.isBlock);return!(!u||!t.dom.isChildOf(u,c)||!1!==sa(getContentEditableRoot$2(t,u)))||u&&(i=u,a=c,!(t.dom.getParent(i,t.dom.isBlock)===t.dom.getParent(a,t.dom.isBlock)))&&function(t){var e=CaretWalker(t);if(!t.firstChild)return!1;var n=Zn.before(t.firstChild),i=e.next(n);return i&&!Di(i)&&!Mi(i)}(u)};!function(t){t.on("tap",(function(e){var n=getContentEditableRoot$2(t,e.target);sa(n)&&(e.preventDefault(),setContentEditableSelection(selectNode(t,n)))}),!0)}(t),t.on("mousedown",(function(e){var i,a=e.target;if((a===n||"HTML"===a.nodeName||t.dom.isChildOf(a,n))&&!1!==EditorView_isXYInContentArea(t,e.clientX,e.clientY))if(i=getContentEditableRoot$2(t,a))sa(i)?(e.preventDefault(),setContentEditableSelection(selectNode(t,i))):(removeContentEditableSelection(),ca(i)&&e.shiftKey||RangePoint_isXYWithinRange(e.clientX,e.clientY,t.selection.getRng())||(hideFakeCaret(),t.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===isFakeCaretTarget(a)){removeContentEditableSelection(),hideFakeCaret();var u=closestCaret(n,e.clientX,e.clientY);if(u&&!hasBetterMouseTarget(e.target,u.node)){e.preventDefault();var c=showCaret(1,u.node,u.before,!1);t.getBody().focus(),setRange(c)}}})),t.on("keypress",(function(e){So.modifierPressed(e)||(e.keyCode,sa(t.selection.getNode())&&e.preventDefault())})),t.on("GetSelectionRange",(function(t){var n=t.range;if(e){if(!e.parentNode)return void(e=null);(n=n.cloneRange()).selectNode(e),t.range=n}})),t.on("SetSelectionRange",(function(t){t.range=normalizeShortEndedElementSelection(t.range);var e=setContentEditableSelection(t.range,t.forward);e&&(t.range=e)}));t.on("AfterSetSelectionRange",(function(e){var n,i=e.range;isRangeInCaretContainer(i)||"mcepastebin"===i.startContainer.parentNode.id||hideFakeCaret(),n=i.startContainer.parentNode,t.dom.hasClass(n,"mce-offscreen-selection")||removeContentEditableSelection()})),t.on("copy",(function(e){var n,i=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!pt.ie){var u=(n=t.dom.get(a))?n.getElementsByTagName("*")[0]:n;u&&(e.preventDefault(),i.clearData(),i.setData("text/html",u.outerHTML),i.setData("text/plain",u.outerText))}})),DragDropOverrides_init(t),CefFocus_setup(t)}(),{showCaret:showCaret,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(e),setRange(getRange()),t.selection.scrollIntoView(e))},hideFakeCaret:hideFakeCaret,destroy:function(){i.destroy(),e=null}}},Quirks=function(t){var e,i,a,u=xt.each,c=So.BACKSPACE,s=So.DELETE,l=t.dom,f=t.selection,d=t.settings,m=t.parser,g=pt.gecko,h=pt.ie,p=pt.webkit,v=h?"Text":"URL",setEditorCommandState=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(t){}},isDefaultPrevented=function(t){return t.isDefaultPrevented()},selectAll=function(){t.shortcuts.add("meta+a",null,"SelectAll")},disableBackspaceIntoATable=function(){t.on("keydown",(function(t){if(!isDefaultPrevented(t)&&t.keyCode===c&&f.isCollapsed()&&0===f.getRng().startOffset){var e=f.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}}))},bodyHeight=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",(function(e){var n;if("HTML"===e.target.nodeName){if(pt.ie>11)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}})))};return t.on("keydown",(function(e){var n,i,a,u,c;if(!isDefaultPrevented(e)&&e.keyCode===So.BACKSPACE&&(i=(n=f.getRng()).startContainer,a=n.startOffset,u=l.getRoot(),c=i,n.collapsed&&0===a)){for(;c&&c.parentNode&&c.parentNode.firstChild===c&&c.parentNode!==u;)c=c.parentNode;"BLOCKQUOTE"===c.tagName&&(t.formatter.toggle("blockquote",null,c),(n=l.createRng()).setStart(i,0),n.setEnd(i,0),f.setRng(n))}})),e=function(t){var e=l.create("body"),n=t.cloneContents();return e.appendChild(n),f.serializer.serialize(e,{format:"html"})},t.on("keydown",(function(n){var i,a,u=n.keyCode;if(!isDefaultPrevented(n)&&(u===s||u===c)){if(i=t.selection.isCollapsed(),a=t.getBody(),i&&!l.isEmpty(a))return;if(!i&&!function(n){var i=e(n),a=l.createRng();return a.selectNode(t.getBody()),i===e(a)}(t.selection.getRng()))return;n.preventDefault(),t.setContent(""),a.firstChild&&l.isBlock(a.firstChild)?t.selection.setCursorLocation(a.firstChild,0):t.selection.setCursorLocation(a,0),t.nodeChanged()}})),pt.windowsPhone||t.on("keyup focusin mouseup",(function(t){So.modifierPressed(t)||f.normalize()}),!0),p&&(t.inline||l.bind(t.getDoc(),"mousedown mouseup",(function(e){var n;if(e.target===t.getDoc().documentElement)if(n=f.getRng(),t.getBody().focus(),"mousedown"===e.type){if(isCaretContainer(n.startContainer))return;f.placeCaretAt(e.clientX,e.clientY)}else f.setRng(n)})),t.on("click",(function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==l.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&l.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),f.select(n))})),d.forced_root_block&&t.on("init",(function(){setEditorCommandState("DefaultParagraphSeparator",Settings_getForcedRootBlock(t))})),t.on("init",(function(){t.dom.bind(t.getBody(),"submit",(function(t){t.preventDefault()}))})),disableBackspaceIntoATable(),m.addNodeFilter("br",(function(t){for(var e=t.length;e--;)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()})),pt.iOS?(t.inline||t.on("keydown",(function(){n.document.activeElement===n.document.body&&t.getWin().focus()})),bodyHeight(),t.on("click",(function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)})),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):selectAll()),pt.ie>=11&&(bodyHeight(),disableBackspaceIntoATable()),pt.ie&&(selectAll(),setEditorCommandState("AutoUrlDetect",!1),t.on("dragstart",(function(e){!function(e){var n,i;e.dataTransfer&&(t.selection.isCollapsed()&&"IMG"===e.target.tagName&&f.select(e.target),(n=t.selection.getContent()).length>0&&(i="data:text/mce-internal,"+escape(t.id)+","+escape(n),e.dataTransfer.setData(v,i)))}(e)})),t.on("drop",(function(e){if(!isDefaultPrevented(e)){var n=function(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(v))&&e.indexOf("data:text/mce-internal,")>=0?(e=e.substr("data:text/mce-internal,".length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null}(e);if(n&&n.id!==t.id){e.preventDefault();var i=CaretRangeFromPoint_fromPoint(e.x,e.y,t.getDoc());f.setRng(i),a=n.html,u=!0,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:a,internal:u}):t.execCommand("mceInsertContent",!1,a)}}var a,u}))),g&&(t.on("keydown",(function(e){if(!isDefaultPrevented(e)&&e.keyCode===c){if(!t.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){var n=f.getNode(),i=n.previousSibling;if("HR"===n.nodeName)return l.remove(n),void e.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(l.remove(i),e.preventDefault())}}})),n.Range.prototype.getClientRects||t.on("mousedown",(function(e){if(!isDefaultPrevented(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),ut.setEditorTimeout(t,(function(){n.focus()}))}})),i=function(){var e=l.getAttribs(f.getStart().cloneNode(!1));return function(){var n=f.getStart();n!==t.getBody()&&(l.setAttrib(n,"style",null),u(e,(function(t){n.setAttributeNode(t.cloneNode(!0))})))}},a=function(){return!f.isCollapsed()&&l.getParent(f.getStart(),l.isBlock)!==l.getParent(f.getEnd(),l.isBlock)},t.on("keypress",(function(e){var n;if(!isDefaultPrevented(e)&&(8===e.keyCode||46===e.keyCode)&&a())return n=i(),t.getDoc().execCommand("delete",!1,null),n(),e.preventDefault(),!1})),l.bind(t.getDoc(),"cut",(function(e){var n;!isDefaultPrevented(e)&&a()&&(n=i(),ut.setEditorTimeout(t,(function(){n()})))})),d.readonly||t.on("BeforeExecCommand mousedown",(function(){setEditorCommandState("StyleWithCSS",!1),setEditorCommandState("enableInlineTableEditing",!1),d.object_resizing||setEditorCommandState("enableObjectResizing",!1)})),t.on("SetContent ExecCommand",(function(t){"setcontent"!==t.type&&"mceInsertLink"!==t.command||u(l.select("a"),(function(t){var e=t.parentNode,n=l.getRoot();if(e.lastChild===t){for(;e&&!l.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}l.add(e,"br",{"data-mce-bogus":1})}}))})),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),pt.mac&&t.on("keydown",(function(e){!So.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})),disableBackspaceIntoATable()),{refreshContentEditable:function(){},isHidden:function(){var e;return!(!g||t.removed)&&(!(e=t.selection.getSel())||!e.rangeCount||0===e.rangeCount)}}},la=gn.DOM,initEditor=function(t){t.bindPendingEventDelegates(),t.initialized=!0,function(t){t.fire("Init")}(t),t.focus(!0),function(t){var e=t.dom.getRoot();t.inline||hasAnyRanges(t)&&t.selection.getStart(!0)!==e||Or.firstPositionIn(e).each((function(e){var n=e.getNode(),i=Z.isTable(n)?Or.firstPositionIn(n).getOr(e):e;t.selection.setRng(i.toRange())}))}(t),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),function(t){t.settings.auto_focus&&ut.setEditorTimeout(t,(function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()}),100)}(t)},InitContentBody_initContentBody=function(t,e){var i,a,u=t.settings,c=t.getElement(),s=t.getDoc();u.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(s.open(),s.write(t.iframeHTML),s.close()),t.inline&&(t.on("remove",(function(){var t=this.getBody();la.removeClass(t,"mce-content-body"),la.removeClass(t,"mce-edit-focus"),la.setAttrib(t,"contentEditable",null)})),la.addClass(c,"mce-content-body"),t.contentDocument=s=n.document,t.contentWindow=n.window,t.bodyElement=c,t.contentAreaContainer=c,u.root_name=c.nodeName.toLowerCase()),(i=t.getBody()).disabled=!0,t.readonly=u.readonly,t.readonly||(t.inline&&"static"===la.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable=t.getParam("content_editable_state",!0)),i.disabled=!1,t.editorUpload=EditorUpload(t),t.schema=Schema(u),t.dom=gn(s,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:u.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:Settings_shouldUseContentCssCors(t),referrerPolicy:Settings_getReferrerPolicy(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=function(t){var e=DomParser(t.settings,t.schema);return e.addAttributeFilter("src,href,style,tabindex",(function(e,n){for(var i,a,u,c=e.length,s=t.dom;c--;)if(a=(i=e[c]).attr(n),u="data-mce-"+n,!i.attr(u)){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===n?((a=s.serializeStyle(s.parseStyle(a),i.name)).length||(a=null),i.attr(u,a),i.attr(n,a)):"tabindex"===n?(i.attr(u,a),i.attr(n,null)):i.attr(u,t.convertURL(a,n,i.name))}})),e.addNodeFilter("script",(function(t){for(var e,n,i=t.length;i--;)0!==(n=(e=t[i]).attr("type")||"no/type").indexOf("mce-")&&e.attr("type","mce-"+n)})),t.settings.preserve_cdata&&e.addNodeFilter("#cdata",(function(e){for(var n,i=e.length;i--;)(n=e[i]).type=8,n.name="#comment",n.value="[CDATA["+t.dom.encode(n.value)+"]]"})),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(e){for(var n,i=e.length,a=t.schema.getNonEmptyElements();i--;)(n=e[i]).isEmpty(a)&&0===n.getAll("br").length&&(n.append(new Ir("br",1)).shortEnded=!0)})),e}(t),t.serializer=Serializer$1(u,t),t.selection=Selection$1(t.dom,t.getWin(),t.serializer,t),t.annotator=Annotator(t),t.formatter=Formatter(t),t.undoManager=UndoManager(t),t._nodeChangeDispatcher=new ia(t),t._selectionOverrides=SelectionOverrides(t),TouchEvents_setup(t),setup$h(t),setup$i(t),KeyboardOverrides_setup(t),ForceBlocks_setup(t),setup$6(t),function(t){t.fire("PreInit")}(t),u.browser_spellcheck||u.gecko_spellcheck||(s.body.spellcheck=!1,la.setAttrib(i,"spellcheck","false")),t.quirks=Quirks(t),function(t){t.fire("PostRender")}(t);var l=Settings_getDirectionality(t);void 0!==l&&(i.dir=l),u.protect&&t.on("BeforeSetContent",(function(t){xt.each(u.protect,(function(e){t.content=t.content.replace(e,(function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"}))}))})),t.on("SetContent",(function(){t.addVisual(t.getBody())})),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",(function(e){t.composing="compositionstart"===e.type})),t.contentStyles.length>0&&(a="",xt.each(t.contentStyles,(function(t){a+=t+"\r\n"})),t.dom.addStyle(a)),function(t){return t.inline?la.styleSheetLoader:t.dom.styleSheetLoader}(t).loadAll(t.contentCSS,(function(e){initEditor(t)}),(function(e){initEditor(t)})),u.content_style&&function(t,e){var n=C.fromDom(t.getDoc().head),i=C.fromTag("style");set(i,"type","text/css"),append(i,C.fromText(e)),append(n,i)}(t,u.content_style)},fa=gn.DOM,createIframe=function(t,e){var i=t.editorManager.translate("Rich Text Area. Press ALT-0 for help."),a=function(t,e,n,i){var a=C.fromTag("iframe");return setAll(a,i),setAll(a,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),add$3(a,"tox-edit-area__iframe"),a}(t.id,i,e.height,Settings_getIframeAttrs(t)).dom();a.onload=function(){a.onload=null,t.fire("load")};var u=function(t,e){if(n.document.domain!==n.window.location.hostname&&pt.browser.isIE()){var i=Uuid_uuid("mce");t[i]=function(){InitContentBody_initContentBody(t)};var a='javascript:(function(){document.open();document.domain="'+n.document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()";return fa.setAttrib(e,"src",a),!0}return!1}(t,a);return t.contentAreaContainer=e.iframeContainer,t.iframeElement=a,t.iframeHTML=function(t){var e,n,i;return i=Settings_getDocType(t)+"<html><head>",Settings_getDocumentBaseUrl(t)!==t.documentBaseUrl&&(i+='<base href="'+t.documentBaseURI.getURI()+'" />'),i+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',e=Settings_getBodyId(t),n=Settings_getBodyClass(t),Settings_getContentSecurityPolicy(t)&&(i+='<meta http-equiv="Content-Security-Policy" content="'+Settings_getContentSecurityPolicy(t)+'" />'),i+='</head><body id="'+e+'" class="mce-content-body '+n+'" data-id="'+t.id+'"><br></body></html>'}(t),fa.add(e.iframeContainer,a),u},InitIframe_init=function(t,e){var n=createIframe(t,e);e.editorContainer&&(fa.get(e.editorContainer).style.display=t.orgDisplay,t.hidden=fa.isHidden(e.editorContainer)),t.getElement().style.display="none",fa.setAttrib(t.id,"aria-hidden","true"),n||InitContentBody_initContentBody(t)},da=gn.DOM,initPlugin=function(t,e,n){var i=yo.get(n),a=yo.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=xt.trim(n),i&&-1===xt.inArray(e,n)){if(xt.each(yo.dependencies(n),(function(n){initPlugin(t,e,n)})),t.plugins[n])return;try{var u=new i(t,a,t.$);t.plugins[n]=u,u.init&&(u.init(t,a),e.push(n))}catch(e){wo.pluginInitError(t,n,e)}}},trimLegacyPrefix=function(t){return t.replace(/^\-/,"")},createThemeFalseResult=function(t){return{editorContainer:t,iframeContainer:t}},renderThemeFalse=function(t){var e=t.getElement();return t.inline?createThemeFalseResult(null):function(t){var e=da.create("div");return da.insertAfter(e,t),createThemeFalseResult(e)}(e)},Init_init=function(t){t.fire("ScriptsLoaded"),function(t){var e=xt.trim(t.settings.icons),n=t.ui.registry.getAll().icons,i=__assign(__assign({},{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 1 1 0-2h9.2zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h6.8zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h4.4zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 0 1 0-2h2zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 1 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z" fill-rule="nonzero"/></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2zm2 14h-2v2a2 2 0 0 0 2-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2.1 2a2 2 0 1 0 2.7 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19zm-1 8.8l.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7zM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',"sort-asc":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M4 8h5a1 1 0 1 1 0 2H4a1 1 0 1 1 0-2zm0 8h8a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0-4h7a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/><path fill-rule="nonzero" d="M16 8.4l-2.3 2.3a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L18 8.4V18a1 1 0 0 1-2 0V8.4z"/></g></svg>',"sort-dsc":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M4 16h5a1 1 0 0 0 0-2H4a1 1 0 0 0 0 2zm0-8h8a1 1 0 0 0 0-2H4a1 1 0 1 0 0 2zm0 4h7a1 1 0 0 0 0-2H4a1 1 0 0 0 0 2z"/><path fill-rule="nonzero" d="M16 15.6l-2.3-2.3a1 1 0 0 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 0 0-1.4-1.4L18 15.6V6a1 1 0 0 0-2 0v9.6z"/></g></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 0 1-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 0 1-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 0 1 2 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>'}),mo.get(e).icons);each$1(i,(function(e,i){has(n,i)||t.ui.registry.addIcon(i,e)}))}(t),function(t){var e=t.settings.theme;if(s(e)){t.settings.theme=trimLegacyPrefix(e);var n=xo.get(e);t.theme=new n(t,xo.urls[e]),t.theme.init&&t.theme.init(t,xo.urls[e]||t.documentBaseUrl.replace(/\/$/,""),t.$)}else t.theme={}}(t),function(t){var e=[];xt.each(t.settings.plugins.split(/[ ,]/),(function(n){initPlugin(t,e,trimLegacyPrefix(n))}))}(t);var e=function(t){var e=t.getElement();return t.orgDisplay=e.style.display,s(t.settings.theme)?function(t){return t.theme.renderUI()}(t):g(t.settings.theme)?function(t){var e=t.getElement(),n=(0,t.settings.theme)(t,e);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:e.offsetHeight,n}(t):renderThemeFalse(t)}(t);return t.editorContainer=e.editorContainer?e.editorContainer:null,appendContentCssFromSettings(t),t.inline?InitContentBody_initContentBody(t):InitIframe_init(t,e)},ma=gn.DOM,hasSkipLoadPrefix=function(t){return"-"===t.charAt(0)},loadIcons=function(t,e){(function(t){return c.from(Settings_getIconsUrl(t)).filter((function(t){return t.length>0})).map((function(t){return{url:t,name:c.none()}}))})(e).orThunk((function(){return function(t){return c.from(Settings_getIconPackName(t)).filter((function(t){return t.length>0&&!mo.has(t)})).map((function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons.js",name:c.some(e)}}))}(e)})).each((function(n){t.add(n.url,noop,void 0,(function(){wo.iconsLoadError(e,n.url,n.name.getOrUndefined())}))}))},loadScripts=function(t,e){var n=bn.ScriptLoader;!function(t,e,n,i){var a=e.settings,u=a.theme;if(s(u)){if(!hasSkipLoadPrefix(u)&&!xo.urls.hasOwnProperty(u)){var c=a.theme_url;c?xo.load(u,e.documentBaseURI.toAbsolute(c)):xo.load(u,"themes/"+u+"/theme"+n+".js")}t.loadQueue((function(){xo.waitFor(u,i)}))}else i()}(n,t,e,(function(){!function(t,e){var n=Settings_getLanguageCode(e),i=Settings_getLanguageUrl(e);if(!1===wn.hasCode(n)&&"en"!==n){var a=""!==i?i:e.editorManager.baseURL+"/langs/"+n+".js";t.add(a,noop,void 0,(function(){wo.languageLoadError(e,a,n)}))}}(n,t),loadIcons(n,t),function(t,e,n){f(e.plugins)&&(e.plugins=e.plugins.join(" ")),xt.each(e.external_plugins,(function(n,i){yo.load(i,n,noop,void 0,(function(){wo.pluginLoadError(t,n,i)})),e.plugins+=" "+i})),xt.each(e.plugins.split(/[ ,]/),(function(e){if((e=xt.trim(e))&&!yo.urls[e])if(hasSkipLoadPrefix(e)){e=e.substr(1,e.length);var i=yo.dependencies(e);xt.each(i,(function(e){var i={prefix:"plugins/",resource:e,suffix:"/plugin"+n+".js"},a=yo.createUrl(i,e);yo.load(a.resource,a,noop,void 0,(function(){wo.pluginLoadError(t,a.prefix+a.resource+a.suffix,a.resource)}))}))}else{var a={prefix:"plugins/",resource:e,suffix:"/plugin"+n+".js"};yo.load(e,a,noop,void 0,(function(){wo.pluginLoadError(t,a.prefix+a.resource+a.suffix,e)}))}}))}(t,t.settings,e),n.loadQueue((function(){t.removed||Init_init(t)}),t,(function(){t.removed||Init_init(t)}))}))},Render_render=function(t){var e=t.settings,i=t.id;wn.setCode(Settings_getLanguageCode(t));var readyHandler=function(){ma.unbind(n.window,"ready",readyHandler),t.render()};if(ge.Event.domLoaded){if(t.getElement()&&pt.contentEditable){e.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var a=t.getElement().form||ma.getParent(i,"form");a&&(t.formElement=a,e.hidden_input&&!Z.isTextareaOrInput(t.getElement())&&(ma.insertAfter(ma.create("input",{type:"hidden",name:i}),i),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},ma.bind(a,"submit reset",t.formEventDelegate),t.on("reset",(function(){t.resetContent()})),!e.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)})),t.windowManager=WindowManager(t),t.notificationManager=NotificationManager(t),"xml"===e.encoding&&t.on("GetContent",(function(t){t.save&&(t.content=ma.encode(t.content))})),e.add_form_submit_trigger&&t.on("submit",(function(){t.initialized&&t.save()})),e.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),loadScripts(t,t.suffix)}}else ma.bind(n.window,"ready",readyHandler)},listItems$1=function(t){return xt.grep(t.childNodes,(function(t){return"LI"===t.nodeName}))},isListItemPadded=function(t){return t&&t.firstChild&&t.firstChild===t.lastChild&&function(t){return" "===t.data||Z.isBr(t)}(t.firstChild)},trimListItems=function(t){return t.length>0&&(!(e=t[t.length-1]).firstChild||isListItemPadded(e))?t.slice(0,-1):t;var e},getParentLi=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},findLastOf=function(t,e){var n=Zn.after(t),i=CaretWalker(e).prev(n);return i?i.toRange():null},insertBefore$1=function(t,e,n){var i=t.parentNode;return xt.each(e,(function(e){i.insertBefore(e,t)})),function(t,e){var n=Zn.before(t),i=CaretWalker(e).next(n);return i?i.toRange():null}(t,n)},InsertList_isListFragment=function(t,e){var n=e.firstChild,i=e.lastChild;return n&&"meta"===n.name&&(n=n.next),i&&"mce_marker"===i.attr("id")&&(i=i.prev),function(t,e){var n=t.getNonEmptyElements();return e&&(e.isEmpty(n)||function(t,e){return t.getBlockElements()[e.name]&&function(t){return t.firstChild&&t.firstChild===t.lastChild}(e)&&function(t){return"br"===t.name||" "===t.value}(e.firstChild)}(t,e))}(t,i)&&(i=i.prev),!(!n||n!==i)&&("ul"===n.name||"ol"===n.name)},InsertList_insertAtCaret=function(t,e,n,i){var a=function(t,e,n){var i=e.serialize(n);return function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t}(t.createFragment(i))}(e,t,i),u=getParentLi(e,n.startContainer),c=trimListItems(listItems$1(a.firstChild)),s=e.getRoot(),isAt=function(t){var i=Zn.fromRangeStart(n),a=CaretWalker(e.getRoot()),c=1===t?a.prev(i):a.next(i);return!c||getParentLi(e,c.getNode())!==u};return isAt(1)?insertBefore$1(u,c,s):isAt(2)?function(t,e,n,i){return i.insertAfter(e.reverse(),t),findLastOf(e[0],n)}(u,c,s,e):function(t,e,n,i){var a=function(t,e){var n=e.cloneRange(),i=e.cloneRange();return n.setStartBefore(t),i.setEndAfter(t),[n.cloneContents(),i.cloneContents()]}(t,i),u=t.parentNode;return u.insertBefore(a[0],t),xt.each(e,(function(e){u.insertBefore(e,t)})),u.insertBefore(a[1],t),u.removeChild(t),findLastOf(e[e.length-1],n)}(u,c,s,n)},InsertList_isParentBlockLi=function(t,e){return!!getParentLi(t,e)},ga=Z.matchNodeNames(["td","th"]),selectionSetContent=function(t,e){var n=t.selection.getRng(),i=n.startContainer,a=n.startOffset;n.collapsed&&function(t,e){return Z.isText(t)&&" "===t.nodeValue[e-1]}(i,a)&&Z.isText(i)&&(i.insertData(a-1," "),i.deleteData(a,1),n.setStart(i,a),n.setEnd(i,a),t.selection.setRng(n)),t.selection.setContent(e)},insertHtmlAtCaret=function(t,e,n){var i,a,u,s,l,f,d,m,g,h,p,v=t.selection,b=t.dom;if(/^ | $/.test(e)&&(e=function(t,e){var n,i;n=t.startContainer,i=t.startOffset;var hasSiblingText=function(t){return n[t]&&3===n[t].nodeType};return 3===n.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):hasSiblingText("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):hasSiblingText("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(v.getRng(),e)),i=t.parser,p=n.merge,a=Serializer({validate:t.settings.validate},t.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',f={content:e,format:"html",selection:!0,paste:n.paste},(f=t.fire("BeforeSetContent",f)).isDefaultPrevented())t.fire("SetContent",{content:f.content,format:"html",selection:!0,paste:n.paste});else{-1===(e=f.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,h);var y=(m=v.getRng()).startContainer||(m.parentElement?m.parentElement():null),x=t.getBody();y===x&&v.isCollapsed()&&b.isBlock(x.firstChild)&&function(t,e){return e&&!t.schema.getShortEndedElements()[e.nodeName]}(t,x.firstChild)&&b.isEmpty(x.firstChild)&&((m=b.createRng()).setStart(x.firstChild,0),m.setEnd(x.firstChild,0),v.setRng(m)),v.isCollapsed()||(t.selection.setRng(RangeNormalizer_normalize(t.selection.getRng())),t.getDoc().execCommand("Delete",!1,null),e=function(t,e){var n,i;return n=t.startContainer,i=t.startOffset,3===n.nodeType&&t.collapsed&&(" "===n.data[i]?(n.deleteData(i,1),/[\u00a0| ]$/.test(e)||(e+=" ")):" "===n.data[i-1]&&(n.deleteData(i-1,1),/[\u00a0| ]$/.test(e)||(e=" "+e))),e}(t.selection.getRng(),e));var w,S={context:(u=v.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(l=i.parse(e,S),!0===n.paste&&InsertList_isListFragment(t.schema,l)&&InsertList_isParentBlockLi(b,u))return m=InsertList_insertAtCaret(a,b,t.selection.getRng(),l),t.selection.setRng(m),void t.fire("SetContent",f);if(function(t){for(var e=t;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}(l),"mce_marker"===(g=l.lastChild).attr("id"))for(d=g,g=g.prev;g;g=g.walk(!0))if(3===g.type||!b.isBlock(g.name)){t.schema.isValidChild(g.parent.name,"span")&&g.parent.insert(d,g,"br"===g.name);break}if(t._selectionOverrides.showBlockCaretContainer(u),S.invalid){for(selectionSetContent(t,h),u=v.getNode(),s=t.getBody(),9===u.nodeType?u=g=s:g=u;g!==s;)u=g,g=g.parentNode;e=u===s?s.innerHTML:b.getOuterHTML(u),e=a.serialize(i.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return a.serialize(l)})))),u===s?b.setHTML(s,e):b.setOuterHTML(u,e)}else!function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var i=n.firstChild,a=n.lastChild;!i||i===a&&"BR"===i.nodeName?t.dom.setHTML(n,e):selectionSetContent(t,e)}}(t,e=a.serialize(l),u);!function(t,e){var n=t.schema.getTextInlineElements(),i=t.dom;if(e){var a=t.getBody(),u=new ElementUtils(i);xt.each(i.select("*[data-mce-fragment]"),(function(t){for(var e=t.parentNode;e&&e!==a;e=e.parentNode)n[t.nodeName.toLowerCase()]&&u.compare(e,t)&&i.remove(t,!0)}))}}(t,p),function(t,e){var n,i,a,u,c,s=t.dom,l=t.selection;if(e){if(t.selection.scrollIntoView(e),n=function(e){for(var n=t.getBody();e&&e!==n;e=e.parentNode)if("false"===t.dom.getContentEditable(e))return e;return null}(e))return s.remove(e),void l.select(n);var f=s.createRng();(u=e.previousSibling)&&3===u.nodeType?(f.setStart(u,u.nodeValue.length),pt.ie||(c=e.nextSibling)&&3===c.nodeType&&(u.appendData(c.data),c.parentNode.removeChild(c))):(f.setStartBefore(e),f.setEndBefore(e));i=s.getParent(e,s.isBlock),s.remove(e),i&&s.isEmpty(i)&&(t.$(i).empty(),f.setStart(i,0),f.setEnd(i,0),ga(i)||function(t){return!!t.getAttribute("data-mce-fragment")}(i)||!(a=function(e){var n=Zn.fromRangeStart(e);if(n=CaretWalker(t.getBody()).next(n))return n.toRange()}(f))?s.add(i,s.create("br",{"data-mce-bogus":"1"})):(f=a,s.remove(i))),l.setRng(f)}}(t,b.get("mce_marker")),w=t.getBody(),xt.each(w.getElementsByTagName("*"),(function(t){t.removeAttribute("data-mce-fragment")})),function(t,e){c.from(t.getParent(e,"td,th")).map(C.fromDom).each(PaddingBr_trimBlockTrailingBr)}(t.dom,t.selection.getStart()),t.fire("SetContent",f),t.addVisual()}},InsertContent_insertAtCaret=function(t,e){var n=function(t){var e;return"string"!=typeof t?(e=xt.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:e}):{content:t,details:{}}}(e);insertHtmlAtCaret(t,n.content,n.details)},nativeCommand=function(t,e){t.getDoc().execCommand(e,!1,null)},DeleteCommands_deleteCommand=function(t){Outdent_backspaceDelete(t,!1)||CefDelete_backspaceDelete(t,!1)||CefBoundaryDelete_backspaceDelete(t,!1)||BoundaryDelete_backspaceDelete(t,!1)||BlockBoundaryDelete_backspaceDelete(t,!1)||TableDelete_backspaceDelete(t)||BlockRangeDelete_backspaceDelete(t,!1)||InlineFormatDelete_backspaceDelete(t,!1)||(nativeCommand(t,"Delete"),DeleteUtils_paddEmptyBody(t))},DeleteCommands_forwardDeleteCommand=function(t){CefDelete_backspaceDelete(t,!0)||CefBoundaryDelete_backspaceDelete(t,!0)||BoundaryDelete_backspaceDelete(t,!0)||BlockBoundaryDelete_backspaceDelete(t,!0)||TableDelete_backspaceDelete(t)||BlockRangeDelete_backspaceDelete(t,!0)||InlineFormatDelete_backspaceDelete(t,!0)||nativeCommand(t,"ForwardDelete")},closest$2=function(t,e,n){return e(t).orThunk((function(){return n(t)?c.none():function(t,e,n){for(var i=t.dom(),a=g(n)?n:constant(!1);i.parentNode;){i=i.parentNode;var u=C.fromDom(i),s=e(u);if(s.isSome())return s;if(a(u))break}return c.none()}(t,e,n)}))},ha={"font-size":"size","font-family":"face"},getSpecifiedFontProp=function(t,e,n){var getProperty=function(e){return getRaw(e,t).orThunk((function(){return"font"===H(e)?get(ha,t).bind((function(t){return n=e,i=t,c.from(get$3(n,i));var n,i})):c.none()}))};return closest$2(C.fromDom(n),(function(t){return getProperty(t)}),(function(t){return eq(C.fromDom(e),t)}))},getFontProp=function(t){return function(e,n){return c.from(n).map(C.fromDom).filter(L).bind((function(n){return getSpecifiedFontProp(t,e,n.dom()).or(function(t,e){return c.from(gn.DOM.getStyle(e,t,!0))}(t,n.dom()))})).getOr("")}},pa={getFontSize:getFontProp("font-size"),getFontFamily:compose((function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),getFontProp("font-family")),toPt:function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t}},findFirstCaretElement=function(t){return Or.firstPositionIn(t.getBody()).map((function(t){var e=t.container();return Z.isText(e)?e.parentNode:e}))},getCaretElement=function(t){return c.from(t.selection.getRng()).bind((function(e){return function(t,e){return t.startContainer===e&&0===t.startOffset}(e,t.getBody())?c.none():c.from(t.selection.getStart(!0))}))},fromFontSizeNumber=function(t,e){if(/^[0-9\.]+$/.test(e)){var n=parseInt(e,10);if(n>=1&&n<=7){var i=Settings_getFontStyleValues(t),a=Settings_getFontSizeClasses(t);return a?a[n-1]||e:i[n-1]||e}return e}return e},normalizeFontNames=function(t){var e=t.split(/\s*,\s*/);return map(e,(function(t){return-1===t.indexOf(" ")||startsWith(t,'"')||startsWith(t,"'")?t:"'"+t+"'"})).join(",")},va=xt.each,ba=xt.map,ya=xt.inArray,xa=function(){function EditorCommands(t){this.commands={state:{},exec:{},value:{}},this.editor=t,this.setupCommands(t)}return EditorCommands.prototype.execCommand=function(t,e,n,i){var a,u,c=!1,s=this;if(!s.editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?SelectionBookmark_restore(s.editor):s.editor.focus(),(i=s.editor.fire("BeforeExecCommand",{command:t,ui:e,value:n})).isDefaultPrevented())return!1;if(u=t.toLowerCase(),a=s.commands.exec[u])return a(u,e,n),s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;if(va(this.editor.plugins,(function(i){if(i.execCommand&&i.execCommand(t,e,n))return s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),c=!0,!1})),c)return c;if(s.editor.theme&&s.editor.theme.execCommand&&s.editor.theme.execCommand(t,e,n))return s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;try{c=s.editor.getDoc().execCommand(t,e,n)}catch(t){}return!!c&&(s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0)}},EditorCommands.prototype.queryCommandState=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.state[t])return e(t);try{return this.editor.getDoc().queryCommandState(t)}catch(t){}return!1}},EditorCommands.prototype.queryCommandValue=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.value[t])return e(t);try{return this.editor.getDoc().queryCommandValue(t)}catch(t){}}},EditorCommands.prototype.addCommands=function(t,e){var n=this;e=e||"exec",va(t,(function(t,i){va(i.toLowerCase().split(","),(function(i){n.commands[e][i]=t}))}))},EditorCommands.prototype.addCommand=function(t,e,n){var i=this;t=t.toLowerCase(),this.commands.exec[t]=function(t,a,u,c){return e.call(n||i.editor,a,u,c)}},EditorCommands.prototype.queryCommandSupported=function(t){if(t=t.toLowerCase(),this.commands.exec[t])return!0;try{return this.editor.getDoc().queryCommandSupported(t)}catch(t){}return!1},EditorCommands.prototype.addQueryStateHandler=function(t,e,n){var i=this;t=t.toLowerCase(),this.commands.state[t]=function(){return e.call(n||i.editor)}},EditorCommands.prototype.addQueryValueHandler=function(t,e,n){var i=this;t=t.toLowerCase(),this.commands.value[t]=function(){return e.call(n||i.editor)}},EditorCommands.prototype.hasCustomCommand=function(t){return t=t.toLowerCase(),!!this.commands.exec[t]},EditorCommands.prototype.execNativeCommand=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(t,e,n)},EditorCommands.prototype.isFormatMatch=function(t){return this.editor.formatter.match(t)},EditorCommands.prototype.toggleFormat=function(t,e){this.editor.formatter.toggle(t,e?{value:e}:void 0),this.editor.nodeChanged()},EditorCommands.prototype.storeSelection=function(t){this.selectionBookmark=this.editor.selection.getBookmark(t)},EditorCommands.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},EditorCommands.prototype.setupCommands=function(t){var e=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){t.undoManager.add()},"Cut,Copy,Paste":function(n){var i,a=t.getDoc();try{e.execNativeCommand(n)}catch(t){i=!0}if("paste"!==n||a.queryCommandEnabled(n)||(i=!0),i||!a.queryCommandSupported(n)){var u=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");pt.mac&&(u=u.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:u,type:"error"})}},unlink:function(){if(t.selection.isCollapsed()){var e=t.dom.getParent(t.selection.getStart(),"a");e&&t.dom.remove(e,!0)}else t.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var i=n.substring(7);"full"===i&&(i="justify"),va("left,center,right,justify".split(","),(function(e){i!==e&&t.formatter.remove("align"+e)})),"none"!==i&&e.toggleFormat("align"+i)},"InsertUnorderedList,InsertOrderedList":function(n){var i,a;e.execNativeCommand(n),(i=t.dom.getParent(t.selection.getNode(),"ol,ul"))&&(a=i.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)&&(e.storeSelection(),t.dom.split(a,i),e.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){e.toggleFormat(t)},"ForeColor,HiliteColor":function(t,n,i){e.toggleFormat(t,i)},FontName:function(e,n,i){!function(t,e){var n=fromFontSizeNumber(t,e);t.formatter.toggle("fontname",{value:normalizeFontNames(n)}),t.nodeChanged()}(t,i)},FontSize:function(e,n,i){!function(t,e){t.formatter.toggle("fontsize",{value:fromFontSizeNumber(t,e)}),t.nodeChanged()}(t,i)},RemoveFormat:function(e){t.formatter.remove(e)},mceBlockQuote:function(){e.toggleFormat("blockquote")},FormatBlock:function(t,n,i){return e.toggleFormat(i||"p")},mceCleanup:function(){var e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},mceRemoveNode:function(n,i,a){var u=a||t.selection.getNode();u!==t.getBody()&&(e.storeSelection(),t.dom.remove(u,!0),e.restoreSelection())},mceSelectNodeDepth:function(e,n,i){var a=0;t.dom.getParent(t.selection.getNode(),(function(e){if(1===e.nodeType&&a++===i)return t.selection.select(e),!1}),t.getBody())},mceSelectNode:function(e,n,i){t.selection.select(i)},mceInsertContent:function(e,n,i){InsertContent_insertAtCaret(t,i)},mceInsertRawHTML:function(e,n,i){t.selection.setContent("tiny_mce_marker");var a=t.getContent();t.setContent(a.replace(/tiny_mce_marker/g,(function(){return i})))},mceInsertNewLine:function(e,n,i){InsertNewLine_insert(t,i)},mceToggleFormat:function(t,n,i){e.toggleFormat(i)},mceSetContent:function(e,n,i){t.setContent(i)},"Indent,Outdent":function(e){handle(t,e)},mceRepaint:function(){},InsertHorizontalRule:function(){t.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){t.hasVisual=!t.hasVisual,t.addVisual()},mceReplaceContent:function(e,n,i){t.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceInsertLink:function(e,n,i){var a;"string"==typeof i&&(i={href:i}),a=t.dom.getParent(t.selection.getNode(),"a"),i.href=i.href.replace(/ /g,"%20"),a&&i.href||t.formatter.remove("link"),i.href&&t.formatter.apply("link",i,a)},selectAll:function(){var e=t.dom.getParent(t.selection.getStart(),Z.isContentEditableTrue);if(e){var n=t.dom.createRng();n.selectNodeContents(e),t.selection.setRng(n)}},delete:function(){DeleteCommands_deleteCommand(t)},forwardDelete:function(){DeleteCommands_forwardDeleteCommand(t)},mceNewDocument:function(){t.setContent("")},InsertLineBreak:function(e,n,i){return InsertBr_insert(t,i),!0}});var alignStates=function(e){return function(){var n=t.selection.isCollapsed()?[t.dom.getParent(t.selection.getNode(),t.dom.isBlock)]:t.selection.getSelectedBlocks(),i=ba(n,(function(n){return!!t.formatter.matchNode(n,e)}));return-1!==ya(i,!0)}};e.addCommands({JustifyLeft:alignStates("alignleft"),JustifyCenter:alignStates("aligncenter"),JustifyRight:alignStates("alignright"),JustifyFull:alignStates("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return e.isFormatMatch(t)},mceBlockQuote:function(){return e.isFormatMatch("blockquote")},Outdent:function(){return canOutdent(t)},"InsertUnorderedList,InsertOrderedList":function(e){var n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===e&&"UL"===n.tagName||"insertorderedlist"===e&&"OL"===n.tagName)}},"state"),e.addCommands({Undo:function(){t.undoManager.undo()},Redo:function(){t.undoManager.redo()}}),e.addQueryValueHandler("FontName",(function(){return function(t){return getCaretElement(t).fold((function(){return findFirstCaretElement(t).map((function(e){return pa.getFontFamily(t.getBody(),e)})).getOr("")}),(function(e){return pa.getFontFamily(t.getBody(),e)}))}(t)}),this),e.addQueryValueHandler("FontSize",(function(){return function(t){return getCaretElement(t).fold((function(){return findFirstCaretElement(t).map((function(e){return pa.getFontSize(t.getBody(),e)})).getOr("")}),(function(e){return pa.getFontSize(t.getBody(),e)}))}(t)}),this)},EditorCommands}(),wa=xt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),Ca=function(){function EventDispatcher(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||i}return EventDispatcher.isNative=function(t){return!!wa[t.toLowerCase()]},EventDispatcher.prototype.fire=function(t,e){var n,u,c,s;if(t=t.toLowerCase(),(e=e||{}).type=t,e.target||(e.target=this.scope),e.preventDefault||(e.preventDefault=function(){e.isDefaultPrevented=a},e.stopPropagation=function(){e.isPropagationStopped=a},e.stopImmediatePropagation=function(){e.isImmediatePropagationStopped=a},e.isDefaultPrevented=i,e.isPropagationStopped=i,e.isImmediatePropagationStopped=i),this.settings.beforeFire&&this.settings.beforeFire(e),n=this.bindings[t])for(u=0,c=n.length;u<c;u++){if((s=n[u]).once&&this.off(t,s.func),e.isImmediatePropagationStopped())return e.stopPropagation(),e;if(!1===s.func.call(this.scope,e))return e.preventDefault(),e}return e},EventDispatcher.prototype.on=function(t,e,n,a){var u,c,s;if(!1===e&&(e=i),e){var l={func:e};for(a&&xt.extend(l,a),s=(c=t.toLowerCase().split(" ")).length;s--;)t=c[s],(u=this.bindings[t])||(u=this.bindings[t]=[],this.toggleEvent(t,!0)),n?u.unshift(l):u.push(l)}return this},EventDispatcher.prototype.off=function(t,e){var n,i,a,u,c;if(t)for(n=(u=t.toLowerCase().split(" ")).length;n--;){if(t=u[n],i=this.bindings[t],!t){for(a in this.bindings)this.toggleEvent(a,!1),delete this.bindings[a];return this}if(i){if(e)for(c=i.length;c--;)i[c].func===e&&(i=i.slice(0,c).concat(i.slice(c+1)),this.bindings[t]=i);else i.length=0;i.length||(this.toggleEvent(t,!1),delete this.bindings[t])}}else{for(t in this.bindings)this.toggleEvent(t,!1);this.bindings={}}return this},EventDispatcher.prototype.once=function(t,e,n){return this.on(t,e,n,{once:!0})},EventDispatcher.prototype.has=function(t){return t=t.toLowerCase(),!(!this.bindings[t]||0===this.bindings[t].length)},EventDispatcher}(),getEventDispatcher=function(t){return t._eventDispatcher||(t._eventDispatcher=new Ca({scope:t,toggleEvent:function(e,n){Ca.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher},Sa={fire:function(t,e,n){if(this.removed&&"remove"!==t&&"detach"!==t)return e;var i=getEventDispatcher(this).fire(t,e);if(!1!==n&&this.parent)for(var a=this.parent();a&&!i.isPropagationStopped();)a.fire(t,i,!1),a=a.parent();return i},on:function(t,e,n){return getEventDispatcher(this).on(t,e,n)},off:function(t,e){return getEventDispatcher(this).off(t,e)},once:function(t,e){return getEventDispatcher(this).once(t,e)},hasEventListeners:function(t){return getEventDispatcher(this).has(t)}},toggleClass=function(t,e,n){has$2(t,e)&&!1===n?function(t,e){supports(t)?t.dom().classList.remove(e):remove$3(t,e);cleanClass(t)}(t,e):n&&add$3(t,e)},setEditorCommandState=function(t,e,n){try{t.getDoc().execCommand(e,!1,n)}catch(t){}},setContentEditable=function(t,e){t.dom().contentEditable=e?"true":"false"},toggleReadOnly=function(t,e){var n=C.fromDom(t.getBody());toggleClass(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),function(t){c.from(t.selection.getNode()).each((function(t){t.removeAttribute("data-mce-selected")}))}(t),t.readonly=!0,setContentEditable(n,!1),each(descendants$1(n,'*[contenteditable="true"]'),(function(t){set(t,"data-mce-contenteditable","true"),setContentEditable(t,!1)}))):(t.readonly=!1,setContentEditable(n,!0),function(t){each(descendants$1(t,'*[data-mce-contenteditable="true"]'),(function(t){remove$1(t,"data-mce-contenteditable"),setContentEditable(t,!0)}))}(n),setEditorCommandState(t,"StyleWithCSS",!1),setEditorCommandState(t,"enableInlineTableEditing",!1),setEditorCommandState(t,"enableObjectResizing",!1),EditorFocus_hasEditorOrUiFocus(t)&&t.focus(),function(t){t.selection.setRng(t.selection.getRng())}(t),t.nodeChanged())},isReadOnly=function(t){return!0===t.readonly},registerFilters=function(t){t.parser.addAttributeFilter("contenteditable",(function(e){isReadOnly(t)&&each(e,(function(t){t.attr("data-mce-contenteditable",t.attr("contenteditable")),t.attr("contenteditable","false")}))})),t.serializer.addAttributeFilter("data-mce-contenteditable",(function(e){isReadOnly(t)&&each(e,(function(t){t.attr("contenteditable",t.attr("data-mce-contenteditable"))}))})),t.serializer.addTempAttr("data-mce-contenteditable")},ka=gn.DOM,getEventTarget=function(t,e){return"selectionchange"===e?t.getDoc():!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e)?t.getDoc().documentElement:t.settings.event_root?(t.eventRoot||(t.eventRoot=ka.select(t.settings.event_root)[0]),t.eventRoot):t.getBody()},fireEvent=function(t,e,n){!function(t){return!t.hidden&&!isReadOnly(t)}(t)?isReadOnly(t)&&function(t,e){var n=e.target;(function(t){return"click"===t.type})(e)&&!So.metaKeyPressed(e)&&function(t,e){return null!==t.dom.getParent(e,"a")}(t,n)&&e.preventDefault()}(t,n):t.fire(e,n)},bindEventDelegate=function(t,e){var n,i;if(t.delegates||(t.delegates={}),!t.delegates[e]&&!t.removed)if(n=getEventTarget(t,e),t.settings.event_root){if(Bi||(Bi={},t.editorManager.on("removeEditor",(function(){var e;if(!t.editorManager.activeEditor&&Bi){for(e in Bi)t.dom.unbind(getEventTarget(t,e));Bi=null}}))),Bi[e])return;i=function(n){for(var i=n.target,a=t.editorManager.get(),u=a.length;u--;){var c=a[u].getBody();(c===i||ka.isChildOf(i,c))&&fireEvent(a[u],e,n)}},Bi[e]=i,ka.bind(n,e,i)}else i=function(n){fireEvent(t,e,n)},ka.bind(n,e,i),t.delegates[e]=i},Ea=__assign(__assign({},Sa),{bindPendingEventDelegates:function(){var t=this;xt.each(t._pendingNativeEvents,(function(e){bindEventDelegate(t,e)}))},toggleNativeEvent:function(t,e){"focus"!==t&&"blur"!==t&&(e?this.initialized?bindEventDelegate(this,t):this._pendingNativeEvents?this._pendingNativeEvents.push(t):this._pendingNativeEvents=[t]:this.initialized&&(this.dom.unbind(getEventTarget(this,t),t,this.delegates[t]),delete this.delegates[t]))},unbindAllNativeEvents:function(){var t,e=this.getBody(),n=this.dom;if(this.delegates){for(t in this.delegates)this.dom.unbind(getEventTarget(this,t),t,this.delegates[t]);delete this.delegates}!this.inline&&e&&n&&(e.onload=null,n.unbind(this.getWin()),n.unbind(this.getDoc())),n&&(n.unbind(e),n.unbind(this.getContainer()))}}),Ta=["design","readonly"],switchToMode=function(t,e,i,a){var u=i[e.get()],c=i[a];try{c.activate()}catch(t){return void n.console.error("problem while activating editor mode "+a+":",t)}u.deactivate(),u.editorReadOnly!==c.editorReadOnly&&toggleReadOnly(t,c.editorReadOnly),e.set(a),function(t,e){t.fire("SwitchMode",{mode:e})}(t,a)},create$4=function(t){var e=Cell("design"),i=Cell({design:{activate:noop,deactivate:noop,editorReadOnly:!1},readonly:{activate:noop,deactivate:noop,editorReadOnly:!0}});return function(t){t.serializer?registerFilters(t):t.on("PreInit",(function(){registerFilters(t)}))}(t),function(t){t.on("ShowCaret",(function(e){isReadOnly(t)&&e.preventDefault()})),t.on("ObjectSelected",(function(e){isReadOnly(t)&&e.preventDefault()}))}(t),{isReadOnly:function(){return isReadOnly(t)},set:function(n){return function(t,e,n,i){if(i!==n.get()){if(!has(e,i))throw new Error("Editor mode '"+i+"' is invalid");t.initialized?switchToMode(t,n,e,i):t.on("init",(function(){return switchToMode(t,n,e,i)}))}}(t,i.get(),e,n)},get:function(){return e.get()},register:function(t,e){i.set(function(t,e,i){var a;if(contains(Ta,e))throw new Error("Cannot override default mode "+e);return __assign(__assign({},t),((a={})[e]=__assign(__assign({},i),{deactivate:function(){try{i.deactivate()}catch(t){n.console.error("problem while deactivating editor mode "+e+":",t)}}}),a))}(i.get(),t,e))}}},Oa=xt.each,_a=xt.explode,Na={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Aa=xt.makeMap("alt,ctrl,shift,meta,access"),za=function(){function Shortcuts(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;var e=this;t.on("keyup keypress keydown",(function(t){!e.hasModifier(t)&&!e.isFunctionKey(t)||t.isDefaultPrevented()||(Oa(e.shortcuts,(function(n){if(e.matchShortcut(t,n))return e.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&e.executeShortcutAction(n),!0})),e.matchShortcut(t,e.pendingPatterns[0])&&(1===e.pendingPatterns.length&&"keydown"===t.type&&e.executeShortcutAction(e.pendingPatterns[0]),e.pendingPatterns.shift()))}))}return Shortcuts.prototype.add=function(t,e,n,i){var a,u=this;return a=n,"string"==typeof n?n=function(){u.editor.execCommand(a,!1,null)}:xt.isArray(a)&&(n=function(){u.editor.execCommand(a[0],a[1],a[2])}),Oa(_a(xt.trim(t)),(function(t){var a=u.createShortcut(t,e,n,i);u.shortcuts[a.id]=a})),!0},Shortcuts.prototype.remove=function(t){var e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},Shortcuts.prototype.parseShortcut=function(t){var e,n,i={};for(n in Oa(_a(t.toLowerCase(),"+"),(function(t){t in Aa?i[t]=!0:/^[0-9]{2,}$/.test(t)?i.keyCode=parseInt(t,10):(i.charCode=t.charCodeAt(0),i.keyCode=Na[t]||t.toUpperCase().charCodeAt(0))})),e=[i.keyCode],Aa)i[n]?e.push(n):i[n]=!1;return i.id=e.join(","),i.access&&(i.alt=!0,pt.mac?i.ctrl=!0:i.shift=!0),i.meta&&(pt.mac?i.meta=!0:(i.ctrl=!0,i.meta=!1)),i},Shortcuts.prototype.createShortcut=function(t,e,n,i){var a;return(a=xt.map(_a(t,">"),this.parseShortcut))[a.length-1]=xt.extend(a[a.length-1],{func:n,scope:i||this.editor}),xt.extend(a[0],{desc:this.editor.translate(e),subpatterns:a.slice(1)})},Shortcuts.prototype.hasModifier=function(t){return t.altKey||t.ctrlKey||t.metaKey},Shortcuts.prototype.isFunctionKey=function(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123},Shortcuts.prototype.matchShortcut=function(t,e){return!!e&&(e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&(e.alt===t.altKey&&e.shift===t.shiftKey&&(!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0))))},Shortcuts.prototype.executeShortcutAction=function(t){return t.func?t.func.call(t.scope):null},Shortcuts}(),registry=function(){var t=function(){var t={},e={},n={},i={},a={},u={},c={},add=function(t,e){return function(n,i){return t[n.toLowerCase()]=__assign(__assign({},i),{type:e})}};return{addButton:add(t,"button"),addGroupToolbarButton:add(t,"grouptoolbarbutton"),addToggleButton:add(t,"togglebutton"),addMenuButton:add(t,"menubutton"),addSplitButton:add(t,"splitbutton"),addMenuItem:add(e,"menuitem"),addNestedMenuItem:add(e,"nestedmenuitem"),addToggleMenuItem:add(e,"togglemenuitem"),addAutocompleter:add(n,"autocompleter"),addContextMenu:add(a,"contextmenu"),addContextToolbar:add(u,"contexttoolbar"),addContextForm:add(u,"contextform"),addSidebar:add(c,"sidebar"),addIcon:function(t,e){return i[t.toLowerCase()]=e},getAll:function(){return{buttons:t,menuItems:e,icons:i,popups:n,contextMenus:a,contextToolbars:u,sidebars:c}}}}();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},Da=xt.each,Ma=xt.trim,Ba="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Ra={ftp:21,http:80,https:443,mailto:25},Pa=function(){function URI(t,e){t=Ma(t),this.settings=e||{};var i=this.settings.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))a.source=t;else{var u=0===t.indexOf("//");if(0!==t.indexOf("/")||u||(t=(i&&i.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){var c=this.settings.base_uri?this.settings.base_uri.path:new URI(n.document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+a.toAbsPath(c,t);else{var s=/([^#?]*)([#?]?.*)/.exec(t);t=(i&&i.protocol||"http")+"://mce_host"+a.toAbsPath(c,s[1])+s[2]}}t=t.replace(/@@/g,"(mce_at)");var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);Da(Ba,(function(t,e){var n=l[e];n&&(n=n.replace(/\(mce_at\)/g,"@@")),a[t]=n})),i&&(a.protocol||(a.protocol=i.protocol),a.userInfo||(a.userInfo=i.userInfo),a.port||"mce_host"!==a.host||(a.port=i.port),a.host&&"mce_host"!==a.host||(a.host=i.host),a.source=""),u&&(a.protocol="")}}return URI.parseDataUri=function(t){var e,n=decodeURIComponent(t).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(e=i[1]),{type:e,data:n[1]}},URI.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},URI.prototype.setPath=function(t){var e=/^(.*?)\/?(\w+)?$/.exec(t);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},URI.prototype.toRelative=function(t){var e;if("./"===t)return t;var n=new URI(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();var i=this.getURI(),a=n.getURI();return i===a||"/"===i.charAt(i.length-1)&&i.substr(0,i.length-1)===a?i:(e=this.toRelPath(this.path,n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),e)},URI.prototype.toAbsolute=function(t,e){var n=new URI(t,{base_uri:this});return n.getURI(e&&this.isSameOrigin(n))},URI.prototype.isSameOrigin=function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=Ra[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},URI.prototype.toRelPath=function(t,e){var n,i,a,u=0,c="",s=t.substring(0,t.lastIndexOf("/")).split("/");if(n=e.split("/"),s.length>=n.length)for(i=0,a=s.length;i<a;i++)if(i>=n.length||s[i]!==n[i]){u=i+1;break}if(s.length<n.length)for(i=0,a=n.length;i<a;i++)if(i>=s.length||s[i]!==n[i]){u=i+1;break}if(1===u)return e;for(i=0,a=s.length-(u-1);i<a;i++)c+="../";for(i=u-1,a=n.length;i<a;i++)c+=i!==u-1?"/"+n[i]:n[i];return c},URI.prototype.toAbsPath=function(t,e){var n,i,a,u=0,c=[];i=/\/$/.test(e)?"/":"";var s=t.split("/"),l=e.split("/");for(Da(s,(function(t){t&&c.push(t)})),s=c,n=l.length-1,c=[];n>=0;n--)0!==l[n].length&&"."!==l[n]&&(".."!==l[n]?u>0?u--:c.push(l[n]):u++);return 0!==(a=(n=s.length-u)<=0?reverse(c).join("/"):s.slice(0,n).join("/")+"/"+reverse(c).join("/")).indexOf("/")&&(a="/"+a),i&&a.lastIndexOf("/")!==a.length-1&&(a+=i),a},URI.prototype.getURI=function(t){var e;return void 0===t&&(t=!1),this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source},URI}(),Ia=gn.DOM,Ha=xt.extend,La=xt.each,Fa=xt.resolve,Va=pt.ie,Ua=function(){function Editor(t,e,n){var i=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Ha(this,Ea),this.settings=getEditorSettings(this,t,this.documentBaseUrl,n.defaultSettings,e),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(bn.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),gn.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Cn.languageLoad=this.settings.language_load,Cn.baseURL=n.baseURL,this.id=t,this.setDirty(!1),this.documentBaseURI=new Pa(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new za(this),this.editorCommands=new xa(this),this.settings.cache_suffix&&(pt.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:registry()};var a=create$4(this);this.mode=a,this.setMode=a.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=un.overrideDefaults((function(){return{context:i.inline?i.getBody():i.getDoc(),element:i.getBody()}}))}return Editor.prototype.render=function(){Render_render(this)},Editor.prototype.focus=function(t){EditorFocus_focus(this,t)},Editor.prototype.hasFocus=function(){return eo(this)},Editor.prototype.execCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i,a=this,u=a.settings[t];if(u)return a.callbackLookup&&(i=a.callbackLookup[t])&&(u=i.func,i=i.scope),"string"==typeof u&&(i=(i=u.replace(/\.\w+$/,""))?Fa(i):0,u=Fa(u),a.callbackLookup=a.callbackLookup||{},a.callbackLookup[t]={func:u,scope:i}),u.apply(i||a,Array.prototype.slice.call(arguments,1))},Editor.prototype.translate=function(t){return wn.translate(t)},Editor.prototype.getParam=function(t,e,n){return getParam(this,t,e,n)},Editor.prototype.nodeChanged=function(t){this._nodeChangeDispatcher.nodeChanged(t)},Editor.prototype.addCommand=function(t,e,n){this.editorCommands.addCommand(t,e,n)},Editor.prototype.addQueryStateHandler=function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},Editor.prototype.addQueryValueHandler=function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},Editor.prototype.addShortcut=function(t,e,n,i){this.shortcuts.add(t,e,n,i)},Editor.prototype.execCommand=function(t,e,n,i){return this.editorCommands.execCommand(t,e,n,i)},Editor.prototype.queryCommandState=function(t){return this.editorCommands.queryCommandState(t)},Editor.prototype.queryCommandValue=function(t){return this.editorCommands.queryCommandValue(t)},Editor.prototype.queryCommandSupported=function(t){return this.editorCommands.queryCommandSupported(t)},Editor.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Ia.show(this.getContainer()),Ia.hide(this.id)),this.load(),this.fire("show"))},Editor.prototype.hide=function(){var t=this.getDoc();this.hidden||(Va&&t&&!this.inline&&t.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(Ia.hide(this.getContainer()),Ia.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},Editor.prototype.isHidden=function(){return!!this.hidden},Editor.prototype.setProgressState=function(t,e){this.fire("ProgressState",{state:t,time:e})},Editor.prototype.load=function(t){var e,n=this.getElement();if(this.removed)return"";if(n){(t=t||{}).load=!0;var i=Z.isTextareaOrInput(n)?n.value:n.innerHTML;return e=this.setContent(i,t),t.element=n,t.no_events||this.fire("LoadContent",t),t.element=n=null,e}},Editor.prototype.save=function(t){var e,n,i=this,a=i.getElement();if(a&&i.initialized&&!i.removed)return(t=t||{}).save=!0,t.element=a,t.content=i.getContent(t),t.no_events||i.fire("SaveContent",t),"raw"===t.format&&i.fire("RawSaveContent",t),e=t.content,Z.isTextareaOrInput(a)?a.value=e:(!t.is_removing&&i.inline||(a.innerHTML=e),(n=Ia.getParent(i.id,"form"))&&La(n.elements,(function(t){if(t.name===i.id)return t.value=e,!1}))),t.element=a=null,!1!==t.set_dirty&&i.setDirty(!1),e},Editor.prototype.setContent=function(t,e){return setContent(this,t,e)},Editor.prototype.getContent=function(t){return function(t,e){return void 0===e&&(e={}),c.from(t.getBody()).fold(constant("tree"===e.format?new Ir("body",11):""),(function(n){return getContentFromBody(t,e,n)}))}(this,t)},Editor.prototype.insertContent=function(t,e){e&&(t=Ha({content:t},e)),this.execCommand("mceInsertContent",!1,t)},Editor.prototype.resetContent=function(t){void 0===t?setContent(this,this.startContent,{format:"raw"}):setContent(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},Editor.prototype.isDirty=function(){return!this.isNotDirty},Editor.prototype.setDirty=function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.fire("dirty")},Editor.prototype.getContainer=function(){return this.container||(this.container=Ia.get(this.editorContainer||this.id+"_parent")),this.container},Editor.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},Editor.prototype.getElement=function(){return this.targetElm||(this.targetElm=Ia.get(this.id)),this.targetElm},Editor.prototype.getWin=function(){var t;return this.contentWindow||(t=this.iframeElement)&&(this.contentWindow=t.contentWindow),this.contentWindow},Editor.prototype.getDoc=function(){var t;return this.contentDocument||(t=this.getWin())&&(this.contentDocument=t.document),this.contentDocument},Editor.prototype.getBody=function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},Editor.prototype.convertURL=function(t,e,n){var i=this.settings;return i.urlconverter_callback?this.execCallback("urlconverter_callback",t,n,!0,e):!i.convert_urls||n&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:i.relative_urls?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,i.remove_script_host)},Editor.prototype.addVisual=function(t){var e,n=this,i=n.settings,a=n.dom;t=t||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=i.visual),La(a.select("table,a",t),(function(t){var u;switch(t.nodeName){case"TABLE":return e=i.visual_table_class||"mce-item-table",void((u=a.getAttrib(t,"border"))&&"0"!==u||!n.hasVisual?a.removeClass(t,e):a.addClass(t,e));case"A":return void(a.getAttrib(t,"href")||(u=a.getAttrib(t,"name")||t.id,e=i.visual_anchor_class||"mce-item-anchor",u&&n.hasVisual?a.addClass(t,e):a.removeClass(t,e)))}})),n.fire("VisualAid",{element:t,hasVisual:n.hasVisual})},Editor.prototype.remove=function(){remove$6(this)},Editor.prototype.destroy=function(t){destroy(this,t)},Editor.prototype.uploadImages=function(t){return this.editorUpload.uploadImages(t)},Editor.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},Editor.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},Editor.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},Editor.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},Editor.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},Editor}(),ja=gn.DOM,Wa=xt.explode,qa=xt.each,$a=xt.extend,Ga=0,Xa=!1,Ka=[],Ya=[],globalEventDelegate=function(t){var e=t.type;qa(Za.get(),(function(n){switch(e){case"scroll":n.fire("ScrollWindow",t);break;case"resize":n.fire("ResizeWindow",t)}}))},toggleGlobalEvents=function(t){t!==Xa&&(t?un(window).on("resize scroll",globalEventDelegate):un(window).off("resize scroll",globalEventDelegate),Xa=t)},removeEditorFromList=function(t){var e=Ya;delete Ka[t.id];for(var n=0;n<Ka.length;n++)if(Ka[n]===t){Ka.splice(n,1);break}return Ya=filter(Ya,(function(e){return t!==e})),Za.activeEditor===t&&(Za.activeEditor=Ya.length>0?Ya[0]:null),Za.focusedEditor===t&&(Za.focusedEditor=null),e.length!==Ya.length},Ja="CSS1Compat"!==n.document.compatMode,Za=__assign(__assign({},Sa),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:un,majorVersion:"5",minorVersion:"2.0",releaseDate:"2020-02-13",editors:Ka,i18n:wn,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var t,e,i="";e=Pa.getDocumentBaseUrl(n.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));var a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,i=a.suffix;else{for(var u=n.document.getElementsByTagName("script"),c=0;c<u.length;c++){var s;if(""!==(s=u[c].src||"")){var l=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==l.indexOf(".min")&&(i=".min"),t=s.substring(0,s.lastIndexOf("/"));break}}}if(!t&&n.document.currentScript)-1!==(s=n.document.currentScript.src).indexOf(".min")&&(i=".min"),t=s.substring(0,s.lastIndexOf("/"))}this.baseURL=new Pa(e).toAbsolute(t),this.documentBaseURL=e,this.baseURI=new Pa(this.baseURL),this.suffix=i,FocusController_setup(this)},overrideDefaults:function(t){var e,n;(e=t.base_url)&&this._setBaseUrl(e),n=t.suffix,t.suffix&&(this.suffix=n),this.defaultSettings=t;var i=t.plugin_base_urls;for(var a in i)Cn.PluginManager.urls[a]=i[a]},init:function(t){var e,i,a=this;i=xt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");var createId=function(t){var e=t.id;return e||(e=(e=t.name)&&!ja.get(e)?t.name:ja.uniqueId(),t.setAttribute("id",e)),e},hasClass=function(t,e){return e.constructor===RegExp?e.test(t.className):ja.hasClass(t,e)},provideResults=function(t){e=t},initEditors=function(){var e,u=0,c=[],createEditor=function(t,n,i){var s=new Ua(t,n,a);c.push(s),s.on("init",(function(){++u===e.length&&provideResults(c)})),s.targetElm=s.targetElm||i,s.render()};ja.unbind(window,"ready",initEditors),function(e){var n=t[e];if(n)n.apply(a,Array.prototype.slice.call(arguments,2))}("onpageload"),e=un.unique(function(t){var e,i=[];if(pt.browser.isIE()&&pt.browser.version.major<11)return wo.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(Ja)return wo.initError("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return qa(t.types,(function(t){i=i.concat(ja.select(t.selector))})),i;if(t.selector)return ja.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":(e=t.elements||"").length>0&&qa(Wa(e),(function(t){var e;(e=ja.get(t))?i.push(e):qa(n.document.forms,(function(e){qa(e.elements,(function(e){e.name===t&&(t="mce_editor_"+Ga++,ja.setAttrib(e,"id",t),i.push(e))}))}))}));break;case"textareas":case"specific_textareas":qa(ja.select("textarea"),(function(e){t.editor_deselector&&hasClass(e,t.editor_deselector)||t.editor_selector&&!hasClass(e,t.editor_selector)||i.push(e)}))}return i}(t)),t.types?qa(t.types,(function(n){xt.each(e,(function(e){return!ja.is(e,n.selector)||(createEditor(createId(e),$a({},t,n),e),!1)}))})):(xt.each(e,(function(t){var e;(e=a.get(t.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(removeEditorFromList(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)})),0===(e=xt.grep(e,(function(t){return!a.get(t.id)}))).length?provideResults([]):qa(e,(function(e){!function(t,e){return t.inline&&e.tagName.toLowerCase()in i}(t,e)?createEditor(createId(e),t,e):wo.initError("Could not initialize inline editor on invalid inline target element",e)})))};return a.settings=t,ja.bind(window,"ready",initEditors),new at((function(t){e?t(e):provideResults=function(e){t(e)}}))},get:function(t){return 0===arguments.length?Ya.slice(0):s(t)?find(Ya,(function(e){return e.id===t})).getOr(null):h(t)&&Ya[t]?Ya[t]:null},add:function(t){var e=this;return Ka[t.id]===t||(null===e.get(t.id)&&("length"!==t.id&&(Ka[t.id]=t),Ka.push(t),Ya.push(t)),toggleGlobalEvents(!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),Ri||(Ri=function(t){var n=e.fire("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",Ri))),t},createEditor:function(t,e){return this.add(new Ua(t,e,this))},remove:function(t){var e,n,i=this;if(t){if(!s(t))return n=t,d(i.get(n.id))?null:(removeEditorFromList(n)&&i.fire("RemoveEditor",{editor:n}),0===Ya.length&&window.removeEventListener("beforeunload",Ri),n.remove(),toggleGlobalEvents(Ya.length>0),n);qa(ja.select(t),(function(t){(n=i.get(t.id))&&i.remove(n)}))}else for(e=Ya.length-1;e>=0;e--)i.remove(Ya[e])},execCommand:function(t,e,n){var i=this.get(n);switch(t){case"mceAddEditor":return this.get(n)||new Ua(n,this.settings,this).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(t,e,n)},triggerSave:function(){qa(Ya,(function(t){t.save()}))},addI18n:function(t,e){wn.add(t,e)},translate:function(t){return wn.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!==t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl:function(t){this.baseURL=new Pa(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Pa(this.baseURL)}});function RangeUtils(t){return{walk:function(e,n){return RangeWalk_walk(t,e,n)},split:split$1,normalize:function(e){return NormalizeRange_normalize(t,e).fold(constant(!1),(function(t){return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0}))}}}Za.setup(),function(t){t.compareRanges=RangeCompare_isEq,t.getCaretRangeFromPoint=CaretRangeFromPoint_fromPoint,t.getSelectedNode=getSelectedNode,t.getNode=getNode}(RangeUtils||(RangeUtils={}));var Qa,tu,eu,ru,ou=RangeUtils,iu=(Qa={},tu={},{load:function(t,e){var i='Script at URL "'+e+'" failed to load',a='Script at URL "'+e+"\" did not call `tinymce.Resource.add('"+t+"', data)` within 1 second";if(void 0!==Qa[t])return Qa[t];var u=new at((function(u,c){var s=function(t,e,i){void 0===i&&(i=1e3);var a=!1,u=null,complete=function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a||(a=!0,null!==u&&(n.clearTimeout(u),u=null),t.apply(null,e))}},c=complete(t),s=complete(e);return{start:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||null!==u||(u=n.setTimeout((function(){return s.apply(null,t)}),i))},resolve:c,reject:s}}(u,c);tu[t]=s.resolve,bn.ScriptLoader.loadScript(e,(function(){return s.start(a)}),(function(){return s.reject(i)}))}));return Qa[t]=u,u},add:function(t,e){void 0!==tu[t]&&(tu[t](e),delete tu[t]),Qa[t]=at.resolve(e)}}),au=Math.min,uu=Math.max,cu=Math.round,relativePosition=function(t,e,n){var i,a,u,c,s,l;return i=e.x,a=e.y,u=t.w,c=t.h,s=e.w,l=e.h,"b"===(n=(n||"").split(""))[0]&&(a+=l),"r"===n[1]&&(i+=s),"c"===n[0]&&(a+=cu(l/2)),"c"===n[1]&&(i+=cu(s/2)),"b"===n[3]&&(a-=c),"r"===n[4]&&(i-=u),"c"===n[3]&&(a-=cu(c/2)),"c"===n[4]&&(i-=cu(u/2)),create$7(i,a,u,c)},create$7=function(t,e,n,i){return{x:t,y:e,w:n,h:i}},su={inflate:function(t,e,n){return create$7(t.x-e,t.y-n,t.w+2*e,t.h+2*n)},relativePosition:relativePosition,findBestRelativePosition:function(t,e,n,i){var a,u;for(u=0;u<i.length;u++)if((a=relativePosition(t,e,i[u])).x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return i[u];return null},intersect:function(t,e){var n,i,a,u;return n=uu(t.x,e.x),i=uu(t.y,e.y),a=au(t.x+t.w,e.x+e.w),u=au(t.y+t.h,e.y+e.h),a-n<0||u-i<0?null:create$7(n,i,a-n,u-i)},clamp:function(t,e,n){var i,a,u,c,s,l,f,d,m,g;return s=t.x,l=t.y,f=t.x+t.w,d=t.y+t.h,m=e.x+e.w,g=e.y+e.h,i=uu(0,e.x-s),a=uu(0,e.y-l),u=uu(0,f-m),c=uu(0,d-g),s+=i,l+=a,n&&(f+=i,d+=a,s-=u,l-=c),create$7(s,l,(f-=u)-s,(d-=c)-l)},create:create$7,fromClientRect:function(t){return create$7(t.left,t.top,t.width,t.height)}},lu=xt.each,fu=xt.extend,Class=function(){};Class.extend=eu=function(t){var e,n,i,a=this.prototype,Class=function(){var t,e,n,i=this;if(!ru&&(i.init&&i.init.apply(i,arguments),e=i.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(i,arguments)},dummy=function(){return this},createMethod=function(t,e){return function(){var n,i=this,u=i._super;return i._super=a[t],n=e.apply(i,arguments),i._super=u,n}};for(n in ru=!0,e=new this,ru=!1,t.Mixins&&(lu(t.Mixins,(function(e){for(var n in e)"init"!==n&&(t[n]=e[n])})),a.Mixins&&(t.Mixins=a.Mixins.concat(t.Mixins))),t.Methods&&lu(t.Methods.split(","),(function(e){t[e]=dummy})),t.Properties&&lu(t.Properties.split(","),(function(e){var n="_"+e;t[e]=function(t){return void 0!==t?(this[n]=t,this):this[n]}})),t.Statics&&lu(t.Statics,(function(t,e){Class[e]=t})),t.Defaults&&a.Defaults&&(t.Defaults=fu({},a.Defaults,t.Defaults)),t)"function"==typeof(i=t[n])&&a[n]?e[n]=createMethod(n,i):e[n]=i;return Class.prototype=e,Class.constructor=Class,Class.extend=eu,Class};var du,mu=Math.min,gu=Math.max,hu=Math.round,pu={serialize:function(t){var e=JSON.stringify(t);return s(e)?e.replace(/[\u0080-\uFFFF]/g,(function(t){var e=t.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e})):e},parse:function(t){try{return JSON.parse(t)}catch(t){}}},vu={callbacks:{},count:0,send:function(t){var e=this,n=gn.DOM,i=void 0!==t.count?t.count:e.count,a="tinymce_jsonp_"+i;e.callbacks[i]=function(u){n.remove(a),delete e.callbacks[i],t.callback(u)},n.add(n.doc.body,"script",{id:a,src:t.url,type:"text/javascript"}),e.count++}},bu=__assign(__assign({},Sa),{send:function(t){var e,i=0,ready=function(){!t.async||4===e.readyState||i++>1e4?(t.success&&i<1e4&&200===e.status?t.success.call(t.success_scope,""+e.responseText,e,t):t.error&&t.error.call(t.error_scope,i>1e4?"TIMED_OUT":"GENERAL",e,t),e=null):ut.setTimeout(ready,10)};if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",bu.fire("beforeInitialize",{settings:t}),e=new n.XMLHttpRequest){if(e.overrideMimeType&&e.overrideMimeType(t.content_type),e.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(e.withCredentials=!0),t.content_type&&e.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&xt.each(t.requestheaders,(function(t){e.setRequestHeader(t.key,t.value)})),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),(e=bu.fire("beforeSend",{xhr:e,settings:t}).xhr).send(t.data),!t.async)return ready();ut.setTimeout(ready,10)}}}),yu=xt.extend,xu=function(){function JSONRequest(t){this.settings=yu({},t),this.count=0}return JSONRequest.sendRPC=function(t){return(new JSONRequest).send(t)},JSONRequest.prototype.send=function(t){var e=t.error,n=t.success,i=yu(this.settings,t);i.success=function(t,a){void 0===(t=pu.parse(t))&&(t={error:"JSON Parse error."}),t.error?e.call(i.error_scope||i.scope,t.error,a):n.call(i.success_scope||i.scope,t.result)},i.error=function(t,n){e&&e.call(i.error_scope||i.scope,t,n)},i.data=pu.serialize({id:t.id||"c"+this.count++,method:t.method,params:t.params}),i.content_type="application/json",bu.send(i)},JSONRequest}();try{du=n.window.localStorage}catch(t){du=function(){var t={},e=[],n={getItem:function(e){var n=t[e];return n||null},setItem:function(n,i){e.push(n),t[n]=String(i)},key:function(t){return e[t]},removeItem:function(n){e=e.filter((function(t){return t===n})),delete t[n]},clear:function(){e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),n}()}var wu={geom:{Rect:su},util:{Promise:at,Delay:ut,Tools:xt,VK:So,URI:Pa,Class:Class,EventDispatcher:Ca,Observable:Sa,I18n:wn,XHR:bu,JSON:pu,JSONRequest:xu,JSONP:vu,LocalStorage:du,Color:function(t){var e={},n=0,i=0,a=0,parse=function(t){var u;return"object"==typeof t?"r"in t?(n=t.r,i=t.g,a=t.b):"v"in t&&function(t,e,u){var c,s,l,f;if(t=(parseInt(t,10)||0)%360,e=parseInt(e,10)/100,u=parseInt(u,10)/100,e=gu(0,mu(e,1)),u=gu(0,mu(u,1)),0!==e){switch(c=t/60,l=(s=u*e)*(1-Math.abs(c%2-1)),f=u-s,Math.floor(c)){case 0:n=s,i=l,a=0;break;case 1:n=l,i=s,a=0;break;case 2:n=0,i=s,a=l;break;case 3:n=0,i=l,a=s;break;case 4:n=l,i=0,a=s;break;case 5:n=s,i=0,a=l;break;default:n=i=a=0}n=hu(255*(n+f)),i=hu(255*(i+f)),a=hu(255*(a+f))}else n=i=a=hu(255*u)}(t.h,t.s,t.v):(u=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(n=parseInt(u[1],10),i=parseInt(u[2],10),a=parseInt(u[3],10)):(u=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(n=parseInt(u[1],16),i=parseInt(u[2],16),a=parseInt(u[3],16)):(u=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(n=parseInt(u[1]+u[1],16),i=parseInt(u[2]+u[2],16),a=parseInt(u[3]+u[3],16)),n=n<0?0:n>255?255:n,i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,e};return t&&parse(t),e.toRgb=function(){return{r:n,g:i,b:a}},e.toHsv=function(){return function(t,e,n){var i,a,u,c;return 0,0,a=0,(u=mu(t/=255,mu(e/=255,n/=255)))===(c=gu(t,gu(e,n)))?{h:0,s:0,v:100*(a=u)}:(i=(c-u)/c,a=c,{h:hu(60*((t===u?3:n===u?1:5)-(t===u?e-n:n===u?t-e:n-t)/(c-u))),s:hu(100*i),v:hu(100*a)})}(n,i,a)},e.toHex=function(){var hex=function(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t};return"#"+hex(n)+hex(i)+hex(a)},e.parse=parse,e}},dom:{EventUtils:ge,Sizzle:Sizzle,DomQuery:un,TreeWalker:cn,TextSeeker:TextSeeker,DOMUtils:gn,ScriptLoader:bn,RangeUtils:ou,Serializer:Serializer$1,ControlSelection:ControlSelection,BookmarkManager:Co,Selection:Selection$1,Event:ge.Event},html:{Styles:Styles,Entities:Ft,Node:Ir,Schema:Schema,SaxParser:Vr,DomParser:DomParser,Writer:Writer,Serializer:Serializer},Env:pt,AddOnManager:Cn,Annotator:Annotator,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:xa,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:Ea,Shortcuts:za,Editor:Ua,FocusManager:Jr,EditorManager:Za,DOM:gn.DOM,ScriptLoader:bn.ScriptLoader,PluginManager:Cn.PluginManager,ThemeManager:Cn.ThemeManager,IconManager:mo,Resource:iu,trim:xt.trim,isArray:xt.isArray,is:xt.is,toArray:xt.toArray,makeMap:xt.makeMap,each:xt.each,map:xt.map,grep:xt.grep,inArray:xt.inArray,extend:xt.extend,create:xt.create,walk:xt.walk,createNS:xt.createNS,resolve:xt.resolve,explode:xt.explode,_addCacheSuffix:xt._addCacheSuffix,isOpera:pt.opera,isWebKit:pt.webkit,isIE:pt.ie,isGecko:pt.gecko,isMac:pt.mac},Cu=xt.extend(Za,wu);!function(t){window.tinymce=t,window.tinyMCE=t}(Cu),function(e){try{t.exports=e}catch(t){}}(Cu)}(window)}).call(this,n(104))},1596:function(t,e,n){n(1597)},1597:function(t,e,n){(function(t){!function(e){"use strict";var noop=function(){},compose=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t(e.apply(null,n))}},constant=function(t){return function(){return t}},identity=function(t){return t};function curry(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e.concat(n);return t.apply(null,a)}}var not=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},die=function(t){return function(){throw new Error(t)}},n=constant(!1),i=constant(!0),a=tinymce.util.Tools.resolve("tinymce.ThemeManager"),__assign=function(){return(__assign=Object.assign||function __assign(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n}function __spreadArrays(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),a=0;for(e=0;e<n;e++)for(var u=arguments[e],c=0,s=u.length;c<s;c++,a++)i[a]=u[c];return i}var u,none=function(){return c},c=function(){var eq=function(t){return t.isNone()},call=function(t){return t()},id=function(t){return t},t={fold:function(t,e){return t()},is:n,isSome:n,isNone:i,getOr:id,getOrThunk:call,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:n,forall:i,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:constant("none()")};return Object.freeze&&Object.freeze(t),t}(),some=function(t){var e=constant(t),self=function(){return a},bind=function(e){return e(t)},a={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:i,isNone:n,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:self,orThunk:self,map:function(e){return some(e(t))},each:function(e){e(t)},bind:bind,exists:bind,forall:bind,filter:function(e){return e(t)?a:c},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,i){return e.fold(n,(function(e){return i(t,e)}))}};return a},s={some:some,none:none,from:function(t){return null==t?c:some(t)}},value=function(t){return{is:function(e){return t===e},isValue:i,isError:n,getOr:constant(t),getOrThunk:constant(t),getOrDie:constant(t),or:function(e){return value(t)},orThunk:function(e){return value(t)},fold:function(e,n){return n(t)},map:function(e){return value(e(t))},mapError:function(e){return value(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return s.some(t)}}},error=function(t){return{is:n,isValue:n,isError:i,getOr:identity,getOrThunk:function(t){return t()},getOrDie:function(){return die(String(t))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return error(t)},mapError:function(e){return error(e(t))},each:noop,bind:function(e){return error(t)},exists:n,forall:i,toOption:s.none}},l={value:value,error:error,fromOption:function(t,e){return t.fold((function(){return error(e)}),value)}},isType=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},f=isType("string"),d=isType("object"),m=isType("array"),g=isType("boolean"),h=isType("function"),p=isType("number"),isArrayOf=function(t,e){if(m(t)){for(var n=0,i=t.length;n<i;++n)if(!0!==e(t[n]))return!1;return!0}return!1},v=Array.prototype.slice,b=Array.prototype.indexOf,y=Array.prototype.push,rawIndexOf=function(t,e){return b.call(t,e)},contains=function(t,e){return rawIndexOf(t,e)>-1},exists=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return!0}return!1},chunk=function(t,e){for(var n=[],i=0;i<t.length;i+=e){var a=v.call(t,i,i+e);n.push(a)}return n},map=function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;a++){var u=t[a];i[a]=e(u,a)}return i},each=function(t,e){for(var n=0,i=t.length;n<i;n++){e(t[n],n)}},filter=function(t,e){for(var n=[],i=0,a=t.length;i<a;i++){var u=t[i];e(u,i)&&n.push(u)}return n},foldr=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n)}}(t,(function(t){n=e(n,t)})),n},foldl=function(t,e,n){return each(t,(function(t){n=e(n,t)})),n},find=function(t,e){for(var n=0,i=t.length;n<i;n++){var a=t[n];if(e(a,n))return s.some(a)}return s.none()},findIndex=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return s.some(n)}return s.none()},flatten=function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!m(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);y.apply(e,t[n])}return e},bind=function(t,e){return flatten(map(t,e))},forall=function(t,e){for(var n=0,i=t.length;n<i;++n){if(!0!==e(t[n],n))return!1}return!0},reverse=function(t){var e=v.call(t,0);return e.reverse(),e},difference=function(t,e){return filter(t,(function(t){return!contains(e,t)}))},pure=function(t){return[t]},sort=function(t,e){var n=v.call(t,0);return n.sort(e),n},head=function(t){return 0===t.length?s.none():s.some(t[0])},last=function(t){return 0===t.length?s.none():s.some(t[t.length-1])},x=h(Array.from)?Array.from:function(t){return v.call(t)},findMap=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n],n);if(i.isSome())return i}return s.none()},w=Object.keys,C=Object.hasOwnProperty,each$1=function(t,e){for(var n=w(t),i=0,a=n.length;i<a;i++){var u=n[i];e(t[u],u)}},map$1=function(t,e){return tupleMap(t,(function(t,n){return{k:n,v:e(t,n)}}))},tupleMap=function(t,e){var n={};return each$1(t,(function(t,i){var a=e(t,i);n[a.k]=a.v})),n},mapToArray=function(t,e){var n=[];return each$1(t,(function(t,i){n.push(e(t,i))})),n},find$1=function(t,e){for(var n=w(t),i=0,a=n.length;i<a;i++){var u=n[i],c=t[u];if(e(c,u,t))return s.some(c)}return s.none()},values=function(t){return mapToArray(t,(function(t){return t}))},get=function(t,e){return has(t,e)?s.from(t[e]):s.none()},has=function(t,e){return C.call(t,e)},hasNonNullableKey=function(t,e){return has(t,e)&&void 0!==t[e]&&null!==t[e]},Adt_generate=function(t){if(!m(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],i={};return each(t,(function(a,u){var c=w(a);if(1!==c.length)throw new Error("one and only one name per case");var s=c[0],l=a[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!m(l))throw new Error("case arguments must be an array");n.push(s),i[s]=function(){var i=arguments.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+i);for(var a=new Array(i),c=0;c<a.length;c++)a[c]=arguments[c];var match=function(t){var e=w(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));if(!forall(n,(function(t){return contains(e,t)})))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[s].apply(null,a)};return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);var e=arguments[u];return e.apply(null,a)},match:match,log:function(t){e.console.log(t,{constructors:n,constructor:s,params:a})}}}})),i},S=Object.prototype.hasOwnProperty,baseMerge=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var i={},a=0;a<e.length;a++){var u=e[a];for(var c in u)S.call(u,c)&&(i[c]=t(i[c],u[c]))}return i}},k=baseMerge((function(t,e){return d(t)&&d(e)?k(t,e):e})),E=baseMerge((function(t,e){return e})),cached=function(t){var e,n=!1;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return n||(n=!0,e=t.apply(null,i)),e}};!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(u||(u={}));var fold=function(t,e,n){return t.stype===u.Error?e(t.serror):n(t.svalue)},svalue=function(t){return{stype:u.Value,svalue:t}},serror=function(t){return{stype:u.Error,serror:t}},SimpleResult_fromResult=function(t){return t.fold(serror,svalue)},SimpleResult_toResult=function(t){return fold(t,l.error,l.value)},T=svalue,SimpleResult_partition=function(t){var e=[],n=[];return each(t,(function(t){fold(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},O=serror,SimpleResult_bind=function(t,e){return t.stype===u.Value?e(t.svalue):t},SimpleResult_bindError=function(t,e){return t.stype===u.Error?e(t.serror):t},SimpleResult_map=function(t,e){return t.stype===u.Value?{stype:u.Value,svalue:e(t.svalue)}:t},SimpleResult_mapError=function(t,e){return t.stype===u.Error?{stype:u.Error,serror:e(t.serror)}:t},_=Adt_generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),defaulted=function(t){return _.defaultedThunk(constant(t))},mergeWith=function(t){return _.mergeWithThunk(constant(t))},N=_.strict,A=_.asOption,z=_.defaultedThunk,D=(_.asDefaultedOptionThunk,_.mergeWithThunk),wrap=function(t,e){var n;return(n={})[t]=e,n},M=(Adt_generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){return function(t,e){var n={};return each$1(t,(function(t,i){contains(e,i)||(n[i]=t)})),n}(t,e)}),wrap$1=function(t,e){return wrap(t,e)},wrapAll$1=function(t){return function(t){var e={};return each(t,(function(t){e[t.key]=t.value})),e}(t)},consolidate=function(t,e){var n,i=function(t){var e=[],n=[];return each(t,(function(t){t.fold((function(t){e.push(t)}),(function(t){n.push(t)}))})),{errors:e,values:n}}(t);return i.errors.length>0?(n=i.errors,l.error(flatten(n))):function(t,e){return 0===t.length?l.value(e):l.value(k(e,E.apply(void 0,t)))}(i.values,e)},mergeErrors$1=function(t){return compose(O,flatten)(t)},ResultCombine_consolidateObj=function(t,e){var n=SimpleResult_partition(t);return n.errors.length>0?mergeErrors$1(n.errors):function(t,e){return t.length>0?T(k(e,E.apply(void 0,t))):T(e)}(n.values,e)},ResultCombine_consolidateArr=function(t){var e=SimpleResult_partition(t);return e.errors.length>0?mergeErrors$1(e.errors):T(e.values)},formatObj=function(t){return d(t)&&w(t).length>100?" removed due to size":JSON.stringify(t,null,2)},nu=function(t,e){return O([{path:t,getErrorInfo:e}])},B=Adt_generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),strictAccess=function(t,e,n){return get(e,n).fold((function(){return function(t,e,n){return nu(t,(function(){return'Could not find valid *strict* value for "'+e+'" in '+formatObj(n)}))}(t,n,e)}),T)},fallbackAccess=function(t,e,n){var i=get(t,e).fold((function(){return n(t)}),identity);return T(i)},cExtractOne=function(t,e,n,i){return n.fold((function(n,a,u,c){var bundle=function(e){var u=c.extract(t.concat([n]),i,e);return SimpleResult_map(u,(function(t){return wrap(a,i(t))}))},bundleAsOption=function(e){return e.fold((function(){var t=wrap(a,i(s.none()));return T(t)}),(function(e){var u=c.extract(t.concat([n]),i,e);return SimpleResult_map(u,(function(t){return wrap(a,i(s.some(t)))}))}))};return u.fold((function(){return SimpleResult_bind(strictAccess(t,e,n),bundle)}),(function(t){return SimpleResult_bind(fallbackAccess(e,n,t),bundle)}),(function(){return SimpleResult_bind(function(t,e){return T(get(t,e))}(e,n),bundleAsOption)}),(function(t){return SimpleResult_bind(function(t,e,n){var i=get(t,e).map((function(e){return!0===e?n(t):e}));return T(i)}(e,n,t),bundleAsOption)}),(function(t){var i=t(e),a=SimpleResult_map(fallbackAccess(e,n,constant({})),(function(t){return k(i,t)}));return SimpleResult_bind(a,bundle)}))}),(function(t,n){var a=n(e);return T(wrap(t,i(a)))}))},value$1=function(t){return{extract:function(e,n,i){return SimpleResult_bindError(t(i,n),(function(t){return function(t,e){return nu(t,(function(){return e}))}(e,t)}))},toString:function(){return"val"}}},getSetKeys=function(t){var e=w(t);return filter(e,(function(e){return hasNonNullableKey(t,e)}))},objOfOnly=function(t){var e=objOf(t),n=foldr(t,(function(t,e){return e.fold((function(e){return k(t,wrap$1(e,!0))}),constant(t))}),{});return{extract:function(t,i,a){var u=g(a)?[]:getSetKeys(a),c=filter(u,(function(t){return!hasNonNullableKey(n,t)}));return 0===c.length?e.extract(t,i,a):function(t,e){return nu(t,(function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"}))}(t,c)},toString:e.toString}},objOf=function(t){return{extract:function(e,n,i){return function(t,e,n,i){var a=map(n,(function(n){return cExtractOne(t,e,n,i)}));return ResultCombine_consolidateObj(a,{})}(e,i,t,n)},toString:function(){return"obj{\n"+map(t,(function(t){return t.fold((function(t,e,n,i){return t+" -> "+i.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},arrOf=function(t){return{extract:function(e,n,i){var a=map(i,(function(i,a){return t.extract(e.concat(["["+a+"]"]),n,i)}));return ResultCombine_consolidateArr(a)},toString:function(){return"array("+t.toString()+")"}}},setOf=function(t,e){return{extract:function(n,i,a){var u=w(a),c=function(e,n){return arrOf(value$1(t)).extract(e,identity,n)}(n,u);return SimpleResult_bind(c,(function(t){var u=map(t,(function(t){return B.field(t,t,N(),e)}));return objOf(u).extract(n,i,a)}))},toString:function(){return"setOf("+e.toString()+")"}}},R=constant(value$1(T)),P=compose(arrOf,objOf),I=B.state,H=B.field,chooseFrom=function(t,e,n,i,a){return get(i,a).fold((function(){return function(t,e,n){return nu(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+formatObj(e)}))}(t,i,a)}),(function(i){return i.extract(t.concat(["branch: "+a]),e,n)}))},choose=function(t,e){return{extract:function(n,i,a){return get(a,t).fold((function(){return function(t,e){return nu(t,(function(){return'Choice schema did not contain choice key: "'+e+'"'}))}(n,t)}),(function(t){return chooseFrom(n,i,a,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+w(e)}}},L=value$1(T),arrOfObj$1=function(t){return P(t)},valueThunkOf=function(t){return{extract:function(e,n,i){return t().extract(e,n,i)},toString:function(){return t().toString()}}},valueOf=function(t){return value$1((function(e){return t(e).fold(O,T)}))},setOf$1=function(t,e){return setOf((function(e){return SimpleResult_fromResult(t(e))}),e)},asRaw=function(t,e,n){return SimpleResult_toResult(function(t,e,n,i){var a=e.extract([t],n,i);return SimpleResult_mapError(a,(function(t){return{input:i,errors:t}}))}(t,e,identity,n))},getOrDie=function(t){return t.fold((function(t){throw new Error(formatError(t))}),identity)},asRawOrDie=function(t,e,n){return getOrDie(asRaw(t,e,n))},formatError=function(t){return"Errors: \n"+(e=t.errors,n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,map(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}))).join("\n")+"\n\nInput object: "+formatObj(t.input);var e,n},chooseProcessor=function(t,e){return choose(t,e)},choose$1=function(t,e){return choose(t,map$1(e,objOf))},F=constant(L),typedValue=function(t,e){return value$1((function(n){var i=typeof n;return t(n)?T(n):O("Expected type: "+e+" but got: "+i)}))},V=typedValue(p,"number"),U=typedValue(f,"string"),j=typedValue(g,"boolean"),W=typedValue(h,"function"),isPostMessageable=function(t){var every=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every((function(e){return isPostMessageable(t[e])}));case"Map":return every(t.keys(),isPostMessageable)&&every(t.values(),isPostMessageable);case"Set":return every(t.keys(),isPostMessageable);default:return!1}},q=value$1((function(t){return isPostMessageable(t)?T(t):O("Expected value to be acceptable for sending via postMessage")})),validateEnum=function(t){return valueOf((function(e){return contains(t,e)?l.value(e):l.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},strict$1=function(t){return H(t,t,N(),R())},strictOf=function(t,e){return H(t,t,N(),e)},strictNumber=function(t){return strictOf(t,V)},strictString=function(t){return strictOf(t,U)},strictStringEnum=function(t,e){return H(t,t,N(),validateEnum(e))},strictFunction=function(t){return strictOf(t,W)},strictObjOf=function(t,e){return H(t,t,N(),objOf(e))},strictArrayOfObj=function(t,e){return H(t,t,N(),P(e))},strictArrayOf=function(t,e){return H(t,t,N(),arrOf(e))},option=function(t){return H(t,t,A(),R())},optionOf=function(t,e){return H(t,t,A(),e)},optionNumber=function(t){return optionOf(t,V)},optionString=function(t){return optionOf(t,U)},optionFunction=function(t){return optionOf(t,W)},optionObjOf=function(t,e){return optionOf(t,objOf(e))},defaulted$1=function(t,e){return H(t,t,defaulted(e),R())},defaultedOf=function(t,e,n){return H(t,t,defaulted(e),n)},defaultedNumber=function(t,e){return defaultedOf(t,e,V)},defaultedString=function(t,e){return defaultedOf(t,e,U)},defaultedStringEnum=function(t,e,n){return defaultedOf(t,e,validateEnum(n))},defaultedBoolean=function(t,e){return defaultedOf(t,e,j)},defaultedFunction=function(t,e){return defaultedOf(t,e,W)},defaultedObjOf=function(t,e,n){return defaultedOf(t,e,objOf(n))},state$1=function(t,e){return I(t,e)},Cell=function(t){var e=t,get=function(){return e};return{get:get,set:function(t){e=t},clone:function(){return Cell(get())}}},fromDom=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:constant(t)}},$={fromHtml:function(t,n){var i=(n||e.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return fromDom(i.childNodes[0])},fromTag:function(t,n){var i=(n||e.document).createElement(t);return fromDom(i)},fromText:function(t,n){var i=(n||e.document).createTextNode(t);return fromDom(i)},fromDom:fromDom,fromPoint:function(t,e,n){var i=t.dom();return s.from(i.elementFromPoint(e,n)).map(fromDom)}},compareDocumentPosition=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},Node_documentPositionContainedBy=function(t,n){return compareDocumentPosition(t,n,e.Node.DOCUMENT_POSITION_CONTAINED_BY)},unknown=function(){return nu$1(0,0)},nu$1=function(t,e){return{major:t,minor:e}},G={nu:nu$1,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?unknown():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}}(t,e);if(!n)return{major:0,minor:0};var group=function(t){return Number(e.replace(n,"$"+t))};return nu$1(group(1),group(2))}(t,n)},unknown:unknown},isBrowser=function(t,e){return function(){return e===t}},nu$2=function(t){var e=t.current;return{current:e,version:t.version,isEdge:isBrowser("Edge",e),isChrome:isBrowser("Chrome",e),isIE:isBrowser("IE",e),isOpera:isBrowser("Opera",e),isFirefox:isBrowser("Firefox",e),isSafari:isBrowser("Safari",e)}},X={unknown:function(){return nu$2({current:void 0,version:G.unknown()})},nu:nu$2,edge:constant("Edge"),chrome:constant("Chrome"),ie:constant("IE"),opera:constant("Opera"),firefox:constant("Firefox"),safari:constant("Safari")},isOS=function(t,e){return function(){return e===t}},nu$3=function(t){var e=t.current;return{current:e,version:t.version,isWindows:isOS("Windows",e),isiOS:isOS("iOS",e),isAndroid:isOS("Android",e),isOSX:isOS("OSX",e),isLinux:isOS("Linux",e),isSolaris:isOS("Solaris",e),isFreeBSD:isOS("FreeBSD",e),isChromeOS:isOS("ChromeOS",e)}},K={unknown:function(){return nu$3({current:void 0,version:G.unknown()})},nu:nu$3,windows:constant("Windows"),ios:constant("iOS"),android:constant("Android"),linux:constant("Linux"),osx:constant("OSX"),solaris:constant("Solaris"),freebsd:constant("FreeBSD"),chromeos:constant("ChromeOS")},detect$1=function(t,e){var n=String(e).toLowerCase();return find(t,(function(t){return t.search(n)}))},UaString_detectBrowser=function(t,e){return detect$1(t,e).map((function(t){var n=G.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},UaString_detectOs=function(t,e){return detect$1(t,e).map((function(t){var n=G.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},contains$1=function(t,e){return-1!==t.indexOf(e)},Y=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(t){return function(e){return contains$1(e,t)}},J=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return contains$1(t,"edge/")&&contains$1(t,"chrome")&&contains$1(t,"safari")&&contains$1(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Y],search:function(t){return contains$1(t,"chrome")&&!contains$1(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return contains$1(t,"msie")||contains$1(t,"trident")}},{name:"Opera",versionRegexes:[Y,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[Y,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(contains$1(t,"safari")||contains$1(t,"mobile/"))&&contains$1(t,"applewebkit")}}],Z=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return contains$1(t,"iphone")||contains$1(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Q={browsers:constant(J),oses:constant(Z)},PlatformDetection_detect=function(t,e){var n=Q.browsers(),i=Q.oses(),a=UaString_detectBrowser(n,t).fold(X.unknown,X.nu),u=UaString_detectOs(i,t).fold(K.unknown,K.nu),c=function(t,e,n,i){var a=t.isiOS()&&!0===/ipad/i.test(n),u=t.isiOS()&&!a,c=t.isiOS()||t.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),m=!f&&!l&&!d;return{isiPad:constant(a),isiPhone:constant(u),isTablet:constant(l),isPhone:constant(f),isTouch:constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:constant(d),isDesktop:constant(m)}}(u,a,t,e);return{browser:a,os:u,deviceType:c}},tt=Cell(PlatformDetection_detect(e.navigator.userAgent,(function(t){return e.window.matchMedia(t).matches}))),detect$3=function(){return tt.get()},et=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),nt=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),rt=e.Node.TEXT_NODE,ot=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,nt),it=et,is=function(t,e){var n=t.dom();if(n.nodeType!==ot)return!1;var i=n;if(void 0!==i.matches)return i.matches(e);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(e);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},bypassSelector=function(t){return t.nodeType!==ot&&t.nodeType!==it||0===t.childElementCount},all=function(t,n){var i=void 0===n?e.document:n.dom();return bypassSelector(i)?[]:map(i.querySelectorAll(t),$.fromDom)},eq=function(t,e){return t.dom()===e.dom()},at=detect$3().browser,ut=at.isIE()?function(t,e){return Node_documentPositionContainedBy(t.dom(),e.dom())}:function(t,e){var n=t.dom(),i=e.dom();return n!==i&&n.contains(i)},ancestor=function(t,e,n){for(var i=t.dom(),a=h(n)?n:constant(!1);i.parentNode;){i=i.parentNode;var u=$.fromDom(i),c=e(u);if(c.isSome())return c;if(a(u))break}return s.none()},closest=function(t,e,n){return e(t).orThunk((function(){return n(t)?s.none():ancestor(t,e,n)}))},isSource=function(t,e){return eq(t.element(),e.event().target())},nu$4=function(t){if(!hasNonNullableKey(t,"can")&&!hasNonNullableKey(t,"abort")&&!hasNonNullableKey(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return asRawOrDie("Extracting event.handler",objOfOnly([defaulted$1("can",constant(!0)),defaulted$1("abort",constant(!1)),defaulted$1("run",noop)]),t)},fuse=function(t){var e=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return foldl(t,(function(t,i){return t&&e(i).apply(void 0,n)}),!0)}}(t,(function(t){return t.can})),n=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return foldl(t,(function(t,i){return t||e(i).apply(void 0,n)}),!1)}}(t,(function(t){return t.abort}));return nu$4({can:e,abort:n,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];each(t,(function(t){t.run.apply(void 0,e)}))}})},ct=constant("touchstart"),st=constant("touchmove"),lt=constant("touchend"),ft=constant("touchcancel"),dt=constant("mousedown"),mt=constant("mousemove"),gt=constant("mouseout"),ht=constant("mouseup"),pt=constant("mouseover"),vt=constant("focusin"),bt=constant("focusout"),yt=constant("keydown"),xt=constant("keyup"),wt=constant("input"),Ct=constant("change"),St=constant("click"),kt=constant("transitionend"),Et=constant("selectstart"),Tt={tap:constant("alloy.tap")},Ot=constant("alloy.focus"),_t=constant("alloy.blur.post"),Nt=constant("alloy.paste.post"),At=constant("alloy.receive"),zt=constant("alloy.execute"),Dt=constant("alloy.focus.item"),Mt=Tt.tap,Bt=constant("alloy.longpress"),Rt=constant("alloy.sandbox.close"),Pt=constant("alloy.typeahead.cancel"),It=constant("alloy.system.init"),Ht=constant("alloy.system.touchmove"),Lt=constant("alloy.system.touchend"),Ft=constant("alloy.system.scroll"),Vt=constant("alloy.system.resize"),Ut=constant("alloy.system.attached"),jt=constant("alloy.system.detached"),Wt=constant("alloy.system.dismissRequested"),qt=constant("alloy.system.repositionRequested"),$t=constant("alloy.focusmanager.shifted"),Gt=constant("alloy.slotcontainer.visibility"),Xt=constant("alloy.change.tab"),Kt=constant("alloy.dismiss.tab"),Yt=constant("alloy.highlight"),Jt=constant("alloy.dehighlight"),emit=function(t,e){dispatchWith(t,t.element(),e,{})},emitWith=function(t,e,n){dispatchWith(t,t.element(),e,n)},emitExecute=function(t){emit(t,zt())},dispatch=function(t,e,n){dispatchWith(t,e,n,{})},dispatchWith=function(t,e,n,i){var a=__assign({target:e},i);t.getSystem().triggerEvent(n,e,map$1(a,constant))},dispatchEvent=function(t,e,n,i){t.getSystem().triggerEvent(n,e,i.event())},derive=function(t){return wrapAll$1(t)},abort=function(t,e){return{key:t,value:nu$4({abort:e})}},preventDefault=function(t){return{key:t,value:nu$4({run:function(t,e){e.event().prevent()}})}},run=function(t,e){return{key:t,value:nu$4({run:e})}},runActionExtra=function(t,e,n){return{key:t,value:nu$4({run:function(t,i){e.apply(void 0,[t,i].concat(n))}})}},runOnSourceName=function(t){return function(e){return{key:t,value:nu$4({run:function(t,n){isSource(t,n)&&e(t,n)}})}}},redirectToPart=function(t,e,n){return function(t,e){return run(t,(function(n,i){n.getSystem().getByUid(e).each((function(e){dispatchEvent(e,e.element(),t,i)}))}))}(t,e.partUids[n])},runWithTarget=function(t,e){return run(t,(function(t,n){var i=n.event(),a=t.getSystem().getByDom(i.target()).fold((function(){return closest(i.target(),(function(e){return t.getSystem().getByDom(e).toOption()}),constant(!1)).getOr(t)}),(function(t){return t}));e(t,a,n)}))},cutter=function(t){return run(t,(function(t,e){e.cut()}))},stopper=function(t){return run(t,(function(t,e){e.stop()}))},runOnSource=function(t,e){return runOnSourceName(t)(e)},Zt=runOnSourceName(Ut()),Qt=runOnSourceName(jt()),te=runOnSourceName(It()),ee=function(t){return function(e){return run(t,e)}}(zt()),Immutable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var i={};return each(t,(function(t,n){i[t]=constant(e[n])})),i}},sort$1=function(t){return t.slice(0).sort()},validateStrArr=function(t,e){if(!m(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");each(e,(function(e){if(!f(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))},MixedBag=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return validateStrArr("required",t),validateStrArr("optional",e),function(t){var e=sort$1(t);find(e,(function(t,n){return n<e.length-1&&t===e[n+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))}(n),function(i){var a=w(i);forall(t,(function(t){return contains(a,t)}))||function(t,e){throw new Error("All required keys ("+sort$1(t).join(", ")+") were not specified. Specified keys were: "+sort$1(e).join(", ")+".")}(t,a);var u=filter(a,(function(t){return!contains(n,t)}));u.length>0&&function(t){throw new Error("Unsupported keys for object: "+sort$1(t).join(", "))}(u);var c={};return each(t,(function(t){c[t]=constant(i[t])})),each(e,(function(t){c[t]=constant(Object.prototype.hasOwnProperty.call(i,t)?s.some(i[t]):s.none())})),c}},owner=function(t){return $.fromDom(t.dom().ownerDocument)},documentElement=function(t){return $.fromDom(t.dom().ownerDocument.documentElement)},defaultView=function(t){return $.fromDom(t.dom().ownerDocument.defaultView)},parent=function(t){return s.from(t.dom().parentNode).map($.fromDom)},offsetParent=function(t){return s.from(t.dom().offsetParent).map($.fromDom)},children=function(t){return map(t.dom().childNodes,$.fromDom)},child=function(t,e){var n=t.dom().childNodes;return s.from(n[e]).map($.fromDom)},ne=(Immutable("element","offset"),function(t,e){parent(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),after=function(t,e){(function(t){return s.from(t.dom().nextSibling).map($.fromDom)})(t).fold((function(){parent(t).each((function(t){append(t,e)}))}),(function(t){ne(t,e)}))},prepend=function(t,e){(function(t){return child(t,0)})(t).fold((function(){append(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))},append=function(t,e){t.dom().appendChild(e.dom())},append$1=function(t,e){each(e,(function(e){append(t,e)}))},empty=function(t){t.dom().textContent="",each(children(t),(function(t){remove(t)}))},remove=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},unwrap=function(t){var e,n=children(t);n.length>0&&(e=t,each(n,(function(t){ne(e,t)}))),remove(t)},get$1=function(t){return t.dom().innerHTML},set=function(t,n){var i,a,u=owner(t).dom(),c=$.fromDom(u.createDocumentFragment()),s=(i=n,(a=(u||e.document).createElement("div")).innerHTML=i,children($.fromDom(a)));append$1(c,s),empty(t),append(t,c)},re=(void 0!==e.window?e.window:Function("return this;")(),function(t){return t.dom().nodeName.toLowerCase()}),isType$1=function(t){return function(e){return function(t){return t.dom().nodeType}(e)===t}},oe=isType$1(nt),ie=isType$1(rt),rawSet=function(t,n,i){if(!(f(i)||g(i)||p(i)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")},set$1=function(t,e,n){rawSet(t.dom(),e,n)},get$2=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},has$1=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},remove$1=function(t,e){t.dom().removeAttribute(e)},shallow$1=function(t){return function(t,e){return $.fromDom(t.dom().cloneNode(e))}(t,!1)},getHtml=function(t){return function(t){var e=$.fromTag("div"),n=$.fromDom(t.dom().cloneNode(!0));return append(e,n),get$1(e)}(shallow$1(t))},element=function(t){return getHtml(t)},ae=derive([function(t,e){return{key:t,value:nu$4({can:e})}}(Ot(),(function(t,n){var i=n.event().originator(),a=n.event().target();return!function(t,e,n){return eq(e,t.element())&&!eq(e,n)}(t,i,a)||(e.console.warn(Ot()+" did not get interpreted by the desired target. \nOriginator: "+element(i)+"\nTarget: "+element(a)+"\nCheck the "+Ot()+" event handlers"),!1)}))]),ue=Object.freeze({__proto__:null,events:ae}),ce=0,generate$1=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ce+String(e)},se=constant("alloy-id-"),le=constant("data-alloy-id"),fe=se(),de=le(),writeOnly=function(t,e){Object.defineProperty(t.dom(),de,{value:e,writable:!0})},read$1=function(t){var e=oe(t)?t.dom()[de]:null;return s.from(e)},generate$2=function(t){return generate$1(t)},me=identity,NoContextApi=function(t){var fail=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+element(t().element())+" is not in context.":""))}};return{debugInfo:constant("fake"),triggerEvent:fail("triggerEvent"),triggerFocus:fail("triggerFocus"),triggerEscape:fail("triggerEscape"),build:fail("build"),addToWorld:fail("addToWorld"),removeFromWorld:fail("removeFromWorld"),addToGui:fail("addToGui"),removeFromGui:fail("removeFromGui"),getByUid:fail("getByUid"),getByDom:fail("getByDom"),broadcast:fail("broadcast"),broadcastOn:fail("broadcastOn"),broadcastEvent:fail("broadcastEvent"),isConnected:constant(!1)}},ge=NoContextApi(),cleanParameters=function(t){return map(t,(function(t){return function(t,e){return function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}(t,e,t.length-e.length)}(t,"/*")?t.substring(0,t.length-"/*".length):t}))},markAsExtraApi=function(t,e){var n=t.toString(),i=n.indexOf(")")+1,a=n.indexOf("("),u=n.substring(a+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:cleanParameters(u)}},t},he=generate$1("alloy-premade"),premade=function(t){return wrap$1(he,t)},makeApi=function(t){return function(t,e){var n=e.toString(),i=n.indexOf(")")+1,a=n.indexOf("("),u=n.substring(a+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:cleanParameters(u.slice(1))}},t}((function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t.apply(void 0,[e.getApis()].concat([e].concat(n)))}),t)},pe={init:function(){return nu$5({readState:function(){return"No State required"}})}},nu$5=function(t){return t},byInnerKey=function(t,e){var n={};return each$1(t,(function(t,i){each$1(t,(function(t,a){var u=get(n,a).getOr([]);n[a]=u.concat([e(i,t)])}))})),n},nu$6=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},curryArgs=function(t,e){return n=curry.apply(void 0,[t.handler].concat(e)),i=t.purpose(),{cHandler:n,purpose:constant(i)};var n,i},getCurried=function(t){return t.cHandler},behaviourTuple=function(t,e){return{name:constant(t),handler:constant(e)}},groupByEvents=function(t,e,n){var i=__assign(__assign({},n),function(t,e){var n={};return each(t,(function(t){n[t.name()]=t.handlers(e)})),n}(e,t));return byInnerKey(i,behaviourTuple)},assemble=function(t){var e=function(t){return h(t)?{can:constant(!0),abort:constant(!1),run:t}:t}(t);return function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u=[t,n].concat(i);e.abort.apply(void 0,u)?n.stop():e.can.apply(void 0,u)&&e.run.apply(void 0,u)}},fuse$1=function(t,e,n){var i=e[n];return i?function(t,e,n,i){try{var a=sort(n,(function(n,a){var u=n[e](),c=a[e](),s=i.indexOf(u),l=i.indexOf(c);if(-1===s)throw new Error("The ordering for "+t+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(i,null,2));if(-1===l)throw new Error("The ordering for "+t+" does not have an entry for "+c+".\nOrder specified: "+JSON.stringify(i,null,2));return s<l?-1:l<s?1:0}));return l.value(a)}catch(t){return l.error([t])}}("Event: "+n,"name",t,i).map((function(t){var e=map(t,(function(t){return t.handler()}));return fuse(e)})):function(t,e){return l.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(map(e,(function(t){return t.name()})),null,2)])}(n,t)},combineGroups=function(t,e){var n=mapToArray(t,(function(t,n){return(1===t.length?l.value(t[0].handler()):fuse$1(t,e,n)).map((function(i){var a=assemble(i),u=t.length>1?filter(e[n],(function(e){return exists(t,(function(t){return t.name()===e}))})).join(" > "):t[0].name();return wrap$1(n,function(t,e){return{handler:t,purpose:constant(e)}}(a,u))}))}));return consolidate(n,{})},toEvents=function(t){return t.events},read$2=function(t,e){var n=get$2(t,e);return void 0===n||""===n?[]:n.split(" ")},supports=function(t){return void 0!==t.dom().classList},add$1=function(t,e){return function(t,e,n){var i=read$2(t,e).concat([n]);return set$1(t,e,i.join(" ")),!0}(t,"class",e)},remove$3=function(t,e){return function(t,e,n){var i=filter(read$2(t,e),(function(t){return t!==n}));return i.length>0?set$1(t,e,i.join(" ")):remove$1(t,e),!1}(t,"class",e)},add$2=function(t,e){supports(t)?t.dom().classList.add(e):add$1(t,e)},cleanClass=function(t){0===(supports(t)?t.dom().classList:function(t){return read$2(t,"class")}(t)).length&&remove$1(t,"class")},remove$4=function(t,e){supports(t)?t.dom().classList.remove(e):remove$3(t,e);cleanClass(t)},has$2=function(t,e){return supports(t)&&t.dom().classList.contains(e)},add$3=function(t,e){each(e,(function(e){add$2(t,e)}))},remove$5=function(t,e){each(e,(function(e){remove$4(t,e)}))},isSupported=function(t){return void 0!==t.style&&h(t.style.getPropertyValue)},inBody=function(t){var e=ie(t)?t.dom().parentNode:t.dom();return null!=e&&e.ownerDocument.body.contains(e)},ve=cached((function(){return getBody($.fromDom(e.document))})),getBody=function(t){var e=t.dom().body;if(null==e)throw new Error("Body is not available yet");return $.fromDom(e)},internalSet=function(t,n,i){if(!f(i))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);isSupported(t)&&t.style.setProperty(n,i)},internalRemove=function(t,e){isSupported(t)&&t.style.removeProperty(e)},set$2=function(t,e,n){var i=t.dom();internalSet(i,e,n)},setAll$1=function(t,e){var n=t.dom();each$1(e,(function(t,e){internalSet(n,e,t)}))},setOptions=function(t,e){var n=t.dom();each$1(e,(function(t,e){t.fold((function(){internalRemove(n,e)}),(function(t){internalSet(n,e,t)}))}))},get$4=function(t,n){var i=t.dom(),a=e.window.getComputedStyle(i).getPropertyValue(n),u=""!==a||inBody(t)?a:getUnsafeProperty(i,n);return null===u?void 0:u},getUnsafeProperty=function(t,e){return isSupported(t)?t.style.getPropertyValue(e):""},getRaw=function(t,e){var n=t.dom(),i=getUnsafeProperty(n,e);return s.from(i).filter((function(t){return t.length>0}))},getAllRaw=function(t){var e={},n=t.dom();if(isSupported(n))for(var i=0;i<n.style.length;i++){var a=n.style.item(i);e[a]=n.style[a]}return e},isValidValue=function(t,e,n){var i=$.fromTag(t);return set$2(i,e,n),getRaw(i,e).isSome()},remove$6=function(t,e){var n=t.dom();internalRemove(n,e),has$1(t,"style")&&""===get$2(t,"style").replace(/^\s+|\s+$/g,"")&&remove$1(t,"style")},reflow=function(t){return t.dom().offsetWidth},get$5=function(t){return t.dom().value},set$3=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom().value=e},renderToDom=function(t){var e=$.fromTag(t.tag);!function(t,e){var n=t.dom();each$1(e,(function(t,e){rawSet(n,e,t)}))}(e,t.attributes),add$3(e,t.classes),setAll$1(e,t.styles),t.innerHtml.each((function(t){return set(e,t)}));var n=t.domChildren;return append$1(e,n),t.value.each((function(t){set$3(e,t)})),t.uid,writeOnly(e,t.uid),e},generateFrom$1=function(t,e){return function(t,e){var n=map(e,(function(t){return optionObjOf(t.name(),[strict$1("config"),defaulted$1("state",pe)])})),i=asRaw("component.behaviours",objOf(n),t.behaviours).fold((function(e){throw new Error(formatError(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))}),(function(t){return t}));return{list:e,data:map$1(i,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))}}(t,e)},generate$3=function(t){var e=function(t){var e=get(t,"behaviours").getOr({}),n=filter(w(e),(function(t){return void 0!==e[t]}));return map(n,(function(t){return e[t].me}))}(t);return generateFrom$1(t,e)},getDomDefinition=function(t,e,n){var i,a,u,c=__assign(__assign({},(i=t).dom),{uid:i.uid,domChildren:map(i.components,(function(t){return t.element()}))}),s=function(t){return t.domModification.fold((function(){return nu$6({})}),nu$6)}(t),l={"alloy.base.modification":s},f=e.length>0?function(t,e,n,i){var a=__assign({},e);each(n,(function(e){a[e.name()]=e.exhibit(t,i)}));var u=byInnerKey(a,(function(t,e){return{name:t,modification:e}})),combineObjects=function(t){return foldr(t,(function(t,e){return __assign(__assign({},e.modification),t)}),{})},c=foldr(u.classes,(function(t,e){return e.modification.concat(t)}),[]),s=combineObjects(u.attributes),l=combineObjects(u.styles);return nu$6({classes:c,attributes:s,styles:l})}(n,l,e,c):s;return u=f,__assign(__assign({},a=c),{attributes:__assign(__assign({},a.attributes),u.attributes),styles:__assign(__assign({},a.styles),u.styles),classes:a.classes.concat(u.classes)})},getEvents=function(t,e,n){var i={"alloy.base.behaviour":toEvents(t)};return function(t,e,n,i){var a=groupByEvents(t,n,i);return combineGroups(a,e)}(n,t.eventOrder,e,i).getOrDie()},build=function(t){var getMe=function(){return d},e=Cell(ge),n=getOrDie(function(t){return asRaw("custom.definition",objOf([H("dom","dom",N(),objOf([strict$1("tag"),defaulted$1("styles",{}),defaulted$1("classes",[]),defaulted$1("attributes",{}),option("value"),option("innerHtml")])),strict$1("components"),strict$1("uid"),defaulted$1("events",{}),defaulted$1("apis",{}),H("eventOrder","eventOrder",mergeWith({"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],touchstart:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]}),F()),option("domModification")]),t)}(t)),i=generate$3(t),a=function(t){return t.list}(i),u=function(t){return t.data}(i),c=getDomDefinition(n,a,u),s=renderToDom(c),l=getEvents(n,a,u),f=Cell(n.components),d={getSystem:e.get,config:function(e){var n=u;return(h(n[e.name()])?n[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(t,null,2))})()},hasConfigured:function(t){return h(u[t.name()])},spec:constant(t),readState:function(t){return u[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return n.apis},connect:function(t){e.set(t)},disconnect:function(){e.set(NoContextApi(getMe))},element:constant(s),syncComponents:function(){var t=children(s),n=bind(t,(function(t){return e.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));f.set(n)},components:f.get,events:constant(l)};return d},buildFromSpec=function(t){var e=me(t),n=e.events,i=__rest(e,["events"]),a=function(t){var e=get(t,"components").getOr([]);return map(e,build$1)}(i),u=__assign(__assign({},i),{events:__assign(__assign({},ue),n),components:a});return l.value(build(u))},text=function(t){var e=$.fromText(t);return external({element:e})},external=function(t){var e=asRawOrDie("external.component",objOfOnly([strict$1("element"),option("uid")]),t),n=Cell(NoContextApi());e.uid.each((function(t){writeOnly(e.element,t)}));var i={getSystem:n.get,config:s.none,hasConfigured:constant(!1),connect:function(t){n.set(t)},disconnect:function(){n.set(NoContextApi((function(){return i})))},getApis:function(){return{}},element:constant(e.element),spec:constant(t),readState:constant("No state"),syncComponents:noop,components:constant([]),events:constant({})};return premade(i)},be=generate$2,build$1=function(t){return function(t){return get(t,he)}(t).fold((function(){var e=t.hasOwnProperty("uid")?t:__assign({uid:be("")},t);return buildFromSpec(e).getOrDie()}),(function(t){return t}))},ye=premade;function Dimension(t,e){var get=function(n){var i=e(n);if(i<=0||null===i){var a=get$4(n,t);return parseFloat(a)||0}return i},aggregate=function(t,e){return foldl(e,(function(e,n){var i=get$4(t,n),a=void 0===i?0:parseInt(i,10);return isNaN(a)?e:e+a}),0)};return{set:function(e,n){if(!p(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var i=e.dom();isSupported(i)&&(i.style[t]=n+"px")},get:get,getOuter:get,aggregate:aggregate,max:function(t,e,n){var i=aggregate(t,n);return e>i?e-i:0}}}var xe=Dimension("height",(function(t){var e=t.dom();return inBody(t)?e.getBoundingClientRect().height:e.offsetHeight})),get$6=function(t){return xe.get(t)},getOuter$1=function(t){return xe.getOuter(t)},r=function(t,e){return{left:constant(t),top:constant(e),translate:function(n,i){return r(t+n,e+i)}}},we=r,firstDefinedOrZero=function(t,e){return void 0!==t?t:void 0!==e?e:0},absolute=function(t){var e=t.dom().ownerDocument,n=e.body,i=e.defaultView,a=e.documentElement;if(n===t.dom())return we(n.offsetLeft,n.offsetTop);var u=firstDefinedOrZero(i.pageYOffset,a.scrollTop),c=firstDefinedOrZero(i.pageXOffset,a.scrollLeft),s=firstDefinedOrZero(a.clientTop,n.clientTop),l=firstDefinedOrZero(a.clientLeft,n.clientLeft);return viewport(t).translate(c-l,u-s)},viewport=function(t){var e=t.dom(),n=e.ownerDocument.body;return n===e?we(n.offsetLeft,n.offsetTop):inBody(t)?function(t){var e=t.getBoundingClientRect();return we(e.left,e.top)}(e):we(0,0)},Ce=Dimension("width",(function(t){return t.dom().offsetWidth})),get$7=function(t){return Ce.get(t)},getOuter$2=function(t){return Ce.getOuter(t)},fromRawEvent=function(t){var e=$.fromDom(t.target),stop=function(){t.stopPropagation()},prevent=function(){t.preventDefault()},n=compose(prevent,stop);return function(t,e,n,i,a,u,c){return{target:constant(t),x:constant(e),y:constant(n),stop:i,prevent:a,kill:u,raw:constant(c)}}(e,t.clientX,t.clientY,stop,prevent,n,t)},binder=function(t,e,n,i,a){var u=function(t,e){return function(n){t(n)&&e(fromRawEvent(n))}}(n,i);return t.dom().addEventListener(e,u,a),{unbind:curry(unbind,t,e,u,a)}},unbind=function(t,e,n,i){t.dom().removeEventListener(e,n,i)},Se=(detect$3().browser.isSafari(),function(t){var n=void 0!==t?t.dom():e.document,i=n.body.scrollLeft||n.documentElement.scrollLeft,a=n.body.scrollTop||n.documentElement.scrollTop;return we(i,a)}),to=function(t,n,i){(void 0!==i?i.dom():e.document).defaultView.scrollTo(t,n)},bounds=function(t,e,n,i){return{x:constant(t),y:constant(e),width:constant(n),height:constant(i),right:constant(t+n),bottom:constant(e+i)}},getBounds=function(t){var n=void 0===t?e.window:t,i=n.document,a=Se($.fromDom(i));return function(t){var n=void 0===t?e.window:t;return s.from(n.visualViewport)}(n).fold((function(){var t=n.document.documentElement,e=t.clientWidth,i=t.clientHeight;return bounds(a.left(),a.top(),e,i)}),(function(t){return bounds(Math.max(t.pageLeft,a.left()),Math.max(t.pageTop,a.top()),t.width,t.height)}))},walkUp=function(t,e){return t.view(e).fold(constant([]),(function(e){var n=t.owner(e),i=walkUp(t,n);return[e].concat(i)}))},ke=Object.freeze({__proto__:null,view:function(t){return(t.dom()===e.document?s.none():s.from(t.dom().defaultView.frameElement)).map($.fromDom)},owner:function(t){return owner(t)}}),find$3=function(t){var n=$.fromDom(e.document),i=Se(n);return function(t,e){var n=e.owner(t),i=walkUp(e,n);return s.some(i)}(t,ke).fold(curry(absolute,t),(function(e){var n=viewport(t),a=foldr(e,(function(t,e){var n=viewport(e);return{left:t.left+n.left(),top:t.top+n.top()}}),{left:0,top:0});return we(a.left+n.left()+i.left(),a.top+n.top()+i.top())}))},Ee=Immutable("point","width","height"),Te=Immutable("x","y","width","height"),bounds$1=function(t,e,n,i){return{x:constant(t),y:constant(e),width:constant(n),height:constant(i),right:constant(t+n),bottom:constant(e+i)}},box=function(t){var e=absolute(t),n=getOuter$2(t),i=getOuter$1(t);return bounds$1(e.left(),e.top(),n,i)},absolute$1=function(t){var e=find$3(t),n=getOuter$2(t),i=getOuter$1(t);return bounds$1(e.left(),e.top(),n,i)},win=function(){return getBounds(e.window)};function ClosestOrAncestor(t,e,n,i,a){return t(n,i)?s.some(n):h(a)&&a(n)?s.none():e(n,i,a)}var Oe,ancestor$1=function(t,e,n){for(var i=t.dom(),a=h(n)?n:constant(!1);i.parentNode;){i=i.parentNode;var u=$.fromDom(i);if(e(u))return s.some(u);if(a(u))break}return s.none()},closest$1=function(t,e,n){return ClosestOrAncestor((function(t,e){return e(t)}),ancestor$1,t,e,n)},closest$2=function(t,e,n){return closest$1(t,e,n).isSome()},ancestor$2=function(t,e,n){return ancestor$1(t,(function(t){return is(t,e)}),n)},descendant$1=function(t,n){return function(t,n){var i=void 0===n?e.document:n.dom();return bypassSelector(i)?s.none():s.from(i.querySelector(t)).map($.fromDom)}(n,t)},closest$3=function(t,e,n){return ClosestOrAncestor(is,ancestor$2,t,e,n)},manager=function(){var t=generate$1("aria-owns");return{id:constant(t),link:function(e){set$1(e,"aria-owns",t)},unlink:function(t){remove$1(t,"aria-owns")}}},isAriaPartOf=function(t,e){return function(t){return closest$1(t,(function(t){if(!oe(t))return!1;var e=get$2(t,"id");return void 0!==e&&e.indexOf("aria-owns")>-1})).bind((function(t){var e=get$2(t,"id"),n=owner(t);return descendant$1(n,'[aria-owns="'+e+'"]')}))}(e).exists((function(e){return isPartOf(t,e)}))},isPartOf=function(t,e){return closest$2(e,(function(e){return eq(e,t.element())}),constant(!1))||isAriaPartOf(t,e)};!function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"}(Oe||(Oe={}));var _e,Ne=Cell({}),processEvent=function(t,n,i){switch(get(Ne.get(),t).orThunk((function(){var e=w(Ne.get());return findMap(e,(function(e){return t.indexOf(e)>-1?s.some(Ne.get()[e]):s.none()}))})).getOr(Oe.NORMAL)){case Oe.NORMAL:return i(ze());case Oe.LOGGING:var a=function(t,n){var i=[],a=(new Date).getTime();return{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var u=(new Date).getTime();contains(["mousemove","mouseover","mouseout",It()],t)||e.console.log(t,{event:t,time:u-a,target:n.dom(),sequence:map(i,(function(t){return contains(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+element(t.target)+")":t.outcome}))})}}}(t,n),u=i(a);return a.write(),u;case Oe.STOP:return!0}},Ae=["alloy/data/Fields","alloy/debugging/Debugging"],monitorEvent=function(t,e,n){return processEvent(t,e,n)},ze=constant({logEventCut:noop,logEventStopped:noop,logNoParent:noop,logEventNoHandlers:noop,logEventResponse:noop,write:noop}),De=constant([strict$1("menu"),strict$1("selectedMenu")]),Me=constant([strict$1("item"),strict$1("selectedItem")]),Be=(constant(objOf(Me().concat(De()))),constant(objOf(Me()))),Re=strictObjOf("initSize",[strict$1("numColumns"),strict$1("numRows")]),tieredMenuMarkers=function(){return strictObjOf("markers",[strict$1("backgroundMenu")].concat(De()).concat(Me()))},markers=function(t){return strictObjOf("markers",map(t,strict$1))},onPresenceHandler=function(t,e,n){!function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");return find(e,(function(t){return t.indexOf("alloy")>0&&!exists(Ae,(function(e){return t.indexOf(e)>-1}))})).getOr("unknown")}}();return H(e,e,n,valueOf((function(t){return l.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},onHandler=function(t){return onPresenceHandler(0,t,defaulted(noop))},onKeyboardHandler=function(t){return onPresenceHandler(0,t,defaulted(s.none))},onStrictHandler=function(t){return onPresenceHandler(0,t,N())},onStrictKeyboardHandler=function(t){return onPresenceHandler(0,t,N())},output=function(t,e){return state$1(t,constant(e))},snapshot=function(t){return state$1(t,identity)},Pe=constant(Re),Ie=Immutable("x","y","bubble","direction","label"),He=Adt_generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Le=He.southeast,Fe=He.southwest,Ve=He.northeast,Ue=He.northwest,je=He.south,We=He.north,qe=He.east,$e=He.west,eastX=function(t){return t.x()},middleX=function(t,e){return t.x()+t.width()/2-e.width()/2},westX=function(t,e){return t.x()+t.width()-e.width()},northY=function(t,e){return t.y()-e.height()},southY=function(t){return t.y()+t.height()},centreY=function(t,e){return t.y()+t.height()/2-e.height()/2},southeast$1=function(t,e,n){return Ie(eastX(t),southY(t),n.southeast(),Le(),"layout-se")},southwest$1=function(t,e,n){return Ie(westX(t,e),southY(t),n.southwest(),Fe(),"layout-sw")},northeast$1=function(t,e,n){return Ie(eastX(t),northY(t,e),n.northeast(),Ve(),"layout-ne")},northwest$1=function(t,e,n){return Ie(westX(t,e),northY(t,e),n.northwest(),Ue(),"layout-nw")},north$1=function(t,e,n){return Ie(middleX(t,e),northY(t,e),n.north(),We(),"layout-n")},south$1=function(t,e,n){return Ie(middleX(t,e),southY(t),n.south(),je(),"layout-s")},east$1=function(t,e,n){return Ie(function(t){return t.x()+t.width()}(t),centreY(t,e),n.east(),qe(),"layout-e")},west$1=function(t,e,n){return Ie(function(t,e){return t.x()-e.width()}(t,e),centreY(t,e),n.west(),$e(),"layout-w")},all$2=function(){return[southeast$1,southwest$1,northeast$1,northwest$1,south$1,north$1,east$1,west$1]},allRtl=function(){return[southwest$1,southeast$1,northwest$1,northeast$1,south$1,north$1,east$1,west$1]},aboveOrBelow=function(){return[northeast$1,northwest$1,southeast$1,southwest$1,north$1,south$1]},belowOrAbove=function(){return[southeast$1,southwest$1,northeast$1,northwest$1,south$1,north$1]},belowOrAboveRtl=function(){return[southwest$1,southeast$1,northwest$1,northeast$1,south$1,north$1]},loadEvent=function(t,e,n){return te((function(i,a){n(i,t,e)}))},wrapApi=function(t,e,n){return function(t,e,n){var i=n.toString(),a=i.indexOf(")")+1,u=i.indexOf("("),c=i.substring(u+1,a-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:cleanParameters(c.slice(0,1).concat(c.slice(3)))}},t}((function(i){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=[i].concat(a);return i.config({name:constant(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(c,1);return e.apply(void 0,[i,t.config,t.state].concat(n))}))}),n,e)},revokeBehaviour=function(t){return{key:t,value:void 0}},doCreate=function(t,e,n,i,a,u,c){var getConfig=function(t){return hasNonNullableKey(t,n)?t[n]():s.none()},l=map$1(a,(function(t,e){return wrapApi(n,t,e)})),f=map$1(u,(function(t,e){return markAsExtraApi(t,e)})),d=__assign(__assign(__assign({},f),l),{revoke:curry(revokeBehaviour,n),config:function(e){var i=asRawOrDie(n+"-config",t,e);return{key:n,value:{config:i,me:d,configAsRaw:cached((function(){return asRawOrDie(n+"-config",t,e)})),initialConfig:e,state:c}}},schema:function(){return e},exhibit:function(t,e){return getConfig(t).bind((function(t){return get(i,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(nu$6({}))},name:function(){return n},handlers:function(t){return getConfig(t).map((function(t){return get(i,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return d},derive$1=function(t){return wrapAll$1(t)},Ge=objOfOnly([strict$1("fields"),strict$1("name"),defaulted$1("active",{}),defaulted$1("apis",{}),defaulted$1("state",pe),defaulted$1("extra",{})]),create$1=function(t){var e=asRawOrDie("Creating behaviour: "+t.name,Ge,t);return function(t,e,n,i,a,u){var c,s,l=objOfOnly(t),f=optionObjOf(e,[(c="config",s=t,optionOf(c,objOfOnly(s)))]);return doCreate(l,f,e,n,i,a,u)}(e.fields,e.name,e.active,e.apis,e.extra,e.state)},Xe=objOfOnly([strict$1("branchKey"),strict$1("branches"),strict$1("name"),defaulted$1("active",{}),defaulted$1("apis",{}),defaulted$1("state",pe),defaulted$1("extra",{})]),createModes$1=function(t){var e=asRawOrDie("Creating behaviour: "+t.name,Xe,t);return function(t,e,n,i,a,u){var c=t,s=optionObjOf(e,[optionOf("config",t)]);return doCreate(c,s,e,n,i,a,u)}(choose$1(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)},Ke=constant(void 0),Ye=Object.freeze({__proto__:null,events:function(t){return derive([run(At(),(function(e,n){var i=t.channels,a=w(i),u=n,c=function(t,e){return e.universal()?t:filter(t,(function(t){return contains(e.channels(),t)}))}(a,u);each(c,(function(t){var n=i[t],a=n.schema,c=asRawOrDie("channel["+t+"] data\nReceiver: "+element(e.element()),a,u.data());n.onReceive(e,c)}))}))])}}),Je=[strictOf("channels",setOf$1(l.value,objOfOnly([onStrictHandler("onReceive"),defaulted$1("schema",F())])))],Ze=create$1({fields:Je,name:"receiving",active:Ye}),Qe=Object.freeze({__proto__:null,exhibit:function(t,e){return nu$6({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),focus$1=function(t){t.dom().focus()},active=function(t){var n=void 0!==t?t.dom():e.document;return s.from(n.activeElement).map($.fromDom)},search=function(t){return active(owner(t)).filter((function(e){return t.dom().contains(e.dom())}))},preserve=function(t,e){var n=owner(e),i=active(n).bind((function(t){var n,i,hasFocus=function(e){return eq(t,e)};return hasFocus(e)?s.some(e):(n=hasFocus,(i=function(t){for(var e=0;e<t.childNodes.length;e++){var a=$.fromDom(t.childNodes[e]);if(n(a))return s.some(a);var u=i(t.childNodes[e]);if(u.isSome())return u}return s.none()})(e.dom()))})),a=t(e);return i.each((function(t){active(n).filter((function(e){return eq(e,t)})).fold((function(){focus$1(t)}),noop)})),a},tn=Immutable("position","left","top","right","bottom"),applyPositionCss=function(t,e){var addPx=function(t){return t+"px"};setOptions(t,{position:s.some(e.position()),left:e.left().map(addPx),top:e.top().map(addPx),right:e.right().map(addPx),bottom:e.bottom().map(addPx)})},en=Adt_generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),positionWithDirection=function(t,e,n,i,a,u){var c=e.x()-n,l=e.y()-i,f=a-(c+e.width()),d=u-(l+e.height()),m=s.some(c),g=s.some(l),h=s.some(f),p=s.some(d),v=s.none();return function(t,e,n,i,a,u,c,s,l){return t.fold(e,n,i,a,u,c,s,l)}(e.direction(),(function(){return tn(t,m,g,v,v)}),(function(){return tn(t,v,g,h,v)}),(function(){return tn(t,m,v,v,p)}),(function(){return tn(t,v,v,h,p)}),(function(){return tn(t,m,g,v,v)}),(function(){return tn(t,m,v,v,p)}),(function(){return tn(t,m,g,v,v)}),(function(){return tn(t,v,g,h,v)}))},toBox=function(t,e){var n=curry(find$3,e),i=t.fold(n,n,(function(){var t=Se();return find$3(e).translate(-t.left(),-t.top())})),a=getOuter$2(e),u=getOuter$1(e);return bounds$1(i.left(),i.top(),a,u)},viewport$1=function(t,e){return e.fold((function(){return t.fold(win,win,bounds$1)}),(function(e){return t.fold(e,e,(function(){var n=e(),i=translate(t,n.x(),n.y());return bounds$1(i.left(),i.top(),n.width(),n.height())}))}))},translate=function(t,e,n){var i=we(e,n);return t.fold(constant(i),constant(i),(function(){var t=Se();return i.translate(-t.left(),-t.top())}))},nn=(en.none,en.relative),rn=en.fixed,on=Immutable("anchorBox","origin"),box$1=function(t,e){return on(t,e)},cycleBy=function(t,e,n,i){var a=t+e;return a>i?n:a<n?i:a},clamp=function(t,e,n){return Math.min(Math.max(t,e),n)},an=MixedBag(["x","y","width","height","maxHeight","maxWidth","direction","classes","label","candidateYforTest"],[]),un=Adt_generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),attempt=function(t,e,n,i){var a=t.x(),u=t.y(),c=t.bubble().offset().left(),s=t.bubble().offset().top(),l=i.y(),f=i.bottom(),d=i.x(),m=i.right(),g=u+s,h=function(t,e,n,i,a){var u=a.x(),c=a.y(),s=a.width(),l=a.height(),f=t>=u,d=e>=c,m=f&&d,g=t+n<=u+s&&e+i<=c+l,h=Math.abs(Math.min(n,f?u+s-t:u-(t+n))),p=Math.abs(Math.min(i,d?c+l-e:c-(e+i)));return{originInBounds:m,sizeInBounds:g,limitX:clamp(t,a.x(),a.right()),limitY:clamp(e,a.y(),a.bottom()),deltaW:h,deltaH:p}}(a+c,g,e,n,i),p=h.originInBounds,v=h.sizeInBounds,b=h.limitX,y=h.limitY,x=h.deltaW,w=h.deltaH,C=constant(y+w-l),S=constant(f-y),k=function(t,e,n,i){return t.fold(e,e,i,i,e,i,n,n)}(t.direction(),S,S,C),E=constant(b+x-d),T=constant(m-b),O=function(t,e,n,i){return t.fold(e,i,e,i,n,n,e,i)}(t.direction(),T,T,E),_=an({x:b,y:y,width:x,height:w,maxHeight:k,maxWidth:O,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:g});return p&&v?un.fit(_):un.nofit(_,x,w)},layout=function(t,e,n,i){remove$6(e,"max-height"),remove$6(e,"max-width");var a,u={width:constant(getOuter$2(a=e)),height:constant(getOuter$1(a))};return function(t,e,n,i,a){var u=n.width(),c=n.height(),attemptBestFit=function(t,s,l,f){var d=t(e,n,i);return attempt(d,u,c,a).fold(un.fit,(function(t,e,n){return n>f||e>l?un.nofit(t,e,n):un.nofit(s,l,f)}))};return foldl(t,(function(t,e){var n=curry(attemptBestFit,e);return t.fold(un.fit,n)}),un.nofit(an({x:e.x(),y:e.y(),width:n.width(),height:n.height(),maxHeight:n.height(),maxWidth:n.width(),direction:Le(),classes:{on:[],off:[]},label:"none",candidateYforTest:e.y()}),-1,-1)).fold(identity,identity)}(i.preference(),t,u,n,i.bounds())},position=function(t,e,n){applyPositionCss(t,function(t,e){return t.fold((function(){return tn("absolute",s.some(e.x()),s.some(e.y()),s.none(),s.none())}),(function(t,n,i,a){return positionWithDirection("absolute",e,t,n,i,a)}),(function(t,n,i,a){return positionWithDirection("fixed",e,t,n,i,a)}))}(n.origin(),e))},setMaxHeight=function(t,e){!function(t,e){var n=xe.max(t,e,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);set$2(t,"max-height",n+"px")}(t,Math.floor(e))},cn=constant((function(t,e){setMaxHeight(t,e),setAll$1(t,{"overflow-x":"hidden","overflow-y":"auto"})})),sn=constant((function(t,e){setMaxHeight(t,e)})),ln=MixedBag(["bounds","origin","preference","maxHeightFunction","maxWidthFunction"],[]),defaultOr=function(t,e,n){return void 0===t[e]?n:t[e]},go=function(t,e,n,i){var a=layout(t,e,n,i);position(e,a,i),function(t,e){var n=e.classes();remove$5(t,n.off),add$3(t,n.on)}(e,a),function(t,e,n){n.maxHeightFunction()(t,e.maxHeight())}(e,a,i),function(t,e,n){n.maxWidthFunction()(t,e.maxWidth())}(e,a,i)},fn=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],nu$8=function(t,e,n){var getClasses=function(t){return get(n,t).getOr([])},make=function(t,e,n){var i=difference(fn,n);return{offset:function(){return we(t,e)},classesOn:function(){return bind(n,getClasses)},classesOff:function(){return bind(i,getClasses)}}};return{southeast:function(){return make(-t,e,["top","alignLeft"])},southwest:function(){return make(t,e,["top","alignRight"])},south:function(){return make(-t/2,e,["top","alignCentre"])},northeast:function(){return make(-t,-e,["bottom","alignLeft"])},northwest:function(){return make(t,-e,["bottom","alignRight"])},north:function(){return make(-t/2,-e,["bottom","alignCentre"])},east:function(){return make(t,-e/2,["valignCentre","left"])},west:function(){return make(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return make(-t,e,["top","alignRight"])},innerNortheast:function(){return make(t,e,["top","alignLeft"])},innerNorth:function(){return make(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return make(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return make(t,-e,["bottom","alignLeft"])},innerSouth:function(){return make(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return make(t,-e/2,["valignCentre","right"])},innerEast:function(){return make(-t,-e/2,["valignCentre","left"])}}},fallback=function(){return nu$8(0,0,{})},onDirection=function(t,e){return function(n){return"rtl"===getDirection(n)?e:t}},getDirection=function(t){return"rtl"===get$4(t,"direction")?"rtl":"ltr"};!function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"}(_e||(_e={}));var dn="data-alloy-vertical-dir",isBottomToTopDir=function(t){return closest$2(t,(function(t){return oe(t)&&get$2(t,dn)===_e.BottomToTop}))},schema$1=function(){return optionObjOf("layouts",[strict$1("onLtr"),strict$1("onRtl"),option("onBottomLtr"),option("onBottomRtl")])},get$a=function(t,e,n,i,a,u,c){var s=c.map(isBottomToTopDir).getOr(!1),l=e.layouts.map((function(e){return e.onLtr(t)})),f=e.layouts.map((function(e){return e.onRtl(t)})),d=s?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(l).getOr(a):l.getOr(n),m=s?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(f).getOr(u):f.getOr(i);return onDirection(d,m)(t)},mn=[strict$1("hotspot"),option("bubble"),defaulted$1("overrides",{}),schema$1(),output("placement",(function(t,e,n){var i=e.hotspot,a=toBox(n,i.element()),u=get$a(t.element(),e,belowOrAbove(),belowOrAboveRtl(),aboveOrBelow(),[northwest$1,northeast$1,southwest$1,southeast$1,north$1,south$1],s.some(e.hotspot.element()));return s.some({anchorBox:a,bubble:e.bubble.getOr(fallback()),overrides:e.overrides,layouts:u,placer:s.none()})}))],gn=[strict$1("x"),strict$1("y"),defaulted$1("height",0),defaulted$1("width",0),defaulted$1("bubble",fallback()),defaulted$1("overrides",{}),schema$1(),output("placement",(function(t,e,n){var i=translate(n,e.x,e.y),a=bounds$1(i.left(),i.top(),e.width,e.height),u=get$a(t.element(),e,all$2(),allRtl(),all$2(),allRtl(),s.none());return s.some({anchorBox:a,bubble:e.bubble,overrides:e.overrides,layouts:u,placer:s.none()})}))],hn={create:Immutable("start","soffset","finish","foffset")},pn=Adt_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vn=(pn.before,pn.on,pn.after,function(t){return t.fold(identity,identity,identity)}),bn=Adt_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yn={domRange:bn.domRange,relative:bn.relative,exact:bn.exact,exactFromRange:function(t){return bn.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var e=function(t){return t.match({domRange:function(t){return $.fromDom(t.startContainer)},relative:function(t,e){return vn(t)},exact:function(t,e,n,i){return t}})}(t);return defaultView(e)},range:hn.create},relativeToNative=function(t,e,n){var i,a=t.document.createRange();return i=a,e.fold((function(t){i.setStartBefore(t.dom())}),(function(t,e){i.setStart(t.dom(),e)}),(function(t){i.setStartAfter(t.dom())})),function(t,e){e.fold((function(e){t.setEndBefore(e.dom())}),(function(e,n){t.setEnd(e.dom(),n)}),(function(e){t.setEndAfter(e.dom())}))}(a,n),a},exactToNative=function(t,e,n,i,a){var u=t.document.createRange();return u.setStart(e.dom(),n),u.setEnd(i.dom(),a),u},toRect=function(t){return{left:constant(t.left),top:constant(t.top),right:constant(t.right),bottom:constant(t.bottom),width:constant(t.width),height:constant(t.height)}},xn=Adt_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fromRange=function(t,e,n){return e($.fromDom(n.startContainer),n.startOffset,$.fromDom(n.endContainer),n.endOffset)},diagnose=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return xn.rtl($.fromDom(t.endContainer),t.endOffset,$.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return fromRange(0,xn.ltr,n)})):fromRange(0,xn.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:constant(t),rtl:s.none}},relative:function(e,n){return{ltr:cached((function(){return relativeToNative(t,e,n)})),rtl:cached((function(){return s.some(relativeToNative(t,n,e))}))}},exact:function(e,n,i,a){return{ltr:cached((function(){return exactToNative(t,e,n,i,a)})),rtl:cached((function(){return s.some(exactToNative(t,i,a,e,n))}))}}})}(t,e))};xn.ltr,xn.rtl;var wn=function NodeValue(t,e){var getOption=function(e){return t(e)?s.from(e.dom().nodeValue):s.none()};return{get:function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return getOption(n).getOr("")},getOption:getOption,set:function(n,i){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=i}}}(ie,"text"),getOption=function(t){return wn.getOption(t)},Cn=["img","br"],isCursorPosition=function(t){return getOption(t).filter((function(t){return 0!==t.trim().length||t.indexOf(" ")>-1})).isSome()||contains(Cn,re(t))},descendantRtl=function(t,e){var descend=function(t){for(var n=children(t),i=n.length-1;i>=0;i--){var a=n[i];if(e(a))return s.some(a);var u=descend(a);if(u.isSome())return u}return s.none()};return descend(t)},descendants=function(t,e){return all(e,t)},after$2=function(t,e,n,i){var a=function(t,e,n,i){var a=owner(t).dom().createRange();return a.setStart(t.dom(),e),a.setEnd(n.dom(),i),a}(t,e,n,i),u=eq(t,n)&&e===i;return a.collapsed&&!u},doGetExact=function(t){var e=$.fromDom(t.anchorNode),n=$.fromDom(t.focusNode);return after$2(e,t.anchorOffset,n,t.focusOffset)?s.some(hn.create(e,t.anchorOffset,n,t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return s.some(hn.create($.fromDom(e.startContainer),e.startOffset,$.fromDom(n.endContainer),n.endOffset))}return s.none()}(t)},getFirstRect$1=function(t,e){return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?s.some(n).map(toRect):s.none()}(function(t,e){return diagnose(t,e).match({ltr:function(e,n,i,a){var u=t.document.createRange();return u.setStart(e.dom(),n),u.setEnd(i.dom(),a),u},rtl:function(e,n,i,a){var u=t.document.createRange();return u.setStart(i.dom(),a),u.setEnd(e.dom(),n),u}})}(t,e))},Sn=Immutable("element","offset"),descendOnce=function(t,e){var n=children(t);if(0===n.length)return Sn(t,e);if(e<n.length)return Sn(n[e],0);var i=n[n.length-1],a=ie(i)?function(t){return wn.get(t)}(i).length:children(i).length;return Sn(i,a)},kn=Adt_generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),toFixed=function(t){return t.fold(identity,(function(t,e,n){return t.translate(-e,-n)}))},toAbsolute=function(t){return t.fold(identity,identity)},sum=function(t){return foldl(t,(function(t,e){return t.translate(e.left(),e.top())}),we(0,0))},sumAsAbsolute=function(t){var e=map(t,toAbsolute);return sum(e)},En=kn.screen,Tn=kn.absolute,getRootPoint=function(t,e,n){var i=owner(t.element()),a=Se(i),u=function(t,e,n){var i=defaultView(n.root).dom();return s.from(i.frameElement).map($.fromDom).filter((function(e){var n=owner(e),i=owner(t.element());return eq(n,i)})).map(absolute)}(t,0,n).getOr(a);return Tn(u,a.left(),a.top())},ContentAnchorCommon_capRect=function(t,e,n,i){var a=t,u=e,c=n,l=i;t<0&&(a=0,c=n+t),e<0&&(u=0,l=i+e);var f=En(we(a,u));return s.some(Ee(f,c,l))},ContentAnchorCommon_calcNewAnchor=function(t,e,n,i,a){return t.map((function(t){var u,c,l,f=[e,t.point()],d=(u=function(){return sumAsAbsolute(f)},c=function(){return sumAsAbsolute(f)},l=function(){return function(t){var e=map(t,toFixed);return sum(e)}(f)},i.fold(u,c,l)),m=Te(d.left(),d.top(),t.width(),t.height()),g=n.showAbove?aboveOrBelow():belowOrAbove(),h=(n.showAbove,belowOrAboveRtl()),p=get$a(a,n,g,h,g,h,s.none());return{anchorBox:m,bubble:n.bubble.getOr(fallback()),overrides:n.overrides,layouts:p,placer:s.none()}}))},On=Immutable("element","offset"),descendOnce$1=function(t,e){return ie(t)?On(t,e):descendOnce(t,e)},getAnchorSelection=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return function(t){return s.from(t.getSelection()).filter((function(t){return t.rangeCount>0})).bind(doGetExact)}(t)}}))().map((function(t){var e=descendOnce$1(t.start(),t.soffset()),n=descendOnce$1(t.finish(),t.foffset());return yn.range(e.element(),e.offset(),n.element(),n.offset())}))},_n=[option("getSelection"),strict$1("root"),option("bubble"),schema$1(),defaulted$1("overrides",{}),defaulted$1("showAbove",!1),output("placement",(function(t,e,n){var i=defaultView(e.root).dom(),a=getRootPoint(t,0,e),u=getAnchorSelection(i,e).bind((function(t){return getFirstRect$1(i,yn.exactFromRange(t)).orThunk((function(){var e=$.fromText("\ufeff");return ne(t.start(),e),getFirstRect$1(i,yn.exact(e,0,e,1)).map((function(t){return remove(e),t}))})).bind((function(t){return ContentAnchorCommon_capRect(t.left(),t.top(),t.width(),t.height())}))})),c=getAnchorSelection(i,e).bind((function(t){return oe(t.start())?s.some(t.start()):parent(t.start())})).getOr(t.element());return ContentAnchorCommon_calcNewAnchor(u,a,e,n,c)}))],Nn=[strict$1("node"),strict$1("root"),option("bubble"),schema$1(),defaulted$1("overrides",{}),defaulted$1("showAbove",!1),output("placement",(function(t,e,n){var i=getRootPoint(t,0,e);return e.node.bind((function(a){var u=a.dom().getBoundingClientRect(),c=ContentAnchorCommon_capRect(u.left,u.top,u.width,u.height),s=e.node.getOr(t.element());return ContentAnchorCommon_calcNewAnchor(c,i,e,n,s)}))}))],eastX$1=function(t){return t.x()+t.width()},westX$1=function(t,e){return t.x()-e.width()},northY$1=function(t,e){return t.y()-e.height()+t.height()},southY$1=function(t){return t.y()},southeast$2=function(t,e,n){return Ie(eastX$1(t),southY$1(t),n.southeast(),Le(),"link-layout-se")},southwest$2=function(t,e,n){return Ie(westX$1(t,e),southY$1(t),n.southwest(),Fe(),"link-layout-sw")},northeast$2=function(t,e,n){return Ie(eastX$1(t),northY$1(t,e),n.northeast(),Ve(),"link-layout-ne")},northwest$2=function(t,e,n){return Ie(westX$1(t,e),northY$1(t,e),n.northwest(),Ue(),"link-layout-nw")},all$3=function(){return[southeast$2,southwest$2,northeast$2,northwest$2]},allRtl$1=function(){return[southwest$2,southeast$2,northwest$2,northeast$2]},An=[strict$1("item"),schema$1(),defaulted$1("overrides",{}),output("placement",(function(t,e,n){var i=toBox(n,e.item.element()),a=get$a(t.element(),e,all$3(),allRtl$1(),all$3(),allRtl$1(),s.none());return s.some({anchorBox:i,bubble:fallback(),overrides:e.overrides,layouts:a,placer:s.none()})}))],zn=choose$1("anchor",{selection:_n,node:Nn,hotspot:mn,submenu:An,makeshift:gn}),place=function(t,e,n,i,a){!function(t,e,n,i,a,u){var c=defaultOr(u,"maxHeightFunction",cn()),s=defaultOr(u,"maxWidthFunction",noop),l=t.anchorBox(),f=t.origin(),d=ln({bounds:viewport$1(f,a),origin:f,preference:i,maxHeightFunction:c,maxWidthFunction:s});go(l,e,n,d)}(box$1(n.anchorBox,e),a.element(),n.bubble,n.layouts,i,n.overrides)},positionWithin=function(t,e,n,i,a,u){var c=u.map(box);return positionWithinBounds(t,e,n,i,a,c)},positionWithinBounds=function(t,n,i,a,u,c){var s=asRawOrDie("positioning anchor.info",zn,a);preserve((function(){set$2(u.element(),"position","fixed");var i=getRaw(u.element(),"visibility");set$2(u.element(),"visibility","hidden");var a,l=n.useFixed()?(a=e.document.documentElement,rn(0,0,a.clientWidth,a.clientHeight)):function(t){var e=absolute(t.element()),n=t.element().dom().getBoundingClientRect();return nn(e.left(),e.top(),n.width,n.height)}(t),f=s.placement,d=c.map(constant).or(n.getBounds);f(t,s,l).each((function(e){e.placer.getOr(place)(t,l,e,d,u)})),i.fold((function(){remove$6(u.element(),"visibility")}),(function(t){set$2(u.element(),"visibility",t)})),getRaw(u.element(),"left").isNone()&&getRaw(u.element(),"top").isNone()&&getRaw(u.element(),"right").isNone()&&getRaw(u.element(),"bottom").isNone()&&getRaw(u.element(),"position").is("fixed")&&remove$6(u.element(),"position")}),u.element())},Dn=Object.freeze({__proto__:null,position:function(t,e,n,i,a){positionWithin(t,e,n,i,a,s.none())},positionWithin:positionWithin,positionWithinBounds:positionWithinBounds,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),Mn=[defaulted$1("useFixed",n),option("getBounds")],Bn=create$1({fields:Mn,name:"positioning",active:Qe,apis:Dn}),fireDetaching=function(t){emit(t,jt());var e=t.components();each(e,fireDetaching)},fireAttaching=function(t){var e=t.components();each(e,fireAttaching),emit(t,Ut())},attach=function(t,e){append(t.element(),e.element())},replaceChildren=function(t,e){var n=t.components();!function(t){each(t.components(),(function(t){return remove(t.element())})),empty(t.element()),t.syncComponents()}(t);var i=difference(n,e);each(i,(function(e){fireDetaching(e),t.getSystem().removeFromWorld(e)})),each(e,(function(e){e.getSystem().isConnected()?attach(t,e):(t.getSystem().addToWorld(e),attach(t,e),inBody(t.element())&&fireAttaching(e)),t.syncComponents()}))},attach$1=function(t,e){attachWith(t,e,append)},attachWith=function(t,e,n){t.getSystem().addToWorld(e),n(t.element(),e.element()),inBody(t.element())&&fireAttaching(e),t.syncComponents()},doDetach=function(t){fireDetaching(t),remove(t.element()),t.getSystem().removeFromWorld(t)},detach=function(t){var e=parent(t.element()).bind((function(e){return t.getSystem().getByDom(e).toOption()}));doDetach(t),e.each((function(t){t.syncComponents()}))},detachChildren$1=function(t){var e=t.components();each(e,doDetach),empty(t.element()),t.syncComponents()},attachSystem=function(t,e){attachSystemWith(t,e,append)},attachSystemWith=function(t,e,n){n(t,e.element());var i=children(e.element());each(i,(function(t){e.getByDom(t).each(fireAttaching)}))},detachSystem=function(t){var e=children(t.element());each(e,(function(e){t.getByDom(e).each(fireDetaching)})),remove(t.element())},rebuild=function(t,e,n,i){n.get().each((function(e){detachChildren$1(t)}));var a=e.getAttachPoint(t);attach$1(a,t);var u=t.getSystem().build(i);return attach$1(t,u),n.set(u),u},open=function(t,e,n,i){var a=rebuild(t,e,n,i);return e.onOpen(t,a),a},close=function(t,e,n){n.get().each((function(i){detachChildren$1(t),detach(t),e.onClose(t,i),n.clear()}))},isOpen=function(t,e,n){return n.isOpen()},cloak=function(t,e,n){var i=e.getAttachPoint(t);set$2(t.element(),"position",Bn.getMode(i)),function(t,e,n,i){getRaw(t.element(),e).fold((function(){remove$1(t.element(),n)}),(function(e){set$1(t.element(),n,e)})),set$2(t.element(),e,i)}(t,"visibility",e.cloakVisibilityAttr,"hidden")},decloak=function(t,e,n){(function(t){return exists(["top","left","right","bottom"],(function(e){return getRaw(t,e).isSome()}))})(t.element())||remove$6(t.element(),"position"),function(t,e,n){if(has$1(t.element(),n)){var i=get$2(t.element(),n);set$2(t.element(),e,i)}else remove$6(t.element(),e)}(t,"visibility",e.cloakVisibilityAttr)},Rn=Object.freeze({__proto__:null,cloak:cloak,decloak:decloak,open:open,openWhileCloaked:function(t,e,n,i,a){cloak(t,e),open(t,e,n,i),a(),decloak(t,e)},close:close,isOpen:isOpen,isPartOf:function(t,e,n,i){return isOpen(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,i)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,i){return n.get().map((function(){return rebuild(t,e,n,i)}))}}),Pn=Object.freeze({__proto__:null,events:function(t,e){return derive([run(Rt(),(function(n,i){close(n,t,e)}))])}}),In=[onHandler("onOpen"),onHandler("onClose"),strict$1("isPartOf"),strict$1("getAttachPoint"),defaulted$1("cloakVisibilityAttr","data-precloak-visibility")],Hn=create$1({fields:In,name:"sandboxing",active:Pn,apis:Rn,state:Object.freeze({__proto__:null,init:function(){var t=Cell(s.none()),e=constant("not-implemented");return nu$5({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(s.none())},set:function(e){t.set(s.some(e))},get:function(){return t.get()}})}})}),Ln=constant("dismiss.popups"),Fn=constant("reposition.popups"),Vn=constant("mouse.released"),Un=objOfOnly([defaulted$1("isExtraPart",constant(!1)),optionObjOf("fireEventInstead",[defaulted$1("event",Wt())])]),receivingChannel=function(t){var e,n=asRawOrDie("Dismissal",Un,t);return(e={})[Ln()]={schema:objOfOnly([strict$1("target")]),onReceive:function(t,e){Hn.isOpen(t)&&(Hn.isPartOf(t,e.target)||n.isExtraPart(t,e.target)||n.fireEventInstead.fold((function(){return Hn.close(t)}),(function(e){return emit(t,e.event)})))}},e},jn=objOfOnly([defaulted$1("isExtraPart",constant(!1)),optionObjOf("fireEventInstead",[defaulted$1("event",qt())]),strictFunction("doReposition")]),receivingChannel$1=function(t){var e,n=asRawOrDie("Reposition",jn,t);return(e={})[Fn()]={onReceive:function(t){Hn.isOpen(t)&&n.fireEventInstead.fold((function(){return n.doReposition(t)}),(function(e){return emit(t,e.event)}))}},e},onLoad=function(t,e,n){e.store.manager.onLoad(t,e,n)},onUnload=function(t,e,n){e.store.manager.onUnload(t,e,n)},Wn=Object.freeze({__proto__:null,onLoad:onLoad,onUnload:onUnload,setValue:function(t,e,n,i){e.store.manager.setValue(t,e,n,i)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),qn=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[Zt((function(n,i){onLoad(n,t,e)})),Qt((function(n,i){onUnload(n,t,e)}))]:[loadEvent(t,e,onLoad)];return derive(n)}}),memory=function(){var t=Cell(null);return nu$5({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},dataset=function(){var t=Cell({}),e=Cell({});return nu$5({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return get(t.get(),n).orThunk((function(){return get(e.get(),n)}))},update:function(n){var i=t.get(),a=e.get(),u={},c={};each(n,(function(t){u[t.value]=t,get(t,"meta").each((function(e){get(e,"text").each((function(e){c[e]=t}))}))})),t.set(__assign(__assign({},i),u)),e.set(__assign(__assign({},a),c))},clear:function(){t.set({}),e.set({})}})},$n=Object.freeze({__proto__:null,memory:memory,dataset:dataset,manual:function(){return nu$5({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),setValue$1=function(t,e,n,i){var a=e.store;n.update([i]),a.setValue(t,i),e.onSetValue(t,i)},Gn=[option("initialValue"),strict$1("getFallbackEntry"),strict$1("getDataKey"),strict$1("setValue"),output("manager",{setValue:setValue$1,getValue:function(t,e,n){var i=e.store,a=i.getDataKey(t);return n.lookup(a).fold((function(){return i.getFallbackEntry(a)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(i){setValue$1(t,e,n,i)}))},onUnload:function(t,e,n){n.clear()},state:dataset})],Xn=[strict$1("getValue"),defaulted$1("setValue",noop),option("initialValue"),output("manager",{setValue:function(t,e,n,i){e.store.setValue(t,i),e.onSetValue(t,i)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:noop,state:pe.init})],Kn=[option("initialValue"),output("manager",{setValue:function(t,e,n,i){n.set(i),e.onSetValue(t,i)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:memory})],Yn=[defaultedOf("store",{mode:"memory"},choose$1("mode",{memory:Kn,manual:Xn,dataset:Gn})),onHandler("onSetValue"),defaulted$1("resetOnDom",!1)],Jn=create$1({fields:Yn,name:"representing",active:qn,apis:Wn,extra:{setValueFrom:function(t,e){var n=Jn.getValue(e);Jn.setValue(t,n)}},state:$n}),field$1=function(t,e){return defaultedObjOf(t,{},map(e,(function(e){return n=e.name(),i="Cannot configure "+e.name()+" for "+t,H(n,n,A(),value$1((function(t){return O("The field: "+n+" is forbidden. "+i)})));var n,i})).concat([state$1("dump",identity)]))},get$c=function(t){return t.dump},augment=function(t,e){return __assign(__assign({},t.dump),derive$1(e))},Zn=field$1,Qn=augment,tr=Adt_generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),isSubstituted=function(t){return has(t,"uiType")},scan=function(t,e,n,i){return isSubstituted(n)&&"placeholder"===n.uiType?function(t,e,n,i){return t.exists((function(t){return t!==n.owner}))?tr.single(!0,constant(n)):get(i,n.name).fold((function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+w(i)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(function(t){return t.replace()}))}(t,0,n,i):tr.single(!1,constant(n))},substitute=function(t,e,n,i){return scan(t,0,n,i).fold((function(a,u){var c=isSubstituted(n)?u(e,n.config,n.validated):u(e),s=get(c,"components").getOr([]),l=bind(s,(function(n){return substitute(t,e,n,i)}));return[__assign(__assign({},c),{components:l})]}),(function(t,i){if(isSubstituted(n)){var a=i(e,n.config,n.validated);return n.validated.preprocess.getOr(identity)(a)}return i(e)}))},substitutePlaces=function(t,e,n,i){var a=map$1(i,(function(t,e){return i=t,a=!1,{name:constant(n=e),required:function(){return i.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return a},replace:function(){if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,i}};var n,i,a})),u=function(t,e,n,i){return bind(n,(function(n){return substitute(t,e,n,i)}))}(t,e,n,a);return each$1(a,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),u},er=tr.single,nr=tr.multiple,rr=constant("placeholder"),or=Adt_generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ir=defaulted$1("factory",{sketch:identity}),ar=defaulted$1("schema",[]),ur=strict$1("name"),cr=H("pname","pname",z((function(t){return"<alloy."+generate$1(t.name)+">"})),F()),sr=state$1("schema",(function(){return[option("preprocess")]})),lr=defaulted$1("defaults",constant({})),fr=defaulted$1("overrides",constant({})),dr=objOf([ir,ar,ur,cr,lr,fr]),mr=objOf([ir,ar,ur,lr,fr]),gr=objOf([ir,ar,ur,cr,lr,fr]),hr=objOf([ir,sr,ur,strict$1("unit"),cr,lr,fr]),asNamedPart=function(t){return t.fold(s.some,s.none,s.some,s.some)},name$1=function(t){var get=function(t){return t.name};return t.fold(get,get,get,get)},convert=function(t,e){return function(n){var i=asRawOrDie("Converting part type",e,n);return t(i)}},pr=convert(or.required,dr),vr=convert(or.external,mr),br=convert(or.optional,gr),yr=convert(or.group,hr),xr=constant("entirety"),wr=Object.freeze({__proto__:null,required:pr,external:vr,optional:br,group:yr,asNamedPart:asNamedPart,name:name$1,asCommon:function(t){return t.fold(identity,identity,identity,identity)},original:xr}),combine$2=function(t,e,n,i){return k(e.defaults(t,n,i),n,{uid:t.partUids[e.name]},e.overrides(t,n,i))},generate$4=function(t,e){var n={};return each(e,(function(e){asNamedPart(e).each((function(e){var i=doGenerateOne(t,e.pname);n[e.name]=function(n){var a=asRawOrDie("Part: "+e.name+" in "+t,objOf(e.schema),n);return __assign(__assign({},i),{config:n,validated:a})}}))})),n},doGenerateOne=function(t,e){return{uiType:rr(),owner:t,name:e}},generateOne=function(t,e,n){return{uiType:rr(),owner:t,name:e,config:n,validated:{}}},schemas=function(t){return bind(t,(function(t){return t.fold(s.none,s.some,s.none,s.none).map((function(t){return strictObjOf(t.name,t.schema.concat([snapshot(xr())]))})).toArray()}))},names=function(t){return map(t,name$1)},substitutes=function(t,e,n){return function(t,e,n){var i={},a={};return each(n,(function(t){t.fold((function(t){i[t.pname]=er(!0,(function(e,n,i){return t.factory.sketch(combine$2(e,t,n,i))}))}),(function(t){var n=e.parts[t.name];a[t.name]=constant(t.factory.sketch(combine$2(e,t,n[xr()]),n))}),(function(t){i[t.pname]=er(!1,(function(e,n,i){return t.factory.sketch(combine$2(e,t,n,i))}))}),(function(t){i[t.pname]=nr(!0,(function(e,n,i){var a=e[t.name];return map(a,(function(n){return t.factory.sketch(k(t.defaults(e,n,i),n,t.overrides(e,n)))}))}))}))})),{internals:constant(i),externals:constant(a)}}(0,e,n)},components=function(t,e,n){return substitutePlaces(s.some(t),e,e.components,n)},getPart=function(t,e,n){var i=e.partUids[n];return t.getSystem().getByUid(i).toOption()},getPartOrDie=function(t,e,n){return getPart(t,e,n).getOrDie("Could not find part: "+n)},getParts=function(t,e,n){var i={},a=e.partUids,u=t.getSystem();return each(n,(function(t){i[t]=constant(u.getByUid(a[t]))})),i},getAllParts=function(t,e){var n=t.getSystem();return map$1(e.partUids,(function(t,e){return constant(n.getByUid(t))}))},getAllPartNames=function(t){return w(t.partUids)},getPartsOrDie=function(t,e,n){var i={},a=e.partUids,u=t.getSystem();return each(n,(function(t){i[t]=constant(u.getByUid(a[t]).getOrDie())})),i},defaultUids=function(t,e){var n=names(e);return wrapAll$1(map(n,(function(e){return{key:e,value:t+"-"+e}})))},defaultUidsSchema=function(t){return H("partUids","partUids",D((function(e){return defaultUids(e.uid,t)})),F())},Cr=Object.freeze({__proto__:null,generate:generate$4,generateOne:generateOne,schemas:schemas,names:names,substitutes:substitutes,components:components,defaultUids:defaultUids,defaultUidsSchema:defaultUidsSchema,getAllParts:getAllParts,getAllPartNames:getAllPartNames,getPart:getPart,getPartOrDie:getPartOrDie,getParts:getParts,getPartsOrDie:getPartsOrDie}),asRawOrDie$1=function(t,e,n,i,a){var u=function(t,e){return(t.length>0?[strictObjOf("parts",t)]:[]).concat([strict$1("uid"),defaulted$1("dom",{}),defaulted$1("components",[]),snapshot("originalSpec"),defaulted$1("debug.sketcher",{})]).concat(e)}(i,a);return asRawOrDie(t+" [SpecSchema]",objOfOnly(u.concat(e)),n)},composite=function(t,e,n,i,a){var u=supplyUid(a),c=schemas(n),s=defaultUidsSchema(n),l=asRawOrDie$1(t,e,u,c,[s]),f=substitutes(0,l,n);return i(l,components(t,l,f.internals()),u,f.externals())},supplyUid=function(t){return function(t){return has(t,"uid")}(t)?t:__assign(__assign({},t),{uid:generate$2("uid")})};var Sr,kr=objOfOnly([strict$1("name"),strict$1("factory"),strict$1("configFields"),defaulted$1("apis",{}),defaulted$1("extraApis",{})]),Er=objOfOnly([strict$1("name"),strict$1("factory"),strict$1("configFields"),strict$1("partFields"),defaulted$1("apis",{}),defaulted$1("extraApis",{})]),single$2=function(t){var e=asRawOrDie("Sketcher for "+t.name,kr,t),n=map$1(e.apis,makeApi),i=map$1(e.extraApis,(function(t,e){return markAsExtraApi(t,e)}));return __assign(__assign({name:constant(e.name),configFields:constant(e.configFields),sketch:function(t){return function(t,e,n,i){var a=supplyUid(i);return n(asRawOrDie$1(t,e,a,[],[]),a)}(e.name,e.configFields,e.factory,t)}},n),i)},composite$1=function(t){var e=asRawOrDie("Sketcher for "+t.name,Er,t),n=generate$4(e.name,e.partFields),i=map$1(e.apis,makeApi),a=map$1(e.extraApis,(function(t,e){return markAsExtraApi(t,e)}));return __assign(__assign({name:constant(e.name),partFields:constant(e.partFields),configFields:constant(e.configFields),sketch:function(t){return composite(e.name,e.configFields,e.partFields,e.factory,t)},parts:constant(n)},i),a)},cat=function(t){for(var e=[],push=function(t){e.push(t)},n=0;n<t.length;n++)t[n].each(push);return e},inside=function(t){return"input"===re(t)&&"radio"!==get$2(t,"type")||"textarea"===re(t)},Tr=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),Or=[strict$1("find")],_r=create$1({fields:Or,name:"composing",apis:Tr}),dehighlightAllExcept=function(t,e,n,i){var a=descendants(t.element(),"."+e.highlightClass);each(a,(function(n){exists(i,(function(t){return t.element()===n}))||(remove$4(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),emit(n,Jt())})))}))},highlight$1=function(t,e,n,i){dehighlightAllExcept(t,e,0,[i]),isHighlighted(t,e,n,i)||(add$2(i.element(),e.highlightClass),e.onHighlight(t,i),emit(i,Yt()))},isHighlighted=function(t,e,n,i){return has$2(i.element(),e.highlightClass)},getByIndex=function(t,e,n,i){var a=descendants(t.element(),"."+e.itemClass);return s.from(a[i]).fold((function(){return l.error("No element found with index "+i)}),t.getSystem().getByDom)},getFirst=function(t,e,n){return descendant$1(t.element(),"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOption()}))},getLast=function(t,e,n){var i=descendants(t.element(),"."+e.itemClass);return(i.length>0?s.some(i[i.length-1]):s.none()).bind((function(e){return t.getSystem().getByDom(e).toOption()}))},getDelta=function(t,e,n,i){var a=descendants(t.element(),"."+e.itemClass);return findIndex(a,(function(t){return has$2(t,e.highlightClass)})).bind((function(e){var n=cycleBy(e,i,0,a.length-1);return t.getSystem().getByDom(a[n]).toOption()}))},getCandidates=function(t,e,n){var i=descendants(t.element(),"."+e.itemClass);return cat(map(i,(function(e){return t.getSystem().getByDom(e).toOption()})))},Nr=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return dehighlightAllExcept(t,e,0,[])},dehighlight:function(t,e,n,i){isHighlighted(t,e,n,i)&&(remove$4(i.element(),e.highlightClass),e.onDehighlight(t,i),emit(i,Jt()))},highlight:highlight$1,highlightFirst:function(t,e,n){getFirst(t,e).each((function(i){highlight$1(t,e,n,i)}))},highlightLast:function(t,e,n){getLast(t,e).each((function(i){highlight$1(t,e,n,i)}))},highlightAt:function(t,e,n,i){getByIndex(t,e,n,i).fold((function(t){throw new Error(t)}),(function(i){highlight$1(t,e,n,i)}))},highlightBy:function(t,e,n,i){var a=getCandidates(t,e);find(a,i).each((function(i){highlight$1(t,e,n,i)}))},isHighlighted:isHighlighted,getHighlighted:function(t,e,n){return descendant$1(t.element(),"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOption()}))},getFirst:getFirst,getLast:getLast,getPrevious:function(t,e,n){return getDelta(t,e,0,-1)},getNext:function(t,e,n){return getDelta(t,e,0,1)},getCandidates:getCandidates}),Ar=[strict$1("highlightClass"),strict$1("itemClass"),onHandler("onHighlight"),onHandler("onDehighlight")],zr=create$1({fields:Ar,name:"highlighting",apis:Nr}),cyclePrev=function(t,e,n){var i=reverse(t.slice(0,e)),a=reverse(t.slice(e+1));return find(i.concat(a),n)},tryPrev=function(t,e,n){var i=reverse(t.slice(0,e));return find(i,n)},cycleNext=function(t,e,n){var i=t.slice(0,e),a=t.slice(e+1);return find(a.concat(i),n)},tryNext=function(t,e,n){var i=t.slice(e+1);return find(i,n)},inSet=function(t){return function(e){var n=e.raw();return contains(t,n.which)}},and=function(t){return function(e){return forall(t,(function(t){return t(e)}))}},isShift=function(t){return!0===t.raw().shiftKey},isControl=function(t){return!0===t.raw().ctrlKey},Dr=not(isShift),rule=function(t,e){return{matches:t,classification:e}},reportFocusShifting=function(t,e,n){e.exists((function(t){return n.exists((function(e){return eq(e,t)}))}))||emitWith(t,$t(),{prevFocus:e,newFocus:n})},dom=function(){var get=function(t){return search(t.element())};return{get:get,set:function(t,e){var n=get(t);t.getSystem().triggerFocus(e,t.element());var i=get(t);reportFocusShifting(t,n,i)}}},highlights=function(){var get=function(t){return zr.getHighlighted(t).map((function(t){return t.element()}))};return{get:get,set:function(t,e){var n=get(t);t.getSystem().getByDom(e).fold(noop,(function(e){zr.highlight(t,e)}));var i=get(t);reportFocusShifting(t,n,i)}}};!function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"}(Sr||(Sr={}));var Mr,Br,typical=function(t,e,n,i,a){var processKey=function(t,e,n,i,a){var u,c,s=n(t,e,i,a);return(u=s,c=e.event(),find(u,(function(t){return t.matches(c)})).map((function(t){return t.classification}))).bind((function(n){return n(t,e,i,a)}))},u={schema:function(){return t.concat([defaulted$1("focusManager",dom()),defaultedOf("focusInside","onFocus",valueOf((function(t){return contains(["onFocus","onEnterOrSpace","onApi"],t)?l.value(t):l.error("Invalid value for focusInside")}))),output("handler",u),output("state",e),output("sendFocusIn",a)])},processKey:processKey,toEvents:function(t,e){var u=t.focusInside!==Sr.OnFocusMode?s.none():a(t).map((function(n){return run(Ot(),(function(i,a){n(i,t,e),a.stop()}))}));return derive(u.toArray().concat([run(yt(),(function(i,u){processKey(i,u,n,t,e).fold((function(){!function(n,i){var u=inSet([32].concat([13]))(i.event());t.focusInside===Sr.OnEnterOrSpaceMode&&u&&isSource(n,i)&&a(t).each((function(a){a(n,t,e),i.stop()}))}(i,u)}),(function(t){u.stop()}))})),run(xt(),(function(n,a){processKey(n,a,i,t,e).each((function(t){a.stop()}))}))]))}};return u},create$3=function(t){var e=[option("onEscape"),option("onEnter"),defaulted$1("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),defaulted$1("firstTabstop",0),defaulted$1("useTabstopAt",constant(!0)),option("visibilitySelector")].concat([t]),isVisible=function(t,e){var n=t.visibilitySelector.bind((function(t){return closest$3(e,t)})).getOr(e);return get$6(n)>0},focusIn=function(t,e,n){(function(t,e){var n=descendants(t.element(),e.selector),i=filter(n,(function(t){return isVisible(e,t)}));return s.from(i[e.firstTabstop])})(t,e).each((function(n){e.focusManager.set(t,n)}))},goFromTabstop=function(t,e,n,i,a){return a(e,n,(function(t){return function(t,e){return isVisible(t,e)&&t.useTabstopAt(e)}(i,t)})).fold((function(){return i.cyclic?s.some(!0):s.none()}),(function(e){return i.focusManager.set(t,e),s.some(!0)}))},go=function(t,e,n,i){var a=descendants(t.element(),n.selector);return function(t,e){return e.focusManager.get(t).bind((function(t){return closest$3(t,e.selector)}))}(t,n).bind((function(e){return findIndex(a,curry(eq,e)).bind((function(e){return goFromTabstop(t,a,e,n,i)}))}))},n=constant([rule(and([isShift,inSet([9])]),(function(t,e,n){var i=n.cyclic?cyclePrev:tryPrev;return go(t,0,n,i)})),rule(inSet([9]),(function(t,e,n){var i=n.cyclic?cycleNext:tryNext;return go(t,0,n,i)})),rule(inSet([27]),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),rule(and([Dr,inSet([13])]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),i=constant([]);return typical(e,pe.init,n,i,(function(){return s.some(focusIn)}))},Rr=create$3(state$1("cyclic",constant(!1))),Pr=create$3(state$1("cyclic",constant(!0))),defaultExecute=function(t,e,n){return inside(n)&&inSet([32])(e.event())?s.none():function(t,e,n){return dispatch(t,n,zt()),s.some(!0)}(t,0,n)},stopEventForFirefox=function(t,e){return s.some(!0)},Ir=[defaulted$1("execute",defaultExecute),defaulted$1("useSpace",!1),defaulted$1("useEnter",!0),defaulted$1("useControlEnter",!1),defaulted$1("useDown",!1)],execute$1=function(t,e,n){return n.execute(t,e,t.element())},Hr=typical(Ir,pe.init,(function(t,e,n,i){var a=n.useSpace&&!inside(t.element())?[32]:[],u=n.useEnter?[13]:[],c=n.useDown?[40]:[],s=a.concat(u).concat(c);return[rule(inSet(s),execute$1)].concat(n.useControlEnter?[rule(and([isControl,inSet([13])]),execute$1)]:[])}),(function(t,e,n,i){return n.useSpace&&!inside(t.element())?[rule(inSet([32]),stopEventForFirefox)]:[]}),(function(){return s.none()})),flatgrid=function(){var t=Cell(s.none());return nu$5({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows()),numColumns:String(t.numColumns())}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(s.some({numRows:constant(e),numColumns:constant(n)}))},getNumRows:function(){return t.get().map((function(t){return t.numRows()}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns()}))}})},Lr=Object.freeze({__proto__:null,flatgrid:flatgrid,init:function(t){return t.state(t)}}),useH=function(t){return function(e,n,i,a){var u=t(e.element());return use(u,e,n,i,a)}},west$2=function(t,e){var n=onDirection(t,e);return useH(n)},east$2=function(t,e){var n=onDirection(e,t);return useH(n)},useV=function(t){return function(e,n,i,a){return use(t,e,n,i,a)}},use=function(t,e,n,i,a){return i.focusManager.get(e).bind((function(n){return t(e.element(),n,i,a)})).map((function(t){return i.focusManager.set(e,t),!0}))},Fr=useV,Vr=useV,Ur=useV,isVisible=function(t){return!function(t){return t.offsetWidth<=0&&t.offsetHeight<=0}(t.dom())},locateVisible=function(t,e,n){var i=descendants(t,n);return function(t,e){return findIndex(t,e).map((function(e){return{index:constant(e),candidates:constant(t)}}))}(filter(i,isVisible),(function(t){return eq(t,e)}))},findIndex$1=function(t,e){return findIndex(t,(function(t){return eq(e,t)}))},withGrid=function(t,e,n,i){return i(Math.floor(e/n),e%n).bind((function(e){var i=e.row()*n+e.column();return i>=0&&i<t.length?s.some(t[i]):s.none()}))},cycleHorizontal=function(t,e,n,i,a){return withGrid(t,e,i,(function(e,u){var c=e===n-1?t.length-e*i:i,l=cycleBy(u,a,0,c-1);return s.some({row:constant(e),column:constant(l)})}))},cycleVertical=function(t,e,n,i,a){return withGrid(t,e,i,(function(e,u){var c=cycleBy(e,a,0,n-1),l=c===n-1?t.length-c*i:i,f=clamp(u,0,l-1);return s.some({row:constant(c),column:constant(f)})}))},jr=[strict$1("selector"),defaulted$1("execute",defaultExecute),onKeyboardHandler("onEscape"),defaulted$1("captureTab",!1),Pe()],focusIn=function(t,e,n){descendant$1(t.element(),e.selector).each((function(n){e.focusManager.set(t,n)}))},doMove=function(t){return function(e,n,i,a){return locateVisible(e,n,i.selector).bind((function(e){return t(e.candidates(),e.index(),a.getNumRows().getOr(i.initSize.numRows),a.getNumColumns().getOr(i.initSize.numColumns))}))}},handleTab=function(t,e,n){return n.captureTab?s.some(!0):s.none()},Wr=doMove((function(t,e,n,i){return cycleHorizontal(t,e,n,i,-1)})),qr=doMove((function(t,e,n,i){return cycleHorizontal(t,e,n,i,1)})),$r=doMove((function(t,e,n,i){return cycleVertical(t,e,n,i,-1)})),Gr=doMove((function(t,e,n,i){return cycleVertical(t,e,n,i,1)})),Xr=constant([rule(inSet([37]),west$2(Wr,qr)),rule(inSet([39]),east$2(Wr,qr)),rule(inSet([38]),Fr($r)),rule(inSet([40]),Vr(Gr)),rule(and([isShift,inSet([9])]),handleTab),rule(and([Dr,inSet([9])]),handleTab),rule(inSet([27]),(function(t,e,n){return n.onEscape(t,e)})),rule(inSet([32].concat([13])),(function(t,e,n,i){return function(t,e){return e.focusManager.get(t).bind((function(t){return closest$3(t,e.selector)}))}(t,n).bind((function(i){return n.execute(t,e,i)}))}))]),Kr=constant([rule(inSet([32]),stopEventForFirefox)]),Yr=typical(jr,flatgrid,Xr,Kr,(function(){return s.some(focusIn)})),horizontal=function(t,e,n,i){var tryCycle=function(t,e,n){var a,u=cycleBy(e,i,0,n.length-1);return u===t?s.none():(a=n[u],"button"===re(a)&&"disabled"===get$2(a,"disabled")?tryCycle(t,u,n):s.from(n[u]))};return locateVisible(t,n,e).bind((function(t){var e=t.index(),n=t.candidates();return tryCycle(e,e,n)}))},Jr=[strict$1("selector"),defaulted$1("getInitial",s.none),defaulted$1("execute",defaultExecute),onKeyboardHandler("onEscape"),defaulted$1("executeOnMove",!1),defaulted$1("allowVertical",!0)],execute$3=function(t,e,n){return function(t,e){return e.focusManager.get(t).bind((function(t){return closest$3(t,e.selector)}))}(t,n).bind((function(i){return n.execute(t,e,i)}))},focusIn$1=function(t,e,n){e.getInitial(t).orThunk((function(){return descendant$1(t.element(),e.selector)})).each((function(n){e.focusManager.set(t,n)}))},moveLeft$1=function(t,e,n){return horizontal(t,n.selector,e,-1)},moveRight$1=function(t,e,n){return horizontal(t,n.selector,e,1)},doMove$1=function(t){return function(e,n,i,a){return t(e,n,i,a).bind((function(){return i.executeOnMove?execute$3(e,n,i):s.some(!0)}))}},doEscape$1=function(t,e,n){return n.onEscape(t,e)},Zr=constant([rule(inSet([32]),stopEventForFirefox)]),Qr=typical(Jr,pe.init,(function(t,e,n,i){var a=[37].concat(n.allowVertical?[38]:[]),u=[39].concat(n.allowVertical?[40]:[]);return[rule(inSet(a),doMove$1(west$2(moveLeft$1,moveRight$1))),rule(inSet(u),doMove$1(east$2(moveLeft$1,moveRight$1))),rule(inSet([13]),execute$3),rule(inSet([32]),execute$3),rule(inSet([27]),doEscape$1)]}),Zr,(function(){return s.some(focusIn$1)})),eo=MixedBag(["rowIndex","columnIndex","cell"],[]),toCell=function(t,e,n){return s.from(t[e]).bind((function(t){return s.from(t[n]).map((function(t){return eo({rowIndex:e,columnIndex:n,cell:t})}))}))},cycleHorizontal$1=function(t,e,n,i){var a=t[e].length,u=cycleBy(n,i,0,a-1);return toCell(t,e,u)},cycleVertical$1=function(t,e,n,i){var a=cycleBy(n,i,0,t.length-1),u=t[a].length,c=clamp(e,0,u-1);return toCell(t,a,c)},moveHorizontal=function(t,e,n,i){var a=t[e].length,u=clamp(n+i,0,a-1);return toCell(t,e,u)},moveVertical=function(t,e,n,i){var a=clamp(n+i,0,t.length-1),u=t[a].length,c=clamp(e,0,u-1);return toCell(t,a,c)},no=[strictObjOf("selectors",[strict$1("row"),strict$1("cell")]),defaulted$1("cycles",!0),defaulted$1("previousSelector",s.none),defaulted$1("execute",defaultExecute)],focusIn$2=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return descendant$1(t.element(),n.cell)})).each((function(n){e.focusManager.set(t,n)}))},doMove$2=function(t,e){return function(n,i,a){var u=a.cycles?t:e;return closest$3(i,a.selectors.row).bind((function(t){var e=descendants(t,a.selectors.cell);return findIndex$1(e,i).bind((function(e){var i=descendants(n,a.selectors.row);return findIndex$1(i,t).bind((function(t){var n=function(t,e){return map(t,(function(t){return descendants(t,e.selectors.cell)}))}(i,a);return u(n,t,e).map((function(t){return t.cell()}))}))}))}))}},ro=doMove$2((function(t,e,n){return cycleHorizontal$1(t,e,n,-1)}),(function(t,e,n){return moveHorizontal(t,e,n,-1)})),oo=doMove$2((function(t,e,n){return cycleHorizontal$1(t,e,n,1)}),(function(t,e,n){return moveHorizontal(t,e,n,1)})),io=doMove$2((function(t,e,n){return cycleVertical$1(t,n,e,-1)}),(function(t,e,n){return moveVertical(t,n,e,-1)})),ao=doMove$2((function(t,e,n){return cycleVertical$1(t,n,e,1)}),(function(t,e,n){return moveVertical(t,n,e,1)})),uo=constant([rule(inSet([37]),west$2(ro,oo)),rule(inSet([39]),east$2(ro,oo)),rule(inSet([38]),Fr(io)),rule(inSet([40]),Vr(ao)),rule(inSet([32].concat([13])),(function(t,e,n){return search(t.element()).bind((function(i){return n.execute(t,e,i)}))}))]),co=constant([rule(inSet([32]),stopEventForFirefox)]),so=typical(no,pe.init,uo,co,(function(){return s.some(focusIn$2)})),lo=[strict$1("selector"),defaulted$1("execute",defaultExecute),defaulted$1("moveOnTab",!1)],execute$5=function(t,e,n){return n.focusManager.get(t).bind((function(i){return n.execute(t,e,i)}))},focusIn$3=function(t,e,n){descendant$1(t.element(),e.selector).each((function(n){e.focusManager.set(t,n)}))},moveUp$1=function(t,e,n){return horizontal(t,n.selector,e,-1)},moveDown$1=function(t,e,n){return horizontal(t,n.selector,e,1)},fo=constant([rule(inSet([38]),Ur(moveUp$1)),rule(inSet([40]),Ur(moveDown$1)),rule(and([isShift,inSet([9])]),(function(t,e,n,i){return n.moveOnTab?Ur(moveUp$1)(t,e,n,i):s.none()})),rule(and([Dr,inSet([9])]),(function(t,e,n,i){return n.moveOnTab?Ur(moveDown$1)(t,e,n,i):s.none()})),rule(inSet([13]),execute$5),rule(inSet([32]),execute$5)]),mo=constant([rule(inSet([32]),stopEventForFirefox)]),ho=typical(lo,pe.init,fo,mo,(function(){return s.some(focusIn$3)})),po=[onKeyboardHandler("onSpace"),onKeyboardHandler("onEnter"),onKeyboardHandler("onShiftEnter"),onKeyboardHandler("onLeft"),onKeyboardHandler("onRight"),onKeyboardHandler("onTab"),onKeyboardHandler("onShiftTab"),onKeyboardHandler("onUp"),onKeyboardHandler("onDown"),onKeyboardHandler("onEscape"),defaulted$1("stopSpaceKeyup",!1),option("focusIn")],vo=typical(po,pe.init,(function(t,e,n){return[rule(inSet([32]),n.onSpace),rule(and([Dr,inSet([13])]),n.onEnter),rule(and([isShift,inSet([13])]),n.onShiftEnter),rule(and([isShift,inSet([9])]),n.onShiftTab),rule(and([Dr,inSet([9])]),n.onTab),rule(inSet([38]),n.onUp),rule(inSet([40]),n.onDown),rule(inSet([37]),n.onLeft),rule(inSet([39]),n.onRight),rule(inSet([32]),n.onSpace),rule(inSet([27]),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[rule(inSet([32]),stopEventForFirefox)]:[]}),(function(t){return t.focusIn})),bo=Rr.schema(),yo=Pr.schema(),xo=Qr.schema(),wo=Yr.schema(),Co=so.schema(),So=Hr.schema(),ko=ho.schema(),Eo=vo.schema(),To=createModes$1({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:bo,cyclic:yo,flow:xo,flatgrid:wo,matrix:Co,execution:So,menu:ko,special:Eo}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element(),t.element())}),(function(i){i(t,e,n)}))},setGridSize:function(t,n,i,a,u){!function(t){return hasNonNullableKey(t,"setGridSize")}(i)?e.console.error("Layout does not support setGridSize"):i.setGridSize(a,u)}},state:Lr}),insert=function(t,e,n,i){var a=t.getSystem().build(i);attachWith(t,a,n)},remove$7=function(t,e,n,i){var a=contents(t);find(a,(function(t){return eq(i.element(),t.element())})).each(detach)},contents=function(t,e){return t.components()},replaceAt=function(t,e,n,i,a){var u=contents(t);return s.from(u[i]).map((function(e){return remove$7(t,0,0,e),a.each((function(e){insert(t,0,(function(t,e){!function(t,e,n){child(t,n).fold((function(){append(t,e)}),(function(t){ne(t,e)}))}(t,e,i)}),e)})),e}))},Oo=create$1({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,i){insert(t,0,append,i)},prepend:function(t,e,n,i){insert(t,0,prepend,i)},remove:remove$7,replaceAt:replaceAt,replaceBy:function(t,e,n,i,a){var u=contents(t);return findIndex(u,i).bind((function(e){return replaceAt(t,0,0,e,a)}))},set:function(t,e,n,i){preserve((function(){var e=map(i,t.getSystem().build);replaceChildren(t,e)}),t.element())},contents:contents})}),config=function(t,e){return{key:t,value:{config:{},me:function(t,e){var n=derive(e);return create$1({fields:[strict$1("enabled")],name:t,active:{events:constant(n)}})}(t,e),configAsRaw:constant({}),initialConfig:{},state:pe}}},focus$2=function(t,e){e.ignore||(focus$1(t.element()),e.onFocus(t))},_o=Object.freeze({__proto__:null,focus:focus$2,blur:function(t,e){e.ignore||function(t){t.dom().blur()}(t.element())},isFocused:function(t){return function(t){var e=owner(t).dom();return t.dom()===e.activeElement}(t.element())}}),No=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return nu$6(n)},events:function(t){return derive([run(Ot(),(function(e,n){focus$2(e,t),n.stop()}))].concat(t.stopMousedown?[run(dt(),(function(t,e){e.event().prevent()}))]:[]))}}),Ao=[onHandler("onFocus"),defaulted$1("stopMousedown",!1),defaulted$1("ignore",!1)],zo=create$1({fields:Ao,name:"focusing",active:No,apis:_o}),updateAriaState=function(t,e,n){var i=e.aria;i.update(t,i,n.get())},updateClass=function(t,e,n){e.toggleClass.each((function(e){n.get()?add$2(t.element(),e):remove$4(t.element(),e)}))},toggle=function(t,e,n){set$6(t,e,n,!n.get())},on$1=function(t,e,n){n.set(!0),updateClass(t,e,n),updateAriaState(t,e,n)},off=function(t,e,n){n.set(!1),updateClass(t,e,n),updateAriaState(t,e,n)},set$6=function(t,e,n,i){(i?on$1:off)(t,e,n)},onLoad$4=function(t,e,n){set$6(t,e,n,e.selected)},Do=Object.freeze({__proto__:null,onLoad:onLoad$4,toggle:toggle,isOn:function(t,e,n){return n.get()},on:on$1,off:off,set:set$6}),Mo=Object.freeze({__proto__:null,exhibit:function(){return nu$6({})},events:function(t,e){var n,i,a,u=(n=t,i=e,a=toggle,ee((function(t){a(t,n,i)}))),c=loadEvent(t,e,onLoad$4);return derive(flatten([t.toggleOnExecute?[u]:[],[c]]))}}),updateExpanded=function(t,e,n){set$1(t.element(),"aria-expanded",n)},Bo=[defaulted$1("selected",!1),option("toggleClass"),defaulted$1("toggleOnExecute",!0),defaultedOf("aria",{mode:"none"},choose$1("mode",{pressed:[defaulted$1("syncWithExpanded",!1),output("update",(function(t,e,n){set$1(t.element(),"aria-pressed",n),e.syncWithExpanded&&updateExpanded(t,e,n)}))],checked:[output("update",(function(t,e,n){set$1(t.element(),"aria-checked",n)}))],expanded:[output("update",updateExpanded)],selected:[output("update",(function(t,e,n){set$1(t.element(),"aria-selected",n)}))],none:[output("update",noop)]}))],Ro=create$1({fields:Bo,name:"toggling",active:Mo,apis:Do,state:(Mr=!1,{init:function(){var t=Cell(Mr);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Mr)},readState:function(){return t.get()}}}})}),pointerEvents=function(){var onClick=function(t,e){e.stop(),emitExecute(t)};return[run(St(),onClick),run(Mt(),onClick),cutter(ct()),cutter(dt())]},events$7=function(t){return derive(flatten([t.map((function(t){return ee((function(e,n){t(e),n.stop()}))})).toArray(),pointerEvents()]))},onHover=function(t){(search(t.element()).isNone()||zo.isFocused(t))&&(zo.isFocused(t)||zo.focus(t),emitWith(t,"alloy.item-hover",{item:t}))},onFocus=function(t){emitWith(t,"alloy.item-focus",{item:t})},Po=constant("alloy.item-hover"),Io=constant("alloy.item-focus"),Ho=[strict$1("data"),strict$1("components"),strict$1("dom"),defaulted$1("hasSubmenu",!1),option("toggling"),Zn("itemBehaviours",[Ro,zo,To,Jn]),defaulted$1("ignoreFocus",!1),defaulted$1("domModification",{}),output("builder",(function(t){return{dom:t.dom,domModification:__assign(__assign({},t.domModification),{attributes:__assign(__assign(__assign({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Qn(t.itemBehaviours,[t.toggling.fold(Ro.revoke,(function(t){return Ro.config(__assign({aria:{mode:"checked"}},t))})),zo.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){onFocus(t)}}),To.config({mode:"execution"}),Jn.config({store:{mode:"memory",initialValue:t.data}}),config("item-type-events",__spreadArrays(pointerEvents(),[run(pt(),onHover),run(Dt(),zo.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),defaulted$1("eventOrder",{})],Lo=[strict$1("dom"),strict$1("components"),output("builder",(function(t){return{dom:t.dom,components:t.components,events:derive([stopper(Dt())])}}))],Fo=constant([pr({name:"widget",overrides:function(t){return{behaviours:derive$1([Jn.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:function(){}}})])}}})]),Vo=[strict$1("uid"),strict$1("data"),strict$1("components"),strict$1("dom"),defaulted$1("autofocus",!1),defaulted$1("ignoreFocus",!1),Zn("widgetBehaviours",[Jn,zo,To]),defaulted$1("domModification",{}),defaultUidsSchema(Fo()),output("builder",(function(t){var e=substitutes(0,t,Fo()),n=components("item-widget",t,e.internals()),focusWidget=function(e){return getPart(e,t,"widget").map((function(t){return To.focusIn(t),t}))},onHorizontalArrow=function(e,n){return inside(n.event().target())?s.none():t.autofocus?(n.setSource(e.element()),s.none()):s.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:derive([ee((function(t,e){focusWidget(t).each((function(t){e.stop()}))})),run(pt(),onHover),run(Dt(),(function(e,n){t.autofocus?focusWidget(e):zo.focus(e)}))]),behaviours:Qn(t.widgetBehaviours,[Jn.config({store:{mode:"memory",initialValue:t.data}}),zo.config({ignore:t.ignoreFocus,onFocus:function(t){onFocus(t)}}),To.config({mode:"special",focusIn:t.autofocus?function(t){focusWidget(t)}:Ke(),onLeft:onHorizontalArrow,onRight:onHorizontalArrow,onEscape:function(e,n){return zo.isFocused(e)||t.autofocus?t.autofocus?(n.setSource(e.element()),s.none()):s.none():(zo.focus(e),s.some(!0))}})])}}))],Uo=choose$1("type",{widget:Vo,item:Ho,separator:Lo}),jo=constant([yr({factory:{sketch:function(t){var e=asRawOrDie("menu.spec item",Uo,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:__assign(__assign({},e),{uid:generate$2("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Wo=constant([strict$1("value"),strict$1("items"),strict$1("dom"),strict$1("components"),defaulted$1("eventOrder",{}),field$1("menuBehaviours",[zr,Jn,_r,To]),defaultedOf("movement",{mode:"menu",moveOnTab:!0},choose$1("mode",{grid:[Pe(),output("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[output("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),strict$1("rowSelector")],menu:[defaulted$1("moveOnTab",!0),output("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),strictOf("markers",Be()),defaulted$1("fakeFocus",!1),defaulted$1("focusManager",dom()),onHandler("onHighlight")]),qo=constant("alloy.menu-focus"),$o=composite$1({name:"Menu",configFields:Wo(),partFields:jo(),factory:function(t,e,n,i){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:augment(t.menuBehaviours,[zr.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Jn.config({store:{mode:"memory",initialValue:t.value}}),_r.config({find:s.some}),To.config(t.movement.config(t,t.movement))]),events:derive([run(Io(),(function(t,e){var n=e.event();t.getSystem().getByDom(n.target()).each((function(n){zr.highlight(t,n),e.stop(),emitWith(t,qo(),{menu:t,item:n})}))})),run(Po(),(function(t,e){var n=e.event().item();zr.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),trace=function(t,e,n,i){return get(n,i).bind((function(i){return get(t,i).bind((function(i){var a=trace(t,e,n,i);return s.some([i].concat(a))}))})).getOr([])},generate$5=function(t,e){var n={};each$1(t,(function(t,e){each(t,(function(t){n[t]=e}))}));var i=e,a=tupleMap(e,(function(t,e){return{k:t,v:e}})),u=map$1(a,(function(t,e){return[e].concat(trace(n,i,a,e))}));return map$1(n,(function(t){return get(u,t).getOr([t])}))},extractPreparedMenu=function(t){return"prepared"===t.type?s.some(t.menu):s.none()},Go={init:function(){var t=Cell({}),e=Cell({}),n=Cell({}),i=Cell(s.none()),a=Cell({}),getTriggerData=function(e,n,i){return getPreparedMenu(e).bind((function(a){return function(e){return find$1(t.get(),(function(t,n){return t===e}))}(e).bind((function(t){return n(t).map((function(t){return{triggeredMenu:a,triggeringItem:t,triggeringPath:i}}))}))}))},getPreparedMenu=function(t){return lookupMenu(t).bind(extractPreparedMenu)},lookupMenu=function(t){return get(e.get(),t)},lookupItem=function(e){return get(t.get(),e)};return{setMenuBuilt:function(t,n){var i;e.set(__assign(__assign({},e.get()),((i={})[t]={type:"prepared",menu:n},i)))},setContents:function(u,c,l,f){i.set(s.some(u)),t.set(l),e.set(c),a.set(f);var d=generate$5(f,l);n.set(d)},expand:function(e){return get(t.get(),e).map((function(t){var i=get(n.get(),e).getOr([]);return[t].concat(i)}))},refresh:function(t){return get(n.get(),t)},collapse:function(t){return get(n.get(),t).bind((function(t){return t.length>1?s.some(t.slice(1)):s.none()}))},lookupMenu:lookupMenu,lookupItem:lookupItem,otherMenus:function(t){var e=a.get();return difference(w(e),t)},getPrimary:function(){return i.get().bind(getPreparedMenu)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),i.set(s.none())},isClear:function(){return i.get().isNone()},getTriggeringPath:function(t,e){var a=filter(lookupItem(t).toArray(),(function(t){return getPreparedMenu(t).isSome()}));return get(n.get(),t).bind((function(t){var n=reverse(a.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(!i.isSome())return s.none();e.push(i.getOrDie())}return s.some(e)}(bind(n,(function(t,a){return getTriggerData(t,e,n.slice(0,a+1)).fold((function(){return i.get().is(t)?[]:[s.none()]}),(function(t){return[s.some(t)]}))})))}))}}},extractPreparedMenu:extractPreparedMenu},Xo=constant("collapse-item"),Ko=single$2({name:"TieredMenu",configFields:[onStrictKeyboardHandler("onExecute"),onStrictKeyboardHandler("onEscape"),onStrictHandler("onOpenMenu"),onStrictHandler("onOpenSubmenu"),onHandler("onRepositionMenu"),onHandler("onCollapseMenu"),defaulted$1("highlightImmediately",!0),strictObjOf("data",[strict$1("primary"),strict$1("menus"),strict$1("expansions")]),defaulted$1("fakeFocus",!1),onHandler("onHighlight"),onHandler("onHover"),tieredMenuMarkers(),strict$1("dom"),defaulted$1("navigateOnHover",!0),defaulted$1("stayInDom",!1),field$1("tmenuBehaviours",[To,zr,_r,Oo]),defaulted$1("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var n,i=Cell(s.none()),a=Go.init(),setup=function(e){var n=function(e,n,i){return map$1(i,(function(i,a){var makeSketch=function(){return $o.sketch(__assign(__assign({dom:i.dom},i),{value:a,items:i.items,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?highlights():dom()}))};return a===n?{type:"prepared",menu:e.getSystem().build(makeSketch())}:{type:"notbuilt",nbMenu:makeSketch}}))}(e,t.data.primary,t.data.menus),i=toDirectory();return a.setContents(t.data.primary,n,t.data.expansions,i),a.getPrimary()},getItemValue=function(t){return Jn.getValue(t).value},toDirectory=function(e){return map$1(t.data.menus,(function(t,e){return bind(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},setActiveMenu=function(t,e){zr.highlight(t,e),zr.getHighlighted(e).orThunk((function(){return zr.getFirst(e)})).each((function(e){dispatch(t,e.element(),Dt())}))},getMenus=function(t,e){return cat(map(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?s.some(t.menu):s.none()}))})))},closeOthers=function(e,n,i){var a=getMenus(n,n.otherMenus(i));each(a,(function(n){remove$5(n.element(),[t.markers.backgroundMenu]),t.stayInDom||Oo.remove(e,n)}))},updateAriaExpansions=function(e,n){var a=function(e){return i.get().getOrThunk((function(){var n={},a=descendants(e.element(),"."+t.markers.item),u=filter(a,(function(t){return"true"===get$2(t,"aria-haspopup")}));return each(u,(function(t){e.getSystem().getByDom(t).each((function(t){var e=getItemValue(t);n[e]=t}))})),i.set(s.some(n)),n}))}(e);each$1(a,(function(t,e){var i=contains(n,e);set$1(t.element(),"aria-expanded",i)}))},updateMenuPath=function(e,n,i){return s.from(i[0]).bind((function(a){return n.lookupMenu(a).bind((function(a){if("notbuilt"===a.type)return s.none();var u=a.menu,c=getMenus(n,i.slice(1));return each(c,(function(e){add$2(e.element(),t.markers.backgroundMenu)})),inBody(u.element())||Oo.append(e,ye(u)),remove$5(u.element(),[t.markers.backgroundMenu]),setActiveMenu(e,u),closeOthers(e,n,i),s.some(u)}))}))};!function(t){t[t.HighlightSubmenu=0]="HighlightSubmenu",t[t.HighlightParent=1]="HighlightParent"}(n||(n={}));var expandRight=function(e,i,u){void 0===u&&(u=n.HighlightSubmenu);var c=getItemValue(i);return a.expand(c).bind((function(c){return updateAriaExpansions(e,c),s.from(c[0]).bind((function(l){return a.lookupMenu(l).bind((function(f){var d=function(t,e,n){if("notbuilt"===n.type){var i=t.getSystem().build(n.nbMenu());return a.setMenuBuilt(e,i),i}return n.menu}(e,l,f);return inBody(d.element())||Oo.append(e,ye(d)),t.onOpenSubmenu(e,i,d,reverse(c)),u===n.HighlightSubmenu?(zr.highlightFirst(d),updateMenuPath(e,a,c)):(zr.dehighlightAll(d),s.some(i))}))}))}))},collapseLeft=function(e,n){var i=getItemValue(n);return a.collapse(i).bind((function(i){return updateAriaExpansions(e,i),updateMenuPath(e,a,i).map((function(i){return t.onCollapseMenu(e,n,i),i}))}))},keyOnItem=function(e){return function(n,i){return closest$3(i.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOption().bind((function(t){return e(n,t).map((function(){return!0}))}))}))}},u=derive([run(qo(),(function(t,e){var n=e.event().item();a.lookupItem(getItemValue(n)).each((function(){var n=e.event().menu();zr.highlight(t,n);var i=getItemValue(e.event().item());a.refresh(i).each((function(e){return closeOthers(t,a,e)}))}))})),ee((function(e,i){var a=i.event().target();e.getSystem().getByDom(a).each((function(i){0===getItemValue(i).indexOf("collapse-item")&&collapseLeft(e,i),expandRight(e,i,n.HighlightSubmenu).fold((function(){t.onExecute(e,i)}),(function(){}))}))})),Zt((function(e,n){setup(e).each((function(n){Oo.append(e,ye(n)),t.onOpenMenu(e,n),t.highlightImmediately&&setActiveMenu(e,n)}))}))].concat(t.navigateOnHover?[run(Po(),(function(e,i){var u=i.event().item();!function(t,e){var n=getItemValue(e);a.refresh(n).bind((function(e){return updateAriaExpansions(t,e),updateMenuPath(t,a,e)}))}(e,u),expandRight(e,u,n.HighlightParent),t.onHover(e,u)}))]:[])),getActiveItem=function(t){return zr.getHighlighted(t).bind(zr.getHighlighted)},c={collapseMenu:function(t){getActiveItem(t).each((function(e){collapseLeft(t,e)}))},highlightPrimary:function(t){a.getPrimary().each((function(e){setActiveMenu(t,e)}))},repositionMenus:function(e){a.getPrimary().bind((function(t){return getActiveItem(e).bind((function(t){var e=getItemValue(t),n=values(a.getMenus()),i=cat(map(n,Go.extractPreparedMenu));return a.getTriggeringPath(e,(function(t){return function(t,e,n){return findMap(e,(function(t){if(!t.getSystem().isConnected())return s.none();var e=zr.getCandidates(t);return find(e,(function(t){return getItemValue(t)===n}))}))}(0,i,t)}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){(function(t){return s.from(t.components()[0]).filter((function(t){return"menu"===get$2(t.element(),"role")}))})(e).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var i=n.primary,a=n.triggeringPath;t.onRepositionMenu(e,i,a)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:augment(t.tmenuBehaviours,[To.config({mode:"special",onRight:keyOnItem((function(t,e){return inside(e.element())?s.none():expandRight(t,e,n.HighlightSubmenu)})),onLeft:keyOnItem((function(t,e){return inside(e.element())?s.none():collapseLeft(t,e)})),onEscape:keyOnItem((function(e,n){return collapseLeft(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){a.getPrimary().each((function(e){dispatch(t,e.element(),Dt())}))}}),zr.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),_r.config({find:function(t){return zr.getHighlighted(t)}}),Oo.config({})]),eventOrder:t.eventOrder,apis:c,events:u}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:wrap$1(t,e),expansions:{}}},collapseItem:function(t){return{value:generate$1(Xo()),meta:{text:t}}}}}),Yo=single$2({name:"InlineView",configFields:[strict$1("lazySink"),onHandler("onShow"),onHandler("onHide"),optionFunction("onEscape"),field$1("inlineBehaviours",[Hn,Jn,Ze]),optionObjOf("fireDismissalEventInstead",[defaulted$1("event",Wt())]),optionObjOf("fireRepositionEventInstead",[defaulted$1("event",qt())]),defaulted$1("getRelated",s.none),defaulted$1("eventOrder",s.none)],factory:function(t,e){var showWithin=function(t,e,n,i){showWithinBounds(t,e,n,(function(){return i.map((function(t){return box(t)}))}))},showWithinBounds=function(e,n,i,a){var u=t.lazySink(e).getOrDie();Hn.openWhileCloaked(e,i,(function(){return Bn.positionWithinBounds(u,n,e,a())})),Jn.setValue(e,s.some({mode:"position",anchor:n,getBounds:a}))},showMenuWithinBounds=function(e,n,i,a){var u=function(t,e,n,i,a){var lazySink=function(){return t.lazySink(e)},u="horizontal"===i.type?{layouts:{onLtr:function(){return belowOrAbove()},onRtl:function(){return belowOrAboveRtl()}}}:{},getSubmenuLayouts=function(t){return function(t){return 2===t.length}(t)?u:{}};return Ko.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightImmediately:i.menu.highlightImmediately,onEscape:function(){return Hn.close(e),t.onEscape.map((function(t){return t(e)})),s.some(!0)},onExecute:function(){return s.some(!0)},onOpenMenu:function(t,e){Bn.positionWithinBounds(lazySink().getOrDie(),n,e,a())},onOpenSubmenu:function(t,e,n,i){var a=lazySink().getOrDie();Bn.position(a,__assign({anchor:"submenu",item:e},getSubmenuLayouts(i)),n)},onRepositionMenu:function(t,e,i){var u=lazySink().getOrDie();Bn.positionWithinBounds(u,n,e,a()),each(i,(function(t){var e=getSubmenuLayouts(t.triggeringPath);Bn.position(u,__assign({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}})}(t,e,n,i,a);Hn.open(e,u),Jn.setValue(e,s.some({mode:"menu",menu:u}))},reposition=function(e){Hn.isOpen(e)&&Jn.getValue(e).each((function(n){switch(n.mode){case"menu":Hn.getState(e).each((function(t){Ko.repositionMenus(t)}));break;case"position":var i=t.lazySink(e).getOrDie();Bn.positionWithinBounds(i,n.anchor,e,n.getBounds())}}))},n={setContent:function(t,e){Hn.setContent(t,e)},showAt:function(t,e,n){showWithin(t,e,n,s.none())},showWithin:showWithin,showWithinBounds:showWithinBounds,showMenuAt:function(t,e,n){showMenuWithinBounds(t,e,n,(function(){return s.none()}))},showMenuWithinBounds:showMenuWithinBounds,hide:function(t){Hn.isOpen(t)&&(Jn.setValue(t,s.none()),Hn.close(t))},getContent:function(t){return Hn.getState(t)},reposition:reposition,isOpen:Hn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:augment(t.inlineBehaviours,[Hn.config({isPartOf:function(e,n,i){return isPartOf(n,i)||function(e,n){return t.getRelated(e).exists((function(t){return isPartOf(t,n)}))}(e,i)},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Jn.config({store:{mode:"memory",initialValue:s.none()}}),Ze.config({channels:__assign(__assign({},receivingChannel(__assign({isExtraPart:constant(!1)},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),receivingChannel$1(__assign(__assign({isExtraPart:constant(!1)},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:reposition})))})]),eventOrder:t.eventOrder,apis:n}},apis:{showAt:function(t,e,n,i){t.showAt(e,n,i)},showWithin:function(t,e,n,i,a){t.showWithin(e,n,i,a)},showWithinBounds:function(t,e,n,i,a){t.showWithinBounds(e,n,i,a)},showMenuAt:function(t,e,n,i){t.showMenuAt(e,n,i)},showMenuWithinBounds:function(t,e,n,i,a){t.showMenuWithinBounds(e,n,i,a)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),westEdgeX$1=function(t){return t.x()},middleX$1=function(t,e){return t.x()+t.width()/2-e.width()/2},eastEdgeX$1=function(t,e){return t.x()+t.width()-e.width()},northY$2=function(t){return t.y()},southY$2=function(t,e){return t.y()+t.height()-e.height()},southeast$3=function(t,e,n){return Ie(westEdgeX$1(t),southY$2(t,e),n.innerSoutheast(),Le(),"layout-se")},southwest$3=function(t,e,n){return Ie(eastEdgeX$1(t,e),southY$2(t,e),n.innerSouthwest(),Fe(),"layout-sw")},northeast$3=function(t,e,n){return Ie(westEdgeX$1(t),northY$2(t),n.innerNortheast(),Ve(),"layout-ne")},northwest$3=function(t,e,n){return Ie(eastEdgeX$1(t,e),northY$2(t),n.innerNorthwest(),Ue(),"layout-nw")},north$3=function(t,e,n){return Ie(middleX$1(t,e),northY$2(t),n.innerNorth(),We(),"layout-n")},south$3=function(t,e,n){return Ie(middleX$1(t,e),southY$2(t,e),n.innerSouth(),je(),"layout-s")},Jo=tinymce.util.Tools.resolve("tinymce.util.Delay"),Zo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qo=tinymce.util.Tools.resolve("tinymce.EditorManager"),getHeightSetting=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},getWidthSetting=function(t){return t.getParam("width",Zo.DOM.getStyle(t.getElement(),"width"))},getMinWidthSetting=function(t){return s.from(t.settings.min_width).filter(p)},getMinHeightSetting=function(t){return s.from(t.settings.min_height).filter(p)},getMaxWidthSetting=function(t){return s.from(t.getParam("max_width")).filter(p)},getMaxHeightSetting=function(t){return s.from(t.getParam("max_height")).filter(p)},isMenubarEnabled=function(t){return!1!==t.getParam("menubar",!0,"boolean")},isToolbarEnabled=function(t){var e=t.getParam("toolbar",!0),n=!0===e,i=f(e),a=m(e)&&e.length>0;return!isMultipleToolbars(t)&&(a||i||n)},getMultipleToolbarsSetting=function(t){var e=w(t.settings),n=filter(e,(function(t){return/^toolbar([1-9])$/.test(t)})),i=map(n,(function(e){return t.getParam(e,!1,"string")})),a=filter(i,(function(t){return"string"==typeof t}));return a.length>0?s.some(a):s.none()},isMultipleToolbars=function(t){return getMultipleToolbarsSetting(t).fold((function(){return t.getParam("toolbar",[],"string[]").length>0}),(function(){return!0}))};!function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"}(Br||(Br={}));var ti,getToolbarMode=function(t){return t.getParam("toolbar_mode","","string")};!function(t){t.top="top",t.bottom="bottom"}(ti||(ti={}));var isToolbarLocationTop=function(t){return t.getParam("toolbar_location",ti.top,"string")!==ti.bottom},fixedContainerElement=function(t){var e=function(t){return t.getParam("fixed_toolbar_container","","string")}(t);return e.length>0&&t.inline?descendant$1(ve(),e):s.none()},useFixedContainer=function(t){return t.inline&&fixedContainerElement(t).isSome()},isDistractionFree=function(t){return t.inline&&!isMenubarEnabled(t)&&!isToolbarEnabled(t)&&!isMultipleToolbars(t)},isStickyToolbar=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!useFixedContainer(t)&&!isDistractionFree(t)},ei=single$2({name:"Button",factory:function(t){var e=events$7(t.action),n=t.dom.tag,lookupAttr=function(e){return get(t.dom,"attributes").bind((function(t){return get(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Qn(t.buttonBehaviours,[zo.config({}),To.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===n){var t=lookupAttr("type").getOr("button"),e=lookupAttr("role").map((function(t){return{role:t}})).getOr({});return __assign({type:t},e)}return{role:lookupAttr("role").getOr("button")}}()},eventOrder:t.eventOrder}},configFields:[defaulted$1("uid",void 0),strict$1("dom"),defaulted$1("components",[]),Zn("buttonBehaviours",[zo,To]),option("action"),option("role"),defaulted$1("eventOrder",{})]}),record=function(t){var e=function isSketchSpec(t){return void 0!==t.uid}(t)&&hasNonNullableKey(t,"uid")?t.uid:generate$2("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOption()},asSpec:function(){return __assign(__assign({},t),{uid:e})}}},defaultIcon=function(t){return s.from(t()["temporary-placeholder"]).getOr("!not found!")},get$d=function(t,e){return s.from(e()[t]).getOrThunk((function(){return defaultIcon(e)}))},getFirst$1=function(t,e){return findMap(t,(function(t){return s.from(e()[t])})).getOrThunk((function(){return defaultIcon(e)}))},ni={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ri=single$2({name:"Notification",factory:function(t){var e=record({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:derive$1([Oo.config({})])}),renderPercentBar=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},renderPercentText=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},n=record({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[renderPercentBar(0)]},renderPercentText(0)],behaviours:derive$1([Oo.config({})])}),i={updateProgress:function(t,e){t.getSystem().isConnected()&&n.getOpt(t).each((function(t){Oo.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[renderPercentBar(e)]},renderPercentText(e)])}))},updateText:function(t,n){if(t.getSystem().isConnected()){var i=e.get(t);Oo.set(i,[text(n)])}}},a=flatten([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return s.from(ni[t])})).toArray()]);return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:getFirst$1(a,t.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[e.asSpec()],behaviours:derive$1([Oo.config({})])}].concat(t.progress?[n.asSpec()]:[]).concat(t.closeButton?[ei.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:get$d("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})]:[]),apis:i}},configFields:[option("level"),strict$1("progress"),strict$1("icon"),strict$1("onAction"),strict$1("text"),strict$1("iconProvider"),strict$1("translationProvider"),defaultedBoolean("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function NotificationManagerImpl(t,e,n){var i=e.backstage,a=isToolbarLocationTop(t);return{open:function(t,u){var c=!t.closeButton&&t.timeout&&(t.timeout>0||t.timeout<0),close=function(){u(),Yo.hide(f)},l=build$1(ri.sketch({text:t.text,level:contains(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:s.from(t.icon),closeButton:!c,onAction:close,iconProvider:i.shared.providers.icons,translationProvider:i.shared.providers.translate})),f=build$1(Yo.sketch(__assign({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},a?{}:{fireRepositionEventInstead:{}})));return n.add(f),t.timeout>0&&Jo.setTimeout((function(){close()}),t.timeout),{close:close,moveTo:function(t,e){Yo.showAt(f,{anchor:"makeshift",x:t,y:e},ye(l))},moveRel:function(t,n){if("banner"!==n){var i=function(t){switch(t){case"bc-bc":return south$3;case"tc-tc":return north$3;case"tc-bc":return north$1;case"bc-tc":default:return south$1}}(n),a={anchor:"node",root:ve(),node:s.some($.fromDom(t)),layouts:{onRtl:function(){return[i]},onLtr:function(){return[i]}}};Yo.showAt(f,a,ye(l))}else Yo.showAt(f,e.backstage.shared.anchors.banner(),ye(l))},text:function(t){ri.updateText(l,t)},settings:t,getEl:function(){return l.element().dom()},progressBar:{value:function(t){ri.updateProgress(l,t)}}}},close:function(t){t.close()},reposition:function(t){!function(t){each(t,(function(t){return t.moveTo(0,0)}))}(t),function(t){t.length>0&&(head(t).each((function(t){return t.moveRel(null,"banner")})),each(t,(function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")})))}(t)},getArgs:function(t){return t.settings}}}var oi,last$2=function(t,n){var i=null;return{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},throttle:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];null!==i&&e.clearTimeout(i),i=e.setTimeout((function(){t.apply(null,a),i=null}),n)}}},ii=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),repeatLeft=function(t,e,n,i,a){var u=ii(t,(function(e){return function(t,e){return t.isBlock(e)||contains(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)}(t,e)}));return s.from(u.backwards(e,n,i,a))},create$4=function(t,e){return detect$4($.fromDom(t.selection.getNode())).getOrThunk((function(){var n=$.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return append(n,$.fromDom(e.extractContents())),e.insertNode(n.dom()),parent(n).each((function(t){return t.dom().normalize()})),function(t){return descendantRtl(t,isCursorPosition)}(n).map((function(e){t.selection.setCursorLocation(e.dom(),function(t){return"img"===re(t)?1:getOption(t).fold((function(){return children(t).length}),(function(t){return t.length}))}(e))})),n}))},detect$4=function(t){return closest$3(t,"[data-mce-autocompleter]")},getText=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},isWhitespace=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},stripTriggerChar=function(t,e){return t.substring(e.length)},findStart=function(t,e,n,i){if(void 0===i&&(i=0),!(a=e).collapsed||3!==a.startContainer.nodeType)return s.none();var a,u=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return repeatLeft(t,e.startContainer,e.startOffset,(function(t,e,i){return function(t,e,n){var i;for(i=e-1;i>=0;i--){var a=t.charAt(i);if(isWhitespace(a))return s.none();if(a===n)break}return s.some(i)}(i,e,n).getOr(e)}),u).bind((function(t){var a=e.cloneRange();if(a.setStart(t.container,t.offset),a.setEnd(e.endContainer,e.endOffset),a.collapsed)return s.none();var u=getText(a);return 0!==u.lastIndexOf(n)||stripTriggerChar(u,n).length<i?s.none():s.some({text:stripTriggerChar(u,n),range:a,triggerChar:n})}))},getContext=function(t,e,n,i){return void 0===i&&(i=0),detect$4($.fromDom(e.startContainer)).fold((function(){return findStart(t,e,n,i)}),(function(e){var i=t.createRng();i.selectNode(e.dom());var a=getText(i);return s.some({range:i,text:stripTriggerChar(a,n),triggerChar:n})}))},AutocompleterEditorEvents_setup=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var redirectKeyToItem=function(t,e){emitWith(t,yt(),{raw:e})};e.on("keydown",(function(e){var getItem=function(){return t.getView().bind(zr.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(getItem().each(emitExecute),e.preventDefault()):40===e.which?(getItem().fold((function(){t.getView().each(zr.highlightFirst)}),(function(t){redirectKeyToItem(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||getItem().each((function(t){redirectKeyToItem(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&detect$4($.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},ai=tinymce.util.Tools.resolve("tinymce.util.Promise"),point$2=function(t,e){return{container:t,offset:e}},toLast=function(t){if(function(t){return t.nodeType===e.Node.TEXT_NODE}(t))return point$2(t,t.data.length);var n=t.childNodes;return n.length>0?toLast(n[n.length-1]):point$2(t,n.length)},toLeaf=function(t,n){var i=t.childNodes;return i.length>0&&n<i.length?toLeaf(i[n],0):i.length>0&&function(t){return t.nodeType===e.Node.ELEMENT_NODE}(t)&&i.length===n?toLast(i[i.length-1]):point$2(t,n)},isStartOfWord=function(t){return function(e){var n=toLeaf(e.startContainer,e.startOffset);return!function(t,e){return repeatLeft(t,e.container,e.offset,(function(t,e){return 0===e?-1:e}),t.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!isWhitespace(e)})).isSome()}(t,n)}},lookup=function(t,e){var n=e(),i=t.selection.getRng();return function(t,e,n){return findMap(n.triggerChars,(function(n){return getContext(t,e,n)}))}(t.dom,i,n).bind((function(n){return lookupWithContext(t,e,n)}))},lookupWithContext=function(t,e,n,i){void 0===i&&(i={});var a=e(),u=t.selection.getRng().startContainer.nodeValue,c=filter(a.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return isStartOfWord(t.dom)}))(n.range,u,n.text)}));if(0===c.length)return s.none();var l=ai.all(map(c,(function(t){return t.fetch(n.text,t.maxResults,i).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction}}))})));return s.some({lookupData:l,context:n})},ui=objOf([strictString("type"),optionString("text")]),ci=objOf([state$1("type",(function(){return"autocompleteitem"})),state$1("active",(function(){return!1})),state$1("disabled",(function(){return!1})),defaulted$1("meta",{}),strictString("value"),optionString("text"),optionString("icon")]),si=objOf([strictString("type"),strictString("ch"),defaultedNumber("minChars",1),defaulted$1("columns",1),defaultedNumber("maxResults",10),optionFunction("matches"),strictFunction("fetch"),strictFunction("onAction")]),register=function(t){var e=t.ui.registry.getAll().popups,n=map$1(e,(function(t){return(e=t,asRaw("Autocompleter",si,e)).fold((function(t){throw new Error(formatError(t))}),(function(t){return t}));var e})),i=function(t){var e={};return each(t,(function(t){e[t]={}})),w(e)}(mapToArray(n,(function(t){return t.ch}))),a=values(n);return{dataset:n,triggerChars:i,lookupByChar:function(t){return filter(a,(function(e){return e.ch===t}))}}},li=[defaultedBoolean("disabled",!1),optionString("text"),optionString("shortcut"),H("value","value",z((function(){return generate$1("menuitem-value")})),F()),defaulted$1("meta",{})],fi=objOf([strictString("type"),defaultedFunction("onSetup",(function(){return noop})),defaultedFunction("onAction",noop),optionString("icon")].concat(li)),di=objOf([strictString("type"),strictFunction("getSubmenuItems"),defaultedFunction("onSetup",(function(){return noop})),optionString("icon")].concat(li)),mi=objOf([strictString("type"),defaultedBoolean("active",!1),defaultedFunction("onSetup",(function(){return noop})),strictFunction("onAction")].concat(li)),gi=objOf([strictString("type"),defaultedBoolean("active",!1),optionString("icon")].concat(li)),hi=objOf([strictString("type"),strictStringEnum("fancytype",["inserttable","colorswatch"]),defaultedFunction("onAction",noop)]),detectSize=function(t,e,n){var i=descendants(t.element(),"."+n);if(i.length>0){var a=findIndex(i,(function(t){var n=t.dom().getBoundingClientRect().top,a=i[0].dom().getBoundingClientRect().top;return Math.abs(n-a)>e})).getOr(i.length);return s.some({numColumns:a,numRows:Math.ceil(i.length/a)})}return s.none()},namedEvents=function(t,e){return derive$1([config(t,e)])},SimpleBehaviours_unnamedEvents=function(t){return namedEvents(generate$1("unnamed-events"),t)},pi=[strict$1("lazySink"),strict$1("tooltipDom"),defaulted$1("exclusive",!0),defaulted$1("tooltipComponents",[]),defaulted$1("delay",300),defaultedStringEnum("mode","normal",["normal","follow-highlight"]),defaulted$1("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:constant([south$1,north$1,southeast$1,northeast$1,southwest$1,northwest$1]),onRtl:constant([south$1,north$1,southeast$1,northeast$1,southwest$1,northwest$1])}}})),onHandler("onHide"),onHandler("onShow")],vi=Object.freeze({__proto__:null,init:function(){var t=Cell(s.none()),n=Cell(s.none()),clearTimer=function(){t.get().each((function(t){e.clearTimeout(t)}))},i=constant("not-implemented");return nu$5({getTooltip:function(){return n.get()},isShowing:function(){return n.get().isSome()},setTooltip:function(t){n.set(s.some(t))},clearTooltip:function(){n.set(s.none())},clearTimer:clearTimer,resetTimer:function(n,i){clearTimer(),t.set(s.some(e.setTimeout((function(){n()}),i)))},readState:i})}}),bi=generate$1("tooltip.exclusive"),yi=generate$1("tooltip.show"),xi=generate$1("tooltip.hide"),hideAllExclusive=function(t,e,n){t.getSystem().broadcastOn([bi],{})},wi=Object.freeze({__proto__:null,hideAllExclusive:hideAllExclusive,setComponents:function(t,e,n,i){n.getTooltip().each((function(t){t.getSystem().isConnected()&&Oo.set(t,i)}))}}),Ci=create$1({fields:pi,name:"tooltipping",active:Object.freeze({__proto__:null,events:function(t,e){var hide=function(n){e.getTooltip().each((function(i){detach(i),t.onHide(n,i),e.clearTooltip()})),e.clearTimer()};return derive(flatten([[run(yi,(function(n){e.resetTimer((function(){!function(n){if(!e.isShowing()){hideAllExclusive(n);var i=t.lazySink(n).getOrDie(),a=n.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:derive("normal"===t.mode?[run(pt(),(function(t){emit(n,yi)})),run(gt(),(function(t){emit(n,xi)}))]:[]),behaviours:derive$1([Oo.config({})])});e.setTooltip(a),attach$1(i,a),t.onShow(n,a),Bn.position(i,t.anchor(n),a)}}(n)}),t.delay)})),run(xi,(function(n){e.resetTimer((function(){hide(n)}),t.delay)})),run(At(),(function(t,e){contains(e.channels(),bi)&&hide(t)})),Qt((function(t){hide(t)}))],"normal"===t.mode?[run(vt(),(function(t){emit(t,yi)})),run(_t(),(function(t){emit(t,xi)})),run(pt(),(function(t){emit(t,yi)})),run(gt(),(function(t){emit(t,xi)}))]:[run(Yt(),(function(t,e){emit(t,yi)})),run(Jt(),(function(t){emit(t,xi)}))]]))}}),state:vi,apis:wi}),Si=tinymce.util.Tools.resolve("tinymce.util.I18n"),ki="tox-menu-nav__js",Ei="tox-collection__item",Ti={normal:ki,color:"tox-swatch"},Oi="tox-collection__item-label",_i="tox-collection__item--active",classForPreset=function(t){return get(Ti,t).getOr(ki)},Ni=tinymce.util.Tools.resolve("tinymce.Env"),ConvertShortcut_convertText=function(t){var e=Ni.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=t.split("+"),i=map(n,(function(t){var n=t.toLowerCase().trim();return has(e,n)?e[n]:t}));return Ni.mac?i.join(""):i.join("+")},renderIcon=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},renderText=function(t){return{dom:{tag:"div",classes:[Oi]},components:[text(Si.translate(t))]}},renderStyledText=function(t,e){return{dom:{tag:"div",classes:[Oi]},components:[{dom:{tag:t.tag,styles:t.styles},components:[text(Si.translate(e))]}]}},renderShortcut=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:ConvertShortcut_convertText(t)}}},renderCheckmark=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon","tox-collection__item-checkmark"],innerHtml:get$d("checkmark",t)}}},renderNormalItemStructure=function(t,e,n,i,a){var u=n?t.checkMark.orThunk((function(){return e.or(s.some("")).map(renderIcon)})):s.none(),c=t.ariaLabel.map((function(t){return{attributes:{title:Si.translate(t)}}})).getOr({});return{dom:__assign({tag:"div",classes:[ki,Ei].concat(a?["tox-collection__item-icon-rtl"]:[])},c),optComponents:[u,t.htmlContent.fold((function(){return t.textContent.map(i)}),(function(t){return s.some(function(t){return{dom:{tag:"div",classes:[Oi],innerHtml:t}}}(t))})),t.shortcutContent.map(renderShortcut),t.caret]}},Ai=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],zi=["list-bull-circle","list-bull-default","list-bull-square"],renderItemStructure=function(t,e,n,i){void 0===i&&(i=s.none());var a,u=Si.isRtl()&&t.iconContent.exists((function(t){return contains(zi,t)})),c=(a=t.iconContent,a.map((function(t){return Si.isRtl()&&contains(Ai,t)?t+"-rtl":t}))).map((function(t){return function(t,e,n){return s.from(e()[t]).or(n).getOrThunk((function(){return defaultIcon(e)}))}(t,e.icons,i)})),l=s.from(t.meta).fold((function(){return renderText}),(function(t){return has(t,"style")?curry(renderStyledText,t.style):renderText}));return"color"===t.presets?function(t,e,n,i){var a,u;return{dom:(a=n.getOr(""),u={tag:"div",attributes:t.map((function(t){return{title:i.translate(t)}})).getOr({}),classes:["tox-swatch"]},__assign(__assign({},u),"custom"===e?{tag:"button",classes:__spreadArrays(u.classes,["tox-swatches__picker-btn"]),innerHtml:a}:"remove"===e?{classes:__spreadArrays(u.classes,["tox-swatch--remove"]),innerHtml:a}:{attributes:__assign(__assign({},u.attributes),{"data-mce-color":e}),styles:{"background-color":e}})),optComponents:[]}}(t.ariaLabel,t.value,c,e):renderNormalItemStructure(t,c,n,l,u)},Di=["input","button","textarea","select"],onLoad$5=function(t,e,n){e.disabled&&disable(t,e)},hasNative=function(t,e){return!0===e.useNative&&contains(Di,re(t.element()))},nativeDisable=function(t){set$1(t.element(),"disabled","disabled")},nativeEnable=function(t){remove$1(t.element(),"disabled")},ariaDisable=function(t){set$1(t.element(),"aria-disabled","true")},ariaEnable=function(t){set$1(t.element(),"aria-disabled","false")},disable=function(t,e,n){e.disableClass.each((function(e){add$2(t.element(),e)})),(hasNative(t,e)?nativeDisable:ariaDisable)(t),e.onDisabled(t)},enable=function(t,e,n){e.disableClass.each((function(e){remove$4(t.element(),e)})),(hasNative(t,e)?nativeEnable:ariaEnable)(t),e.onEnabled(t)},isDisabled=function(t,e){return hasNative(t,e)?function(t){return has$1(t.element(),"disabled")}(t):function(t){return"true"===get$2(t.element(),"aria-disabled")}(t)},Mi=Object.freeze({__proto__:null,enable:enable,disable:disable,isDisabled:isDisabled,onLoad:onLoad$5,set:function(t,e,n,i){(i?disable:enable)(t,e,n)}}),Bi=Object.freeze({__proto__:null,exhibit:function(t,e){return nu$6({classes:e.disabled?e.disableClass.map(pure).getOr([]):[]})},events:function(t,e){return derive([abort(zt(),(function(e,n){return isDisabled(e,t)})),loadEvent(t,e,onLoad$5)])}}),Ri=[defaulted$1("disabled",!1),defaulted$1("useNative",!0),option("disableClass"),onHandler("onDisabled"),onHandler("onEnabled")],Pi=create$1({fields:Ri,name:"disabling",active:Bi,apis:Mi}),DisablingConfigs_item=function(t){return Pi.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},DisablingConfigs_button=function(t){return Pi.config({disabled:t})},DisablingConfigs_splitButton=function(t){return Pi.config({disabled:t,disableClass:"tox-tbtn--disabled"})},DisablingConfigs_toolbarButton=function(t){return Pi.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},runWithApi=function(t,e){var n=t.getApi(e);return function(t){t(n)}},onControlAttached=function(t,e){return Zt((function(n){runWithApi(t,n)((function(n){var i=t.onSetup(n);null!=i&&e.set(i)}))}))},onControlDetached=function(t,e){return Qt((function(n){return runWithApi(t,n)(e.get())}))};!function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(oi||(oi={}));var Ii=oi,onMenuItemExecute=function(t,e){return ee((function(n,i){runWithApi(t,n)(t.onAction),t.triggersSubmenu||e!==Ii.CLOSE_ON_EXECUTE||(emit(n,Rt()),i.stop())}))},Hi={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},componentRenderPipeline=function(t){return bind(t,(function(t){return t.toArray()}))},renderCommonItem=function(t,e,n){var i=Cell(noop);return{type:"item",dom:e.dom,components:componentRenderPipeline(e.optComponents),data:t.data,eventOrder:Hi,hasSubmenu:t.triggersSubmenu,itemBehaviours:derive$1([config("item-events",[onMenuItemExecute(t,n),onControlAttached(t,i),onControlDetached(t,i)]),DisablingConfigs_item(t.disabled),Oo.config({})].concat(t.itemBehaviours))}},buildData=function(t){return{value:t.value,meta:__assign({text:t.text.getOr("")},t.meta)}},tooltipBehaviour=function(t,e){return get(t,"tooltipWorker").map((function(t){return[Ci.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:sn}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Ci.setComponents(e,[external({element:$.fromDom(t)})])}))}})]})).getOr([])},replaceText=function(t,e){var n=function(t){return Zo.DOM.encode(t)}(Si.translate(t));if(e.length>0){var i=new RegExp(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"gi");return n.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return n},Li=constant(generate$4("item-widget",Fo())),Fi=generate$1("cell-over"),Vi=generate$1("cell-execute"),makeCell=function(t,e,n){var i,emitExecute=function(n){return emitWith(n,Vi,{row:t,col:e})},onClick=function(t,e){e.stop(),emitExecute(t)};return build$1({dom:{tag:"div",attributes:(i={role:"button"},i["aria-labelledby"]=n,i)},behaviours:derive$1([config("insert-table-picker-cell",[run(pt(),zo.focus),run(zt(),emitExecute),run(St(),onClick),run(Mt(),onClick)]),Ro.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),zo.config({onFocus:function(n){return emitWith(n,Fi,{row:t,col:e})}})])})},makeComponents=function(t){return bind(t,(function(t){return map(t,ye)}))},makeLabelText=function(t,e){return text(e+1+"x"+(t+1))};var hexColour=function(t){return{value:constant(t)}},Ui=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ji=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,isHexString=function(t){return Ui.test(t)||ji.test(t)},extractValues=function(t){var e=function(t){var e=t.value().replace(Ui,(function(t,e,n,i){return e+e+n+n+i+i}));return{value:constant(e)}}(t),n=ji.exec(e.value());return null===n?["FFFFFF","FF","FF","FF"]:n},toHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},fromRgba=function(t){var e=toHex(t.red())+toHex(t.green())+toHex(t.blue());return hexColour(e)},Wi=Math.min,qi=Math.max,$i=Math.round,Gi=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Xi=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,rgbaColour=function(t,e,n,i){return{red:constant(t),green:constant(e),blue:constant(n),alpha:constant(i)}},isRgbaComponent=function(t){var e=parseInt(t,10);return e.toString()===t&&e>=0&&e<=255},fromHsv=function(t){var e,n,i,a=(t.hue()||0)%360,u=t.saturation()/100,c=t.value()/100;if(u=qi(0,Wi(u,1)),c=qi(0,Wi(c,1)),0===u)return e=n=i=$i(255*c),rgbaColour(e,n,i,1);var s=a/60,l=c*u,f=l*(1-Math.abs(s%2-1)),d=c-l;switch(Math.floor(s)){case 0:e=l,n=f,i=0;break;case 1:e=f,n=l,i=0;break;case 2:e=0,n=l,i=f;break;case 3:e=0,n=f,i=l;break;case 4:e=f,n=0,i=l;break;case 5:e=l,n=0,i=f;break;default:e=n=i=0}return e=$i(255*(e+d)),n=$i(255*(n+d)),i=$i(255*(i+d)),rgbaColour(e,n,i,1)},fromHex=function(t){var e=extractValues(t),n=parseInt(e[1],16),i=parseInt(e[2],16),a=parseInt(e[3],16);return rgbaColour(n,i,a,1)},fromStringValues=function(t,e,n,i){var a=parseInt(t,10),u=parseInt(e,10),c=parseInt(n,10),s=parseFloat(i);return rgbaColour(a,u,c,s)},toString=function(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"},Ki=constant(rgbaColour(255,0,0,1)),Yi=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");var Ji="choiceitem",Zi=[{type:Ji,text:"Light Green",value:"#BFEDD2"},{type:Ji,text:"Light Yellow",value:"#FBEEB8"},{type:Ji,text:"Light Red",value:"#F8CAC6"},{type:Ji,text:"Light Purple",value:"#ECCAFA"},{type:Ji,text:"Light Blue",value:"#C2E0F4"},{type:Ji,text:"Green",value:"#2DC26B"},{type:Ji,text:"Yellow",value:"#F1C40F"},{type:Ji,text:"Red",value:"#E03E2D"},{type:Ji,text:"Purple",value:"#B96AD9"},{type:Ji,text:"Blue",value:"#3598DB"},{type:Ji,text:"Dark Turquoise",value:"#169179"},{type:Ji,text:"Orange",value:"#E67E23"},{type:Ji,text:"Dark Red",value:"#BA372A"},{type:Ji,text:"Dark Purple",value:"#843FA1"},{type:Ji,text:"Dark Blue",value:"#236FA1"},{type:Ji,text:"Light Gray",value:"#ECF0F1"},{type:Ji,text:"Medium Gray",value:"#CED4D9"},{type:Ji,text:"Gray",value:"#95A5A6"},{type:Ji,text:"Dark Gray",value:"#7E8C8D"},{type:Ji,text:"Navy Blue",value:"#34495E"},{type:Ji,text:"Black",value:"#000000"},{type:Ji,text:"White",value:"#ffffff"}],Qi=function ColorCache(t){void 0===t&&(t=10);var e,n=Yi.getItem("tinymce-custom-colors"),i=f(n)?JSON.parse(n):[],a=t-(e=i).length<0?e.slice(0,t):e,remove=function(t){a.splice(t,1)};return{add:function(e){(function(t,e){var n=rawIndexOf(t,e);return-1===n?s.none():s.some(n)})(a,e).each(remove),a.unshift(e),a.length>t&&a.pop(),Yi.setItem("tinymce-custom-colors",JSON.stringify(a))},state:function(){return a.slice(0)}}}(10),mapColors=function(t){var n=[],i=e.document.createElement("canvas");i.height=1,i.width=1;for(var a=i.getContext("2d"),byteAsHex=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},asHexColor=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();a.clearRect(0,0,i.width,i.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);var e=a.getImageData(0,0,1,1).data,n=e[0],u=e[1],c=e[2],s=e[3];return"#"+byteAsHex(n,s)+byteAsHex(u,s)+byteAsHex(c,s)},u=0;u<t.length;u+=2)n.push({text:t[u+1],value:asHexColor(t[u]),type:"choiceitem"});return n},getColorMap=function(t){return t.getParam("color_map")},Settings_getColorCols=function(t,e){return t.getParam("color_cols",e,"number")},Settings_hasCustomColors=function(t){return!1!==t.getParam("custom_colors")},Settings_getColors=function(t){var e=getColorMap(t);return void 0!==e?mapColors(e):Zi},Settings_getCurrentColors=function(){return map(Qi.state(),(function(t){return{type:Ji,text:t,value:t}}))},Settings_addColor=function(t){Qi.add(t)},Events_fireSkinLoaded=function(t){return t.fire("SkinLoaded")},Events_fireSkinLoadError=function(t,e){return t.fire("SkinLoadError",e)},Events_fireResizeEditor=function(t){return t.fire("ResizeEditor")},Events_fireScrollContent=function(t,e){return t.fire("ScrollContent",e)},Events_fireResizeContent=function(t,e){return t.fire("ResizeContent",e)},Events_fireTextColorChange=function(t,e){return t.fire("TextColorChange",e)},getCurrentColor=function(t,e){var n;return t.dom.getParents(t.selection.getStart(),(function(t){var i;(i=t.style["forecolor"===e?"color":"background-color"])&&(n=n||i)})),n},calcCols=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},getColorCols$1=function(t){var e=Settings_getColors(t),n=calcCols(e.length);return Settings_getColorCols(t,n)},applyColor=function(t,e,n,i){"custom"===n?colorPickerDialog(t)((function(n){n.each((function(n){Settings_addColor(n),t.execCommand("mceApplyTextcolor",e,n),i(n)}))}),"#000000"):"remove"===n?(i(""),t.execCommand("mceRemoveTextcolor",e)):(i(n),t.execCommand("mceApplyTextcolor",e,n))},getMenuColors=function(t,e){return t.concat(Settings_getCurrentColors().concat(function(t){var e={type:"choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[e,{type:"choiceitem",text:"Custom color",icon:"color-picker",value:"custom"}]:[e]}(e)))},getFetch=function(t,e){return function(n){n(getMenuColors(t,e))}},setIconColor=function(t,e,n){var i,a;i="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",a=n,t.setIconFill(i,a),t.setIconStroke(i,a)},registerTextColorButton=function(t,e,n,i,a){t.ui.registry.addSplitButton(e,{tooltip:i,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){return s.from(getCurrentColor(t,n)).bind((function(t){return function(t){if("transparent"===t)return s.some(rgbaColour(0,0,0,0));var e=Gi.exec(t);if(null!==e)return s.some(fromStringValues(e[1],e[2],e[3],"1"));var n=Xi.exec(t);return null!==n?s.some(fromStringValues(n[1],n[2],n[3],n[4])):s.none()}(t).map((function(t){var n=fromRgba(t).value();return contains$1(e.toLowerCase(),n)}))})).getOr(!1)},columns:getColorCols$1(t),fetch:getFetch(Settings_getColors(t),Settings_hasCustomColors(t)),onAction:function(e){null!==a.get()&&applyColor(t,n,a.get(),(function(){}))},onItemAction:function(i,u){applyColor(t,n,u,(function(n){a.set(n),Events_fireTextColorChange(t,{name:e,color:n})}))},onSetup:function(n){null!==a.get()&&setIconColor(n,e,a.get());var handler=function(t){t.name===e&&setIconColor(n,t.name,t.color)};return t.on("TextColorChange",handler),function(){t.off("TextColorChange",handler)}}})},registerTextColorMenuItem=function(t,e,n,i){t.ui.registry.addNestedMenuItem(e,{text:i,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){applyColor(t,n,e.value,noop)}}]}})},colorPickerDialog=function(t){return function(e,n){var i={colorpicker:n},a=function(t){return function(e){var n=e.getData();t(s.from(n.colorpicker)),e.close()}}(e);t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:a,onClose:function(){},onCancel:function(){e(s.none())}})}},ta={register:function(t){!function(t){t.addCommand("mceApplyTextcolor",(function(e,n){!function(t,e,n){t.undoManager.transact((function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()}))}(t,e,n)})),t.addCommand("mceRemoveTextcolor",(function(e){!function(t,e){t.undoManager.transact((function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()}))}(t,e)}))}(t);var e=Cell(null),n=Cell(null);registerTextColorButton(t,"forecolor","forecolor","Text color",e),registerTextColorButton(t,"backcolor","hilitecolor","Background color",n),registerTextColorMenuItem(t,"forecolor","forecolor","Text color"),registerTextColorMenuItem(t,"backcolor","hilitecolor","Background color")},getColors:getMenuColors,getFetch:getFetch,colorPickerDialog:colorPickerDialog,getCurrentColor:getCurrentColor,getColorCols:getColorCols$1,calcCols:calcCols},forMenu=function(t){return"color"===t?"tox-swatches":"tox-menu"},classes=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:forMenu(t),tieredMenu:"tox-tiered-menu"}},markers$1=function(t){var e=classes(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:classForPreset(t)}},dom$1=function(t,e,n){var i=classes(n);return{tag:"div",classes:flatten([[i.menu,"tox-menu-"+e+"-column"],t?[i.hasIcons]:[]])}},ea=[$o.parts().items({})],part=function(t,e,n){var i=classes(n);return{dom:{tag:"div",classes:flatten([[i.tieredMenu]])},markers:markers$1(n)}},chunk$1=function(t,e){return function(n){var i=chunk(n,e);return map(i,(function(e){return{dom:t,components:e}}))}},preprocessCollection=function(t,e){var n=[],i=[];return each(t,(function(t,a){e(t,a)?(i.length>0&&n.push(i),i=[],has(t.dom,"innerHtml")&&i.push(t)):i.push(t)})),i.length>0&&n.push(i),map(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},forCollection=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[$o.parts().items({preprocess:function(n){return"auto"!==t&&t>1?chunk$1({tag:"div",classes:["tox-collection__group"]},t)(n):preprocessCollection(n,(function(t,n){return"separator"===e[n].type}))}})]}},hasIcon=function(t){return void 0!==t.icon||"togglemenuitem"===t.type||"choicemenuitem"===t.type},handleError=function(t){return e.console.error(formatError(t)),e.console.log(t),s.none()},createHorizontalPartialMenuWithAlloyItems=function(t,e,n,i,a){var u,c=(u=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[$o.parts().items({preprocess:function(t){return preprocessCollection(t,(function(t,e){return"separator"===u[e].type}))}})]});return{value:t,dom:c.dom,components:c.components,items:n}},createPartialMenuWithAlloyItems=function(t,e,n,i,a){var u;return"color"===a?{value:t,dom:(u=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[$o.parts().items({preprocess:"auto"!==t?chunk$1({tag:"div",classes:["tox-swatches__row"]},t):identity})]}]}}(i)).dom,components:u.components,items:n}:"normal"===a&&"auto"===i?{value:t,dom:(u=forCollection(i,n)).dom,components:u.components,items:n}:"normal"===a&&1===i?{value:t,dom:(u=forCollection(1,n)).dom,components:u.components,items:n}:"normal"===a?{value:t,dom:(u=forCollection(i,n)).dom,components:u.components,items:n}:"listpreview"===a&&"auto"!==i?{value:t,dom:(u=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[$o.parts().items({preprocess:chunk$1({tag:"div",classes:["tox-collection__group"]},t)})]}}(i)).dom,components:u.components,items:n}:{value:t,dom:dom$1(e,i,a),components:ea,items:n}},createPartialChoiceMenu=function(t,e,n,i,a,u,c,s){var l=exists(e,hasIcon),f=createChoiceItems(e,n,i,"color"!==a?"normal":"color",u,c,s);return createPartialMenuWithAlloyItems(t,l,f,i,a)},createChoiceItems=function(t,e,n,i,a,u,c){return cat(map(t,(function(t){return"choiceitem"===t.type?(l=t,asRaw("choicemenuitem",gi,l)).fold(handleError,(function(l){return s.some(function(t,e,n,i,a,u,c){var l=renderItemStructure({presets:n,textContent:e?t.text:s.none(),htmlContent:s.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:s.none(),checkMark:e?s.some(renderCheckmark(c.icons)):s.none(),caret:s.none(),value:t.value},c,!0);return k(renderCommonItem({data:buildData(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ro.set(t,e)},isActive:function(){return Ro.isOn(t)},isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},onAction:function(e){return i(t.value)},onSetup:function(t){return t.setActive(a),function(){}},triggersSubmenu:!1,itemBehaviours:[]},l,u),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:t.active}})}(l,1===n,i,e,u(t.value),a,c))})):s.none();var l})))},deriveMenuMovement=function(t,e){var n=markers$1(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}};var na,ra={inserttable:function renderInsertTableMenuItem(t){var e=generate$1("size-label"),n=function(t,e,n){for(var i=[],a=0;a<e;a++){for(var u=[],c=0;c<n;c++)u.push(makeCell(a,c,t));i.push(u)}return i}(e,10,10),i=record({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[text("0x0")],behaviours:derive$1([Oo.config({})])});return{type:"widget",data:{value:generate$1("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Li().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:makeComponents(n).concat(i.asSpec()),behaviours:derive$1([config("insert-table-picker",[runWithTarget(Fi,(function(t,e,a){var u=a.event().row(),c=a.event().col();!function(t,e,n,i,a){for(var u=0;u<i;u++)for(var c=0;c<a;c++)Ro.set(t[u][c],u<=e&&c<=n)}(n,u,c,10,10),Oo.set(i.get(t),[makeLabelText(u,c)])})),runWithTarget(Vi,(function(e,n,i){t.onAction({numRows:i.event().row()+1,numColumns:i.event().col()+1}),emit(e,Rt())}))]),To.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function renderColorSwatchItem(t,e){var n=ta.getColors(e.colorinput.getColors(),e.colorinput.hasCustomColors()),i=e.colorinput.getColorCols(),a=createPartialChoiceMenu(generate$1("menu-value"),n,(function(e){t.onAction({value:e})}),i,"color",Ii.CLOSE_ON_EXECUTE,(function(){return!1}),e.shared.providers),u=__assign(__assign({},a),{markers:markers$1("color"),movement:deriveMenuMovement(i,"color")});return{type:"widget",data:{value:generate$1("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Li().widget($o.sketch(u))]}}},autocomplete=function(t,e,n,i,a,u,c,l){void 0===l&&(l=!0);var f=renderItemStructure({presets:i,textContent:s.none(),htmlContent:n?t.text.map((function(t){return replaceText(t,e)})):s.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s.none(),checkMark:s.none(),caret:s.none(),value:t.value},c.providers,l,t.icon);return renderCommonItem({data:buildData(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(e){return a(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:tooltipBehaviour(t.meta,c)},f,u)},separator=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:__assign({tag:"div",classes:[Ei,"tox-collection__group-heading"]},e),components:[]}},normal=function(t,e,n,i){void 0===i&&(i=!0);var a=renderItemStructure({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:s.none(),ariaLabel:t.text,caret:s.none(),checkMark:s.none(),shortcutContent:t.shortcut},n,i);return renderCommonItem({data:buildData(t),getApi:function(t){return{isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,e)},nested=function(t,e,n,i,a){void 0===i&&(i=!0),void 0===a&&(a=!1);var u,c=a?(u=n.icons,{dom:{tag:"div",classes:["tox-collection__item-caret"],innerHtml:get$d("chevron-down",u)}}):function(t){return{dom:{tag:"div",classes:["tox-collection__item-caret"],innerHtml:get$d("chevron-right",t)}}}(n.icons),l=renderItemStructure({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:s.none(),ariaLabel:t.text,caret:s.some(c),checkMark:s.none(),shortcutContent:t.shortcut},n,i);return renderCommonItem({data:buildData(t),getApi:function(t){return{isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},disabled:t.disabled,onAction:noop,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},l,e)},toggle$1=function(t,e,n){var i=renderItemStructure({iconContent:s.none(),textContent:t.text,htmlContent:s.none(),ariaLabel:t.text,checkMark:s.some(renderCheckmark(n.icons)),caret:s.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,!0);return k(renderCommonItem({data:buildData(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ro.set(t,e)},isActive:function(){return Ro.isOn(t)},isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,e),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:t.active}})},fancy=function(t,e){return(n=ra,i=t.fancytype,Object.prototype.hasOwnProperty.call(n,i)?s.some(n[i]):s.none()).map((function(n){return n(t,e)}));var n,i};!function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"}(na||(na={}));var hasIcon$1=function(t){return void 0!==t.icon||"togglemenuitem"===t.type||"choicemenuitem"===t.type},menuHasIcons$1=function(t){return exists(t,hasIcon$1)},createMenuItemFromBridge=function(t,n,i,a,u){var c,l=i.shared.providers,parseForHorizontalMenu=function(t){return u?__assign(__assign({},t),{shortcut:s.none(),icon:t.text.isSome()?s.none():t.icon}):t};switch(t.type){case"menuitem":return(c=t,asRaw("menuitem",fi,c)).fold(handleError,(function(t){return s.some(normal(parseForHorizontalMenu(t),n,l,a))}));case"nestedmenuitem":return function(t){return asRaw("nestedmenuitem",di,t)}(t).fold(handleError,(function(t){return s.some(nested(parseForHorizontalMenu(t),n,l,a,u))}));case"togglemenuitem":return function(t){return asRaw("togglemenuitem",mi,t)}(t).fold(handleError,(function(t){return s.some(toggle$1(parseForHorizontalMenu(t),n,l))}));case"separator":return function(t){return asRaw("separatormenuitem",ui,t)}(t).fold(handleError,(function(t){return s.some(separator(t))}));case"fancymenuitem":return function(t){return asRaw("fancymenuitem",hi,t)}(t).fold(handleError,(function(t){return fancy(parseForHorizontalMenu(t),i)}));default:return e.console.error("Unknown item in general menu",t),s.none()}},createAutocompleteItems=function(t,e,n,i,a,u){var c=1===i,l=!c||menuHasIcons$1(t);return cat(map(t,(function(t){return"separator"===t.type?(i=t,asRaw("Autocompleter.Separator",ui,i)).fold(handleError,(function(t){return s.some(separator(t))})):function(t){return asRaw("Autocompleter.Item",ci,t)}(t).fold(handleError,(function(t){return s.some(autocomplete(t,e,c,"normal",n,a,u,l))}));var i})))},createPartialMenu=function(t,e,n,i,a){var u=menuHasIcons$1(e),c=cat(map(e,(function(t){var createItem=function(t){return createMenuItemFromBridge(t,n,i,function(t){return a?!t.hasOwnProperty("text"):u}(t),a)};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?createItem(__assign(__assign({},t),{disabled:!0})):createItem(t)})));return(a?createHorizontalPartialMenuWithAlloyItems:createPartialMenuWithAlloyItems)(t,u,c,1,"normal")},createTieredDataFrom=function(t){return Ko.singleData(t.value,t)},Autocompleter_register=function(t,n){var i=Cell(s.none()),a=Cell(!1),u=build$1(Yo.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:derive$1([config("dismissAutocompleter",[run(Wt(),(function(){return cancelIfNecessary()}))])]),lazySink:n.getSink})),isActive=function(){return i.get().isSome()},hideIfNecessary=function(){isActive()&&Yo.hide(u)},cancelIfNecessary=function(){if(isActive()){var e=i.get().map((function(t){return t.element}));detect$4(e.getOr($.fromDom(t.selection.getNode()))).each(unwrap),hideIfNecessary(),i.set(s.none()),a.set(!1)}},c=cached((function(){return register(t)})),display=function(e,n,i,a){e.matchLength=n.text.length;var c=findMap(i,(function(t){return s.from(t.columns)})).getOr(1);Yo.showAt(u,{anchor:"node",root:$.fromDom(t.getBody()),node:s.from(e.element)},$o.sketch(function(t,e,n,i){var a=n===na.ContentFocus?highlights():dom(),u=deriveMenuMovement(e,i),c=markers$1(i);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:c.selectedItem,item:c.item},movement:u,fakeFocus:n===na.ContentFocus,focusManager:a,menuBehaviours:SimpleBehaviours_unnamedEvents("auto"!==e?[]:[Zt((function(t,e){detectSize(t,4,c.item).each((function(e){var n=e.numColumns,i=e.numRows;To.setGridSize(t,i,n)}))}))])}}(createPartialMenuWithAlloyItems("autocompleter-value",!0,a,c,"normal"),c,na.ContentFocus,"normal"))),Yo.getContent(u).each(zr.highlightFirst)},load=function(u){(function(e){return i.get().map((function(n){return getContext(t.dom,t.selection.getRng(),n.triggerChar).bind((function(n){return lookupWithContext(t,c,n,e)}))})).getOrThunk((function(){return lookup(t,c)}))})(u).fold(cancelIfNecessary,(function(u){!function(e){if(!isActive()){var n=create$4(t,e.range);i.set(s.some({triggerChar:e.triggerChar,element:n,matchLength:e.text.length})),a.set(!1)}}(u.context),u.lookupData.then((function(c){i.get().map((function(i){var l,f,d,m=u.context;if(i.triggerChar===m.triggerChar){var g=(l=m.triggerChar,d=findMap(f=c,(function(t){return s.from(t.columns)})).getOr(1),bind(f,(function(i){var u=i.items;return createAutocompleteItems(u,i.matchText,(function(n,u){var c=t.selection.getRng();getContext(t.dom,c,l).fold((function(){return e.console.error("Lost context. Cursor probably moved")}),(function(t){var e=t.range,c={hide:function(){cancelIfNecessary()},reload:function(t){hideIfNecessary(),load(t)}};a.set(!0),i.onAction(c,e,n,u),a.set(!1)}))}),d,Ii.BUBBLE_TO_SANDBOX,n)})));g.length>0?display(i,m,c,g):m.text.length-i.matchLength>=10?cancelIfNecessary():hideIfNecessary()}}))}))}))},l={onKeypress:last$2((function(t){27!==t.which&&load()}),50),cancelIfNecessary:cancelIfNecessary,isMenuOpen:function(){return Yo.isOpen(u)},isActive:isActive,isProcessingAction:a.get,getView:function(){return Yo.getContent(u)}};AutocompleterEditorEvents_setup(l,t)},oa=constant(!0),bind$3=function(t,e,n){return function(t,e,n,i){return binder(t,e,n,i,!1)}(t,e,oa,n)},capture$1=function(t,e,n){return function(t,e,n,i){return binder(t,e,n,i,!0)}(t,e,oa,n)},ia=fromRawEvent,closest$4=function(t,e,n){return closest$3(t,e,n).isSome()};function DelayedFunction(t,n){var i=null;return{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},schedule:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];i=e.setTimeout((function(){t.apply(null,a),i=null}),n)}}}var getTouch=function(t){var e=t.raw();return void 0===e.touches||1!==e.touches.length?s.none():s.some(e.touches[0])},monitor=function(t){var e=Cell(s.none()),n=Cell(!1),i=DelayedFunction((function(e){t.triggerEvent(Bt(),e),n.set(!0)}),400),a=wrapAll$1([{key:ct(),value:function(t){return getTouch(t).each((function(a){i.cancel();var u={x:constant(a.clientX),y:constant(a.clientY),target:t.target};i.schedule(t),n.set(!1),e.set(s.some(u))})),s.none()}},{key:st(),value:function(t){return i.cancel(),getTouch(t).each((function(t){e.get().each((function(n){(function(t,e){var n=Math.abs(t.clientX-e.x()),i=Math.abs(t.clientY-e.y());return n>5||i>5})(t,n)&&e.set(s.none())}))})),s.none()}},{key:lt(),value:function(a){i.cancel();return e.get().filter((function(t){return eq(t.target(),a.target())})).map((function(e){return n.get()?(a.prevent(),!1):t.triggerEvent(Mt(),a)}))}}]);return{fireIfReady:function(t,e){return get(a,e).bind((function(e){return e(t)}))}}},aa=detect$3().browser.isFirefox(),ua=objOfOnly([strictFunction("triggerEvent"),defaulted$1("stopBackspace",!0)]),setup$1=function(t,n){var i=asRawOrDie("Getting GUI events settings",ua,n),a=monitor(i),u=map(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return bind$3(t,e,(function(t){a.fireIfReady(t,e).each((function(e){e&&t.kill()})),i.triggerEvent(e,t)&&t.kill()}))})),c=Cell(s.none()),l=bind$3(t,"paste",(function(t){a.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),i.triggerEvent("paste",t)&&t.kill(),c.set(s.some(e.setTimeout((function(){i.triggerEvent(Nt(),t)}),0)))})),f=bind$3(t,"keydown",(function(t){i.triggerEvent("keydown",t)?t.kill():!0===i.stopBackspace&&function(t){return 8===t.raw().which&&!contains(["input","textarea"],re(t.target()))&&!closest$4(t.target(),'[contenteditable="true"]')}(t)&&t.prevent()})),d=function(t,e){return aa?capture$1(t,"focus",e):bind$3(t,"focusin",e)}(t,(function(t){i.triggerEvent("focusin",t)&&t.kill()})),m=Cell(s.none()),g=function(t,e){return aa?capture$1(t,"blur",e):bind$3(t,"focusout",e)}(t,(function(t){i.triggerEvent("focusout",t)&&t.kill(),m.set(s.some(e.setTimeout((function(){i.triggerEvent(_t(),t)}),0)))}));return{unbind:function(){each(u,(function(t){t.unbind()})),f.unbind(),d.unbind(),g.unbind(),l.unbind(),c.get().each(e.clearTimeout),m.get().each(e.clearTimeout)}}},derive$2=function(t,e){var n=get(t,"target").map((function(t){return t()})).getOr(e);return Cell(n)},ca=Adt_generate([{stopped:[]},{resume:["element"]},{complete:[]}]),doTriggerHandler=function(t,e,n,i,a,u){var c=t(e,i),s=function(t,e){var n=Cell(!1),i=Cell(!1);return{stop:function(){n.set(!0)},cut:function(){i.set(!0)},isStopped:n.get,isCut:i.get,event:constant(t),setSource:e.set,getSource:e.get}}(n,a);return c.fold((function(){return u.logEventNoHandlers(e,i),ca.complete()}),(function(t){var n=t.descHandler();return getCurried(n)(s),s.isStopped()?(u.logEventStopped(e,t.element(),n.purpose()),ca.stopped()):s.isCut()?(u.logEventCut(e,t.element(),n.purpose()),ca.complete()):parent(t.element()).fold((function(){return u.logNoParent(e,t.element(),n.purpose()),ca.complete()}),(function(i){return u.logEventResponse(e,t.element(),n.purpose()),ca.resume(i)}))}))},doTriggerOnUntilStopped=function(t,e,n,i,a,u){return doTriggerHandler(t,e,n,i,a,u).fold((function(){return!0}),(function(i){return doTriggerOnUntilStopped(t,e,n,i,a,u)}),(function(){return!1}))},broadcast=function(t,e,n){var i=function(t){var e=Cell(!1);return{stop:function(){e.set(!0)},cut:noop,isStopped:e.get,isCut:constant(!1),event:constant(t),setSource:die("Cannot set source of a broadcasted event"),getSource:die("Cannot get source of a broadcasted event")}}(e);return each(t,(function(t){var e=t.descHandler();getCurried(e)(i)})),i.isStopped()},triggerOnUntilStopped=function(t,e,n,i,a){var u=derive$2(n,i);return doTriggerOnUntilStopped(t,e,n,i,u,a)},sa=Immutable("element","descHandler");function EventRegistry(){var t={};return{registerId:function(e,n,i){each$1(i,(function(i,a){var u=void 0!==t[a]?t[a]:{};u[n]=curryArgs(i,e),t[a]=u}))},unregisterId:function(e){each$1(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return get(t,e).map((function(t){return mapToArray(t,(function(t,e){return function(t,e){return{id:constant(t),descHandler:constant(e)}}(e,t)}))})).getOr([])},find:function(e,n,i){var a=get(t,n);return closest(i,(function(t){return function(t,e){return read$1(e).fold((function(){return s.none()}),(function(n){return t.bind((function(t){return get(t,n)})).map((function(t){return sa(e,t)}))}))}(a,t)}),e)}}}function Registry(){var t=EventRegistry(),e={},readOrTag=function(t){var e=t.element();return read$1(e).fold((function(){return function(t,e){var n=generate$1(fe+t);return writeOnly(e,n),n}("uid-",t.element())}),(function(t){return t}))},unregister=function(n){read$1(n.element()).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,i){return t.find(e,n,i)},filter:function(e){return t.filterByType(e)},register:function(n){var i=readOrTag(n);hasNonNullableKey(e,i)&&function(t,n){var i=e[n];if(i!==t)throw new Error('The tagId "'+n+'" is already used by: '+element(i.element())+"\nCannot use it for: "+element(t.element())+"\nThe conflicting element is"+(inBody(i.element())?" ":" not ")+"already in the DOM");unregister(t)}(n,i);var a=[n];t.registerId(a,i,n.events()),e[i]=n},unregister:unregister,getById:function(t){return get(e,t)}}}var la=single$2({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,i=__rest(e,["attributes"]);return{uid:t.uid,dom:__assign({tag:"div",attributes:__assign({role:"presentation"},n)},i),components:t.components,behaviours:get$c(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[defaulted$1("components",[]),field$1("containerBehaviours",[]),defaulted$1("events",{}),defaulted$1("domModification",{}),defaulted$1("eventOrder",{})]}),takeover=function(t){var isAboveRoot=function(e){return parent(t.element()).fold((function(){return!0}),(function(t){return eq(e,t)}))},e=Registry(),lookup=function(t,n){return e.find(isAboveRoot,t,n)},n=setup$1(t.element(),{triggerEvent:function(t,e){return monitorEvent(t,e.target(),(function(n){return function(t,e,n,i){var a=n.target();return triggerOnUntilStopped(t,e,n,a,i)}(lookup,t,e,n)}))}}),i={debugInfo:constant("real"),triggerEvent:function(t,e,n){monitorEvent(t,e,(function(i){return triggerOnUntilStopped(lookup,t,n,e,i)}))},triggerFocus:function(t,e){read$1(t).fold((function(){focus$1(t)}),(function(n){monitorEvent(Ot(),t,(function(n){return function(t,e,n,i,a){var u=derive$2(n,i);doTriggerHandler(t,e,n,i,u,a)}(lookup,Ot(),{originator:constant(e),kill:noop,prevent:noop,target:constant(t)},t,n),!1}))}))},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element(),e.event())},getByUid:function(t){return getByUid(t)},getByDom:function(t){return getByDom(t)},build:build$1,addToGui:function(t){add(t)},removeFromGui:function(t){remove$1(t)},addToWorld:function(t){addToWorld(t)},removeFromWorld:function(t){removeFromWorld(t)},broadcast:function(t){broadcast$1(t)},broadcastOn:function(t,e){broadcastOn(t,e)},broadcastEvent:function(t,e){broadcastEvent(t,e)},isConnected:constant(!0)},addToWorld=function(t){t.connect(i),ie(t.element())||(e.register(t),each(t.components(),addToWorld),i.triggerEvent(It(),t.element(),{target:constant(t.element())}))},removeFromWorld=function(t){ie(t.element())||(each(t.components(),removeFromWorld),e.unregister(t)),t.disconnect()},add=function(e){attach$1(t,e)},remove$1=function(t){detach(t)},broadcastData=function(t){var n=e.filter(At());each(n,(function(e){var n=e.descHandler();getCurried(n)(t)}))},broadcast$1=function(t){broadcastData({universal:constant(!0),data:constant(t)})},broadcastOn=function(t,e){broadcastData({universal:constant(!1),channels:constant(t),data:constant(e)})},broadcastEvent=function(t,n){var i=e.filter(t);return broadcast(i,n)},getByUid=function(t){return e.getById(t).fold((function(){return l.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),l.value)},getByDom=function(t){var e=read$1(t).getOr("not found");return getByUid(e)};return addToWorld(t),{root:constant(t),element:t.element,destroy:function(){n.unbind(),remove(t.element())},add:add,remove:remove$1,getByUid:getByUid,getByDom:getByDom,addToWorld:addToWorld,removeFromWorld:removeFromWorld,broadcast:broadcast$1,broadcastOn:broadcastOn,broadcastEvent:broadcastEvent}},fa=generate$1("form-component-change"),da=generate$1("form-close"),ma=generate$1("form-cancel"),ga=generate$1("form-action"),ha=generate$1("form-submit"),pa=generate$1("form-block"),va=generate$1("form-unblock"),ba=generate$1("form-tabchange"),ya=generate$1("form-resize"),xa=constant([defaulted$1("prefix","form-field"),field$1("fieldBehaviours",[_r,Jn])]),wa=constant([br({schema:[strict$1("dom")],name:"label"}),br({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[strict$1("text")],name:"aria-descriptor"}),pr({factory:{sketch:function(t){var e=M(t,["factory"]);return t.factory.sketch(e)}},schema:[strict$1("factory")],name:"field"})]),Ca=composite$1({name:"FormField",configFields:xa(),partFields:wa(),factory:function(t,e,n,i){var a=augment(t.fieldBehaviours,[_r.config({find:function(e){return getPart(e,t,"field")}}),Jn.config({store:{mode:"manual",getValue:function(t){return _r.getCurrent(t).bind(Jn.getValue)},setValue:function(t,e){_r.getCurrent(t).each((function(t){Jn.setValue(t,e)}))}}})]),u=derive([Zt((function(e,n){var i=getParts(e,t,["label","field","aria-descriptor"]);i.field().each((function(e){var n=generate$1(t.prefix);i.label().each((function(t){set$1(t.element(),"for",n),set$1(e.element(),"id",n)})),i["aria-descriptor"]().each((function(n){var i=generate$1(t.prefix);set$1(n.element(),"id",i),set$1(e.element(),"aria-describedby",i)}))}))}))]),c={getField:function(e){return getPart(e,t,"field")},getLabel:function(e){return getPart(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:a,events:u,apis:c}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Sa=constant([option("data"),defaulted$1("inputAttributes",{}),defaulted$1("inputStyles",{}),defaulted$1("tag","input"),defaulted$1("inputClasses",[]),onHandler("onSetValue"),defaulted$1("styles",{}),defaulted$1("eventOrder",{}),field$1("inputBehaviours",[Jn,zo]),defaulted$1("selectOnFocus",!0)]),focusBehaviours=function(t){return derive$1([zo.config({onFocus:t.selectOnFocus?function(t){var e=t.element(),n=get$5(e);e.dom().setSelectionRange(0,n.length)}:noop})])},behaviours=function(t){return __assign(__assign({},focusBehaviours(t)),augment(t.inputBehaviours,[Jn.config({store:__assign(__assign({mode:"manual"},t.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return get$5(t.element())},setValue:function(t,e){get$5(t.element())!==e&&set$3(t.element(),e)}}),onSetValue:t.onSetValue})]))},dom$2=function(t){return{tag:t.tag,attributes:__assign({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},ka=single$2({name:"Input",configFields:Sa(),factory:function(t,e){return{uid:t.uid,dom:dom$2(t),components:[],behaviours:behaviours(t),eventOrder:t.eventOrder}}}),Ea={},Ta={exports:Ea};!function(e,n,i,a){!function(a){if("object"==typeof n&&void 0!==i)i.exports=a();else if("function"==typeof e&&e.amd)e([],a);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=a()}}((function(){return function r(t,e,n){function o(u,c){if(!e[u]){if(!t[u]){var s="function"==typeof a&&a;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[u]={exports:{}};t[u][0].call(f.exports,(function(e){return o(t[u][1][e]||e)}),f,f.exports,r,t,e,n)}return e[u].exports}for(var i="function"==typeof a&&a,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,e,n){var i,a,u=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(i===setTimeout)return setTimeout(t,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){i=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var c,s=[],l=!1,f=-1;function cleanUpNextTick(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&drainQueue())}function drainQueue(){if(!l){var t=runTimeout(cleanUpNextTick);l=!0;for(var e=s.length;e;){for(c=s,s=[];++f<e;)c&&c[f].run();f=-1,e=s.length}c=null,l=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new Item(t,e)),1!==s.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=noop,u.addListener=noop,u.once=noop,u.off=noop,u.removeListener=noop,u.removeAllListeners=noop,u.emit=noop,u.prependListener=noop,u.prependOnceListener=noop,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){!function(n){var i=setTimeout;function noop(){}function Promise(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(t,this)}function handle(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Promise._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void reject(e.promise,t)}resolve(e.promise,i)}else(1===t._state?resolve:reject)(e.promise,t._value)}))):t._deferreds.push(e)}function resolve(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Promise)return t._state=3,t._value=e,void finale(t);if("function"==typeof n)return void doResolve(function bind(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,finale(t)}catch(e){reject(t,e)}}function reject(t,e){t._state=2,t._value=e,finale(t)}function finale(t){2===t._state&&0===t._deferreds.length&&Promise._immediateFn((function(){t._handled||Promise._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)handle(t,t._deferreds[e]);t._deferreds=null}function Handler(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function doResolve(t,e){var n=!1;try{t((function(t){n||(n=!0,resolve(e,t))}),(function(t){n||(n=!0,reject(e,t))}))}catch(t){if(n)return;n=!0,reject(e,t)}}Promise.prototype.catch=function(t){return this.then(null,t)},Promise.prototype.then=function(t,e){var n=new this.constructor(noop);return handle(this,new Handler(t,e,n)),n},Promise.all=function(t){var e=Array.prototype.slice.call(t);return new Promise((function(t,n){if(0===e.length)return t([]);var i=e.length;function res(a,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){res(a,t)}),n)}e[a]=u,0==--i&&t(e)}catch(t){n(t)}}for(var a=0;a<e.length;a++)res(a,e[a])}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise?t:new Promise((function(e){e(t)}))},Promise.reject=function(t){return new Promise((function(e,n){n(t)}))},Promise.race=function(t){return new Promise((function(e,n){for(var i=0,a=t.length;i<a;i++)t[i].then(e,n)}))},Promise._immediateFn="function"==typeof t?function(e){t(e)}:function(t){i(t,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},Promise._setImmediateFn=function _setImmediateFn(t){Promise._immediateFn=t},Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(t){Promise._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=Promise:n.Promise||(n.Promise=Promise)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,i){var a=t("process/browser.js").nextTick,u=Function.prototype.apply,c=Array.prototype.slice,s={},l=0;function Timeout(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new Timeout(u.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new Timeout(u.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=l++,i=!(arguments.length<2)&&c.call(arguments,1);return s[e]=!0,a((function onNextTick(){s[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof i?i:function(t){delete s[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var i=t("promise-polyfill"),a="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:a.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,Ea,Ta,void 0);var Oa,_a=Ta.exports.boltExport,nu$a=function(t){var n=s.none(),i=[],get=function(t){isReady()?call(t):i.push(t)},isReady=function(){return n.isSome()},run=function(t){each(t,call)},call=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(t){n=s.some(t),run(i),i=[]})),{get:get,map:function(t){return nu$a((function(e){get((function(n){e(t(n))}))}))},isReady:isReady}},Na={nu:nu$a,pure:function(t){return nu$a((function(e){e(t)}))}},errorReporter=function(t){e.setTimeout((function(){throw t}),0)},make$3=function(t){var get=function(e){t().then(e,errorReporter)};return{map:function(e){return make$3((function(){return t().then(e)}))},bind:function(e){return make$3((function(){return t().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return make$3((function(){return t().then((function(){return e.toPromise()}))}))},toLazy:function(){return Na.nu(get)},toCached:function(){var e=null;return make$3((function(){return null===e&&(e=t()),e}))},toPromise:t,get:get}},Future_nu=function(t){return make$3((function(){return new _a(t)}))},Future_pure=function(t){return make$3((function(){return _a.resolve(t)}))},Aa=["input","textarea"],isAriaElement=function(t){var e=re(t);return contains(Aa,e)},markValid=function(t,e){var n=e.getRoot(t).getOr(t.element());remove$4(n,e.invalidClass),e.notify.each((function(e){isAriaElement(t.element())&&set$1(t.element(),"aria-invalid",!1),e.getContainer(t).each((function(t){set(t,e.validHtml)})),e.onValid(t)}))},markInvalid=function(t,e,n,i){var a=e.getRoot(t).getOr(t.element());add$2(a,e.invalidClass),e.notify.each((function(e){isAriaElement(t.element())&&set$1(t.element(),"aria-invalid",!0),e.getContainer(t).each((function(t){set(t,i)})),e.onInvalid(t,i)}))},query=function(t,e,n){return e.validator.fold((function(){return Future_pure(l.value(!0))}),(function(e){return e.validate(t)}))},run$1=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),query(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return markInvalid(t,e,0,n),l.error(n)}),(function(n){return markValid(t,e),l.value(n)})):l.error("No longer in system")}))},za=Object.freeze({__proto__:null,markValid:markValid,markInvalid:markInvalid,query:query,run:run$1,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element());return has$2(n,e.invalidClass)}}),Da=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return derive([run(e.onEvent,(function(e){run$1(e,t).get(identity)}))].concat(e.validateOnLoad?[Zt((function(e){run$1(e,t).get(noop)}))]:[]))})).getOr({})}}),Ma=[strict$1("invalidClass"),defaulted$1("getRoot",s.none),optionObjOf("notify",[defaulted$1("aria","alert"),defaulted$1("getContainer",s.none),defaulted$1("validHtml",""),onHandler("onValid"),onHandler("onInvalid"),onHandler("onValidate")]),optionObjOf("validator",[strict$1("validate"),defaulted$1("onEvent","input"),defaulted$1("validateOnLoad",!0)])],Ba=create$1({fields:Ma,name:"invalidating",active:Da,apis:za,extra:{validation:function(t){return function(e){var n=Jn.getValue(e);return Future_pure(t(n))}}}}),Ra=Object.freeze({__proto__:null,exhibit:function(t,e){return nu$6({attributes:wrapAll$1([{key:e.tabAttr,value:"true"}])})}}),Pa=[defaulted$1("tabAttr","data-alloy-tabstop")],Ia=create$1({fields:Pa,name:"tabstopping",active:Ra}),renderFormFieldWith=function(t,e,n,i){var a=renderFormFieldSpecWith(t,e,n,i);return Ca.sketch(a)},renderFormFieldSpecWith=function(t,e,n,i){return{dom:renderFormFieldDomWith(n),components:t.toArray().concat([e]),fieldBehaviours:derive$1(i)}},renderFormFieldDomWith=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},renderLabel=function(t,e){return Ca.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},Ha=Object.freeze({__proto__:null,getCoupled:function(t,e,n,i){return n.getOrCreate(t,e,i)}}),La=[strictOf("others",setOf$1(l.value,F()))],Fa=create$1({fields:La,name:"coupling",apis:Ha,state:Object.freeze({__proto__:null,init:function(){var t={},e=constant({});return nu$5({readState:e,getOrCreate:function(e,n,i){var a=w(n.others);if(a)return get(t,i).getOrThunk((function(){var a=get(n.others,i).getOrDie("No information found for coupled component: "+i)(e),u=e.getSystem().build(a);return t[i]=u,u}));throw new Error("Cannot find coupled component: "+i+". Known coupled components: "+JSON.stringify(a,null,2))}})}})}),Va=constant("sink"),Ua=constant(br({name:Va(),overrides:constant({dom:{tag:"div"},behaviours:derive$1([Bn.config({useFixed:i})]),events:derive([cutter(yt()),cutter(dt()),cutter(St())])})}));!function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"}(Oa||(Oa={}));var getAnchor=function(t,e){var n=t.getHotspot(e).getOr(e),i=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:"hotspot",hotspot:n,overrides:i}}),(function(t){return{anchor:"hotspot",hotspot:n,overrides:i,layouts:t}}))},open$1=function(t,e,n,i,a,u,c){return function(t,e,n,i,a,u,c){var l=function(t,e,n){return(0,t.fetch)(n).map(e)}(t,e,i),f=getSink(i,t);return l.map((function(t){return t.bind((function(t){return s.from(Ko.sketch(__assign(__assign({},u.menu()),{uid:generate$2(""),data:t,highlightImmediately:c===Oa.HighlightFirst,onOpenMenu:function(t,e){var i=f().getOrDie();Bn.position(i,n,e),Hn.decloak(a)},onOpenSubmenu:function(t,e,n){var i=f().getOrDie();Bn.position(i,{anchor:"submenu",item:e},n),Hn.decloak(a)},onRepositionMenu:function(t,e,i){var a=f().getOrDie();Bn.position(a,n,e),each(i,(function(t){Bn.position(a,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return zo.focus(i),Hn.close(a),s.some(!0)}})))}))}))}(t,e,getAnchor(t,n),n,i,a,c).map((function(t){return t.fold((function(){Hn.isOpen(i)&&Hn.close(i)}),(function(t){Hn.cloak(i),Hn.open(i,t),u(i)})),i}))},close$1=function(t,e,n,i,a,u,c){return Hn.close(i),Future_pure(i)},togglePopup=function(t,e,n,i,a,u){var c=Fa.getCoupled(n,"sandbox");return(Hn.isOpen(c)?close$1:open$1)(t,e,n,c,i,a,u)},matchWidth=function(t,e,n){var i=_r.getCurrent(e).getOr(e),a=get$7(t.element());n?set$2(i.element(),"min-width",a+"px"):function(t,e){Ce.set(t,e)}(i.element(),a)},getSink=function(t,e){return t.getSystem().getByUid(e.uid+"-"+Va()).map((function(t){return function(){return l.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return l.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},doRepositionMenus=function(t){Hn.getState(t).each((function(t){Ko.repositionMenus(t)}))},makeSandbox=function(t,e,n){var i=manager(),a=getSink(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id(),role:"listbox"}},behaviours:Qn(t.sandboxBehaviours,[Jn.config({store:{mode:"memory",initialValue:e}}),Hn.config({onOpen:function(a,u){var c=getAnchor(t,e);i.link(e.element()),t.matchWidth&&matchWidth(c.hotspot,u,t.useMinWidth),t.onOpen(c,a,u),void 0!==n&&void 0!==n.onOpen&&n.onOpen(a,u)},onClose:function(t,a){i.unlink(e.element()),void 0!==n&&void 0!==n.onClose&&n.onClose(t,a)},isPartOf:function(t,n,i){return isPartOf(n,i)||isPartOf(e,i)},getAttachPoint:function(){return a().getOrDie()}}),_r.config({find:function(t){return Hn.getState(t).bind((function(t){return _r.getCurrent(t)}))}}),Ze.config({channels:__assign(__assign({},receivingChannel({isExtraPart:constant(!1)})),receivingChannel$1({isExtraPart:constant(!1),doReposition:doRepositionMenus}))})])}},repositionMenus=function(t){var e=Fa.getCoupled(t,"sandbox");doRepositionMenus(e)},sandboxFields=function(){return[defaulted$1("sandboxClasses",[]),Zn("sandboxBehaviours",[_r,Ze,Hn,Jn])]},ja=constant([strict$1("dom"),strict$1("fetch"),onHandler("onOpen"),onKeyboardHandler("onExecute"),defaulted$1("getHotspot",s.some),defaulted$1("getAnchorOverrides",constant({})),schema$1(),field$1("dropdownBehaviours",[Ro,Fa,To,zo]),strict$1("toggleClass"),defaulted$1("eventOrder",{}),option("lazySink"),defaulted$1("matchWidth",!1),defaulted$1("useMinWidth",!1),option("role")].concat(sandboxFields())),Wa=constant([vr({schema:[tieredMenuMarkers()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Ua()]),qa=composite$1({name:"Dropdown",configFields:ja(),partFields:Wa(),factory:function(t,e,n,i){var a,u,switchToMenu=function(t){Hn.getState(t).each((function(t){Ko.highlightPrimary(t)}))},c={expand:function(e){Ro.isOn(e)||togglePopup(t,(function(t){return t}),e,i,noop,Oa.HighlightNone).get(noop)},open:function(e){Ro.isOn(e)||togglePopup(t,(function(t){return t}),e,i,noop,Oa.HighlightFirst).get(noop)},isOpen:Ro.isOn,close:function(e){Ro.isOn(e)&&togglePopup(t,(function(t){return t}),e,i,noop,Oa.HighlightFirst).get(noop)},repositionMenus:function(t){Ro.isOn(t)&&repositionMenus(t)}},triggerExecute=function(t,e){return emitExecute(t),s.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.dropdownBehaviours,[Ro.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Fa.config({others:{sandbox:function(e){return makeSandbox(t,e,{onOpen:function(){Ro.on(e)},onClose:function(){Ro.off(e)}})}}}),To.config({mode:"special",onSpace:triggerExecute,onEnter:triggerExecute,onDown:function(t,e){if(qa.isOpen(t)){var n=Fa.getCoupled(t,"sandbox");switchToMenu(n)}else qa.open(t);return s.some(!0)},onEscape:function(t,e){return qa.isOpen(t)?(qa.close(t),s.some(!0)):s.none()}}),zo.config({})]),events:events$7(s.some((function(e){togglePopup(t,(function(t){return t}),e,i,switchToMenu,Oa.HighlightFirst).get(noop)}))),eventOrder:__assign(__assign({},t.eventOrder),(a={},a[zt()]=["disabling","toggling","alloy.base.behaviour"],a)),apis:c,domModification:{attributes:__assign(__assign({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(u="type",get(t.dom,"attributes").bind((function(t){return get(t,u)}))).getOr("button")}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),$a=Object.freeze({__proto__:null,events:function(){return derive([abort(Et(),constant(!0))])},exhibit:function(){return nu$6({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),Ga=create$1({fields:[],name:"unselecting",active:$a}),Xa=generate$1("color-input-change"),Ka=generate$1("color-swatch-change"),Ya=generate$1("color-picker-cancel"),renderColorInput=function(t,e,n){var i=Ca.parts().field({factory:ka,inputClasses:["tox-textfield"],onSetValue:function(t){return Ba.run(t).get((function(){}))},inputBehaviours:derive$1([Ia.config({}),Ba.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return parent(t.element())},notify:{onValid:function(t){var e=Jn.getValue(t);emitWith(t,Xa,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Jn.getValue(t);if(0===e.length)return Future_pure(l.value(!0));var n=$.fromTag("span");set$2(n,"background-color",e);var i=getRaw(n,"background-color").fold((function(){return l.error("blah")}),(function(t){return l.value(e)}));return Future_pure(i)}}})]),selectOnFocus:!1}),a=t.label.map((function(t){return renderLabel(t,e.providers)})),emitSwatchChange=function(t,e){emitWith(t,Ka,{value:e})},u=record(function(t,e){return qa.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:derive$1([Ga.config({}),Ia.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:e.getSink,fetch:function(n){return Future_nu((function(e){return t.fetch(e)})).map((function(i){return s.from(createTieredDataFrom(k(createPartialChoiceMenu(generate$1("menu-value"),i,(function(e){t.onItemAction(n,e)}),t.columns,t.presets,Ii.CLOSE_ON_EXECUTE,(function(){return!1}),e.providers),{movement:deriveMenuMovement(t.columns,t.presets)})))}))},parts:{menu:part(0,0,t.presets)}})}({dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[southeast$1]},onLtr:function(){return[southwest$1]}},components:[],fetch:ta.getFetch(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:function(t,e){u.getOpt(t).each((function(t){"custom"===e?n.colorPicker((function(e){e.fold((function(){return emit(t,Ya)}),(function(e){emitSwatchChange(t,e),Settings_addColor(e)}))}),"#ffffff"):emitSwatchChange(t,"remove"===e?"":e)}))}},e));return Ca.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[i,u.asSpec()]}]),fieldBehaviours:derive$1([config("form-field-events",[run(Xa,(function(e,n){u.getOpt(e).each((function(t){set$2(t.element(),"background-color",n.event().color())})),emitWith(e,fa,{name:t.name})})),run(Ka,(function(t,e){Ca.getField(t).each((function(n){Jn.setValue(n,e.event().value()),_r.getCurrent(t).each(zo.focus)}))})),run(Ya,(function(t,e){Ca.getField(t).each((function(e){_r.getCurrent(t).each(zo.focus)}))}))])])})},hsvColour=function(t,e,n){return{hue:constant(t),saturation:constant(e),value:constant(n)}},Ja=constant(generate$1("rgb-hex-update")),Za=constant(generate$1("slider-update")),Qa=constant(generate$1("palette-update")),tu=br({schema:[strict$1("dom")],name:"label"}),edgePart=function(t){return br({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:derive([runActionExtra(ct(),(function(e,n,i){return t(e,i)}),[e]),runActionExtra(dt(),(function(e,n,i){return t(e,i)}),[e]),runActionExtra(mt(),(function(e,n,i){i.mouseIsDown.get()&&t(e,i)}),[e])])}}))}})},eu=edgePart("top-left"),ru=edgePart("top"),ou=edgePart("top-right"),iu=edgePart("right"),au=edgePart("bottom-right"),uu=edgePart("bottom"),cu=edgePart("bottom-left"),su=[tu,edgePart("left"),iu,ru,uu,eu,ou,cu,au,pr({name:"thumb",defaults:constant({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:derive([redirectToPart(ct(),t,"spectrum"),redirectToPart(st(),t,"spectrum"),redirectToPart(lt(),t,"spectrum"),redirectToPart(dt(),t,"spectrum"),redirectToPart(mt(),t,"spectrum"),redirectToPart(ht(),t,"spectrum")])}}}),pr({schema:[state$1("mouseIsDown",(function(){return Cell(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,setValueFrom=function(n,i){return e.getValueFromEvent(i).map((function(i){return e.setValueFrom(n,t,i)}))};return{behaviours:derive$1([To.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),zo.config({})]),events:derive([run(ct(),setValueFrom),run(st(),setValueFrom),run(dt(),setValueFrom),run(mt(),(function(e,n){t.mouseIsDown.get()&&setValueFrom(e,n)}))])}}})],lu=constant("slider.change.value"),getEventSource=function(t){var e=t.event().raw();if(function(t){return-1!==t.type.indexOf("touch")}(e)){var n=e;return void 0!==n.touches&&1===n.touches.length?s.some(n.touches[0]).map((function(t){return we(t.clientX,t.clientY)})):s.none()}var i=e;return void 0!==i.clientX?s.some(i).map((function(t){return we(t.clientX,t.clientY)})):s.none()},minX=function(t){return t.model.minX},minY=function(t){return t.model.minY},min1X=function(t){return t.model.minX-1},min1Y=function(t){return t.model.minY-1},maxX=function(t){return t.model.maxX},maxY=function(t){return t.model.maxY},max1X=function(t){return t.model.maxX+1},max1Y=function(t){return t.model.maxY+1},range$2=function(t,e,n){return e(t)-n(t)},xRange=function(t){return range$2(t,maxX,minX)},yRange=function(t){return range$2(t,maxY,minY)},halfX=function(t){return xRange(t)/2},halfY=function(t){return yRange(t)/2},step=function(t){return t.stepSize},snap=function(t){return t.snapToGrid},snapStart=function(t){return t.snapStart},rounded=function(t){return t.rounded},hasEdge=function(t,e){return void 0!==t[e+"-edge"]},hasLEdge=function(t){return hasEdge(t,"left")},hasREdge=function(t){return hasEdge(t,"right")},hasTEdge=function(t){return hasEdge(t,"top")},hasBEdge=function(t){return hasEdge(t,"bottom")},currentValue=function(t){return t.model.value.get()},xValue=function(t){return{x:constant(t)}},yValue=function(t){return{y:constant(t)}},xyValue=function(t,e){return{x:constant(t),y:constant(e)}},fireSliderChange=function(t,e){emitWith(t,lu(),{value:e})},reduceBy=function(t,e,n,i){return t<e?t:t>n?n:t===e?e-1:Math.max(e,t-i)},increaseBy=function(t,e,n,i){return t>n?t:t<e?e:t===n?n+1:Math.min(n,t+i)},capValue=function(t,e,n){return Math.max(e,Math.min(n,t))},findValueOf=function(t){var e=t.min,n=t.max,i=t.range,a=t.value,u=t.step,c=t.snap,s=t.snapStart,l=t.rounded,f=t.hasMinEdge,d=t.hasMaxEdge,m=t.minBound,g=t.maxBound,h=t.screenRange,p=f?e-1:e,v=d?n+1:n;if(a<m)return p;if(a>g)return v;var b=function(t,e,n){return Math.min(n,Math.max(t,e))-e}(a,m,g),y=capValue(b/h*i+e,p,v);return c&&y>=e&&y<=n?function(t,e,n,i,a){return a.fold((function(){var a=t-e,u=Math.round(a/i)*i;return capValue(e+u,e-1,n+1)}),(function(e){var a=(t-e)%i,u=Math.round(a/i),c=Math.floor((t-e)/i),s=Math.floor((n-e)/i),l=e+Math.min(s,c+u)*i;return Math.max(e,l)}))}(y,e,n,u,s):l?Math.round(y):y},findOffsetOfValue=function(t){var e=t.min,n=t.max,i=t.range,a=t.value,u=t.hasMinEdge,c=t.hasMaxEdge,s=t.maxBound,l=t.maxOffset,f=t.centerMinEdge,d=t.centerMaxEdge;return a<e?u?0:f:a>n?c?s:d:(a-e)/i*l},getBounds$1=function(t){return t.element().dom().getBoundingClientRect()},getBoundsProperty=function(t,e){return t[e]},getMinXBounds=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"left")},getMaxXBounds=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"right")},getMinYBounds=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"top")},getMaxYBounds=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"bottom")},getXScreenRange=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"width")},getYScreenRange=function(t){var e=getBounds$1(t);return getBoundsProperty(e,"height")},getCenterOffsetOf=function(t,e,n){return(t+e)/2-n},getXCenterOffSetOf=function(t,e){var n=getBounds$1(t),i=getBounds$1(e),a=getBoundsProperty(n,"left"),u=getBoundsProperty(n,"right"),c=getBoundsProperty(i,"left");return getCenterOffsetOf(a,u,c)},getYCenterOffSetOf=function(t,e){var n=getBounds$1(t),i=getBounds$1(e),a=getBoundsProperty(n,"top"),u=getBoundsProperty(n,"bottom"),c=getBoundsProperty(i,"top");return getCenterOffsetOf(a,u,c)},fireSliderChange$1=function(t,e){emitWith(t,lu(),{value:e})},sliderValue=function(t){return{x:constant(t)}},findValueOfOffset=function(t,e,n){var i={min:minX(e),max:maxX(e),range:xRange(e),value:n,step:step(e),snap:snap(e),snapStart:snapStart(e),rounded:rounded(e),hasMinEdge:hasLEdge(e),hasMaxEdge:hasREdge(e),minBound:getMinXBounds(t),maxBound:getMaxXBounds(t),screenRange:getXScreenRange(t)};return findValueOf(i)},handleMovement=function(t){return function(e,n){return function(t,e,n){var i=(t>0?increaseBy:reduceBy)(currentValue(n).x(),minX(n),maxX(n),step(n));return fireSliderChange$1(e,sliderValue(i)),s.some(i)}(t,e,n).map((function(){return!0}))}},findPositionOfValue=function(t,e,n,i,a,u){var c=function(t,e,n,i,a){var u=getXScreenRange(t),c=i.bind((function(e){return s.some(getXCenterOffSetOf(e,t))})).getOr(0),l=a.bind((function(e){return s.some(getXCenterOffSetOf(e,t))})).getOr(u),f={min:minX(e),max:maxX(e),range:xRange(e),value:n,hasMinEdge:hasLEdge(e),hasMaxEdge:hasREdge(e),minBound:getMinXBounds(t),minOffset:0,maxBound:getMaxXBounds(t),maxOffset:u,centerMinEdge:c,centerMaxEdge:l};return findOffsetOfValue(f)}(e,u,n,i,a);return getMinXBounds(e)-getMinXBounds(t)+c},fu=handleMovement(-1),du=handleMovement(1),mu=s.none,gu=s.none,hu={"top-left":s.none(),top:s.none(),"top-right":s.none(),right:s.some((function(t,e){fireSliderChange(t,xValue(max1X(e)))})),"bottom-right":s.none(),bottom:s.none(),"bottom-left":s.none(),left:s.some((function(t,e){fireSliderChange(t,xValue(min1X(e)))}))},pu=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var i=findValueOfOffset(t,e,n),a=sliderValue(i);return fireSliderChange$1(t,a),i},setToMin:function(t,e){var n=minX(e);fireSliderChange$1(t,sliderValue(n))},setToMax:function(t,e){var n=maxX(e);fireSliderChange$1(t,sliderValue(n))},findValueOfOffset:findValueOfOffset,getValueFromEvent:function(t){return getEventSource(t).map((function(t){return t.left()}))},findPositionOfValue:findPositionOfValue,setPositionFromValue:function(t,e,n,i){var a=currentValue(n),u=findPositionOfValue(t,i.getSpectrum(t),a.x(),i.getLeftEdge(t),i.getRightEdge(t),n),c=get$7(e.element())/2;set$2(e.element(),"left",u-c+"px")},onLeft:fu,onRight:du,onUp:mu,onDown:gu,edgeActions:hu}),fireSliderChange$2=function(t,e){emitWith(t,lu(),{value:e})},sliderValue$1=function(t){return{y:constant(t)}},findValueOfOffset$1=function(t,e,n){var i={min:minY(e),max:maxY(e),range:yRange(e),value:n,step:step(e),snap:snap(e),snapStart:snapStart(e),rounded:rounded(e),hasMinEdge:hasTEdge(e),hasMaxEdge:hasBEdge(e),minBound:getMinYBounds(t),maxBound:getMaxYBounds(t),screenRange:getYScreenRange(t)};return findValueOf(i)},handleMovement$1=function(t){return function(e,n){return function(t,e,n){var i=(t>0?increaseBy:reduceBy)(currentValue(n).y(),minY(n),maxY(n),step(n));return fireSliderChange$2(e,sliderValue$1(i)),s.some(i)}(t,e,n).map((function(){return!0}))}},findPositionOfValue$1=function(t,e,n,i,a,u){var c=function(t,e,n,i,a){var u=getYScreenRange(t),c=i.bind((function(e){return s.some(getYCenterOffSetOf(e,t))})).getOr(0),l=a.bind((function(e){return s.some(getYCenterOffSetOf(e,t))})).getOr(u),f={min:minY(e),max:maxY(e),range:yRange(e),value:n,hasMinEdge:hasTEdge(e),hasMaxEdge:hasBEdge(e),minBound:getMinYBounds(t),minOffset:0,maxBound:getMaxYBounds(t),maxOffset:u,centerMinEdge:c,centerMaxEdge:l};return findOffsetOfValue(f)}(e,u,n,i,a);return getMinYBounds(e)-getMinYBounds(t)+c},vu=s.none,bu=s.none,yu=handleMovement$1(-1),xu=handleMovement$1(1),wu={"top-left":s.none(),top:s.some((function(t,e){fireSliderChange(t,yValue(min1Y(e)))})),"top-right":s.none(),right:s.none(),"bottom-right":s.none(),bottom:s.some((function(t,e){fireSliderChange(t,yValue(max1Y(e)))})),"bottom-left":s.none(),left:s.none()},Cu=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var i=findValueOfOffset$1(t,e,n),a=sliderValue$1(i);return fireSliderChange$2(t,a),i},setToMin:function(t,e){var n=minY(e);fireSliderChange$2(t,sliderValue$1(n))},setToMax:function(t,e){var n=maxY(e);fireSliderChange$2(t,sliderValue$1(n))},findValueOfOffset:findValueOfOffset$1,getValueFromEvent:function(t){return getEventSource(t).map((function(t){return t.top()}))},findPositionOfValue:findPositionOfValue$1,setPositionFromValue:function(t,e,n,i){var a=currentValue(n),u=findPositionOfValue$1(t,i.getSpectrum(t),a.y(),i.getTopEdge(t),i.getBottomEdge(t),n),c=get$6(e.element())/2;set$2(e.element(),"top",u-c+"px")},onLeft:vu,onRight:bu,onUp:yu,onDown:xu,edgeActions:wu}),fireSliderChange$3=function(t,e){emitWith(t,lu(),{value:e})},sliderValue$2=function(t,e){return{x:constant(t),y:constant(e)}},handleMovement$2=function(t,e){return function(n,i){return function(t,e,n,i){var a=t>0?increaseBy:reduceBy,u=e?currentValue(i).x():a(currentValue(i).x(),minX(i),maxX(i),step(i)),c=e?a(currentValue(i).y(),minY(i),maxY(i),step(i)):currentValue(i).y();return fireSliderChange$3(n,sliderValue$2(u,c)),s.some(u)}(t,e,n,i).map((function(){return!0}))}},Su=handleMovement$2(-1,!1),ku=handleMovement$2(1,!1),Eu=handleMovement$2(-1,!0),Tu=handleMovement$2(1,!0),Ou={"top-left":s.some((function(t,e){fireSliderChange(t,xyValue(min1X(e),min1Y(e)))})),top:s.some((function(t,e){fireSliderChange(t,xyValue(halfX(e),min1Y(e)))})),"top-right":s.some((function(t,e){fireSliderChange(t,xyValue(max1X(e),min1Y(e)))})),right:s.some((function(t,e){fireSliderChange(t,xyValue(max1X(e),halfY(e)))})),"bottom-right":s.some((function(t,e){fireSliderChange(t,xyValue(max1X(e),max1Y(e)))})),bottom:s.some((function(t,e){fireSliderChange(t,xyValue(halfX(e),max1Y(e)))})),"bottom-left":s.some((function(t,e){fireSliderChange(t,xyValue(min1X(e),max1Y(e)))})),left:s.some((function(t,e){fireSliderChange(t,xyValue(min1X(e),halfY(e)))}))},_u=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var i=findValueOfOffset(t,e,n.left()),a=findValueOfOffset$1(t,e,n.top()),u=sliderValue$2(i,a);return fireSliderChange$3(t,u),u},setToMin:function(t,e){var n=minX(e),i=minY(e);fireSliderChange$3(t,sliderValue$2(n,i))},setToMax:function(t,e){var n=maxX(e),i=maxY(e);fireSliderChange$3(t,sliderValue$2(n,i))},getValueFromEvent:function(t){return getEventSource(t)},setPositionFromValue:function(t,e,n,i){var a=currentValue(n),u=findPositionOfValue(t,i.getSpectrum(t),a.x(),i.getLeftEdge(t),i.getRightEdge(t),n),c=findPositionOfValue$1(t,i.getSpectrum(t),a.y(),i.getTopEdge(t),i.getBottomEdge(t),n),s=get$7(e.element())/2,l=get$6(e.element())/2;set$2(e.element(),"left",u-s+"px"),set$2(e.element(),"top",c-l+"px")},onLeft:Su,onRight:ku,onUp:Eu,onDown:Tu,edgeActions:Ou}),Nu=composite$1({name:"Slider",configFields:[defaulted$1("stepSize",1),defaulted$1("onChange",noop),defaulted$1("onChoose",noop),defaulted$1("onInit",noop),defaulted$1("onDragStart",noop),defaulted$1("onDragEnd",noop),defaulted$1("snapToGrid",!1),defaulted$1("rounded",!0),option("snapStart"),strictOf("model",choose$1("mode",{x:[defaulted$1("minX",0),defaulted$1("maxX",100),state$1("value",(function(t){return Cell(t.mode.minX)})),strict$1("getInitialValue"),output("manager",pu)],y:[defaulted$1("minY",0),defaulted$1("maxY",100),state$1("value",(function(t){return Cell(t.mode.minY)})),strict$1("getInitialValue"),output("manager",Cu)],xy:[defaulted$1("minX",0),defaulted$1("maxX",100),defaulted$1("minY",0),defaulted$1("maxY",100),state$1("value",(function(t){return Cell({x:constant(t.mode.minX),y:constant(t.mode.minY)})})),strict$1("getInitialValue"),output("manager",_u)]})),field$1("sliderBehaviours",[To,Jn]),state$1("mouseIsDown",(function(){return Cell(!1)}))],partFields:su,factory:function(t,e,n,i){var a,getThumb=function(e){return getPartOrDie(e,t,"thumb")},getSpectrum=function(e){return getPartOrDie(e,t,"spectrum")},getLeftEdge=function(e){return getPart(e,t,"left-edge")},getRightEdge=function(e){return getPart(e,t,"right-edge")},getTopEdge=function(e){return getPart(e,t,"top-edge")},getBottomEdge=function(e){return getPart(e,t,"bottom-edge")},u=t.model,c=u.manager,refresh=function(e,n){c.setPositionFromValue(e,n,t,{getLeftEdge:getLeftEdge,getRightEdge:getRightEdge,getTopEdge:getTopEdge,getBottomEdge:getBottomEdge,getSpectrum:getSpectrum})},changeValue=function(e,n){u.value.set(n);var i=getThumb(e);return refresh(e,i),t.onChange(e,i,n),s.some(!0)},choose=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&getPart(e,t,"thumb").each((function(n){var i=u.value.get();t.onChoose(e,n,i)}))},onDragStart=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,getThumb(e))},onDragEnd=function(e,n){n.stop(),t.onDragEnd(e,getThumb(e)),choose(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.sliderBehaviours,[To.config({mode:"special",focusIn:function(e){return getPart(e,t,"spectrum").map(To.focusIn).map(constant(!0))}}),Jn.config({store:{mode:"manual",getValue:function(t){return u.value.get()}}}),Ze.config({channels:(a={},a[Vn()]={onReceive:choose},a)})]),events:derive([run(lu(),(function(t,e){changeValue(t,e.event().value())})),Zt((function(e,n){var i=u.getInitialValue();u.value.set(i);var a=getThumb(e);refresh(e,a);var c=getSpectrum(e);t.onInit(e,a,c,u.value.get())})),run(ct(),onDragStart),run(lt(),onDragEnd),run(dt(),onDragStart),run(ht(),onDragEnd)]),apis:{resetToMin:function(e){c.setToMin(e,t)},resetToMax:function(e){c.setToMax(e,t)},changeValue:changeValue,refresh:refresh},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),sliderFactory=function(t,e){var n=Nu.parts().spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Nu.parts().thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nu.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:constant({y:constant(0)})},components:[n,i],sliderBehaviours:derive$1([zo.config({})]),onChange:function(t,e,n){emitWith(t,Za(),{value:n})}})},Au=[field$1("formBehaviours",[Jn])],getPartName=function(t){return"<alloy.field."+t+">"},make$4=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.formBehaviours,[Jn.config({store:{mode:"manual",getValue:function(e){var n=getAllParts(e,t);return map$1(n,(function(t,e){return t().bind((function(t){var n,i,a=_r.getCurrent(t);return n=a,i=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+element(t.element())),n.fold((function(){return l.error(i)}),l.value)})).map(Jn.getValue)}))},setValue:function(e,n){each$1(n,(function(n,i){getPart(e,t,i).each((function(t){_r.getCurrent(t).each((function(t){Jn.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return getPart(e,t,n).bind(_r.getCurrent)}}}},zu={getField:makeApi((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e=function(){var t=[];return{field:function(e,n){return t.push(e),generateOne("form",getPartName(e),n)},record:function(){return t}}}(),n=t(e),i=e.record(),a=map(i,(function(t){return pr({name:t,pname:getPartName(t)})}));return composite("form",Au,a,make$4,n)}},Du=generate$1("valid-input"),Mu=generate$1("invalid-input"),Bu=generate$1("validating-input"),rgbFormFactory=function(t,e,n,i){var invalidation=function(n,i){return Ba.config({invalidClass:e("invalid"),notify:{onValidate:function(t){emitWith(t,Bu,{type:n})},onValid:function(t){emitWith(t,Du,{type:n,value:Jn.getValue(t)})},onInvalid:function(t){emitWith(t,Mu,{type:n,value:Jn.getValue(t)})}},validator:{validate:function(e){var n=Jn.getValue(e),a=i(n)?l.value(!0):l.error(t("aria.input.invalid"));return Future_pure(a)},validateOnLoad:!1}})},renderTextField=function(n,i,a,u,c){var s=t("colorcustom.rgb.range"),l=[Ca.parts().label({dom:{tag:"label",innerHtml:a,attributes:{"aria-label":u}}}),Ca.parts().field({data:c,factory:ka,inputAttributes:__assign({type:"text"},"hex"===i?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:derive$1([invalidation(i,n),Ia.config({})]),onSetValue:function(t){Ba.isInvalid(t)&&Ba.run(t).get(noop)}})],f="hex"!==i?[Ca.parts()["aria-descriptor"]({text:s})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:l.concat(f)}},copyRgbToForm=function(t,e){var n=e.red(),i=e.green(),a=e.blue();Jn.setValue(t,{red:n,green:i,blue:a})},a=record({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),updatePreview=function(t,e){a.getOpt(t).each((function(t){set$2(t.element(),"background-color","#"+e.value())}))};return single$2({factory:function(){var u={red:constant(Cell(s.some(255))),green:constant(Cell(s.some(255))),blue:constant(Cell(s.some(255))),hex:constant(Cell(s.some("ffffff")))},get=function(t){return u[t]().get()},set=function(t,e){u[t]().set(e)},setValueRgb=function(t){var e=t.red(),n=t.green(),i=t.blue();set("red",s.some(e)),set("green",s.some(n)),set("blue",s.some(i))},onInvalidInput=function(t,e){var n=e.event();"hex"!==n.type()?set(n.type(),s.none()):i(t)},onValidRgb=function(t,e,n){var i=parseInt(n,10);set(e,s.some(i)),get("red").bind((function(t){return get("green").bind((function(e){return get("blue").map((function(n){return rgbaColour(t,e,n,1)}))}))})).each((function(e){var n=function(t,e){var n=fromRgba(e);return zu.getField(t,"hex").each((function(e){zo.isFocused(e)||Jn.setValue(t,{hex:n.value()})})),n}(t,e);updatePreview(t,n)}))},onValidInput=function(t,e){var i=e.event();!function(t){return"hex"===t.type()}(i)?onValidRgb(t,i.type(),i.value()):function(t,e){n(t);var i=hexColour(e);set("hex",s.some(e));var a=fromHex(i);copyRgbToForm(t,a),setValueRgb(a),emitWith(t,Ja(),{hex:i}),updatePreview(t,i)}(t,i.value())},formPartStrings=function(e){return{label:t("colorcustom.rgb."+e+".label"),description:t("colorcustom.rgb."+e+".description")}},c=formPartStrings("red"),l=formPartStrings("green"),f=formPartStrings("blue"),d=formPartStrings("hex");return k(zu.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Ca.sketch(renderTextField(isRgbaComponent,"red",c.label,c.description,255))),n.field("green",Ca.sketch(renderTextField(isRgbaComponent,"green",l.label,l.description,255))),n.field("blue",Ca.sketch(renderTextField(isRgbaComponent,"blue",f.label,f.description,255))),n.field("hex",Ca.sketch(renderTextField(isHexString,"hex",d.label,d.description,"ffffff"))),a.asSpec()],formBehaviours:derive$1([Ba.config({invalidClass:e("form-invalid")}),config("rgb-form-events",[run(Du,onValidInput),run(Mu,onInvalidInput),run(Bu,onInvalidInput)])])}})),{apis:{updateHex:function(t,e){Jn.setValue(t,{hex:e.value()}),function(t,e){var n=fromHex(e);copyRgbToForm(t,n),setValueRgb(n)}(t,e),updatePreview(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},paletteFactory=function(t,e){var n=Nu.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),i=Nu.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),setColour=function(t,e){var n=t.width,i=t.height,a=t.getContext("2d");if(null!==a){a.fillStyle=e,a.fillRect(0,0,n,i);var u=a.createLinearGradient(0,0,n,0);u.addColorStop(0,"rgba(255,255,255,1)"),u.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=u,a.fillRect(0,0,n,i);var c=a.createLinearGradient(0,0,0,i);c.addColorStop(0,"rgba(0,0,0,0)"),c.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=c,a.fillRect(0,0,n,i)}};return single$2({factory:function(t){var a=constant({x:constant(0),y:constant(0)}),u=derive$1([_r.config({find:s.some}),zo.config({})]);return Nu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[n,i],onChange:function(t,e,n){emitWith(t,Qa(),{value:n})},onInit:function(t,e,n,i){setColour(n.element().dom(),toString(Ki()))},sliderBehaviours:u})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){!function(t,e){var n=t.components()[0].element().dom();setColour(n,toString(e))}(e,n)}},extraApis:{}})},makeFactory=function(t,e){return single$2({name:"ColourPicker",configFields:[strict$1("dom"),defaulted$1("onValidHex",noop),defaulted$1("onInvalidHex",noop)],factory:function(n){var i,a=rgbFormFactory(t,e,n.onValidHex,n.onInvalidHex),u=paletteFactory(0,e),c={paletteRgba:constant(Cell(Ki()))},s=record(u.sketch({})),l=record(a.sketch({})),updatePalette=function(t,e){s.getOpt(t).each((function(t){var n=fromHex(e);c.paletteRgba().set(n),u.setRgba(t,n)}))},updateFields=function(t,e){l.getOpt(t).each((function(t){a.updateHex(t,e)}))},runUpdates=function(t,e,n){each(n,(function(n){n(t,e)}))};return{uid:n.uid,dom:n.dom,components:[s.asSpec(),sliderFactory(0,e),l.asSpec()],behaviours:derive$1([config("colour-picker-events",[run(Qa(),(i=[updateFields],function(t,e){var n=e.event().value(),a=function(t){var e,n=0,i=0,a=t.red()/255,u=t.green()/255,c=t.blue()/255,s=Math.min(a,Math.min(u,c)),l=Math.max(a,Math.max(u,c));return s===l?hsvColour(0,0,100*(i=s)):(n=60*((n=a===s?3:c===s?1:5)-(a===s?u-c:c===s?a-u:c-a)/(l-s)),e=(l-s)/l,i=l,hsvColour(Math.round(n),Math.round(100*e),Math.round(100*i)))}(c.paletteRgba().get()),u=hsvColour(a.hue(),n.x(),100-n.y()),s=fromHsv(u),l=fromRgba(s);runUpdates(t,l,i)})),run(Za(),function(){var t=[updatePalette,updateFields];return function(e,n){var i=function(t){var e=hsvColour((100-t)/100*360,100,100),n=fromHsv(e);return fromRgba(n)}(n.event().value().y());runUpdates(e,i,t)}}())]),_r.config({find:function(t){return l.getOpt(t)}}),To.config({mode:"acyclic"})])}}})},ComposingConfigs_self=function(){return _r.config({find:s.some})},ComposingConfigs_memento=function(t){return _r.config({find:t.getOpt})},ComposingConfigs_childAt=function(t){return _r.config({find:function(e){return child(e.element(),t).bind((function(t){return e.getSystem().getByDom(t).toOption()}))}})},Ru={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},translate$1=function(t){return function(t){return Ru[t]}(t)},Pu=tinymce.util.Tools.resolve("tinymce.Resource"),Iu=objOf([defaulted$1("preprocess",identity),defaulted$1("postprocess",identity)]),withComp=function(t,e,n){return Jn.config(k({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},withElement=function(t,e,n){return withComp(t,(function(t){return e(t.element())}),(function(t,e){return n(t.element(),e)}))},RepresentingConfigs_memento=function(t,e){var n=asRawOrDie("RepresentingConfigs.memento processors",Iu,e);return Jn.config({store:{mode:"manual",getValue:function(e){var i=t.get(e),a=Jn.getValue(i);return n.postprocess(a)},setValue:function(e,i){var a=n.preprocess(i),u=t.get(e);Jn.setValue(u,a)}}})},Hu=withComp,RepresentingConfigs_domHtml=function(t){return withElement(t,get$1,set)},RepresentingConfigs_memory=function(t){return Jn.config({store:{mode:"memory",initialValue:t}})},renderDropZone=function(t,e){var stopper=function(t,e){e.stop()},sequence=function(t){return function(e,n){each(t,(function(t){t(e,n)}))}},onDrop=function(t,e){if(!Pi.isDisabled(t)){var n=e.event().raw();handleFiles(t,n.dataTransfer.files)}},onSelect=function(t,e){var n=e.event().raw().target.files;handleFiles(t,n)},handleFiles=function(e,n){Jn.setValue(e,function(t){var e=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i");return filter(x(t),(function(t){return e.test(t.name)}))}(n)),emitWith(e,fa,{name:t.name})},n=record({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:derive$1([config("input-file-events",[cutter(St()),cutter(Mt())])])}),i=t.label.map((function(t){return renderLabel(t,e)})),a=Ca.parts().field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:derive$1([RepresentingConfigs_memory([]),ComposingConfigs_self(),Pi.config({}),Ro.config({toggleClass:"dragenter",toggleOnExecute:!1}),config("dropzone-events",[run("dragenter",sequence([stopper,Ro.toggle])),run("dragleave",sequence([stopper,Ro.toggle])),run("dragover",stopper),run("drop",sequence([stopper,onDrop])),run(Ct(),onSelect)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},ei.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[n.asSpec()],action:function(t){n.get(t).element().dom().click()},buttonBehaviours:derive$1([Ia.config({})])})]}]}}}});return renderFormFieldWith(i,a,["tox-form__group--stretched"],[])},Lu=generate$1("alloy-fake-before-tabstop"),Fu=generate$1("alloy-fake-after-tabstop"),craftWithClasses=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:derive$1([zo.config({ignore:!0}),Ia.config({})])}},triggerTab=function(t,e){emitWith(t,yt(),{raw:{which:9,shiftKey:e}})},NavigableObject_isPseudoStop=function(t){return closest$4(t,["."+Lu,"."+Fu].join(","),constant(!1))},NavigableObject_onFocus=function(t,e){var n=e.element();has$2(n,Lu)?triggerTab(t,!0):has$2(n,Fu)&&triggerTab(t,!1)},NavigableObject_craft=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[craftWithClasses([Lu]),t,craftWithClasses([Fu])],behaviours:derive$1([ComposingConfigs_childAt(1)])}},Vu=!(detect$3().browser.isIE()||detect$3().browser.isEdge()),renderIFrame=function(t,e){var n=Vu&&t.sandboxed,i=__assign(__assign({},t.label.map((function(t){return{title:t}})).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),a=function(t){var e=Cell("");return{getValue:function(t){return e.get()},setValue:function(n,i){if(t)set$1(n.element(),"srcdoc",i);else{set$1(n.element(),"src","javascript:''");var a=n.element().dom().contentWindow.document;a.open(),a.write(i),a.close()}e.set(i)}}}(n),u=t.label.map((function(t){return renderLabel(t,e)})),c=Ca.parts().field({factory:{sketch:function(t){return NavigableObject_craft({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:derive$1([Ia.config({}),zo.config({}),Hu(s.none(),a.getValue,a.setValue)])})}}});return renderFormFieldWith(u,c,["tox-form__group--stretched"],[])};function create$5(t,n){return resize(e.document.createElement("canvas"),t,n)}function clone$1(t){var e=create$5(t.width,t.height);return get2dContext(e).drawImage(t,0,0),e}function get2dContext(t){return t.getContext("2d")}function resize(t,e,n){return t.width=e,t.height=n,t}function getWidth(t){return t.naturalWidth||t.width}function getHeight(t){return t.naturalHeight||t.height}var Uu=window.Promise?window.Promise:function(){var Promise=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(t,bind(resolve,this),bind(reject,this))},t=Promise.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function bind(t,e){return function(){return t.apply(e,arguments)}}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function handle(e){var n=this;null!==this._state?t((function(){var t=n._state?e.onFulfilled:e.onRejected;if(null!==t){var i;try{i=t(n._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(n._state?e.resolve:e.reject)(n._value)})):this._deferreds.push(e)}function resolve(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void doResolve(bind(e,t),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=t,finale.call(this)}catch(t){reject.call(this,t)}}function reject(t){this._state=!1,this._value=t,finale.call(this)}function finale(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];handle.call(this,n)}this._deferreds=[]}function Handler(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function doResolve(t,e,n){var i=!1;try{t((function(t){i||(i=!0,e(t))}),(function(t){i||(i=!0,n(t))}))}catch(t){if(i)return;i=!0,n(t)}}return Promise.prototype.catch=function(t){return this.then(null,t)},Promise.prototype.then=function(t,e){var n=this;return new Promise((function(i,a){handle.call(n,new Handler(t,e,i,a))}))},Promise.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Array.prototype.slice.call(1===t.length&&n(t[0])?t[0]:t);return new Promise((function(t,e){if(0===i.length)return t([]);var n=i.length;function res(a,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){res(a,t)}),e)}i[a]=u,0==--n&&t(i)}catch(t){e(t)}}for(var a=0;a<i.length;a++)res(a,i[a])}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise?t:new Promise((function(e){e(t)}))},Promise.reject=function(t){return new Promise((function(e,n){n(t)}))},Promise.race=function(t){return new Promise((function(e,n){for(var i=0,a=t;i<a.length;i++){a[i].then(e,n)}}))},Promise}();function dataUriToBlob(t){return new Uu((function(n,i){(function dataUriToBlobSync(t){var n=t.split(","),i=/data:([^;]+)/.exec(n[0]);if(!i)return s.none();for(var a=i[1],u=n[1],c=e.atob(u),l=c.length,f=Math.ceil(l/1024),d=new Array(f),m=0;m<f;++m){for(var g=1024*m,h=Math.min(g+1024,l),p=new Array(h-g),v=g,b=0;v<h;++b,++v)p[b]=c[v].charCodeAt(0);d[m]=new Uint8Array(p)}return s.some(new e.Blob(d,{type:a}))})(t).fold((function(){i("uri is not base64: "+t)}),n)}))}function canvasToBlob(t,n,i){return n=n||"image/png",e.HTMLCanvasElement.prototype.toBlob?new Uu((function(e,a){t.toBlob((function(t){t?e(t):a()}),n,i)})):dataUriToBlob(t.toDataURL(n,i))}function blobToCanvas(t){return function blobToImage(t){return new Uu((function(n,i){var a=e.URL.createObjectURL(t),u=new e.Image,removeListeners=function(){u.removeEventListener("load",loaded),u.removeEventListener("error",error)};function loaded(){removeListeners(),n(u)}function error(){removeListeners(),i("Unable to load data of type "+t.type+": "+a)}u.addEventListener("load",loaded),u.addEventListener("error",error),u.src=a,u.complete&&loaded()}))}(t).then((function(t){!function revokeImageUrl(t){e.URL.revokeObjectURL(t.src)}(t);var n=create$5(getWidth(t),getHeight(t));return get2dContext(n).drawImage(t,0,0),n}))}function create$6(t,e,n){var i=e.type;function toAdjustedDataURL(e,n){return t.then((function(t){return function canvasToDataURL(t,e,n){return e=e||"image/png",t.toDataURL(e,n)}(t,e,n)}))}return{getType:constant(i),toBlob:function toBlob(){return Uu.resolve(e)},toDataURL:function toDataURL(){return n},toBase64:function toBase64(){return n.split(",")[1]},toAdjustedBlob:function toAdjustedBlob(e,n){return t.then((function(t){return canvasToBlob(t,e,n)}))},toAdjustedDataURL:toAdjustedDataURL,toAdjustedBase64:function toAdjustedBase64(t,e){return toAdjustedDataURL(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function toCanvas(){return t.then(clone$1)}}}function fromBlob(t){return function blobToDataUri(t){return new Uu((function(n){var i=new e.FileReader;i.onloadend=function(){n(i.result)},i.readAsDataURL(t)}))}(t).then((function(e){return create$6(blobToCanvas(t),t,e)}))}function fromCanvas(t,e){return canvasToBlob(t,e).then((function(e){return create$6(Uu.resolve(t),e,t.toDataURL())}))}function clamp$1(t,e,n){var i="string"==typeof t?parseFloat(t):t;return i>n?i=n:i<e&&(i=e),i}var ju=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function multiply(t,e){for(var n,i=[],a=new Array(25),u=0;u<5;u++){for(var c=0;c<5;c++)i[c]=e[c+5*u];for(c=0;c<5;c++){n=0;for(var s=0;s<5;s++)n+=t[c+5*s]*i[s];a[c+5*u]=n}}return a}function colorFilter(t,e){return t.toCanvas().then((function(n){return function applyColorFilter(t,e,n){var i=get2dContext(t);var a=function applyMatrix(t,e){for(var n,i,a,u,c=t.data,s=e[0],l=e[1],f=e[2],d=e[3],m=e[4],g=e[5],h=e[6],p=e[7],v=e[8],b=e[9],y=e[10],x=e[11],w=e[12],C=e[13],S=e[14],k=e[15],E=e[16],T=e[17],O=e[18],_=e[19],N=0;N<c.length;N+=4)n=c[N],i=c[N+1],a=c[N+2],u=c[N+3],c[N]=n*s+i*l+a*f+u*d+m,c[N+1]=n*g+i*h+a*p+u*v+b,c[N+2]=n*y+i*x+a*w+u*C+S,c[N+3]=n*k+i*E+a*T+u*O+_;return t}(i.getImageData(0,0,t.width,t.height),n);return i.putImageData(a,0,0),fromCanvas(t,e)}(n,t.getType(),e)}))}function convoluteFilter(t,e){return t.toCanvas().then((function(n){return function applyConvoluteFilter(t,e,n){var i=get2dContext(t);var a=i.getImageData(0,0,t.width,t.height),u=i.getImageData(0,0,t.width,t.height);return u=function applyMatrix(t,e,n){function clamp(t,e,n){return t>n?t=n:t<e&&(t=e),t}for(var i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),u=t.data,c=e.data,s=t.width,l=t.height,f=0;f<l;f++)for(var d=0;d<s;d++){for(var m=0,g=0,h=0,p=0;p<i;p++)for(var v=0;v<i;v++){var b=clamp(d+v-a,0,s-1),y=4*(clamp(f+p-a,0,l-1)*s+b),x=n[p*i+v];m+=u[y]*x,g+=u[y+1]*x,h+=u[y+2]*x}var w=4*(f*s+d);c[w]=clamp(m,0,255),c[w+1]=clamp(g,0,255),c[w+2]=clamp(h,0,255)}return e}(a,u,n),i.putImageData(u,0,0),fromCanvas(t,e)}(n,t.getType(),e)}))}function complexAdjustableColorFilter(t){return function(e,n){return colorFilter(e,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}var Wu=function basicColorFilter(t){return function(e){return colorFilter(e,t)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),qu=complexAdjustableColorFilter((function adjustBrightness(t,e){return multiply(t,[1,0,0,0,e=clamp$1(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),$u=complexAdjustableColorFilter((function adjustContrast(t,e){var n;return e=clamp$1(e,-1,1),multiply(t,[(n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?ju[e]:ju[Math.floor(e)]*(1-n)+ju[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),colorize=function(t,e,n,i){return colorFilter(t,function adjustColors(t,e,n,i){return multiply(t,[e=clamp$1(e,0,2),0,0,0,0,0,n=clamp$1(n,0,2),0,0,0,0,0,i=clamp$1(i,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e,n,i))},Gu=function basicConvolutionFilter(t){return function(e){return convoluteFilter(e,t)}}([0,-1,0,-1,5,-1,0,-1,0]),Xu=function functionColorFilter(t){return function(e,n){return e.toCanvas().then((function(i){return function(e,n,i){var a=get2dContext(e),u=new Array(256);for(var c=0;c<u.length;c++)u[c]=t(c,i);var s=function applyLookup(t,e){for(var n=t.data,i=0;i<n.length;i+=4)n[i]=e[n[i]],n[i+1]=e[n[i+1]],n[i+2]=e[n[i+2]];return t}(a.getImageData(0,0,e.width,e.height),u);return a.putImageData(s,0,0),fromCanvas(e,n)}(i,e.getType(),n)}))}}((function(t,e){return 255*Math.pow(t/255,1-e)}));function scale(t,e,n){var i=getWidth(t),a=getHeight(t),u=e/i,c=n/a,s=!1;(u<.5||u>2)&&(u=u<.5?.5:2,s=!0),(c<.5||c>2)&&(c=c<.5?.5:2,s=!0);var l=function _scale(t,e,n){return new Uu((function(i){var a=getWidth(t),u=getHeight(t),c=Math.floor(a*e),s=Math.floor(u*n),l=create$5(c,s);get2dContext(l).drawImage(t,0,0,a,u,0,0,c,s),i(l)}))}(t,u,c);return s?l.then((function(t){return scale(t,e,n)})):l}function rotate(t,e){return t.toCanvas().then((function(n){return function applyRotate(t,e,n){var i=create$5(t.width,t.height),a=get2dContext(i),u=0,c=0;90!==(n=n<0?360+n:n)&&270!==n||resize(i,i.height,i.width);90!==n&&180!==n||(u=i.width);270!==n&&180!==n||(c=i.height);return a.translate(u,c),a.rotate(n*Math.PI/180),a.drawImage(t,0,0),fromCanvas(i,e)}(n,t.getType(),e)}))}function flip(t,e){return t.toCanvas().then((function(n){return function applyFlip(t,e,n){var i=create$5(t.width,t.height),a=get2dContext(i);"v"===n?(a.scale(1,-1),a.drawImage(t,0,-i.height)):(a.scale(-1,1),a.drawImage(t,-i.width,0));return fromCanvas(i,e)}(n,t.getType(),e)}))}function crop(t,e,n,i,a){return t.toCanvas().then((function(u){return function applyCrop(t,e,n,i,a,u){var c=create$5(a,u);return get2dContext(c).drawImage(t,-n,-i),fromCanvas(c,e)}(u,t.getType(),e,n,i,a)}))}var invert$1=function(t){return Wu(t)},sharpen$1=function(t){return Gu(t)},gamma$1=function(t,e){return Xu(t,e)},brightness$1=function(t,e){return qu(t,e)},contrast$1=function(t,e){return $u(t,e)},flip$1=function(t,e){return flip(t,e)},resize$2=function(t,e,n){return function resize$1(t,e,n){return t.toCanvas().then((function(i){return scale(i,e,n).then((function(e){return fromCanvas(e,t.getType())}))}))}(t,e,n)},rotate$1=function(t,e){return rotate(t,e)},renderIcon$1=function(t,e){return __assign({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},renderIconFromPack=function(t,e){return renderIcon$1(get$d(t,e),{})},renderReplacableIconFromPack=function(t,e){return renderIcon$1(get$d(t,e),{behaviours:derive$1([Oo.config({})])})},renderLabel$1=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:derive$1([Oo.config({})])}},Ku=generate$1("toolbar.button.execute"),Yu={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},Ju=generate$1("update-menu-text"),Zu=generate$1("update-menu-icon"),renderCommonDropdown=function(t,e,n){var i=Cell(noop),a=t.text.map((function(t){return record(renderLabel$1(t,e,n.providers))})),u=t.icon.map((function(t){return record(renderReplacableIconFromPack(t,n.providers.icons))})),onLeftOrRightInMenu=function(t,e){var n=Jn.getValue(t);return zo.focus(n),emitWith(n,"keydown",{raw:e.event().raw()}),qa.close(n),s.some(!0)},c=t.role.fold((function(){return{}}),(function(t){return{role:t}})),l=t.tooltip.fold((function(){return{}}),(function(t){var e=n.providers.translate(t);return{title:e,"aria-label":e}}));return record(qa.sketch(__assign(__assign({},c),{dom:{tag:"button",classes:[e,e+"--select"].concat(map(t.classes,(function(t){return e+"--"+t}))),attributes:__assign({},l)},components:componentRenderPipeline([u.map((function(t){return t.asSpec()})),a.map((function(t){return t.asSpec()})),s.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:get$d("chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:derive$1(__spreadArrays(t.dropdownBehaviours,[DisablingConfigs_button(t.disabled),Ga.config({}),Oo.config({}),config("dropdown-events",[onControlAttached(t,i),onControlDetached(t,i)]),config("menubutton-update-display-text",[run(Ju,(function(t,e){a.bind((function(e){return e.getOpt(t)})).each((function(t){Oo.set(t,[text(n.providers.translate(e.event().text()))])}))})),run(Zu,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){Oo.set(t,[renderReplacableIconFromPack(e.event().icon(),n.providers.icons)])}))}))])])),eventOrder:k(Yu,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:derive$1([To.config({mode:"special",onLeft:onLeftOrRightInMenu,onRight:onLeftOrRightInMenu})]),lazySink:n.getSink,toggleClass:e+"--active",parts:{menu:part(0,t.columns,t.presets)},fetch:function(){return Future_nu(t.fetch)}}))).asSpec()},isSeparator=function(t){return"separator"===t.type},Qu={type:"separator"},unwrapReferences=function(t,e){var n=foldl(t,(function(t,n){return function(t){return f(t)}(n)?""===n?t:"|"===n?t.length>0&&!isSeparator(t[t.length-1])?t.concat([Qu]):t:has(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return n.length>0&&isSeparator(n[n.length-1])&&n.pop(),n},getFromItem=function(t,e){return function(t){return has(t,"getSubmenuItems")}(t)?function(t,e){var n=t.getSubmenuItems(),i=expand(n,e);return{item:t,menus:k(i.menus,wrap$1(t.value,i.items)),expansions:k(i.expansions,wrap$1(t.value,t.value))}}(t,e):{item:t,menus:{},expansions:{}}},expand=function(t,e){var n=unwrapReferences(f(t)?t.split(" "):t,e);return foldr(n,(function(t,n){var i=function(t){if(isSeparator(t))return t;var e=get(t,"value").getOrThunk((function(){return generate$1("generated-menu-item")}));return k({value:e},t)}(n),a=getFromItem(i,e);return{menus:k(t.menus,a.menus),items:[a.item].concat(t.items),expansions:k(t.expansions,a.expansions)}}),{menus:{},expansions:{},items:[]})},build$2=function(t,e,n,i){var a=generate$1("primary-menu"),u=expand(t,n.shared.providers.menuItems());if(0===u.items.length)return s.none();var c=createPartialMenu(a,u.items,e,n,i),l=map$1(u.menus,(function(t,i){return createPartialMenu(i,t,e,n,!1)})),f=k(l,wrap$1(a,c));return s.from(Ko.tieredData(a,f,u.expansions))},getMenuButtonApi=function(t){return{isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)},setActive:function(e){var n=t.element();e?(add$2(n,"tox-tbtn--enabled"),set$1(n,"aria-pressed",!0)):(remove$4(n,"tox-tbtn--enabled"),remove$1(n,"aria-pressed"))},isActive:function(){return has$2(t.element(),"tox-tbtn--enabled")}}},renderMenuButton=function(t,e,n,i){return renderCommonDropdown({text:t.text,icon:t.icon,tooltip:t.tooltip,role:i,fetch:function(e){t.fetch((function(t){e(build$2(t,Ii.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:getMenuButtonApi,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ia.config({})]},e,n.shared)},getFetch$1=function(t,e,n){var getMenuItemAction=function(t){return function(i){var a=!i.isActive();i.setActive(a),t.storage.set(a),n.shared.getSink().each((function(n){e().getOpt(n).each((function(e){focus$1(e.element()),emitWith(e,ga,{name:t.name,value:t.storage.get()})}))}))}},getMenuItemSetup=function(t){return function(e){e.setActive(t.storage.get())}};return function(e){e(map(t,(function(t){var e=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return __assign(__assign({type:t.type,active:!1},e),{onAction:getMenuItemAction(t),onSetup:getMenuItemSetup(t)})})))}},renderCommonSpec=function(t,e,n,i,a){void 0===n&&(n=[]);var u=e.fold((function(){return{}}),(function(t){return{action:t}})),c=__assign({buttonBehaviours:derive$1([DisablingConfigs_button(t.disabled),Ia.config({}),config("button press",[preventDefault("click"),preventDefault("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),s=k(c,{dom:i});return k(s,{components:a})},renderIconButtonSpec=function(t,e,n,i){void 0===i&&(i=[]);var a={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},u=t.icon.map((function(t){return renderIconFromPack(t,n.icons)})),c=componentRenderPipeline([u]);return renderCommonSpec(t,e,i,a,c)},renderIconButton=function(t,e,n,i){void 0===i&&(i=[]);var a=renderIconButtonSpec(t,s.some(e),n,i);return ei.sketch(a)},renderButtonSpec=function(t,e,n,i,a){void 0===i&&(i=[]),void 0===a&&(a=[]);var u=n.translate(t.text),c=t.icon?t.icon.map((function(t){return renderIconFromPack(t,n.icons)})):s.none(),l=c.isSome()?componentRenderPipeline([c]):[],f=c.isSome()?{}:{innerHtml:u},d=__spreadArrays(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],c.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],a),m=__assign(__assign({tag:"button",classes:d},f),{attributes:{title:u}});return renderCommonSpec(t,e,i,m,l)},renderButton=function(t,e,n,i,a){void 0===i&&(i=[]),void 0===a&&(a=[]);var u=renderButtonSpec(t,s.some(e),n,i,a);return ei.sketch(u)},getAction=function(t,n){return function(i){"custom"===n?emitWith(i,ga,{name:t,value:{}}):"submit"===n?emit(i,ha):"cancel"===n?emit(i,ma):e.console.error("Unknown button type: ",n)}},renderFooterButton=function(t,n,i){if(function(t,e){return"menu"===e}(0,n)){var a=t,u=__assign(__assign({},t),{onSetup:function(e){return e.setDisabled(t.disabled),noop},fetch:getFetch$1(a.items,(function(){return c}),i)}),c=record(renderMenuButton(u,"tox-tbtn",i,s.none()));return c.asSpec()}if(function(t,e){return"custom"===e||"cancel"===e||"submit"===e}(0,n)){var l=getAction(t.name,n),f=__assign(__assign({},t),{borderless:!1});return renderButton(f,l,i.shared.providers,[])}e.console.error("Unknown footer button type: ",n)},renderDialogButton=function(t,e){var n,i,a=getAction(t.name,"custom");return n=s.none(),i=Ca.parts().field(__assign({factory:ei},renderButtonSpec(t,s.some(a),e,[RepresentingConfigs_memory(""),ComposingConfigs_self()]))),renderFormFieldWith(n,i,[],[])},tc=constant([defaulted$1("field1Name","field1"),defaulted$1("field2Name","field2"),onStrictHandler("onLockedChange"),markers(["lockClass"]),defaulted$1("locked",!1),Zn("coupledFieldBehaviours",[_r,Jn])]),coupledPart=function(t,e){return pr({factory:Ca,name:t,overrides:function(t){return{fieldBehaviours:derive$1([config("coupled-input-behaviour",[run(wt(),(function(n){(function(t,e,n){return getPart(t,e,n).bind(_r.getCurrent)})(n,t,e).each((function(e){getPart(n,t,"lock").each((function(i){Ro.isOn(i)&&t.onLockedChange(n,e,i)}))}))}))])])}}})},ec=constant([coupledPart("field1","field2"),coupledPart("field2","field1"),pr({factory:ei,schema:[strict$1("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:derive$1([Ro.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),nc=composite$1({name:"FormCoupledInputs",configFields:tc(),partFields:ec(),factory:function(t,e,n,i){return{uid:t.uid,dom:t.dom,components:e,behaviours:Qn(t.coupledFieldBehaviours,[_r.config({find:s.some}),Jn.config({store:{mode:"manual",getValue:function(e){var n,i=getPartsOrDie(e,t,["field1","field2"]);return(n={})[t.field1Name]=Jn.getValue(i.field1()),n[t.field2Name]=Jn.getValue(i.field2()),n},setValue:function(e,n){var i=getPartsOrDie(e,t,["field1","field2"]);hasNonNullableKey(n,t.field1Name)&&Jn.setValue(i.field1(),n[t.field1Name]),hasNonNullableKey(n,t.field2Name)&&Jn.setValue(i.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return getPart(e,t,"field1")},getField2:function(e){return getPart(e,t,"field2")},getLock:function(e){return getPart(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),parseSize=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null!==e){var n=parseFloat(e[1]),i=e[2];return l.value({value:n,unit:i})}return l.error(t)},convertUnit=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},supported=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?s.some(t.value):supported(t.unit)&&supported(e)?n[t.unit]===n[e]?s.some(t.value):s.some(t.value/n[t.unit]*n[e]):s.none()},noSizeConversion=function(t){return s.none()},makeRatioConverter=function(t,e){var n,i,a,u=parseSize(t).toOption(),c=parseSize(e).toOption();return(n=u,i=c,a=function(t,e){return convertUnit(t,e.unit).map((function(t){return e.value/t})).map((function(t){return function(t,e){return function(n){return convertUnit(n,e).map((function(n){return{value:n*t,unit:e}}))}}(t,e.unit)})).getOr(noSizeConversion)},n.isSome()&&i.isSome()?s.some(a(n.getOrDie(),i.getOrDie())):s.none()).getOr(noSizeConversion)},renderSizeInput=function(t,e){var n=noSizeConversion,i=generate$1("ratio-event"),a=nc.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:get$d("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:get$d("unlock",e.icons)}}],buttonBehaviours:derive$1([DisablingConfigs_button(t.disabled),Ia.config({})])}),formGroup=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},getFieldPart=function(e){return Ca.parts().field({factory:ka,inputClasses:["tox-textfield"],inputBehaviours:derive$1([Pi.config({disabled:t.disabled}),Ia.config({}),config("size-input-events",[run(vt(),(function(t,n){emitWith(t,i,{isField1:e})})),run(Ct(),(function(e,n){emitWith(e,fa,{name:t.name})}))])]),selectOnFocus:!1})},getLabel=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},u=nc.parts().field1(formGroup([Ca.parts().label(getLabel("Width")),getFieldPart(!0)])),c=nc.parts().field2(formGroup([Ca.parts().label(getLabel("Height")),getFieldPart(!1)]));return nc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[u,c,formGroup([getLabel("&nbsp;"),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,i){parseSize(Jn.getValue(t)).each((function(t){n(t).each((function(t){Jn.setValue(e,function(t){var e,n={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},i=t.value.toFixed((e=t.unit)in n?n[e]:1);return-1!==i.indexOf(".")&&(i=i.replace(/\.?0*$/,"")),i+t.unit}(t))}))}))},coupledFieldBehaviours:derive$1([Pi.config({disabled:t.disabled,onDisabled:function(t){nc.getField1(t).bind(Ca.getField).each(Pi.disable),nc.getField2(t).bind(Ca.getField).each(Pi.disable),nc.getLock(t).each(Pi.disable)},onEnabled:function(t){nc.getField1(t).bind(Ca.getField).each(Pi.enable),nc.getField2(t).bind(Ca.getField).each(Pi.enable),nc.getLock(t).each(Pi.enable)}}),config("size-input-events2",[run(i,(function(t,e){var i=e.event().isField1(),a=i?nc.getField1(t):nc.getField2(t),u=i?nc.getField2(t):nc.getField1(t),c=a.map(Jn.getValue).getOr(""),s=u.map(Jn.getValue).getOr("");n=makeRatioConverter(c,s)}))])])})},rc={undo:constant(generate$1("undo")),redo:constant(generate$1("redo")),zoom:constant(generate$1("zoom")),back:constant(generate$1("back")),apply:constant(generate$1("apply")),swap:constant(generate$1("swap")),transform:constant(generate$1("transform")),tempTransform:constant(generate$1("temp-transform")),transformApply:constant(generate$1("transform-apply"))},oc=constant("save-state"),ic=constant("disable"),ac=constant("enable"),uc={formActionEvent:ga,saveState:oc,disable:ic,enable:ac},renderEditPanel=function(t,e){var createButton=function(t,n,i,a){return record(renderButton({name:t,text:t,disabled:i,primary:a,icon:s.none(),borderless:!1},n,e))},createIconButton=function(t,n,i,a){return record(renderIconButton({name:t,icon:s.some(t),tooltip:s.some(n),disabled:a,primary:!1,borderless:!1},i,e))},disableAllComponents=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(Pi)&&Pi.disable(n)}))},enableAllComponents=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(Pi)&&Pi.enable(n)}))},n={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},i=noop,emit$1=function(t,e,n){emitWith(t,e,n)},emitDisable=function(t){return emit(t,uc.disable())},emitEnable=function(t){return emit(t,uc.enable())},emitTransform=function(t,e){emitDisable(t),emit$1(t,rc.transform(),{transform:e}),emitEnable(t)},getBackSwap=function(t){return function(){M.getOpt(t).each((function(t){Oo.set(t,[z])}))}},emitTransformApply=function(t,e){emitDisable(t),emit$1(t,rc.transformApply(),{transform:e,swap:getBackSwap(t)}),emitEnable(t)},createBackButton=function(){return createButton("Back",(function(t){return emit$1(t,rc.back(),{swap:getBackSwap(t)})}),!1,!1)},createSpacer=function(){return record({dom:{tag:"div",classes:["tox-spacer"]},behaviours:derive$1([Pi.config({})])})},createApplyButton=function(){return createButton("Apply",(function(t){return emit$1(t,rc.apply(),{swap:getBackSwap(t)})}),!0,!0)},makeCropTransform=function(){return function(e){var n=t.getRect();return function(t,e,n,i,a){return crop(t,e,n,i,a)}(e,n.x,n.y,n.w,n.h)}},a=[createBackButton(),createSpacer(),createButton("Apply",(function(e){var n=makeCropTransform();emitTransformApply(e,n),t.hideCrop()}),!1,!0)],u=la.sketch({dom:n,components:a.map((function(t){return t.asSpec()})),containerBehaviours:derive$1([config("image-tools-crop-buttons-events",[run(uc.disable(),(function(t,e){disableAllComponents(a,t)})),run(uc.enable(),(function(t,e){enableAllComponents(a,t)}))])])}),c=record(renderSizeInput({name:"size",label:s.none(),constrain:!0,disabled:!1},e)),l=[createBackButton(),createSpacer(),c,createSpacer(),createButton("Apply",(function(t){c.getOpt(t).each((function(e){var n=Jn.getValue(e),i=function(t,e){return function(n){return resize$2(n,t,e)}}(parseInt(n.width,10),parseInt(n.height,10));emitTransformApply(t,i)}))}),!1,!0)],f=la.sketch({dom:n,components:l.map((function(t){return t.asSpec()})),containerBehaviours:derive$1([config("image-tools-resize-buttons-events",[run(uc.disable(),(function(t,e){disableAllComponents(l,t)})),run(uc.enable(),(function(t,e){enableAllComponents(l,t)}))])])}),makeValueTransform=function(t,e){return function(n){return t(n,e)}},d=makeValueTransform(flip$1,"h"),m=makeValueTransform(flip$1,"v"),g=makeValueTransform(rotate$1,-90),h=makeValueTransform(rotate$1,90),flipRotateOnAction=function(t,e){!function(t,e){emitDisable(t),emit$1(t,rc.tempTransform(),{transform:e}),emitEnable(t)}(t,e)},p=[createBackButton(),createSpacer(),createIconButton("flip-horizontally","Flip horizontally",(function(t){flipRotateOnAction(t,d)}),!1),createIconButton("flip-vertically","Flip vertically",(function(t){flipRotateOnAction(t,m)}),!1),createIconButton("rotate-left","Rotate counterclockwise",(function(t){flipRotateOnAction(t,g)}),!1),createIconButton("rotate-right","Rotate clockwise",(function(t){flipRotateOnAction(t,h)}),!1),createSpacer(),createApplyButton()],v=la.sketch({dom:n,components:p.map((function(t){return t.asSpec()})),containerBehaviours:derive$1([config("image-tools-fliprotate-buttons-events",[run(uc.disable(),(function(t,e){disableAllComponents(p,t)})),run(uc.enable(),(function(t,e){enableAllComponents(p,t)}))])])}),makeSlider=function(t,n,i,a,u){var c=Nu.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),s=Nu.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),l=Nu.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return record(Nu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:i,maxX:u,getInitialValue:constant({x:constant(a)})},components:[c,s,l],sliderBehaviours:derive$1([zo.config({})]),onChoose:n}))},makeVariableSlider=function(t,e,n,i,a){return makeSlider(t,(function(t,n,i){var a=makeValueTransform(e,i.x()/100);emitTransform(t,a)}),n,i,a)},createVariableFilterPanel=function(t,e,i,a,u){var c=function(t,e,n,i,a){return[createBackButton(),makeVariableSlider(t,e,n,i,a),createApplyButton()]}(t,e,i,a,u);return la.sketch({dom:n,components:c.map((function(t){return t.asSpec()})),containerBehaviours:derive$1([config("image-tools-filter-panel-buttons-events",[run(uc.disable(),(function(t,e){disableAllComponents(c,t)})),run(uc.enable(),(function(t,e){enableAllComponents(c,t)}))])])})},b=[createBackButton(),createSpacer(),createApplyButton()],y=la.sketch({dom:n,components:b.map((function(t){return t.asSpec()}))}),x=createVariableFilterPanel("Brightness",brightness$1,-100,0,100),w=createVariableFilterPanel("Contrast",contrast$1,-100,0,100),C=createVariableFilterPanel("Gamma",gamma$1,-100,0,100),makeColorTransform=function(t,e,n){return function(i){return function(t,e,n,i){return colorize(t,e,n,i)}(i,t,e,n)}},makeColorSlider=function(t){return makeSlider(t,(function(t,e,n){var i=S.getOpt(t),a=E.getOpt(t),u=k.getOpt(t);i.each((function(e){a.each((function(n){u.each((function(i){var a=Jn.getValue(e).x()/100,u=Jn.getValue(i).x()/100,c=Jn.getValue(n).x()/100,s=makeColorTransform(a,u,c);emitTransform(t,s)}))}))}))}),0,100,200)},S=makeColorSlider("R"),k=makeColorSlider("G"),E=makeColorSlider("B"),T=[createBackButton(),S,k,E,createApplyButton()],O=la.sketch({dom:n,components:T.map((function(t){return t.asSpec()}))}),getTransformPanelEvent=function(t,e,n){return function(i){emit$1(i,rc.swap(),{transform:e,swap:function(){M.getOpt(i).each((function(e){Oo.set(e,[t]),n(e)}))}})}},_=s.some(sharpen$1),N=s.some(invert$1),A=[createIconButton("crop","Crop",getTransformPanelEvent(u,s.none(),(function(e){t.showCrop()})),!1),createIconButton("resize","Resize",getTransformPanelEvent(f,s.none(),(function(e){c.getOpt(e).each((function(e){var n=t.getMeasurements(),i=n.width,a=n.height;Jn.setValue(e,{width:i,height:a})}))})),!1),createIconButton("orientation","Orientation",getTransformPanelEvent(v,s.none(),i),!1),createIconButton("brightness","Brightness",getTransformPanelEvent(x,s.none(),i),!1),createIconButton("sharpen","Sharpen",getTransformPanelEvent(y,_,i),!1),createIconButton("contrast","Contrast",getTransformPanelEvent(w,s.none(),i),!1),createIconButton("color-levels","Color levels",getTransformPanelEvent(O,s.none(),i),!1),createIconButton("gamma","Gamma",getTransformPanelEvent(C,s.none(),i),!1),createIconButton("invert","Invert",getTransformPanelEvent(y,N,i),!1)],z=la.sketch({dom:n,components:A.map((function(t){return t.asSpec()}))}),D=la.sketch({dom:{tag:"div"},components:[z],containerBehaviours:derive$1([Oo.config({})])}),M=record(D);return{memContainer:M,getApplyButton:function(t){return M.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},cc=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),sc=tinymce.util.Tools.resolve("tinymce.geom.Rect"),lc=tinymce.util.Tools.resolve("tinymce.util.Observable"),fc=tinymce.util.Tools.resolve("tinymce.util.Tools"),dc=tinymce.util.Tools.resolve("tinymce.util.VK");function updateWithTouchData(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function DragHelper(t,n){var i,a,u,c,s,l,f,d=n.document||e.document;n=n||{};var m=d.getElementById(n.handle||t);u=function(t){var u,g,h=function getDocumentSize(t){var e,n,i,a,u,c,s,l=Math.max;return e=t.documentElement,n=t.body,i=l(e.scrollWidth,n.scrollWidth),a=l(e.clientWidth,n.clientWidth),u=l(e.offsetWidth,n.offsetWidth),c=l(e.scrollHeight,n.scrollHeight),s=l(e.clientHeight,n.clientHeight),{width:i<u?a:i,height:c<l(e.offsetHeight,n.offsetHeight)?s:c}}(d);updateWithTouchData(t),t.preventDefault(),a=t.button,u=m,l=t.screenX,f=t.screenY,g=e.window.getComputedStyle?e.window.getComputedStyle(u,null).getPropertyValue("cursor"):u.runtimeStyle.cursor,i=cc("<div></div>").css({position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:g}).appendTo(d.body),cc(d).on("mousemove touchmove",s).on("mouseup touchend",c),n.start(t)},s=function(t){if(updateWithTouchData(t),t.button!==a)return c(t);t.deltaX=t.screenX-l,t.deltaY=t.screenY-f,t.preventDefault(),n.drag(t)},c=function(t){updateWithTouchData(t),cc(d).off("mousemove touchmove",s).off("mouseup touchend",c),i.remove(),n.stop&&n.stop(t)},this.destroy=function(){cc(m).off()},cc(m).on("mousedown touchstart",u)}var mc=0,CropRect_create=function(t,e,n,i,a){var u,c,s,l="tox-crid-"+mc++,f=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}];s=["top","right","bottom","left"];var getRelativeRect=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}};function moveRect(e,i,a,c){var s,l,f,d,m;s=i.x,l=i.y,f=i.w,d=i.h,s+=a*e.deltaX,l+=c*e.deltaY,(f+=a*e.deltaW)<20&&(f=20),(d+=c*e.deltaH)<20&&(d=20),m=t=sc.clamp({x:s,y:l,w:f,h:d},n,"move"===e.name),m=getRelativeRect(n,m),u.fire("updateRect",{rect:m}),setInnerRect(m)}function repaint(t){function updateElementRect(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),cc("#"+l+"-"+t,i).css({left:e.x,top:e.y,width:e.w,height:e.h})}fc.each(f,(function(e){cc("#"+l+"-"+e.name,i).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),updateElementRect("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),updateElementRect("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),updateElementRect("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),updateElementRect("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),updateElementRect("move",t)}function setRect(e){repaint(t=e)}function setInnerRect(t){var e,i;setRect((e=n,{x:(i=t).x+e.x,y:i.y+e.y,w:i.w,h:i.h}))}return function render(){cc('<div id="'+l+'" class="tox-croprect-container" role="grid" aria-dropeffect="execute">').appendTo(i),fc.each(s,(function(t){cc("#"+l,i).append('<div id="'+l+"-"+t+'"class="tox-croprect-block" style="display: none" data-mce-bogus="all">')})),fc.each(f,(function(t){cc("#"+l,i).append('<div id="'+l+"-"+t.name+'" class="tox-croprect-handle tox-croprect-handle-'+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),c=fc.map(f,(function createDragHelper(e){var n;return new DragHelper(l,{document:i.ownerDocument,handle:l+"-"+e.name,start:function(){n=t},drag:function(t){moveRect(e,n,t.deltaX,t.deltaY)}})})),repaint(t),cc(i).on("focusin focusout",(function(t){cc(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),cc(i).on("keydown",(function(e){var n;function moveAndBlock(t,e,i,a,u){t.stopPropagation(),t.preventDefault(),moveRect(n,i,a,u)}switch(fc.each(f,(function(t){if(e.target.id===l+"-"+t.name)return n=t,!1})),e.keyCode){case dc.LEFT:moveAndBlock(e,0,t,-10,0);break;case dc.RIGHT:moveAndBlock(e,0,t,10,0);break;case dc.UP:moveAndBlock(e,0,t,0,-10);break;case dc.DOWN:moveAndBlock(e,0,t,0,10);break;case dc.ENTER:case dc.SPACEBAR:e.preventDefault(),a()}}))}(),u=fc.extend({toggleVisibility:function toggleVisibility(t){var e;e=fc.map(f,(function(t){return"#"+l+"-"+t.name})).concat(fc.map(s,(function(t){return"#"+l+"-"+t}))).join(","),t?cc(e,i).show():cc(e,i).hide()},setClampRect:function setClampRect(e){n=e,repaint(t)},setRect:setRect,getInnerRect:function(){return getRelativeRect(n,t)},setInnerRect:setInnerRect,setViewPortRect:function setViewPortRect(n){e=n,repaint(t)},destroy:function destroy(){fc.each(c,(function(t){t.destroy()})),c=[]}},lc)},renderImagePanel=function(t){var e=record({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=Cell(1),i=Cell(s.none()),a=Cell({x:0,y:0,w:1,h:1}),u=Cell({x:0,y:0,w:1,h:1}),repaintImg=function(t,u){l.getOpt(t).each((function(t){var c=n.get(),s=get$7(t.element()),l=get$6(t.element()),f=u.dom().naturalWidth*c,d=u.dom().naturalHeight*c,m=Math.max(0,s/2-f/2),g=Math.max(0,l/2-d/2),h={left:m.toString()+"px",top:g.toString()+"px",width:f.toString()+"px",height:d.toString()+"px",position:"absolute"};setAll$1(u,h),e.getOpt(t).each((function(t){setAll$1(t.element(),h)})),i.get().each((function(t){var e=a.get();t.setRect({x:e.x*c+m,y:e.y*c+g,w:e.w*c,h:e.h*c}),t.setClampRect({x:m,y:g,w:f,h:d}),t.setViewPortRect({x:0,y:0,w:s,h:l})}))}))},updateSrc=function(t,e){var i,c=$.fromTag("img");return set$1(c,"src",e),(i=c.dom(),new ai((function(t){var loaded=function(){i.removeEventListener("load",loaded),t(i)};i.complete?t(i):i.addEventListener("load",loaded)}))).then((function(){return l.getOpt(t).map((function(t){var e=external({element:c});Oo.replaceAt(t,1,s.some(e));var i=u.get(),f={x:0,y:0,w:c.dom().naturalWidth,h:c.dom().naturalHeight};u.set(f);var d=sc.inflate(f,-20,-20);return a.set(d),i.w===f.w&&i.h===f.h||function(t,e){l.getOpt(t).each((function(t){var i=get$7(t.element()),a=get$6(t.element()),u=e.dom().naturalWidth,c=e.dom().naturalHeight,s=Math.min(i/u,a/c);s>=1?n.set(1):n.set(s)}))}(t,c),repaintImg(t,c),c}))}))},c=la.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:derive$1([config("image-panel-crop-events",[Zt((function(t){l.getOpt(t).each((function(t){var e=t.element().dom(),u=CropRect_create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,(function(){}));u.toggleVisibility(!1),u.on("updateRect",(function(t){var e=t.rect,i=n.get(),u={x:Math.round(e.x/i),y:Math.round(e.y/i),w:Math.round(e.w/i),h:Math.round(e.h/i)};a.set(u)})),i.set(s.some(u))}))}))])])}],containerBehaviours:derive$1([Oo.config({}),config("image-panel-events",[Zt((function(e){updateSrc(e,t)}))])])}),l=record(c);return{memContainer:l,updateSrc:updateSrc,zoom:function(t,e){var i=n.get(),a=e>0?Math.min(2,i+.1):Math.max(.1,i-.1);n.set(a),l.getOpt(t).each((function(t){var e=t.components()[1].element();repaintImg(t,e)}))},showCrop:function(){i.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){i.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return a.get()},getMeasurements:function(){var t=u.get();return{width:t.w,height:t.h}}}},createButton=function(t,e,n,i,a){return renderIconButton({name:t,icon:s.some(e),disabled:n,tooltip:s.some(t),primary:!1,borderless:!1},i,a)},setButtonEnabled=function(t,e){e?Pi.enable(t):Pi.disable(t)};var gc,hc,pc,makeState=function(t){var n=Cell(t),i=Cell(s.none()),a=function UndoStack(){var t=[],e=-1;function canUndo(){return e>0}function canRedo(){return-1!==e&&e<t.length-1}return{data:t,add:function add(n){var i;return i=t.splice(++e),t.push(n),{state:n,removed:i}},undo:function undo(){if(canUndo())return t[--e]},redo:function redo(){if(canRedo())return t[++e]},canUndo:canUndo,canRedo:canRedo}}();a.add(t);var setBlobState=function(t){n.set(t)},createState=function(t){return{blob:t,url:e.URL.createObjectURL(t)}},destroyState=function(t){e.URL.revokeObjectURL(t.url)},destroyTempState=function(){i.get().each(destroyState),i.set(s.none())},addBlobState=function(t){var e=createState(t);setBlobState(e);var n,i=a.add(e).removed;return n=i,fc.each(n,destroyState),e.url};return{getBlobState:function(){return n.get()},setBlobState:setBlobState,addBlobState:addBlobState,getTempState:function(){return i.get().fold((function(){return n.get()}),(function(t){return t}))},updateTempState:function(t){var e=createState(t);return destroyTempState(),i.set(s.some(e)),e.url},addTempState:function(t){var e=createState(t);return i.set(s.some(e)),e.url},applyTempState:function(t){return i.get().fold((function(){}),(function(e){addBlobState(e.blob),t()}))},destroyTempState:destroyTempState,undo:function(){var t=a.undo();return setBlobState(t),t.url},redo:function(){var t=a.redo();return setBlobState(t),t.url},getHistoryStates:function(){return{undoEnabled:a.canUndo(),redoEnabled:a.canRedo()}}}},renderImageTools=function(t,n){var i=makeState(t.currentState),updateButtonUndoStates=function(t){var e=i.getHistoryStates();u.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),emitWith(t,uc.formActionEvent,{name:uc.saveState(),value:e.undoEnabled})},imageResultToBlob=function(t){return t.toBlob()},block=function(t){emitWith(t,uc.formActionEvent,{name:uc.disable(),value:{}})},unblock=function(t){c.getApplyButton(t).each((function(t){Pi.enable(t)})),emitWith(t,uc.formActionEvent,{name:uc.enable(),value:{}})},updateSrc=function(t,e){return block(t),a.updateSrc(t,e)},blobManipulate=function(t,n,i,a,u){return block(t),function(t){return fromBlob(t)}(n).then(i).then(imageResultToBlob).then(a).then((function(e){return updateSrc(t,e).then((function(e){return updateButtonUndoStates(t),u(),unblock(t),e}))})).catch((function(n){return e.console.log(n),unblock(t),n}))},manipulate=function(t,e,n){var a=i.getBlobState().blob;blobManipulate(t,a,e,(function(t){return i.updateTempState(t)}),n)},destroyTempState=function(t){var e=i.getBlobState().url;return i.destroyTempState(),updateButtonUndoStates(t),e},a=renderImagePanel(t.currentState.url),u=function(t){var e=record(createButton("Undo","undo",!0,(function(t){emitWith(t,rc.undo(),{direction:1})}),t)),n=record(createButton("Redo","redo",!0,(function(t){emitWith(t,rc.redo(),{direction:1})}),t));return{container:la.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[e.asSpec(),n.asSpec(),createButton("Zoom in","zoom-in",!1,(function(t){emitWith(t,rc.zoom(),{direction:1})}),t),createButton("Zoom out","zoom-out",!1,(function(t){emitWith(t,rc.zoom(),{direction:-1})}),t)]}),updateButtonUndoStates:function(t,i,a){e.getOpt(t).each((function(t){setButtonEnabled(t,i)})),n.getOpt(t).each((function(t){setButtonEnabled(t,a)}))}}}(n),c=renderEditPanel(a,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[c.memContainer.asSpec(),a.memContainer.asSpec(),u.container],behaviours:derive$1([Jn.config({store:{mode:"manual",getValue:function(){return i.getBlobState()}}}),config("image-tools-events",[run(rc.undo(),(function(t,e){var n=i.undo();updateSrc(t,n).then((function(e){unblock(t),updateButtonUndoStates(t)}))})),run(rc.redo(),(function(t,e){var n=i.redo();updateSrc(t,n).then((function(e){unblock(t),updateButtonUndoStates(t)}))})),run(rc.zoom(),(function(t,e){var n=e.event().direction();a.zoom(t,n)})),run(rc.back(),(function(t,e){!function(t){var e=destroyTempState(t);updateSrc(t,e).then((function(e){unblock(t)}))}(t),e.event().swap()(),a.hideCrop()})),run(rc.apply(),(function(t,e){i.applyTempState((function(){destroyTempState(t),e.event().swap()()}))})),run(rc.transform(),(function(t,e){return manipulate(t,e.event().transform(),noop)})),run(rc.tempTransform(),(function(t,e){return function(t,e){var n=i.getTempState().blob;blobManipulate(t,n,e,(function(t){return i.addTempState(t)}),noop)}(t,e.event().transform())})),run(rc.transformApply(),(function(t,e){return function(t,e,n){var a=i.getBlobState().blob;blobManipulate(t,a,e,(function(e){var n=i.addBlobState(e);return destroyTempState(t),n}),n)}(t,e.event().transform(),e.event().swap())})),run(rc.swap(),(function(t,e){!function(t){u.updateButtonUndoStates(t,!1,!1)}(t);var n=e.event().transform(),i=e.event().swap();n.fold((function(){i()}),(function(e){manipulate(t,e,i)}))}))]),ComposingConfigs_self()])}},vc=single$2({name:"HtmlSelect",configFields:[strict$1("options"),field$1("selectBehaviours",[zo,Jn]),defaulted$1("selectClasses",[]),defaulted$1("selectAttributes",{}),option("data")],factory:function(t,e){var n=map(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),i=t.data.map((function(t){return wrap$1("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:augment(t.selectBehaviours,[zo.config({}),Jn.config({store:__assign({mode:"manual",getValue:function(t){return get$5(t.element())},setValue:function(e,n){find(t.options,(function(t){return t.value===n})).isSome()&&set$3(e.element(),n)}},i)})])}}}),renderTextField=function(t,e){var n=t.label.map((function(t){return renderLabel(t,e)})),i=[Pi.config({disabled:t.disabled}),To.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return emit(t,ha),s.some(!0)}}),config("textfield-change",[run(wt(),(function(e,n){emitWith(e,fa,{name:t.name})})),run(Nt(),(function(e,n){emitWith(e,fa,{name:t.name})}))]),Ia.config({})],a=t.validation.map((function(t){return Ba.config({getRoot:function(t){return parent(t.element())},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Jn.getValue(e),i=t.validator(n);return Future_pure(!0===i?l.value(n):l.error(i))},validateOnLoad:t.validateOnLoad}})})).toArray(),u=t.placeholder.fold(constant({}),(function(t){return{placeholder:e.translate(t)}})),c=t.inputMode.fold(constant({}),(function(t){return{inputmode:t}})),f=__assign(__assign({},u),c),d=Ca.parts().field({tag:!0===t.multiline?"textarea":"input",inputAttributes:f,inputClasses:[t.classname],inputBehaviours:derive$1(flatten([i,a])),selectOnFocus:!1,factory:ka}),m=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),g=[Pi.config({disabled:t.disabled,onDisabled:function(t){Ca.getField(t).each(Pi.disable)},onEnabled:function(t){Ca.getField(t).each(Pi.enable)}})];return renderFormFieldWith(n,d,m,g)},bc=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return derive([run(t.event,n),Qt((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[run(t,(function(){return e.cancel()}))]})).getOr([])))}}),throttle=function(t){var e=Cell(null);return nu$5({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},yc=Object.freeze({__proto__:null,throttle:throttle,init:function(t){return t.stream.streams.state(t)}}),xc=[strictOf("stream",choose$1("mode",{throttle:[strict$1("delay"),defaulted$1("stopEvent",!0),output("streams",{setup:function(t,e){var n=t.stream,i=last$2(t.onStream,n.delay);return e.setTimer(i),function(t,e){i.throttle(t,e),n.stopEvent&&e.stop()}},state:throttle})]})),defaulted$1("event","input"),option("cancelEvent"),onStrictHandler("onStream")],wc=create$1({fields:xc,name:"streaming",active:bc,state:yc}),setValueFromItem=function(t,e,n){var i=Jn.getValue(n);Jn.setValue(e,i),setCursorAtEnd(e)},setSelectionOn=function(t,e){var n=t.element(),i=get$5(n),a=n.dom();"number"!==get$2(n,"type")&&e(a,i)},setCursorAtEnd=function(t){setSelectionOn(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},attemptSelectOver=function(t,e,n){if(t.selectsOver){var i=Jn.getValue(e),a=t.getDisplayText(i),u=Jn.getValue(n);return 0===t.getDisplayText(u).indexOf(a)?s.some((function(){setValueFromItem(0,e,n),function(t,e){setSelectionOn(t,(function(t,n){return t.setSelectionRange(e,n.length)}))}(e,a.length)})):s.none()}return s.none()},Cc=constant("alloy.typeahead.itemexecute"),Sc=constant([option("lazySink"),strict$1("fetch"),defaulted$1("minChars",5),defaulted$1("responseTime",1e3),onHandler("onOpen"),defaulted$1("getHotspot",s.some),defaulted$1("getAnchorOverrides",constant({})),defaulted$1("layouts",s.none()),defaulted$1("eventOrder",{}),defaultedObjOf("model",{},[defaulted$1("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),defaulted$1("selectsOver",!0),defaulted$1("populateFromBrowse",!0)]),onHandler("onSetValue"),onKeyboardHandler("onExecute"),onHandler("onItemExecute"),defaulted$1("inputClasses",[]),defaulted$1("inputAttributes",{}),defaulted$1("inputStyles",{}),defaulted$1("matchWidth",!0),defaulted$1("useMinWidth",!1),defaulted$1("dismissOnBlur",!0),markers(["openClass"]),option("initialData"),field$1("typeaheadBehaviours",[zo,Jn,wc,To,Ro,Fa]),state$1("previewing",(function(){return Cell(!0)}))].concat(Sa()).concat(sandboxFields())),kc=constant([vr({schema:[tieredMenuMarkers()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(i){attemptSelectOver(t.model,i,n).fold((function(){return zr.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&setValueFromItem(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOption().map((function(t){return emitWith(t,Cc(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&setValueFromItem(t.model,e,n)}))}}}})]),Ec=composite$1({name:"Typeahead",configFields:Sc(),partFields:kc(),factory:function(t,e,n,i){var navigateList=function(e,n,a){t.previewing.set(!1);var u=Fa.getCoupled(e,"sandbox");if(Hn.isOpen(u))_r.getCurrent(u).each((function(t){zr.getHighlighted(t).fold((function(){a(t)}),(function(){dispatchEvent(u,t.element(),"keydown",n)}))}));else{open$1(t,mapFetch(e),e,u,i,(function(t){_r.getCurrent(t).each(a)}),Oa.HighlightFirst).get(noop)}},a=focusBehaviours(t),mapFetch=function(t){return function(e){return e.map((function(e){var n=values(e.menus),i=bind(n,(function(t){return filter(t.items,(function(t){return"item"===t.type}))}));return Jn.getState(t).update(map(i,(function(t){return t.data}))),e}))}},u=[zo.config({}),Jn.config({onSetValue:t.onSetValue,store:__assign({mode:"dataset",getDataKey:function(t){return get$5(t.element())},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){set$3(e.element(),t.model.getDisplayText(n))}},t.initialData.map((function(t){return wrap$1("initialValue",t)})).getOr({}))}),wc.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,n){var a=Fa.getCoupled(e,"sandbox");if(zo.isFocused(e)&&get$5(e.element()).length>=t.minChars){var u=_r.getCurrent(a).bind((function(t){return zr.getHighlighted(t).map(Jn.getValue)}));t.previewing.set(!0);open$1(t,mapFetch(e),e,a,i,(function(e){_r.getCurrent(a).each((function(e){u.fold((function(){t.model.selectsOver&&zr.highlightFirst(e)}),(function(t){zr.highlightBy(e,(function(e){return Jn.getValue(e).value===t.value})),zr.getHighlighted(e).orThunk((function(){return zr.highlightFirst(e),s.none()}))}))}))}),Oa.HighlightFirst).get(noop)}},cancelEvent:Pt()}),To.config({mode:"special",onDown:function(t,e){return navigateList(t,e,zr.highlightFirst),s.some(!0)},onEscape:function(t){var e=Fa.getCoupled(t,"sandbox");return Hn.isOpen(e)?(Hn.close(e),s.some(!0)):s.none()},onUp:function(t,e){return navigateList(t,e,zr.highlightLast),s.some(!0)},onEnter:function(e){var n=Fa.getCoupled(e,"sandbox"),i=Hn.isOpen(n);if(i&&!t.previewing.get())return _r.getCurrent(n).bind((function(t){return zr.getHighlighted(t)})).map((function(t){return emitWith(e,Cc(),{item:t}),!0}));var a=Jn.getValue(e);return emit(e,Pt()),t.onExecute(n,e,a),i&&Hn.close(n),s.some(!0)}}),Ro.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Fa.config({others:{sandbox:function(e){return makeSandbox(t,e,{onOpen:function(){return Ro.on(e)},onClose:function(){return Ro.off(e)}})}}}),config("typeaheadevents",[ee((function(e){var n=noop;togglePopup(t,mapFetch(e),e,i,n,Oa.HighlightFirst).get(noop)})),run(Cc(),(function(e,n){var i=Fa.getCoupled(e,"sandbox");setValueFromItem(t.model,e,n.event().item()),emit(e,Pt()),t.onItemExecute(e,i,n.event().item(),Jn.getValue(e)),Hn.close(i),setCursorAtEnd(e)}))].concat(t.dismissOnBlur?[run(_t(),(function(t){var e=Fa.getCoupled(t,"sandbox");search(e.element()).isNone()&&Hn.close(e)}))]:[]))];return{uid:t.uid,dom:dom$2(k(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:__assign(__assign({},a),augment(t.typeaheadBehaviours,u)),eventOrder:t.eventOrder}}}),wrap$2=function(t){return __assign(__assign({},t),{toCached:function(){return wrap$2(t.toCached())},bindFuture:function(e){return wrap$2(t.bind((function(t){return t.fold((function(t){return Future_pure(l.error(t))}),(function(t){return e(t)}))})))},bindResult:function(e){return wrap$2(t.map((function(t){return t.bind(e)})))},mapResult:function(e){return wrap$2(t.map((function(t){return t.map(e)})))},mapError:function(e){return wrap$2(t.map((function(t){return t.mapError(e)})))},foldResult:function(e,n){return t.map((function(t){return t.fold(e,n)}))},withTimeout:function(n,i){return wrap$2(Future_nu((function(a){var u=!1,c=e.setTimeout((function(){u=!0,a(l.error(i()))}),n);t.get((function(t){u||(e.clearTimeout(c),a(t))}))})))}})},nu$c=function(t){return wrap$2(Future_nu(t))},Tc=nu$c,Oc={type:"separator"},toMenuItem=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}},staticMenuItem=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:function(){}}},filteredTargets=function(t,e){return function(t){return map(t,toMenuItem)}(function(t,e){return filter(e,(function(e){return e.type===t}))}(t,e))},headerTargets=function(t){return filteredTargets("header",t.targets)},anchorTargets=function(t){return filteredTargets("anchor",t.targets)},anchorTargetTop=function(t){return s.from(t.anchorTop).map((function(t){return staticMenuItem("<top>",t)})).toArray()},anchorTargetBottom=function(t){return s.from(t.anchorBottom).map((function(t){return staticMenuItem("<bottom>",t)})).toArray()},filterByQuery=function(t,e){var n=t.toLowerCase();return filter(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return contains$1(e.toLowerCase(),n)||contains$1(t.value.toLowerCase(),n)}))},getItems=function(t,e,n){var i=Jn.getValue(e),a=void 0!==i.meta.text?i.meta.text:i.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var i,u=filterByQuery(a,function(t){return map(t,(function(t){return staticMenuItem(t,t)}))}(n.getHistory(t)));return"file"===t?(i=[u,filterByQuery(a,headerTargets(e)),filterByQuery(a,flatten([anchorTargetTop(e),anchorTargets(e),anchorTargetBottom(e)]))],foldl(i,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(Oc,e)}),[])):u}))},_c=generate$1("aria-invalid"),renderCollection=function(t,e){var n,i,a=t.label.map((function(t){return renderLabel(t,e)})),runOnItem=function(t){return function(e,n){closest$3(n.event().target(),"[data-collection-item-value]").each((function(i){t(e,n,i,get$2(i,"data-collection-item-value"))}))}},u=runOnItem((function(e,n,i,a){n.stop(),emitWith(e,ga,{name:t.name,value:a})})),c=[run(pt(),runOnItem((function(t,e,n){focus$1(n)}))),run(St(),u),run(Mt(),u),run(vt(),runOnItem((function(t,e,n){descendant$1(t.element(),"."+_i).each((function(t){remove$4(t,_i)})),add$2(n,_i)}))),run(bt(),runOnItem((function(t){descendant$1(t.element(),"."+_i).each((function(t){remove$4(t,_i)}))}))),ee(runOnItem((function(e,n,i,a){emitWith(e,ga,{name:t.name,value:a})})))],s=Ca.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:identity},behaviours:derive$1([Oo.config({}),Jn.config({store:{mode:"memory",initialValue:[]},onSetValue:function(e,n){!function(e,n){var i=map(n,(function(e){var n,i=Si.translate(e.text),a=1===t.columns?'<div class="tox-collection__item-label">'+i+"</div>":"",u='<div class="tox-collection__item-icon">'+e.icon+"</div>",c={_:" "," - ":" ","-":" "},s=i.replace(/\_| \- |\-/g,(function(t){return c[t]}));return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+(('"'===(n=e.value)?"&quot;":n)+'" title="')+s+'" aria-label="'+s+'">'+u+a+"</div>"})),a=t.columns>1&&"auto"!==t.columns?chunk(i,t.columns):[i],u=map(a,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}));set(e.element(),u.join(""))}(e,n),"auto"===t.columns&&detectSize(e,5,"tox-collection__item").each((function(t){var n=t.numRows,i=t.numColumns;To.setGridSize(e,n,i)})),emit(e,ya)}}),Ia.config({}),To.config((n=t.columns,i="normal",1===n?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===n?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===i?".tox-swatches__row":".tox-collection__group",cell:"color"===i?".tox-swatch":"."+Ei}})),config("collection-events",c)])});return renderFormFieldWith(a,s,["tox-form__group--collection"],[])},make$6=function(t){return function(e,n,i){return get(n,"name").fold((function(){return t(n,i)}),(function(a){return e.field(a,t(n,i))}))}},Nc={bar:make$6((function(t,e){return function(t,e){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:map(t.items,e.interpreter)}}(t,e.shared)})),collection:make$6((function(t,e){return renderCollection(t,e.shared.providers)})),alertbanner:make$6((function(t,e){return function(t,e){return la.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:get$d(t.icon,e.icons),attributes:{title:e.translate(t.iconTooltip)}},action:function(e){emitWith(e,ga,{name:"alert-banner",value:t.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:e.translate(t.text)}}]})}(t,e.shared.providers)})),input:make$6((function(t,e){return function(t,e){return renderTextField({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:s.none(),maximized:t.maximized},e)}(t,e.shared.providers)})),textarea:make$6((function(t,e){return function(t,e){return renderTextField({name:t.name,multiline:!0,label:t.label,inputMode:s.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:s.none(),maximized:t.maximized},e)}(t,e.shared.providers)})),label:make$6((function(t,e){return function(t,e){var n={dom:{tag:"label",innerHtml:e.providers.translate(t.label),classes:["tox-label"]}},i=map(t.items,e.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(i),behaviours:derive$1([ComposingConfigs_self(),Oo.config({}),RepresentingConfigs_domHtml(s.none()),To.config({mode:"acyclic"})])}}(t,e.shared)})),iframe:function(t){return function(e,n,i){var a=k(n,{source:"dynamic"});return make$6(t)(e,a,i)}}((function(t,e){return renderIFrame(t,e.shared.providers)})),button:make$6((function(t,e){return renderDialogButton(t,e.shared.providers)})),checkbox:make$6((function(t,e){return function(t,e){var n=Jn.config({store:{mode:"manual",getValue:function(t){return t.element().dom().checked},setValue:function(t,e){t.element().dom().checked=e}}}),toggleCheckboxHandler=function(t){return t.element().dom().click(),s.some(!0)},i=Ca.parts().field({factory:{sketch:identity},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:derive$1([ComposingConfigs_self(),Pi.config({disabled:t.disabled}),Ia.config({}),zo.config({}),n,To.config({mode:"special",onEnter:toggleCheckboxHandler,onSpace:toggleCheckboxHandler,stopSpaceKeyup:!0}),config("checkbox-events",[run(Ct(),(function(e,n){emitWith(e,fa,{name:t.name})}))])])}),a=Ca.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:e.translate(t.label)},behaviours:derive$1([Ga.config({})])}),makeIcon=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:get$d("checked"===t?"selected":"unselected",e.icons)}}},u=record({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[makeIcon("checked"),makeIcon("unchecked")]});return Ca.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[i,u.asSpec(),a],fieldBehaviours:derive$1([Pi.config({disabled:t.disabled,disableClass:"tox-checkbox--disabled",onDisabled:function(t){Ca.getField(t).each(Pi.disable)},onEnabled:function(t){Ca.getField(t).each(Pi.enable)}})])})}(t,e.shared.providers)})),colorinput:make$6((function(t,e){return renderColorInput(t,e.shared,e.colorinput)})),colorpicker:make$6((function(t){var getClass=function(t){return"tox-"+t},n=makeFactory(translate$1,getClass),i=record(n.sketch({dom:{tag:"div",classes:[getClass("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){emitWith(t,ga,{name:"hex-valid",value:!0})},onInvalidHex:function(t){emitWith(t,ga,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[i.asSpec()],behaviours:derive$1([Jn.config({store:{mode:"manual",getValue:function(t){var e=i.get(t);return _r.getCurrent(e).bind((function(t){return Jn.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,n){var a=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),u=i.get(t);_r.getCurrent(u).fold((function(){e.console.log("Can not find form")}),(function(t){Jn.setValue(t,{hex:s.from(a[1]).getOr("")}),zu.getField(t,"hex").each((function(t){emit(t,wt())}))}))}}}),ComposingConfigs_self()])}})),dropzone:make$6((function(t,e){return renderDropZone(t,e.shared.providers)})),grid:make$6((function(t,e){return function(t,e){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:map(t.items,e.interpreter)}}(t,e.shared)})),selectbox:make$6((function(t,e){return function(t,e){var n=map(t.items,(function(t){return{text:e.translate(t.text),value:t.value}})),i=t.label.map((function(t){return renderLabel(t,e)})),a=Ca.parts().field({dom:{},selectAttributes:{size:t.size},options:n,factory:vc,selectBehaviours:derive$1([Pi.config({disabled:t.disabled}),Ia.config({}),config("selectbox-change",[run(Ct(),(function(e,n){emitWith(e,fa,{name:t.name})}))])])}),u=t.size>1?s.none():s.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:get$d("chevron-down",e.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:flatten([[a],u.toArray()])};return Ca.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:flatten([i.toArray(),[c]]),fieldBehaviours:derive$1([Pi.config({disabled:t.disabled,onDisabled:function(t){Ca.getField(t).each(Pi.disable)},onEnabled:function(t){Ca.getField(t).each(Pi.enable)}})])})}(t,e.shared.providers)})),sizeinput:make$6((function(t,e){return renderSizeInput(t,e.shared.providers)})),urlinput:make$6((function(t,e){return function(t,e,n){var i,a=e.shared.providers,updateHistory=function(e){var i=Jn.getValue(e);n.addToHistory(i.value,t.filetype)},u=Ca.parts().field({factory:Ec,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":_c,type:"url"},minChars:0,responseTime:0,fetch:function(i){var a=getItems(t.filetype,i,n),u=build$2(a,Ii.BUBBLE_TO_SANDBOX,e,!1);return Future_pure(u)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Ba)&&Ba.run(t).get(noop)},typeaheadBehaviours:derive$1(flatten([n.getValidationHandler().map((function(e){return Ba.config({getRoot:function(t){return parent(t.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){f.getOpt(t).each((function(t){set$1(t.element(),"title",a.translate(e))}))}},validator:{validate:function(n){var i=Jn.getValue(n);return Tc((function(n){e({type:t.filetype,url:i.value},(function(t){if("invalid"===t.status){var e=l.error(t.message);n(e)}else{var i=l.value(t.message);n(i)}}))}))},validateOnLoad:!1}})})).toArray(),[Pi.config({disabled:t.disabled}),Ia.config({}),config("urlinput-events",flatten(["file"===t.filetype?[run(wt(),(function(e){emitWith(e,fa,{name:t.name})}))]:[],[run(Ct(),(function(e){emitWith(e,fa,{name:t.name}),updateHistory(e)})),run(Nt(),(function(e){emitWith(e,fa,{name:t.name}),updateHistory(e)}))]]))]])),eventOrder:(i={},i[wt()]=["streaming","urlinput-events","invalidating"],i),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:part(0,0,"normal")},onExecute:function(t,e,n){emitWith(e,ha,{})},onItemExecute:function(e,n,i,a){updateHistory(e),emitWith(e,fa,{name:t.name})}}),c=t.label.map((function(t){return renderLabel(t,a)})),f=record(function(t,e,n,i){return void 0===n&&(n=t),void 0===i&&(i=t),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],innerHtml:get$d(n,a.icons),attributes:__assign({title:a.translate(i),"aria-live":"polite"},e.fold((function(){return{}}),(function(t){return{id:t}})))}}}("invalid",s.some(_c),"warning")),d=record({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[f.asSpec()]}),m=n.getUrlPicker(t.filetype),g=generate$1("browser.url.event"),h=record({dom:{tag:"div",classes:["tox-control-wrap"]},components:[u,d.asSpec()],behaviours:derive$1([Pi.config({disabled:t.disabled})])}),p=record(renderButton({name:t.name,icon:s.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return emit(t,g)}),a,[],["tox-browse-url"]));return Ca.sketch({dom:renderFormFieldDomWith([]),components:c.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:flatten([[h.asSpec()],m.map((function(){return p.asSpec()})).toArray()])}]),fieldBehaviours:derive$1([Pi.config({disabled:t.disabled,onDisabled:function(t){Ca.getField(t).each(Pi.disable),p.getOpt(t).each(Pi.disable)},onEnabled:function(t){Ca.getField(t).each(Pi.enable),p.getOpt(t).each(Pi.enable)}}),config("url-input-events",[run(g,(function(e){_r.getCurrent(e).each((function(n){var i=Jn.getValue(n),a=__assign({fieldname:t.name},i);m.each((function(i){i(a).get((function(i){Jn.setValue(n,i),emitWith(e,fa,{name:t.name})}))}))}))}))])])})}(t,e,e.urlinput)})),customeditor:make$6((function(t){var e=Cell(s.none()),n=record({dom:{tag:t.tag}}),i=Cell(s.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:derive$1([config("editor-foo-events",[Zt((function(a){n.getOpt(a).each((function(n){(!function(t){return Object.prototype.hasOwnProperty.call(t,"init")}(t)?Pu.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element().dom(),t.settings)})):t.init(n.element().dom())).then((function(t){i.get().each((function(e){t.setValue(e)})),i.set(s.none()),e.set(s.some(t))}))}))}))]),Jn.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return i.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){i.set(s.some(n))}),(function(t){return t.setValue(n)}))}}}),ComposingConfigs_self()]),components:[n.asSpec()]}})),htmlpanel:make$6((function(t){return"presentation"===t.presets?la.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):la.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:derive$1([Ia.config({}),zo.config({})])})})),imagetools:make$6((function(t,e){return renderImageTools(t,e.shared.providers)})),table:make$6((function(t,e){return function(t,e){var n,i,renderTh=function(t){return{dom:{tag:"th",innerHtml:e.translate(t)}}},renderTd=function(t){return{dom:{tag:"td",innerHtml:e.translate(t)}}},renderTr=function(t){return{dom:{tag:"tr"},components:map(t,renderTd)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:map(i,renderTh)}]}),(n=t.cells,{dom:{tag:"tbody"},components:map(n,renderTr)})],behaviours:derive$1([Ia.config({}),zo.config({})])}}(t,e.shared.providers)})),panel:make$6((function(t,e){return function(t,e){return{dom:{tag:"div",classes:t.classes},components:map(t.items,e.shared.interpreter)}}(t,e)}))},Ac={field:function(t,e){return e}},interpretInForm=function(t,e,n){var i=k(n,{shared:{interpreter:function(e){return interpretParts(t,e,i)}}});return interpretParts(t,e,i)},interpretParts=function(t,n,i){return get(Nc,n.type).fold((function(){return e.console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n}),(function(e){return e(t,n,i)}))},zc={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},getInlineDialogAnchor=function(t,e,n){return n?function(){return{anchor:"node",root:t(),node:s.from(t()),bubble:nu$8(-12,-12,zc),layouts:{onRtl:function(){return[northeast$3]},onLtr:function(){return[northwest$3]}},overrides:{maxHeightFunction:sn()}}}:function(){return{anchor:"hotspot",hotspot:e(),bubble:nu$8(-12,12,zc),layouts:{onRtl:function(){return[southeast$1]},onLtr:function(){return[southwest$1]}},overrides:{maxHeightFunction:sn()}}}},getBannerAnchor=function(t,e,n){return n?function(){return{anchor:"node",root:t(),node:s.from(t()),layouts:{onRtl:function(){return[north$3]},onLtr:function(){return[north$3]}}}}:function(){return{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[south$1]},onLtr:function(){return[south$1]}}}}},getCursorAnchor=function(t,e){return function(){return{anchor:"selection",root:e(),getSelection:function(){var e=t.selection.getRng();return s.some(yn.range($.fromDom(e.startContainer),e.startOffset,$.fromDom(e.endContainer),e.endOffset))}}}},getNodeAnchor=function(t){return function(e){return{anchor:"node",root:t(),node:e}}},Anchors_getAnchors=function(t,e){var bodyElement=function(){return $.fromDom(t.getBody())},n=useFixedContainer(t)||!isToolbarLocationTop(t);return{inlineDialog:getInlineDialogAnchor(bodyElement,e,n),banner:getBannerAnchor(bodyElement,e,n),cursor:getCursorAnchor(t,bodyElement),node:getNodeAnchor(bodyElement)}},colorPicker=function(t){return function(e,n){ta.colorPickerDialog(t)(e,n)}},hasCustomColors$1=function(t){return function(){return Settings_hasCustomColors(t)}},getColors$1=function(t){return function(){return Settings_getColors(t)}},getColorCols$2=function(t){return function(){return ta.getColorCols(t)}},ColorInputBackstage=function(t){return{colorPicker:colorPicker(t),hasCustomColors:hasCustomColors$1(t),getColors:getColors$1(t),getColorCols:getColorCols$2(t)}},isDraggableModal$1=function(t){return function(){return function(t){return t.getParam("draggable_modal",!1,"boolean")}(t)}},DialogBackstage=function(t){return{isDraggableModal:isDraggableModal$1(t)}},Dc=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],mapFormats=function(t){return foldl(t,(function(t,e){if(has(e,"items")){var n=mapFormats(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(function(t){return has(t,"inline")}(e)||function(t){return has(t,"block")}(e)||function(t){return has(t,"selector")}(e)){var i="custom-"+e.title.toLowerCase();return{customFormats:t.customFormats.concat([{name:i,format:e}]),formats:t.formats.concat([{title:e.title,format:i,icon:e.icon}])}}return __assign(__assign({},t),{formats:t.formats.concat(e)})}),{customFormats:[],formats:[]})},getStyleFormats=function(t){return function(t){return s.from(t.getParam("style_formats")).filter(m)}(t).map((function(e){var n=function(t,e){var n=mapFormats(e),registerFormats=function(e){each(e,(function(e){t.formatter.has(e.name)||t.formatter.register(e.name,e.format)}))};return t.formatter?registerFormats(n.customFormats):t.on("init",(function(){registerFormats(n.customFormats)})),n.formats}(t,e);return function(t){return t.getParam("style_formats_merge",!1,"boolean")}(t)?Dc.concat(n):n})).getOr(Dc)},processBasic=function(t,e,n){var i={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return k(t,i)},register$3=function(t,e,n,i){var doEnrich=function(e){return map(e,(function(e){var a=w(e);if(hasNonNullableKey(e,"items")){var u=doEnrich(e.items);return k(function(t){return k(t,{type:"submenu"})}(e),{getStyleItems:function(){return u}})}return hasNonNullableKey(e,"format")?function(t){return processBasic(t,n,i)}(e):1===a.length&&contains(a,"title")?k(e,{type:"separator"}):function(e){var a=generate$1(e.title),u={type:"formatter",format:a,isSelected:n(a),getStylePreview:i(a)},c=k(e,u);return t.formatter.register(a,c),c}(e)}))};return doEnrich(e)},init$7=function(t){var isSelectedFor=function(e){return function(){return t.formatter.match(e)}},getPreviewFor=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?s.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):s.none()}},flatten=function(t){var e=t.items;return void 0!==e&&e.length>0?bind(e,flatten):[t.format]},e=Cell([]),n=Cell([]),i=Cell([]),a=Cell([]),u=Cell(!1);t.on("PreInit",(function(i){var a=getStyleFormats(t),u=register$3(t,a,isSelectedFor,getPreviewFor);e.set(u),n.set(bind(u,flatten))})),t.on("addStyleModifications",(function(e){var n=register$3(t,e.items,isSelectedFor,getPreviewFor);i.set(n),u.set(e.replace),a.set(bind(n,flatten))}));return{getData:function(){var t=u.get()?[]:e.get(),n=i.get();return t.concat(n)},getFlattenedKeys:function(){var t=u.get()?[]:n.get(),e=a.get();return t.concat(e)}}},Mc=fc.trim,hasContentEditableState=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Bc=hasContentEditableState("true"),Rc=hasContentEditableState("false"),create$8=function(t,e,n,i,a){return{type:t,title:e,url:n,level:i,attach:a}},getElementText=function(t){return t.innerText||t.textContent},isValidAnchor=function(t){return function(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)}(t)&&isEditable(t)},isHeader=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},isEditable=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return Bc(t)}return!1}(t)&&!Rc(t)},isValidHeader=function(t){return isHeader(t)&&isEditable(t)},headerTarget=function(t){var e=function(t){return t.id?t.id:generate$1("h")}(t);return create$8("header",getElementText(t),"#"+e,function(t){return isHeader(t)?parseInt(t.nodeName.substr(1),10):0}(t),(function(){t.id=e}))},anchorTarget=function(t){var e=t.id||t.name,n=getElementText(t);return create$8("anchor",n||"#"+e,"#"+e,0,noop)},getTargetElements=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,map(descendants($.fromDom(n),e),(function(t){return t.dom()}))},hasTitle=function(t){return Mc(t.title).length>0},LinkTargets_find=function(t){var e=getTargetElements(t);return filter(function(t){return map(filter(t,isValidHeader),headerTarget)}(e).concat(function(t){return map(filter(t,isValidAnchor),anchorTarget)}(e)),hasTitle)},Pc="tinymce-url-history",isHttpUrl=function(t){return f(t)&&/^https?/.test(t)},isRecordOfUrlArray=function(t){return d(t)&&find$1(t,(function(t){return!(m(e=t)&&e.length<=5&&forall(e,isHttpUrl));var e})).isNone()},getAllHistory=function(){var t,n=e.localStorage.getItem(Pc);if(null===n)return{};try{t=JSON.parse(n)}catch(t){if(t instanceof SyntaxError)return e.console.log("Local storage "+Pc+" was not valid JSON",t),{};throw t}return isRecordOfUrlArray(t)?t:(e.console.log("Local storage "+Pc+" was not valid format",t),{})},getHistory=function(t){var e=getAllHistory();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},addToHistory=function(t,n){if(isHttpUrl(t)){var i=getAllHistory(),a=Object.prototype.hasOwnProperty.call(i,n)?i[n]:[],u=filter(a,(function(e){return e!==t}));i[n]=[t].concat(u).slice(0,5),function(t){if(!isRecordOfUrlArray(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));e.localStorage.setItem(Pc,JSON.stringify(t))}(i)}},Ic=Object.prototype.hasOwnProperty,isTruthy=function(t){return!!t},makeMap=function(t){return map$1(fc.makeMap(t,/[, ]/),isTruthy)},getTextSetting=function(t,e,n){var i,a,u=(i=t,a=e,Ic.call(i,a)?s.some(i[a]):s.none()).getOr(n);return f(u)?s.some(u):s.none()},getPicker=function(t){return s.some(t.file_picker_callback).filter(h)},getPickerSetting=function(t,e){var n=function(t){var e=s.some(t.file_picker_types).filter(isTruthy),n=s.some(t.file_browser_callback_types).filter(isTruthy),i=e.or(n).map(makeMap);return getPicker(t).fold((function(){return!1}),(function(t){return i.fold((function(){return!0}),(function(t){return w(t).length>0&&t}))}))}(t);return g(n)?n?getPicker(t):s.none():n[e]?getPicker(t):s.none()},UrlInputBackstage=function(t){return{getHistory:getHistory,addToHistory:addToHistory,getLinkInformation:function(){return function(t){return!1===t.settings.typeahead_urls?s.none():s.some({targets:LinkTargets_find(t.getBody()),anchorTop:getTextSetting(t.settings,"anchor_top","#top").getOrUndefined(),anchorBottom:getTextSetting(t.settings,"anchor_bottom","#bottom").getOrUndefined()})}(t)},getValidationHandler:function(){return function(t){return s.from(t.settings.file_picker_validator_handler).filter(h).orThunk((function(){return s.from(t.settings.filepicker_validator_handler).filter(h)}))}(t)},getUrlPicker:function(e){return function(t,e){return getPickerSetting(t.settings,e).map((function(n){return function(i){return Future_nu((function(a){var u=__assign({filetype:e,fieldname:i.fieldname},s.from(i.meta).getOr({}));n.call(t,(function(t,e){if(!f(t))throw new Error("Expected value to be string");if(void 0!==e&&!d(e))throw new Error("Expected meta to be a object");a({value:t,meta:e})}),i.value,u)}))}}))}(t,e)}}},init$8=function(t,e,n){var i=Cell(!1),a={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:Si.translate},interpreter:function(t){return function(t,e){return interpretParts(Ac,t,e)}(t,a)},anchors:Anchors_getAnchors(e,n),getSink:function(){return l.value(t)}},urlinput:UrlInputBackstage(e),styleselect:init$7(e),colorinput:ColorInputBackstage(e),dialog:DialogBackstage(e),isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return a},Hc=constant((function(t,e){!function(t,e){var n=Ce.max(t,e,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);set$2(t,"max-width",n+"px")}(t,Math.floor(e))})),Lc=constant([strict$1("items"),markers(["itemSelector"]),field$1("tgroupBehaviours",[To])]),Fc=constant([yr({name:"items",unit:"item"})]),Vc=composite$1({name:"ToolbarGroup",configFields:Lc(),partFields:Fc(),factory:function(t,e,n,i){return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.tgroupBehaviours,[To.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Uc=constant([strict$1("dom"),defaulted$1("shell",!0),field$1("toolbarBehaviours",[Oo])]),jc=constant([br({name:"groups",overrides:function(){return{behaviours:derive$1([Oo.config({})])}}})]),Wc=composite$1({name:"Toolbar",configFields:Uc(),partFields:jc(),factory:function(t,n,i,a){var getGroupContainer=function(e){return t.shell?s.some(e):getPart(e,t,"groups")},u=t.shell?{behaviours:[Oo.config({})],components:[]}:{behaviours:[],components:n};return{uid:t.uid,dom:t.dom,components:u.components,behaviours:augment(t.toolbarBehaviours,u.behaviours),apis:{setGroups:function(t,n){getGroupContainer(t).fold((function(){throw e.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){Oo.set(t,n)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),qc=Immutable("within","extra","withinWidth"),apportion=function(t,e,n){var i,a=(i=function(t,e){var i=n(t);return s.some({element:constant(t),start:constant(e),finish:constant(e+i),width:constant(i)})},foldl(t,(function(t,e){return i(e,t.len).fold(constant(t),(function(e){return{len:e.finish(),list:t.list.concat([e])}}))}),{len:0,list:[]}).list),u=filter(a,(function(t){return t.finish()<=e})),c=foldr(u,(function(t,e){return t+e.width()}),0),l=a.slice(u.length);return{within:constant(u),extra:constant(l),withinWidth:constant(c)}},toUnit=function(t){return map(t,(function(t){return t.element()}))},partition$3=function(t,e,n,i){var a=function(t,e,n){var i=apportion(e,t,n);return 0===i.extra().length?s.some(i):s.none()}(t,e,n).getOrThunk((function(){return apportion(e,t-n(i),n)})),u=a.within(),c=a.extra(),l=a.withinWidth();return 1===c.length&&c[0].width()<=n(i)?function(t,e,n){var i=toUnit(t.concat(e));return qc(i,[],n)}(u,c,l):c.length>=1?function(t,e,n,i){var a=toUnit(t).concat([n]);return qc(a,toUnit(e),i)}(u,c,i,l):function(t,e,n){return qc(toUnit(t),[],n)}(u,0,l)},setGroups=function(t,e){var n=map(e,(function(t){return ye(t)}));Wc.setGroups(t,n)},refresh=function(t,e,n){var i=getPartOrDie(t,e,"primary"),a=Fa.getCoupled(t,"overflowGroup");set$2(i.element(),"visibility","hidden");var u=e.builtGroups.get().concat([a]),c=findMap(u,(function(t){return search(t.element()).bind((function(e){return t.getSystem().getByDom(e).toOption()}))}));n([]),setGroups(i,u);var s=get$7(i.element()),l=partition$3(s,e.builtGroups.get(),(function(t){return get$7(t.element())}),a);0===l.extra().length?(Oo.remove(i,a),n([])):(setGroups(i,l.within()),n(l.extra())),remove$6(i.element(),"visibility"),reflow(i.element()),c.each(zo.focus)},$c=constant([field$1("splitToolbarBehaviours",[Fa]),state$1("builtGroups",(function(){return Cell([])}))]),Gc=constant([markers(["overflowToggledClass"]),optionFunction("getOverflowBounds"),strict$1("lazySink"),state$1("overflowGroups",(function(){return Cell([])}))].concat($c())),Xc=constant([pr({factory:Wc,schema:Uc(),name:"primary"}),vr({schema:Uc(),name:"overflow"}),vr({name:"overflow-button"}),vr({name:"overflow-group"})]),Kc=constant([markers(["toggledClass"]),strict$1("lazySink"),strictFunction("fetch"),optionFunction("getBounds"),optionObjOf("fireDismissalEventInstead",[defaulted$1("event",Wt())]),schema$1()]),Yc=constant([vr({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:derive$1([Ro.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),vr({factory:Wc,schema:Uc(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:derive$1([To.config({mode:"cyclic",onEscape:function(e){return getPart(e,t,"button").each(zo.focus),s.none()}})])}}})]),toggle$2=function(t,e){var n=Fa.getCoupled(t,"toolbarSandbox");Hn.isOpen(n)?Hn.close(n):Hn.open(n,e.toolbar())},position$2=function(t,e,n,i){var a=n.getBounds.map((function(t){return t()})),u=n.lazySink(t).getOrDie();Bn.positionWithinBounds(u,{anchor:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:Hc()}},e,a)},setGroups$1=function(t,e,n,i,a){Wc.setGroups(e,a),position$2(t,e,n,i),Ro.on(t)},Jc=composite$1({name:"FloatingToolbarButton",factory:function(t,e,n,i){return __assign(__assign({},ei.sketch(__assign(__assign({},i.button()),{action:function(t){toggle$2(t,i)},buttonBehaviours:Qn({dump:i.button().buttonBehaviours},[Fa.config({others:{toolbarSandbox:function(e){return function(t,e,n){var i=manager();return{dom:{tag:"div",attributes:{id:i.id()}},behaviours:derive$1([To.config({mode:"special",onEscape:function(t){return Hn.close(t),s.some(!0)}}),Hn.config({onOpen:function(a,u){n.fetch().get((function(a){setGroups$1(t,u,n,e.layouts,a),i.link(t.element()),To.focusIn(u)}))},onClose:function(){Ro.off(t),zo.focus(t),i.unlink(t.element())},isPartOf:function(e,n,i){return isPartOf(n,i)||isPartOf(t,i)},getAttachPoint:function(){return n.lazySink(t).getOrDie()}}),Ze.config({channels:__assign(__assign({},receivingChannel(__assign({isExtraPart:constant(!1)},n.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),receivingChannel$1({isExtraPart:constant(!1),doReposition:function(){Hn.getState(Fa.getCoupled(t,"toolbarSandbox")).each((function(i){position$2(t,i,n,e.layouts)}))}}))})])}}(e,n,t)}}})])}))),{apis:{setGroups:function(e,i){Hn.getState(Fa.getCoupled(e,"toolbarSandbox")).each((function(a){setGroups$1(e,a,t,n.layouts,i)}))},reposition:function(e){Hn.getState(Fa.getCoupled(e,"toolbarSandbox")).each((function(i){position$2(e,i,t,n.layouts)}))},toggle:function(t){toggle$2(t,i)},getToolbar:function(t){return Hn.getState(Fa.getCoupled(t,"toolbarSandbox"))}}})},configFields:Kc(),partFields:Yc(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)}}}),buildGroups=function(t){return map(t,(function(t){return ye(t)}))},refresh$1=function(t,e,n){refresh(t,n,(function(i){n.overflowGroups.set(i),e.getOpt(t).each((function(t){Jc.setGroups(t,buildGroups(i))}))}))},Zc=composite$1({name:"SplitFloatingToolbar",configFields:Gc(),partFields:Xc(),factory:function(t,e,n,i){var a=record(Jc.sketch({fetch:function(){return Future_nu((function(e){e(buildGroups(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[southwest$1]},onRtl:function(){return[southeast$1]},onBottomLtr:function(){return[northwest$1]},onBottomRtl:function(){return[northeast$1]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.splitToolbarBehaviours,[Fa.config({others:{overflowGroup:function(){return Vc.sketch(__assign(__assign({},i["overflow-group"]()),{items:[a.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(map(n,e.getSystem().build)),refresh$1(e,a,t)},refresh:function(e){return refresh$1(e,a,t)},toggle:function(t){a.getOpt(t).each((function(t){Jc.toggle(t)}))},reposition:function(t){a.getOpt(t).each((function(t){Jc.reposition(t)}))},getOverflow:function(t){return a.getOpt(t).bind((function(t){return Jc.getToolbar(t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),getAnimationRoot=function(t,e){return e.getAnimationRoot.fold((function(){return t.element()}),(function(e){return e(t)}))},getDimensionProperty=function(t){return t.dimension.property},getDimension=function(t,e){return t.dimension.getDimension(e)},disableTransitions=function(t,e){var n=getAnimationRoot(t,e);remove$5(n,[e.shrinkingClass,e.growingClass])},setShrunk=function(t,e){remove$4(t.element(),e.openClass),add$2(t.element(),e.closedClass),set$2(t.element(),getDimensionProperty(e),"0px"),reflow(t.element())},setGrown=function(t,e){remove$4(t.element(),e.closedClass),add$2(t.element(),e.openClass),remove$6(t.element(),getDimensionProperty(e))},doImmediateShrink=function(t,e,n,i){n.setCollapsed(),set$2(t.element(),getDimensionProperty(e),getDimension(e,t.element())),reflow(t.element()),disableTransitions(t,e),setShrunk(t,e),e.onStartShrink(t),e.onShrunk(t)},doStartShrink=function(t,e,n,i){var a=i.getOrThunk((function(){return getDimension(e,t.element())}));n.setCollapsed(),set$2(t.element(),getDimensionProperty(e),a),reflow(t.element());var u=getAnimationRoot(t,e);remove$4(u,e.growingClass),add$2(u,e.shrinkingClass),setShrunk(t,e),e.onStartShrink(t)},doStartSmartShrink=function(t,e,n){var i=getDimension(e,t.element());("0px"===i?doImmediateShrink:doStartShrink)(t,e,n,s.some(i))},doStartGrow=function(t,e,n){var i=getAnimationRoot(t,e),a=has$2(i,e.shrinkingClass),u=getDimension(e,t.element());setGrown(t,e);var c=getDimension(e,t.element());(a?function(){set$2(t.element(),getDimensionProperty(e),u),reflow(t.element())}:function(){setShrunk(t,e)})(),remove$4(i,e.shrinkingClass),add$2(i,e.growingClass),setGrown(t,e),set$2(t.element(),getDimensionProperty(e),c),n.setExpanded(),e.onStartGrow(t)},isGrowing=function(t,e,n){var i=getAnimationRoot(t,e);return!0===has$2(i,e.growingClass)},isShrinking=function(t,e,n){var i=getAnimationRoot(t,e);return!0===has$2(i,e.shrinkingClass)},Qc=Object.freeze({__proto__:null,refresh:function(t,e,n){if(n.isExpanded()){remove$6(t.element(),getDimensionProperty(e));var i=getDimension(e,t.element());set$2(t.element(),getDimensionProperty(e),i)}},grow:function(t,e,n){n.isExpanded()||doStartGrow(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&doStartSmartShrink(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&doImmediateShrink(t,e,n,s.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:isGrowing,isShrinking:isShrinking,isTransitioning:function(t,e,n){return!0===isGrowing(t,e)||!0===isShrinking(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?doStartSmartShrink:doStartGrow)(t,e,n)},disableTransitions:disableTransitions}),ts=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.expanded;return nu$6(n?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:wrap$1(e.dimension.property,"0px")})},events:function(t,e){return derive([runOnSource(kt(),(function(n,i){i.event().raw().propertyName===t.dimension.property&&(disableTransitions(n,t),e.isExpanded()&&remove$6(n.element(),t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),es=[strict$1("closedClass"),strict$1("openClass"),strict$1("shrinkingClass"),strict$1("growingClass"),option("getAnimationRoot"),onHandler("onShrunk"),onHandler("onStartShrink"),onHandler("onGrown"),onHandler("onStartGrow"),defaulted$1("expanded",!1),strictOf("dimension",choose$1("property",{width:[output("property","width"),output("getDimension",(function(t){return get$7(t)+"px"}))],height:[output("property","height"),output("getDimension",(function(t){return get$6(t)+"px"}))]}))],ns=create$1({fields:es,name:"sliding",active:ts,apis:Qc,state:Object.freeze({__proto__:null,init:function(t){var e=Cell(t.expanded);return nu$5({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:curry(e.set,!1),setExpanded:curry(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),rs=constant([markers(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),onHandler("onOpened"),onHandler("onClosed")].concat($c())),os=constant([pr({factory:Wc,schema:Uc(),name:"primary"}),pr({factory:Wc,schema:Uc(),name:"overflow",overrides:function(t){return{toolbarBehaviours:derive$1([ns.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){getPart(e,t,"overflow-button").each((function(t){Ro.off(t),zo.focus(t)})),t.onClosed(e)},onGrown:function(e){To.focusIn(e),t.onOpened(e)},onStartGrow:function(e){getPart(e,t,"overflow-button").each(Ro.on)}}),To.config({mode:"acyclic",onEscape:function(e){return getPart(e,t,"overflow-button").each(zo.focus),s.some(!0)}})])}}}),vr({name:"overflow-button",overrides:function(t){return{buttonBehaviours:derive$1([Ro.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),vr({name:"overflow-group"})]),refresh$3=function(t,e){getPart(t,e,"overflow").each((function(n){refresh(t,e,(function(t){var e=map(t,(function(t){return ye(t)}));Wc.setGroups(n,e)})),getPart(t,e,"overflow-button").each((function(t){ns.hasGrown(n)&&Ro.on(t)})),ns.refresh(n)}))},as=composite$1({name:"SplitSlidingToolbar",configFields:rs(),partFields:os(),factory:function(t,e,n,i){return{uid:t.uid,dom:t.dom,components:e,behaviours:augment(t.splitToolbarBehaviours,[Fa.config({others:{overflowGroup:function(t){return Vc.sketch(__assign(__assign({},i["overflow-group"]()),{items:[ei.sketch(__assign(__assign({},i["overflow-button"]()),{action:function(e){emit(t,"alloy.toolbar.toggle")}}))]}))}}}),config("toolbar-toggle-events",[run("alloy.toolbar.toggle",(function(e){getPart(e,t,"overflow").each((function(n){refresh$3(e,t),ns.toggleGrow(n)}))}))])]),apis:{setGroups:function(e,n){!function(e,n){var i=map(n,e.getSystem().build);t.builtGroups.set(i)}(e,n),refresh$3(e,t)},refresh:function(e){return refresh$3(e,t)},toggle:function(e){return function(t,e){getPart(t,e,"overflow").each((function(n){refresh$3(t,e),ns.toggleGrow(n)}))}(e,t)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)}}}),us=constant(generate$1("toolbar-height-change")),cs=objOf([(gc="readonly",strictOf(gc,j))]),toggleToReadOnly=function(t,e){var n=t.outerContainer;!function(t,e){var n=t.outerContainer.element();e&&(t.mothership.broadcastOn([Ln()],{target:n}),t.uiMothership.broadcastOn([Ln()],{target:n})),t.mothership.broadcastOn(["silver.readonly"],{readonly:e}),t.uiMothership.broadcastOn(["silver.readonly"],{readonly:e})}(t,e),all("*",n.element()).forEach((function(t){n.getSystem().getByDom(t).each((function(t){t.hasConfigured(Pi)&&Pi.set(t,e)}))}))},setupReadonlyModeSwitch=function(t,e){t.on("init",(function(){t.readonly&&toggleToReadOnly(e,!0)})),t.on("SwitchMode",(function(){return toggleToReadOnly(e,t.readonly)})),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly")},createReadonlyReceivingForOverflow=function(t){var e;return Ze.config({channels:(e={},e["silver.readonly"]={schema:cs,onReceive:function(e,n){t(e).each((function(t){!function(t,e){all("*",t.element()).forEach((function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(Pi)&&Pi.set(t,e)}))}))}(t,n.readonly)}))}},e)})},renderToolbarGroupCommon=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:__assign({tag:"div",classes:["tox-toolbar__group"]},e),components:[Vc.parts().items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:derive$1([Ia.config({}),zo.config({})])}},renderToolbarGroup=function(t){return Vc.sketch(renderToolbarGroupCommon(t))},getToolbarbehaviours=function(t,e,n){var i=Zt((function(e){var n=map(t.initGroups,renderToolbarGroup);Wc.setGroups(e,n)}));return derive$1([To.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),config("toolbar-events",[i]),createReadonlyReceivingForOverflow(n)])},renderMoreToolbarCommon=function(t,e){var n=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":renderToolbarGroupCommon({title:s.none(),items:[]}),"overflow-button":renderIconButtonSpec({name:"more",icon:s.some("more-drawer"),disabled:!1,tooltip:s.some("More..."),primary:!1,borderless:!1},s.none(),t.backstage.shared.providers)},splitToolbarBehaviours:getToolbarbehaviours(t,n,e)}},renderFloatingMoreToolbar=function(t){var e=renderMoreToolbarCommon(t,Zc.getOverflow),n=Zc.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Zc.sketch(__assign(__assign({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element(),n=absolute$1(e),i=documentElement(e),a=absolute$1(i);return bounds$1(n.x()+4,a.y(),n.width()-8,a.height())},parts:__assign(__assign({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},renderSlidingMoreToolbar=function(t){var e=as.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=as.parts().overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=renderMoreToolbarCommon(t,s.none);return as.sketch(__assign(__assign({},i),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([us()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([us()],{type:"closed"})}}))},renderToolbar=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return Wc.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Br.scrolling?["tox-toolbar--scrolling"]:[])},components:[Wc.parts().groups({})],toolbarBehaviours:getToolbarbehaviours(t,e,constant(s.none()))})},ss=[defaultedBoolean("disabled",!1),optionString("tooltip"),optionString("icon"),optionString("text"),defaultedFunction("onSetup",(function(){return noop}))],ls=objOf([strictString("type"),strictFunction("onAction")].concat(ss)),createToolbarButton=function(t){return asRaw("toolbarbutton",ls,t)},fs=[optionString("text"),optionString("tooltip"),optionString("icon"),strictFunction("fetch"),defaultedFunction("onSetup",(function(){return noop}))],ds=objOf(__spreadArrays([strictString("type")],fs)),createMenuButton=function(t){return asRaw("menubutton",ds,t)},ms=objOf([strictString("type"),optionString("tooltip"),optionString("icon"),optionString("text"),optionFunction("select"),strictFunction("fetch"),defaultedFunction("onSetup",(function(){return noop})),defaultedStringEnum("presets","normal",["normal","color","listpreview"]),defaulted$1("columns",1),strictFunction("onAction"),strictFunction("onItemAction")]),gs=[defaultedBoolean("active",!1)].concat(ss),hs=objOf(gs.concat([strictString("type"),strictFunction("onAction")])),createToggleButton=function(t){return asRaw("ToggleButton",hs,t)},ps=objOf([strictString("type"),strictOf("items",(hc=[arrOfObj$1([strictString("name"),strictArrayOf("items",U)]),U],{extract:function(t,e,n){for(var i=[],a=0,c=hc;a<c.length;a++){var s=c[a].extract(t,e,n);if(s.stype===u.Value)return s;i.push(s)}return ResultCombine_consolidateArr(i)},toString:function(){return"oneOf("+map(hc,(function(t){return t.toString()})).join(", ")+")"}}))].concat(ss)),vs=[defaultedFunction("predicate",(function(){return!1})),defaultedStringEnum("scope","node",["node","editor"]),defaultedStringEnum("position","selection",["node","selection","line"])],bs=ss.concat([defaulted$1("type","contextformbutton"),defaulted$1("primary",!1),strictFunction("onAction"),state$1("original",identity)]),ys=gs.concat([defaulted$1("type","contextformbutton"),defaulted$1("primary",!1),strictFunction("onAction"),state$1("original",identity)]),xs=ss.concat([defaulted$1("type","contextformbutton")]),ws=gs.concat([defaulted$1("type","contextformtogglebutton")]),Cs=choose$1("type",{contextformbutton:bs,contextformtogglebutton:ys}),Ss=objOf([defaulted$1("type","contextform"),defaultedFunction("initValue",(function(){return""})),optionString("label"),strictArrayOf("commands",Cs),optionOf("launch",choose$1("type",{contextformbutton:xs,contextformtogglebutton:ws}))].concat(vs)),ks=objOf([defaulted$1("type","contexttoolbar"),strictString("items")].concat(vs)),Es=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),Ts=Object.freeze({__proto__:null,events:function(t,e){var update=function(n,i){t.updateState.each((function(t){var a=t(n,i);e.set(a)})),t.renderComponents.each((function(t){var a=t(i,e.get()),u=map(a,n.getSystem().build);replaceChildren(n,u)}))};return derive([run(At(),(function(e,n){var i=n,a=t.channel;contains(i.channels(),a)&&update(e,i.data())})),Zt((function(e,n){t.initialData.each((function(t){update(e,t)}))}))])}}),Os=Object.freeze({__proto__:null,init:function(){var t=Cell(s.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(s.none())}}}}),_s=[strict$1("channel"),option("renderComponents"),option("updateState"),option("initialData")],Ns=create$1({fields:_s,name:"reflecting",active:Ts,apis:Es,state:Os}),As=constant([strict$1("toggleClass"),strict$1("fetch"),onStrictHandler("onExecute"),defaulted$1("getHotspot",s.some),defaulted$1("getAnchorOverrides",constant({})),schema$1(),onStrictHandler("onItemExecute"),option("lazySink"),strict$1("dom"),onHandler("onOpen"),field$1("splitDropdownBehaviours",[Fa,To,zo]),defaulted$1("matchWidth",!1),defaulted$1("useMinWidth",!1),defaulted$1("eventOrder",{}),option("role")].concat(sandboxFields())),zs=pr({factory:ei,schema:[strict$1("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:derive$1([zo.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(emitExecute)},buttonBehaviours:derive$1([Ro.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),Ds=pr({factory:ei,schema:[strict$1("dom")],name:"button",defaults:function(){return{buttonBehaviours:derive$1([zo.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),Ms=constant([zs,Ds,br({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[strict$1("text")],name:"aria-descriptor"}),vr({schema:[tieredMenuMarkers()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(i){t.onItemExecute(i,e,n)}))}}}}),Ua()]),Bs=composite$1({name:"SplitDropdown",configFields:As(),partFields:Ms(),factory:function(t,e,n,i){var switchToMenu=function(t){_r.getCurrent(t).each((function(t){zr.highlightFirst(t),To.focusIn(t)}))},action=function(e){togglePopup(t,(function(t){return t}),e,i,switchToMenu,Oa.HighlightFirst).get(noop)},executeOnButton=function(e){var n=getPartOrDie(e,t,"button");return emitExecute(n),s.some(!0)},a=__assign(__assign({},derive([Zt((function(e,n){getPart(e,t,"aria-descriptor").each((function(t){var n=generate$1("aria");set$1(t.element(),"id",n),set$1(e.element(),"aria-describedby",n)}))}))])),events$7(s.some(action))),u={repositionMenus:function(t){Ro.isOn(t)&&repositionMenus(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:u,eventOrder:__assign(__assign({},t.eventOrder),{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:a,behaviours:augment(t.splitDropdownBehaviours,[Fa.config({others:{sandbox:function(e){var n=getPartOrDie(e,t,"arrow");return makeSandbox(t,e,{onOpen:function(){Ro.on(n),Ro.on(e)},onClose:function(){Ro.off(n),Ro.off(e)}})}}}),To.config({mode:"special",onSpace:executeOnButton,onEnter:executeOnButton,onDown:function(t){return action(t),s.some(!0)}}),zo.config({}),Ro.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),getButtonApi=function(t){return{isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},getToggleApi=function(t){return{setActive:function(e){Ro.set(t,e)},isActive:function(){return Ro.isOn(t)},isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)}}},getTooltipAttributes=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},Rs=generate$1("focus-button"),Ps=["checklist","ordered-list"],Is=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],renderCommonStructure=function(t,e,n,i,a,u){var c,getIconName=function(t){return Si.isRtl()&&contains(Ps,t)?t+"-rtl":t},s=Si.isRtl()&&t.exists((function(t){return contains(Is,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(s?["tox-tbtn__icon-rtl"]:[]),attributes:getTooltipAttributes(n,u)},components:componentRenderPipeline([t.map((function(t){return renderIconFromPack(getIconName(t),u.icons)})),e.map((function(t){return renderLabel$1(t,"tox-tbtn",u)}))]),eventOrder:(c={},c[dt()]=["focusing","alloy.base.behaviour","common-button-display-events"],c),buttonBehaviours:derive$1([config("common-button-display-events",[run(dt(),(function(t,e){e.event().prevent(),emit(t,Rs)}))])].concat(i.map((function(n){return Ns.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return componentRenderPipeline([t.icon.map((function(t){return renderIconFromPack(getIconName(t),u.icons)})),t.text.map((function(t){return renderLabel$1(t,"tox-tbtn",u)}))])}})})).toArray()).concat(a.getOr([])))}},renderCommonToolbarButton=function(t,e,n){var i,a=Cell(noop),u=renderCommonStructure(t.icon,t.text,t.tooltip,s.none(),s.none(),n);return ei.sketch({dom:u.dom,components:u.components,eventOrder:Yu,buttonBehaviours:derive$1([config("toolbar-button-events",[(i={onAction:t.onAction,getApi:e.getApi},ee((function(t,e){runWithApi(i,t)((function(e){emitWith(t,Ku,{buttonApi:e}),i.onAction(e)}))}))),onControlAttached(e,a),onControlDetached(e,a)]),DisablingConfigs_toolbarButton(t.disabled)].concat(e.toolbarButtonBehaviours))})},renderToolbarButtonWith=function(t,e,n){return renderCommonToolbarButton(t,{toolbarButtonBehaviours:[].concat(n.length>0?[config("toolbarButtonWith",n)]:[]),getApi:getButtonApi,onSetup:t.onSetup},e)},renderToolbarToggleButtonWith=function(t,e,n){return k(renderCommonToolbarButton(t,{toolbarButtonBehaviours:[Oo.config({}),Ro.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[config("toolbarToggleButtonWith",n)]:[]),getApi:getToggleApi,onSetup:t.onSetup},e))},fetchChoices=function(t,e,n){return function(i){return Future_nu((function(t){return e.fetch(t)})).map((function(a){return s.from(createTieredDataFrom(k(createPartialChoiceMenu(generate$1("menu-value"),a,(function(n){e.onItemAction(t(i),n)}),e.columns,e.presets,Ii.CLOSE_ON_EXECUTE,e.select.getOr((function(){return!1})),n),{movement:deriveMenuMovement(e.columns,e.presets),menuBehaviours:SimpleBehaviours_unnamedEvents("auto"!==e.columns?[]:[Zt((function(t,n){detectSize(t,4,classForPreset(e.presets)).each((function(e){var n=e.numRows,i=e.numColumns;To.setGridSize(t,n,i)}))}))])})))}))}},runOnExecute$1=function(t,e){return run(Ku,(function(n,i){var a=function(t){return{hide:function(){return emit(t,Rt())},getValue:function(){return Jn.getValue(t)}}}(t.get(n));e.onAction(a,i.event().buttonApi())}))},generateOne$1=function(t,e,n){var i={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?function(t,e,n){var i=e.original,a=(i.primary,__rest(i,["primary"])),u=getOrDie(createToggleButton(__assign(__assign({},a),{type:"togglebutton",onAction:function(){}})));return renderToolbarToggleButtonWith(u,n.backstage.shared.providers,[runOnExecute$1(t,e)])}(t,e,i):function(t,e,n){var i=e.original,a=(i.primary,__rest(i,["primary"])),u=getOrDie(createToolbarButton(__assign(__assign({},a),{type:"button",onAction:function(){}})));return renderToolbarButtonWith(u,n.backstage.shared.providers,[runOnExecute$1(t,e)])}(t,e,i)},ContextForm_renderContextForm=function(t,e,n){var i=e.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),a=record(ka.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:i,selectOnFocus:!0,inputBehaviours:derive$1([To.config({mode:"special",onEnter:function(t){return u.findPrimary(t).map((function(t){return emitExecute(t),!0}))},onLeft:function(t,e){return e.cut(),s.none()},onRight:function(t,e){return e.cut(),s.none()}})])})),u=function(t,e,n){var i=map(e,(function(e){return record(generateOne$1(t,e,n))}));return{asSpecs:function(){return map(i,(function(t){return t.asSpec()}))},findPrimary:function(t){return findMap(e,(function(e,n){return e.primary?s.from(i[n]).bind((function(e){return e.getOpt(t)})).filter(not(Pi.isDisabled)):s.none()}))}}}(a,e.commands,n.shared.providers);return renderToolbar({type:t,uid:generate$1("context-toolbar"),initGroups:[{title:s.none(),items:[a.asSpec()]},{title:s.none(),items:u.asSpecs()}],onEscape:s.none,cyclicKeying:!0})},getContextToolbarBounds=function(t){var n=getBounds(e.window),i=box($.fromDom(t.getContentAreaContainer())),a=isMenubarEnabled(t)||isToolbarEnabled(t)||isMultipleToolbars(t),u=function(t,e){var n=Math.max(e.x(),t.x()),i=t.right()-n,a=e.width()-(n-e.x());return{x:n,width:Math.min(i,a)}}(i,n),c=u.x,s=u.width;if(t.inline&&!a)return bounds$1(c,n.y(),s,n.height());var l=function(t,e,n){var i=$.fromDom(t.getContainer()),a=descendant$1(i,".tox-editor-header").getOr(i),u=box(a),c=u.y()>=e.bottom(),s=isToolbarLocationTop(t)&&!c;if(t.inline&&s)return{y:Math.max(u.bottom(),n.y()),bottom:n.bottom()};if(t.inline&&!s)return{y:n.y(),bottom:Math.min(u.y(),n.bottom())};var l=box(i);return s?{y:Math.max(u.bottom(),n.y()),bottom:Math.min(l.bottom(),n.bottom())}:{y:Math.max(l.y(),n.y()),bottom:Math.min(u.y(),n.bottom())}}(t,i,n),f=l.y,d=l.bottom;return bounds$1(c,f,s,d-f)},matchTargetWith=function(t,e){return findMap(e,(function(e){return e.predicate(t.dom())?s.some({toolbarApi:e,elem:t}):s.none()}))},ToolbarLookup_lookup=function(t,e){var n=$.fromDom(e.getBody()),isRoot=function(t){return eq(t,n)},i=$.fromDom(e.selection.getNode());return ut(i,n)?s.none():matchTargetWith(i,t.inNodeScope).orThunk((function(){return matchTargetWith(i,t.inEditorScope).orThunk((function(){return ancestor(i,(function(e){return isRoot(e)?s.none():matchTargetWith(e,t.inNodeScope)}),isRoot)}))}))},ToolbarScopes_categorise=function(t,e){var n={},i=[],a=[],u={},c={},registerForm=function(t,s){var l=getOrDie(asRaw("ContextForm",Ss,s));n[t]=l,l.launch.map((function(n){u["form:"+t]=__assign(__assign({},s.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(l)}})})),"editor"===l.scope?a.push(l):i.push(l),c[t]=l},registerToolbar=function(t,e){var n;(n=e,asRaw("ContextToolbar",ks,n)).each((function(n){"editor"===e.scope?a.push(n):i.push(n),c[t]=n}))},s=w(t);return each(s,(function(e){var n=t[e];"contextform"===n.type?registerForm(e,n):"contexttoolbar"===n.type&&registerToolbar(e,n)})),{forms:n,inNodeScope:i,inEditorScope:a,lookupTable:c,formNavigators:u}},Hs=generate$1("forward-slide"),Ls=generate$1("backward-slide"),Fs=generate$1("change-slide-event"),onSetupFormatToggle=function(t,e){return function(n){var i=Cell(s.none()),init=function(){n.setActive(t.formatter.match(e));var a=t.formatter.formatChanged(e,n.setActive).unbind;i.set(s.some(a))};return t.initialized?init():t.on("init",init),function(){return i.get().each((function(t){return t()}))}}},onActionToggleFormat=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},generateSelectItems=function(t,e,n){var generateItem=function(t,i,a,u){var c=e.shared.providers.translate(t.title);if("separator"===t.type)return s.some({type:"separator",text:c});if("submenu"===t.type){var l=bind(t.getStyleItems(),(function(t){return validate(t,i,u)}));return 0===i&&l.length<=0?s.none():s.some({type:"nestedmenuitem",text:c,disabled:l.length<=0,getSubmenuItems:function(){return bind(t.getStyleItems(),(function(t){return validate(t,i,u)}))}})}return s.some(__assign({type:"togglemenuitem",text:c,active:t.isSelected(u),disabled:a,onAction:n.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))))},validate=function(t,e,i){var a="formatter"===t.type&&n.isInvalid(t);return 0===e?a?[]:generateItem(t,e,!1,i).toArray():generateItem(t,e,a,i).toArray()},validateItems=function(t){var e=n.getCurrentValue(),i=n.shouldHide?0:1;return bind(t,(function(t){return validate(t,i,e)}))};return{validateItems:validateItems,getFetch:function(t,e){return function(n){var i=e(),a=validateItems(i);n(build$2(a,Ii.CLOSE_ON_EXECUTE,t,!1))}}}},createMenuItems=function(t,e,n){var i=n.dataset,a="basic"===i.type?function(){return map(i.data,(function(t){return processBasic(t,n.isSelectedFor,n.getPreviewFor)}))}:i.getData;return{items:generateSelectItems(0,e,n),getStyleItems:a}},createSelectButton=function(t,e,n){var i=createMenuItems(0,e,n),a=i.items,u=i.getStyleItems;return renderCommonDropdown({text:n.icon.isSome()?s.none():s.some(""),icon:n.icon,tooltip:s.from(n.tooltip),role:s.none(),fetch:a.getFetch(e,u),onSetup:function(e){return n.setInitialValue.each((function(t){return t(e.getComponent())})),n.nodeChangeHandler.map((function(n){var i=n(e.getComponent());return t.on("NodeChange",i),function(){t.off("NodeChange",i)}})).getOr(noop)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};!function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"}(pc||(pc={}));var Vs,buildBasicSettingsDataset=function(t,e,n,i){return{type:"basic",data:function(t){return map(t,(function(t){var e=t,n=t,i=t.split("=");return i.length>1&&(e=i[0],n=i[1]),{title:e,format:n}}))}(function(t,e){return e===pc.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")}(get(t.settings,e).getOr(n),i))}},Us=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],getSpec=function(t){var updateSelectMenuIcon=function(e){var n=find(Us,(function(e){return t.formatter.match(e.format)})).fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));emitWith(e,Zu,{icon:"align-"+n})},e=s.some((function(t){return function(){return updateSelectMenuIcon(t)}})),n=s.some((function(t){return updateSelectMenuIcon(t)})),i={type:"basic",data:Us};return{tooltip:"Align",icon:s.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:constant(s.none()),getPreviewFor:function(t){return function(){return s.none()}},onAction:onActionToggleFormat(t),setInitialValue:n,nodeChangeHandler:e,dataset:i,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},js=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],splitFonts=function(t){var e=t.split(/\s*,\s*/);return map(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},getSpec$1=function(t){var getMatchingValue=function(){var getFirstFont=function(t){return t?splitFonts(t)[0]:""},e=t.queryCommandValue("FontName"),n=i.data,a=e?e.toLowerCase():"";return{matchOpt:find(n,(function(t){var e=t.format;return e.toLowerCase()===a||getFirstFont(e).toLowerCase()===getFirstFont(a).toLowerCase()})).orThunk((function(){return function(t){var e;return 0===t.indexOf("-apple-system")&&(e=splitFonts(t.toLowerCase()),forall(js,(function(t){return e.indexOf(t.toLowerCase())>-1})))}(a)?s.from({title:"System Font",format:a}):s.none()})),font:e}},updateSelectMenuText=function(t){var e=getMatchingValue(),n=e.matchOpt,i=e.font,a=n.fold((function(){return i}),(function(t){return t.title}));emitWith(t,Ju,{text:a})},e=s.some((function(t){return function(){return updateSelectMenuText(t)}})),n=s.some((function(t){return updateSelectMenuText(t)})),i=buildBasicSettingsDataset(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",pc.SemiColon);return{tooltip:"Fonts",icon:s.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return getMatchingValue().matchOpt},getPreviewFor:function(t){return function(){return s.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},setInitialValue:n,nodeChangeHandler:e,dataset:i,shouldHide:!1,isInvalid:function(){return!1}}},Ws={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},toPt=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t},getSpec$2=function(t){var getMatchingValue=function(){var e=s.none(),n=a.data,i=t.queryCommandValue("FontSize");if(i)for(var _loop_1=function(t){var a=toPt(i,t),u=function(t){return get(Ws,t).getOr("")}(a);e=find(n,(function(t){return t.format===i||t.format===a||t.format===u}))},u=3;e.isNone()&&u>=0;u--)_loop_1(u);return{matchOpt:e,size:i}},e=constant(constant(s.none())),updateSelectMenuText=function(t){var e=getMatchingValue(),n=e.matchOpt,i=e.size,a=n.fold((function(){return i}),(function(t){return t.title}));emitWith(t,Ju,{text:a})},n=s.some((function(t){return function(){return updateSelectMenuText(t)}})),i=s.some((function(t){return updateSelectMenuText(t)})),a=buildBasicSettingsDataset(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",pc.Space);return{tooltip:"Font sizes",icon:s.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:e,getCurrentValue:function(){return getMatchingValue().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},setInitialValue:i,nodeChangeHandler:n,dataset:a,shouldHide:!1,isInvalid:function(){return!1}}},findNearest=function(t,e,n){var i=e();return findMap(n,(function(e){return find(i,(function(n){return t.formatter.matchNode(e,n.format)}))})).orThunk((function(){return t.formatter.match("p")?s.some({title:"Paragraph",format:"p"}):s.none()}))},getCurrentSelectionParents=function(t){var e=t.selection.getStart(!0)||t.getBody();return t.dom.getParents(e,(function(){return!0}),t.getBody())},getSpec$3=function(t){var updateSelectMenuText=function(e,n){var a=findNearest(t,(function(){return i.data}),e).fold((function(){return"Paragraph"}),(function(t){return t.title}));emitWith(n,Ju,{text:a})},e=s.some((function(t){return function(e){return updateSelectMenuText(e.parents,t)}})),n=s.some((function(e){var n=getCurrentSelectionParents(t);updateSelectMenuText(n,e)})),i=buildBasicSettingsDataset(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",pc.SemiColon);return{tooltip:"Blocks",icon:s.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:constant(s.none()),getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return s.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:onActionToggleFormat(t),setInitialValue:n,nodeChangeHandler:e,dataset:i,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},getSpec$4=function(t,e){var updateSelectMenuText=function(e,n){var getFormatItems=function(t){var e=t.items;return void 0!==e&&e.length>0?bind(e,getFormatItems):[{title:t.title,format:t.format}]},i=bind(getStyleFormats(t),getFormatItems),a=findNearest(t,(function(){return i}),e).fold((function(){return"Paragraph"}),(function(t){return t.title}));emitWith(n,Ju,{text:a})},n=s.some((function(t){return function(e){return updateSelectMenuText(e.parents,t)}})),i=s.some((function(e){var n=getCurrentSelectionParents(t);updateSelectMenuText(n,e)}));return{tooltip:"Formats",icon:s.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:constant(s.none()),getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?s.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):s.none()}},onAction:onActionToggleFormat(t),setInitialValue:i,nodeChangeHandler:n,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},qs=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],renderFromBridge=function(t,e){return function(n,i,a){var u=t(n).mapError((function(t){return formatError(t)})).getOrDie();return e(u,i,a)}},$s={button:renderFromBridge(createToolbarButton,(function(t,e){return n=t,i=e.backstage.shared.providers,renderToolbarButtonWith(n,i,[]);var n,i})),togglebutton:renderFromBridge(createToggleButton,(function(t,e){return n=t,i=e.backstage.shared.providers,renderToolbarToggleButtonWith(n,i,[]);var n,i})),menubutton:renderFromBridge(createMenuButton,(function(t,e){return renderMenuButton(t,"tox-tbtn",e.backstage,s.none())})),splitbutton:renderFromBridge((function(t){return asRaw("SplitButton",ms,t)}),(function(t,e){return function(t,e){var n,i=generate$1("channel-update-split-dropdown-display"),getApi=function(t){return{isDisabled:function(){return Pi.isDisabled(t)},setDisabled:function(e){return Pi.set(t,e)},setIconFill:function(e,n){descendant$1(t.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){set$1(t,"fill",n)}))},setIconStroke:function(e,n){descendant$1(t.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){set$1(t,"stroke",n)}))},setActive:function(e){set$1(t.element(),"aria-pressed",e),descendant$1(t.element(),"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Ro.set(t,e)}))}))},isActive:function(){return descendant$1(t.element(),"span").exists((function(e){return t.getSystem().getByDom(e).exists(Ro.isOn)}))}}},a=Cell(noop),u={getApi:getApi,onSetup:t.onSetup};return Bs.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:__assign({"aria-pressed":!1},getTooltipAttributes(t.tooltip,e.providers))},onExecute:function(e){t.onAction(getApi(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:derive$1([DisablingConfigs_splitButton(!1),config("split-dropdown-events",[run(Rs,zo.focus),onControlAttached(u,a),onControlDetached(u,a)]),Ga.config({})]),eventOrder:(n={},n[Ut()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:fetchChoices(getApi,t,e.providers),parts:{menu:part(0,t.columns,t.presets)},components:[Bs.parts().button(renderCommonStructure(t.icon,t.text,s.none(),s.some(i),s.some([Ro.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),Bs.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:get$d("chevron-down",e.providers.icons)}}),Bs.parts()["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})}(t,e.backstage.shared)})),grouptoolbarbutton:renderFromBridge((function(t){return asRaw("GroupToolbarButton",ps,t)}),(function(t,e,n){var i,a=n.ui.registry.getAll().buttons,u=((i={})[dn]=isToolbarLocationTop(n)?_e.TopToBottom:_e.BottomToTop,i);switch(getToolbarMode(n)){case Br.floating:return function(t,e,n,i){var a=e.shared;return Jc.sketch({lazySink:a.getSink,fetch:function(){return Future_nu((function(e){e(map(n(t.items),renderToolbarGroup))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:renderCommonStructure(t.icon,t.text,t.tooltip,s.none(),s.none(),a.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})}(t,e.backstage,(function(t){return identifyButtons(n,{buttons:a,toolbar:t,allowToolbarGroups:!1},e,s.none())}),u);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(t,e){return function(t,e){var n=__assign({type:"advanced"},e.styleselect);return createSelectButton(t,e,getSpec$4(t,n))}(t,e.backstage)},fontsizeSelectButton:function(t,e){return function(t,e){return createSelectButton(t,e,getSpec$2(t))}(t,e.backstage)},fontSelectButton:function(t,e){return function(t,e){return createSelectButton(t,e,getSpec$1(t))}(t,e.backstage)},formatButton:function(t,e){return function(t,e){return createSelectButton(t,e,getSpec$3(t))}(t,e.backstage)},alignMenuButton:function(t,e){return function(t,e){return createSelectButton(t,e,getSpec(t))}(t,e.backstage)}},Gs={styleselect:$s.styleSelectButton,fontsizeselect:$s.fontsizeSelectButton,fontselect:$s.fontSelectButton,formatselect:$s.formatButton,align:$s.alignMenuButton},createToolbar=function(t){var n,i=t.toolbar,a=t.buttons;return!1===i?[]:void 0===i||!0===i?function(t){var e=map(qs,(function(e){var n=filter(e.items,(function(e){return has(t,e)||has(Gs,e)}));return{name:e.name,items:n}}));return filter(e,(function(t){return t.items.length>0}))}(a):f(i)?(n=i.split("|"),map(n,(function(t){return{items:t.trim().split(" ")}}))):function(t){return isArrayOf(t,(function(t){return has(t,"name")&&has(t,"items")}))}(i)?i:(e.console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},lookupButton=function(t,n,i,a,u,c){return get(n,i.toLowerCase()).orThunk((function(){return c.bind((function(t){return findMap(t,(function(t){return get(n,t+i.toLowerCase())}))}))})).fold((function(){return get(Gs,i.toLowerCase()).map((function(e){return e(t,u)})).orThunk((function(){return s.none()}))}),(function(n){return"grouptoolbarbutton"!==n.type||a?function(t,n,i){return get($s,t.type).fold((function(){return e.console.error("skipping button defined by",t),s.none()}),(function(e){return s.some(e(t,n,i))}))}(n,u,t):(e.console.warn("Ignoring the '"+i+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),s.none())}))},identifyButtons=function(t,e,n,i){var a=createToolbar(e),u=map(a,(function(a){var u=bind(a.items,(function(a){return 0===a.trim().length?[]:lookupButton(t,e.buttons,a,e.allowToolbarGroups,n,i).toArray()}));return{title:s.from(t.translate(a.name)),items:u}}));return filter(u,(function(t){return t.items.length>0}))},Xs={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Ks={maxHeightFunction:sn(),maxWidthFunction:Hc()},Ys={onLtr:function(){return[north$1,south$1,northeast$1,southeast$1,northwest$1,southwest$1,north$3,south$3,northeast$3,southeast$3,northwest$3,southwest$3]},onRtl:function(){return[north$1,south$1,northwest$1,southwest$1,northeast$1,southeast$1,north$3,south$3,northwest$3,southwest$3,northeast$3,southeast$3]}},Js={onLtr:function(){return[south$1,southeast$1,southwest$1,northeast$1,northwest$1,north$1,north$3,south$3,northeast$3,southeast$3,northwest$3,southwest$3]},onRtl:function(){return[south$1,southwest$1,southeast$1,northwest$1,northeast$1,north$1,north$3,south$3,northwest$3,southwest$3,northeast$3,southeast$3]}},ContextToolbar_register=function(t,e,n,i){var a,u,c=detect$3().deviceType.isTouch,f=build$1((a={sink:n,onEscape:function(){return t.focus(),s.some(!0)}},u=Cell([]),Yo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){u.set([]),Yo.getContent(t).each((function(t){remove$6(t.element(),"visibility")})),remove$4(t.element(),"tox-pop--resizing"),remove$6(t.element(),"width")},inlineBehaviours:derive$1([config("context-toolbar-events",[runOnSource(kt(),(function(t,e){Yo.getContent(t).each((function(t){})),remove$4(t.element(),"tox-pop--resizing"),remove$6(t.element(),"width")})),run(Fs,(function(t,e){remove$6(t.element(),"width");var n=get$7(t.element());Yo.setContent(t,e.event().contents()),add$2(t.element(),"tox-pop--resizing");var i=get$7(t.element());set$2(t.element(),"width",n+"px"),Yo.getContent(t).each((function(n){e.event().focus().bind((function(e){return focus$1(e),search(t.element())})).orThunk((function(){return To.focusIn(n),active()}))})),Jo.setTimeout((function(){set$2(t.element(),"width",i+"px")}),0)})),run(Hs,(function(t,e){Yo.getContent(t).each((function(t){u.set(u.get().concat([{bar:t,focus:active()}]))})),emitWith(t,Fs,{contents:e.event().forwardContents(),focus:s.none()})})),run(Ls,(function(t,e){last(u.get()).each((function(e){u.set(u.get().slice(0,u.get().length-1)),emitWith(t,Fs,{contents:ye(e.bar),focus:e.focus})}))}))]),To.config({mode:"special",onEscape:function(t){return last(u.get()).fold((function(){return a.onEscape()}),(function(e){return emit(t,Ls),s.some(!0)}))}})]),lazySink:function(){return l.value(a.sink)}}))),getBounds=function(){return getContextToolbarBounds(t)},shouldContextToolbarHide=function(){if(c()&&i.backstage.isContextMenuOpen())return!0;var e,n,a,u,s,l,f=(e=m.get().map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Se().top():absolute$1($.fromDom(t.getBody())).y(),{y:e.top+n,bottom:e.bottom+n}),d=getBounds();return a=f.y,u=f.bottom,s=d.y(),l=d.bottom(),!(Math.max(a,s)<=Math.min(u,l))},forceHide=function(){Yo.hide(f)},hideOrRepositionIfNecessary=function(){d.get().each((function(t){var e=f.element();remove$6(e,"display"),shouldContextToolbarHide()?set$2(e,"display","none"):Bn.positionWithinBounds(n,t,f,s.some(getBounds()))}))},d=Cell(s.none()),m=Cell(s.none()),g=Cell(null),wrapInPopDialog=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:derive$1([To.config({mode:"acyclic"}),config("pop-dialog-wrap-events",[Zt((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return To.focusIn(e)}))})),Qt((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},h=cached((function(){return ToolbarScopes_categorise(e,(function(t){var e=buildToolbar(t);emitWith(f,Hs,{forwardContents:wrapInPopDialog(e)})}))})),buildToolbar=function(e){var n,a,u=t.ui.registry.getAll().buttons,c=getToolbarMode(t)===Br.scrolling?Br.scrolling:Br.default,l=h();return"contexttoolbar"===e.type?(n=__assign(__assign({},u),l.formNavigators),a=identifyButtons(t,{buttons:n,toolbar:e.items,allowToolbarGroups:!1},i,s.some(["form:"])),renderToolbar({type:c,uid:generate$1("context-toolbar"),initGroups:a,onEscape:s.none,cyclicKeying:!0})):ContextForm_renderContextForm(c,e,i.backstage)};t.on("contexttoolbar-show",(function(e){var n=h();get(n.lookupTable,e.toolbarKey).each((function(n){launchContext(n,e.target===t?s.none():s.some(e)),Yo.getContent(f).each(To.focusIn)}))}));var getAnchor=function(t,e){var n="node"===t?i.backstage.shared.anchors.node(e):i.backstage.shared.anchors.cursor();return k(n,function(t,e){return"line"===t?{bubble:nu$8(12,0,Xs),layouts:{onLtr:function(){return[east$1]},onRtl:function(){return[west$1]}},overrides:Ks}:{bubble:nu$8(0,12,Xs),layouts:e?Js:Ys,overrides:Ks}}(t,c()))},launchContext=function(t,e){if(clearTimer(),!c()||!i.backstage.isContextMenuOpen()){var n=buildToolbar(t),a=e.map($.fromDom),u=getAnchor(t.position,a);d.set(s.some(u)),m.set(e);var l=f.element();remove$6(l,"display"),Yo.showWithinBounds(f,u,wrapInPopDialog(n),(function(){return s.some(getBounds())})),shouldContextToolbarHide()&&set$2(l,"display","none")}},launchContextToolbar=function(){var e=h();ToolbarLookup_lookup(e,t).fold((function(){d.set(s.none()),Yo.hide(f)}),(function(t){launchContext(t.toolbarApi,s.some(t.elem.dom()))}))},clearTimer=function(){var t=g.get();null!==t&&(Jo.clearTimeout(t),g.set(null))},resetTimer=function(t){clearTimer(),g.set(t)};t.on("init",(function(){t.on("contexttoolbar-hide",forceHide),t.on("ScrollContent ScrollWindow longpress",hideOrRepositionIfNecessary),t.on("click keyup SetContent ObjectResized ResizeEditor",(function(e){resetTimer(Jo.setEditorTimeout(t,launchContextToolbar,0))})),t.on("focusout",(function(e){Jo.setEditorTimeout(t,(function(){search(n.element()).isNone()&&search(f.element()).isNone()&&(d.set(s.none()),Yo.hide(f))}),0)})),t.on("SwitchMode",(function(){t.readonly&&(d.set(s.none()),Yo.hide(f))})),t.on("NodeChange",(function(e){search(f.element()).fold((function(){resetTimer(Jo.setEditorTimeout(t,launchContextToolbar,0))}),(function(t){}))}))}))},Events$1_setup=function(t,n,i){var broadcastEvent=function(t,e){each([n,i],(function(n){n.broadcastEvent(t,e)}))},broadcastOn=function(t,e){each([n,i],(function(n){n.broadcastOn([t],e)}))},fireDismissPopups=function(t){return broadcastOn(Ln(),{target:t.target()})},a=bind$3($.fromDom(e.document),"touchstart",fireDismissPopups),u=bind$3($.fromDom(e.document),"touchmove",(function(t){return broadcastEvent(Ht(),t)})),c=bind$3($.fromDom(e.document),"touchend",(function(t){return broadcastEvent(Lt(),t)})),s=bind$3($.fromDom(e.document),"mousedown",fireDismissPopups),l=bind$3($.fromDom(e.document),"mouseup",(function(t){0===t.raw().button&&broadcastOn(Vn(),{target:t.target()})})),onContentClick=function(t){return broadcastOn(Ln(),{target:$.fromDom(t.target)})},onContentMouseup=function(t){0===t.button&&broadcastOn(Vn(),{target:$.fromDom(t.target)})},onWindowScroll=function(t){return broadcastEvent(Ft(),ia(t))},onWindowResize=function(t){broadcastOn(Fn(),{}),broadcastEvent(Vt(),ia(t))},onEditorResize=function(){return broadcastOn(Fn(),{})};t.on("PostRender",(function(){t.on("click",onContentClick),t.on("tap",onContentClick),t.on("mouseup",onContentMouseup),t.on("ScrollWindow",onWindowScroll),t.on("ResizeWindow",onWindowResize),t.on("ResizeEditor",onEditorResize)})),t.on("remove",(function(){t.off("click",onContentClick),t.off("tap",onContentClick),t.off("mouseup",onContentMouseup),t.off("ScrollWindow",onWindowScroll),t.off("ResizeWindow",onWindowResize),t.off("ResizeEditor",onEditorResize),s.unbind(),a.unbind(),u.unbind(),c.unbind(),l.unbind()})),t.on("detach",(function(){detachSystem(n),detachSystem(i),n.destroy(),i.destroy()}))},Zs=Cr,Qs=wr,tl=constant([defaulted$1("shell",!1),strict$1("makeItem"),defaulted$1("setupItem",noop),Zn("listBehaviours",[Oo])]),el=br({name:"items",overrides:function(){return{behaviours:derive$1([Oo.config({})])}}}),nl=constant([el]),rl=constant("CustomList"),ol=composite$1({name:rl(),configFields:tl(),partFields:nl(),factory:function(t,n,i,a){var u=t.shell?{behaviours:[Oo.config({})],components:[]}:{behaviours:[],components:n},getListContainer=function(e){return t.shell?s.some(e):getPart(e,t,"items")};return{uid:t.uid,dom:t.dom,components:u.components,behaviours:augment(t.listBehaviours,u.behaviours),apis:{setItems:function(n,i){getListContainer(n).fold((function(){throw e.console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(e){var a=Oo.contents(e),u=i.length,c=u-a.length,s=c>0?function(t,e){for(var n=[],i=0;i<t;i++)n.push(e(i));return n}(c,(function(){return t.makeItem()})):[],l=a.slice(u);each(l,(function(t){return Oo.remove(e,t)})),each(s,(function(t){return Oo.append(e,t)}));var f=Oo.contents(e);each(f,(function(e,a){t.setupItem(n,e,i[a],a)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),getOffsetParent=function(t){return(getRaw(t,"position").is("fixed")?s.none():offsetParent(t)).orThunk((function(){var e=$.fromTag("span");return parent(t).bind((function(t){append(t,e);var n=offsetParent(e);return remove(e),n}))}))},getOrigin=function(t){return getOffsetParent(t).map(absolute).getOrThunk((function(){return we(0,0)}))},il=Adt_generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),appear=function(t,e){var n=t.element();add$2(n,e.transitionClass),remove$4(n,e.fadeOutClass),add$2(n,e.fadeInClass),e.onShow(t)},disappear=function(t,e){var n=t.element();add$2(n,e.transitionClass),remove$4(n,e.fadeInClass),add$2(n,e.fadeOutClass),e.onHide(t)},isVisibleForModes=function(t,e,n){return forall(t,(function(t){switch(t){case"bottom":return function(t,e){return t.bottom()<=e.bottom()}(e,n);case"top":return function(t,e){return t.y()>=e.y()}(e,n)}}))},getPrior=function(t,e){return e.getInitialPosition().map((function(e){return bounds$1(e.bounds.x(),e.bounds.y(),get$7(t),get$6(t))}))},revertToOriginal=function(t,e,n){return n.getInitialPosition().bind((function(i){switch(n.setInitialPosition(s.none()),i.position){case"static":return s.some(il.static());case"absolute":var a=getOffsetParent(t).map(box).getOrThunk((function(){return box(ve())}));return s.some(il.absolute(tn("absolute",get(i.style,"left").map((function(t){return e.x()-a.x()})),get(i.style,"top").map((function(t){return e.y()-a.y()})),get(i.style,"right").map((function(t){return a.right()-e.right()})),get(i.style,"bottom").map((function(t){return a.bottom()-e.bottom()})))));default:return s.none()}}))},morphToFixed=function(t,e,n,i){var a=box(t);if(isVisibleForModes(e.modes,a,n))return s.none();!function(t,e,n){n.setInitialPosition(s.some({style:getAllRaw(t),position:get$4(t,"position")||"static",bounds:e}))}(t,a,i);var u=win(),c=a.x()-u.x(),l=n.y()-u.y(),f=u.bottom()-n.bottom(),d=a.y()<=n.y();return s.some(il.fixed(tn("fixed",s.some(c),d?s.some(l):s.none(),s.none(),d?s.none():s.some(f))))},getMorph=function(t,e,n,i){var a=t.element();return getRaw(a,"position").is("fixed")?function(t,e,n,i){return getPrior(t,i).filter((function(t){return isVisibleForModes(e.modes,t,n)})).bind((function(e){return revertToOriginal(t,e,i)}))}(a,e,n,i):morphToFixed(a,e,n,i)},morphToStatic=function(t,e){each(["left","right","top","bottom","position"],(function(e){return remove$6(t.element(),e)})),e.onUndocked(t)},morphToCoord=function(t,e,n){applyPositionCss(t.element(),n),("fixed"===n.position()?e.onDocked:e.onUndocked)(t)},updateVisibility=function(t,e,n,i,a){void 0===a&&(a=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(u){var c=function(t,e){return t.y()<e.bottom()&&t.bottom()>e.y()}(u,i);c!==n.isVisible()&&(n.setVisible(c),a&&!c?(add$3(t.element(),[e.fadeOutClass]),e.onHide(t)):(c?appear:disappear)(t,e))}))}))},resetInternal=function(t,e,n){var i=t.element();n.setDocked(!1),function(t,e){var n=t.element();return getPrior(n,e).bind((function(t){return revertToOriginal(n,t,e)}))}(t,n).each((function(n){n.fold((function(){return morphToStatic(t,e)}),(function(n){return morphToCoord(t,e,n)}),noop)})),n.setVisible(!0),e.contextual.each((function(e){remove$5(i,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),refresh$4(t,e,n)},refresh$4=function(t,e,n){t.getSystem().isConnected()&&function(t,e,n){var i=e.lazyViewport(t),a=n.isDocked();a&&updateVisibility(t,e,n,i),getMorph(t,e,i,n).each((function(u){n.setDocked(!a),u.fold((function(){return morphToStatic(t,e)}),(function(n){return morphToCoord(t,e,n)}),(function(a){updateVisibility(t,e,n,i,!0),morphToCoord(t,e,a)}))}))}(t,e,n)},reset=function(t,e,n){n.isDocked()&&resetInternal(t,e,n)},al=Object.freeze({__proto__:null,refresh:refresh$4,reset:reset,isDocked:function(t,e,n){return n.isDocked()}}),ul=Object.freeze({__proto__:null,events:function(t,e){return derive([runOnSource(kt(),(function(n,i){t.contextual.each((function(t){has$2(n.element(),t.transitionClass)&&(remove$5(n.element(),[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n));i.stop()}))})),run(Ft(),(function(n,i){refresh$4(n,t,e)})),run(Vt(),(function(n,i){reset(n,t,e)}))])}}),cl=[optionObjOf("contextual",[strictString("fadeInClass"),strictString("fadeOutClass"),strictString("transitionClass"),strictFunction("lazyContext"),onHandler("onShow"),onHandler("onShown"),onHandler("onHide"),onHandler("onHidden")]),defaultedFunction("lazyViewport",win),function(t,e,n){return defaultedOf(t,e,arrOf(n))}("modes",["top","bottom"],U),onHandler("onDocked"),onHandler("onUndocked")],sl=Object.freeze({__proto__:null,init:function(){var t=Cell(!1),e=Cell(!0),n=Cell(s.none());return nu$5({isDocked:function(){return t.get()},setDocked:function(e){return t.set(e)},getInitialPosition:function(){return n.get()},setInitialPosition:function(t){return n.set(t)},isVisible:function(){return e.get()},setVisible:function(t){return e.set(t)},readState:function(){return"docked:  "+t.get()+", visible: "+e.get()}})}}),ll=create$1({fields:cl,name:"docking",active:ul,apis:al,state:sl}),fl={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},updateIframeContentFlow=function(t,e){var n=t.element();parent(n).each((function(i){var a="padding-"+(e?"top":"bottom");if(ll.isDocked(t)){var u=get$7(i);set$2(n,"width",u+"px"),set$2(i,a,function(t){return getOuter$1(t)+(parseInt(get$4(t,"margin-top"),10)||0)+(parseInt(get$4(t,"margin-bottom"),10)||0)}(n)+"px")}else remove$6(n,"width"),remove$6(i,a)}))},updateSinkVisibility=function(t,e){e?(remove$4(t,fl.fadeOutClass),add$3(t,[fl.transitionClass,fl.fadeInClass])):(remove$4(t,fl.fadeInClass),add$3(t,[fl.fadeOutClass,fl.transitionClass]))},updateEditorClasses=function(t,e){var n=$.fromDom(t.getContainer());e?(add$2(n,"tox-tinymce--toolbar-sticky-on"),remove$4(n,"tox-tinymce--toolbar-sticky-off")):(add$2(n,"tox-tinymce--toolbar-sticky-off"),remove$4(n,"tox-tinymce--toolbar-sticky-on"))},getBehaviours$2=function(t,e){var n=Cell(s.none()),i=isToolbarLocationTop(t),runOnSinkElement=function(t){e().each((function(e){return t(e.element())}))},onDockingSwitch=function(n){t.inline||updateIframeContentFlow(n,i),updateEditorClasses(t,ll.isDocked(n)),n.getSystem().broadcastOn([Fn()],{}),e().each((function(t){return t.getSystem().broadcastOn([Fn()],{})}))},a=t.inline?[]:function(t){var e;return[Ze.config({channels:(e={},e[us()]={onReceive:function(e){updateIframeContentFlow(e,t)}},e)})]}(i);return __spreadArrays([zo.config({}),ll.config({contextual:__assign({lazyContext:function(e){var n=getOuter$1(e.element()),a=t.inline?t.getContentAreaContainer():t.getContainer(),u=box($.fromDom(a)),c=u.height()-n,l=u.y()+(i?0:n);return s.some(bounds$1(u.x(),l,u.width(),c))},onShow:function(){runOnSinkElement((function(t){return updateSinkVisibility(t,!0)}))},onShown:function(t){runOnSinkElement((function(t){return remove$5(t,[fl.transitionClass,fl.fadeInClass])})),n.get().each((function(e){var i,a,u;i=t.element(),u=owner(a=e),active(u).filter((function(t){return!eq(a,t)})).filter((function(t){return eq(t,$.fromDom(u.dom().body))||ut(i,t)})).each((function(){return focus$1(a)})),n.set(s.none())}))},onHide:function(t){n.set(function(t,e){return search(t).orThunk((function(){return e().toOption().bind((function(t){return search(t.element())}))}))}(t.element(),e)),runOnSinkElement((function(t){return updateSinkVisibility(t,!1)}))},onHidden:function(){runOnSinkElement((function(t){return remove$5(t,[fl.transitionClass])}))}},fl),modes:[i?"top":"bottom"],onDocked:onDockingSwitch,onUndocked:onDockingSwitch})],a)},dl=Object.freeze({__proto__:null,setup:function(t,e){t.inline||(isToolbarLocationTop(t)||t.on("ResizeEditor",(function(){e().each(ll.reset)})),t.on("ResizeWindow ResizeEditor",(function(){e().each((function(e){return updateIframeContentFlow(e,isToolbarLocationTop(t))}))})),t.on("SkinLoaded",(function(){e().each((function(t){ll.isDocked(t)?ll.reset(t):ll.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){e().each(ll.reset)}))),t.on("AfterScrollIntoView",(function(t){e().each((function(e){ll.refresh(e);var n=e.element();isVisible(n)&&function(t,e){var n=owner(e),i=n.dom().defaultView.innerHeight,a=Se(n),u=$.fromDom(t.elm),c=absolute$1(u),s=get$6(u),l=c.y(),f=l+s,d=absolute(e),m=get$6(e),g=d.top(),h=g+m,p=Math.abs(g-a.top())<2,v=Math.abs(h-(a.top()+i))<2;if(p&&l<h)to(a.left(),l-m,n);else if(v&&f>g){var b=l-i+s+m;to(a.left(),b,n)}}(t,n)}))})),t.on("PostRender",(function(){updateEditorClasses(t,!1)}))},isDocked:function(t){return t().map(ll.isDocked).getOr(!1)},getBehaviours:getBehaviours$2}),ml=noop,gl=n,hl=constant([]),pl=Object.freeze({__proto__:null,setup:ml,isDocked:gl,getBehaviours:hl}),vl=single$2({factory:function(t,e){var n={focus:To.focusIn,setMenus:function(t,n){var i=map(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},i=createMenuButton(n).mapError((function(t){return formatError(t)})).getOrDie();return renderMenuButton(i,"tox-mbtn",e.backstage,s.some("menuitem"))}));Oo.set(t,i)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:derive$1([Oo.config({}),config("menubar-events",[Zt((function(e){t.onSetup(e)})),run(pt(),(function(t,e){descendant$1(t.element(),".tox-mbtn--active").each((function(n){closest$3(e.event().target(),".tox-mbtn").each((function(e){eq(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){qa.expand(t),qa.close(n),zo.focus(t)}))}))}))}))})),run($t(),(function(t,e){e.event().prevFocus().bind((function(e){return t.getSystem().getByDom(e).toOption()})).each((function(n){e.event().newFocus().bind((function(e){return t.getSystem().getByDom(e).toOption()})).each((function(t){qa.isOpen(n)&&(qa.expand(t),qa.close(n))}))}))}))]),To.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),s.some(!0)}}),Ia.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[strict$1("dom"),strict$1("uid"),strict$1("onEscape"),strict$1("backstage"),defaulted$1("onSetup",noop)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),bl=[field$1("slotBehaviours",[])],getPartName$1=function(t){return"<alloy.field."+t+">"},make$7=function(t,e){var n,getSlotNames=function(e){return getAllPartNames(t)},onSlot=function(e,n){return function(i,a){return getPart(i,t,a).map((function(t){return e(t,a)})).getOr(n)}},doShowing=function(t,e){return"true"!==get$2(t.element(),"aria-hidden")},i=onSlot(doShowing,!1),a=onSlot((function(t,e){if(doShowing(t)){var n=t.element();set$2(n,"display","none"),set$1(n,"aria-hidden","true"),emitWith(t,Gt(),{name:e,visible:!1})}})),u=(n=a,function(t,e){each(e,(function(e){return n(t,e)}))}),c=onSlot((function(t,e){if(!doShowing(t)){var n=t.element();remove$6(n,"display"),remove$1(n,"aria-hidden"),emitWith(t,Gt(),{name:e,visible:!0})}})),s={getSlotNames:getSlotNames,getSlot:function(e,n){return getPart(e,t,n)},isShowing:i,hideSlot:a,hideAllSlots:function(t){return u(t,getSlotNames())},showSlot:c};return{uid:t.uid,dom:t.dom,components:e,behaviours:get$c(t.slotBehaviours),apis:s}},yl=map$1({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},(function(t){return makeApi(t)})),xl=__assign(__assign({},yl),{sketch:function(t){var e=function(){var t=[];return{slot:function(e,n){return t.push(e),generateOne("container",getPartName$1(e),n)},record:function(){return t}}}(),n=t(e),i=e.record(),a=map(i,(function(t){return pr({name:t,pname:getPartName$1(t)})}));return composite("container",bl,a,make$7,n)}}),wl=objOf([optionString("icon"),optionString("tooltip"),defaultedFunction("onShow",noop),defaultedFunction("onHide",noop),defaultedFunction("onSetup",(function(){return noop}))]),getApi=function(t){return{element:function(){return t.element().dom()}}},makePanels=function(t,e){var n=map(w(e),(function(t){var n=e[t],i=getOrDie(function(t){return asRaw("sidebar",wl,t)}(n));return{name:t,getApi:getApi,onSetup:i.onSetup,onShow:i.onShow,onHide:i.onHide}}));return map(n,(function(e){var i=Cell(noop);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:SimpleBehaviours_unnamedEvents([onControlAttached(e,i),onControlDetached(e,i),run(Gt(),(function(t,e){var i=e.event();find(n,(function(t){return t.name===i.name()})).each((function(e){(i.visible()?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},makeSidebar=function(t){return xl.sketch((function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:makePanels(e,t),slotBehaviours:SimpleBehaviours_unnamedEvents([Zt((function(t){return xl.hideAllSlots(t)}))])}}))},whichSidebar=function(t){return _r.getCurrent(t).bind((function(t){return ns.isGrowing(t)||ns.hasGrown(t)?_r.getCurrent(t).bind((function(t){return find(xl.getSlotNames(t),(function(e){return xl.isShowing(t,e)}))})):s.none()}))},Cl=generate$1("FixSizeEvent"),Sl=generate$1("AutoSizeEvent"),fromHtml$2=function(t){var e=$.fromHtml(t),n=children(e),i=function(t){var e=void 0!==t.dom().attributes?t.dom().attributes:[];return foldl(e,(function(t,e){var n;return"class"===e.name?t:__assign(__assign({},t),((n={})[e.name]=e.value,n))}),{})}(e),a=function(t){return Array.prototype.slice.call(t.dom().classList,0)}(e),u=0===n.length?{}:{innerHtml:get$1(e)};return __assign({tag:re(e),classes:a,attributes:i},u)},renderSpinner=function(t){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:fromHtml$2('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:derive$1([To.config({mode:"special",onTab:function(){return s.some(!0)},onShiftTab:function(){return s.some(!0)}}),zo.config({})])}},setup$7=function(t,e,n){var i=Cell(!1),a=Cell(s.none()),toggle=function(t){t!==i.get()&&(!function(t,e,n){var i=t.element();!0===e?(Oo.set(t,[renderSpinner(n)]),remove$6(i,"display"),remove$1(i,"aria-hidden")):(Oo.set(t,[]),set$2(i,"display","none"),set$1(i,"aria-hidden","true"))}(e(),t,n.providers),i.set(t))};t.on("ProgressState",(function(e){if(a.get().each(Jo.clearTimeout),p(e.time)){var n=Jo.setEditorTimeout(t,(function(){return toggle(e.state)}),e.time);a.set(s.some(n))}else toggle(e.state),a.set(s.none())}))},kl=Qs.optional({factory:vl,name:"menubar",schema:[strict$1("backstage")]}),El=Qs.optional({factory:{sketch:function(t){return ol.sketch({uid:t.uid,dom:t.dom,listBehaviours:derive$1([To.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return renderToolbar({type:t.type,uid:generate$1("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],onEscape:function(){return s.none()}})},setupItem:function(t,e,n,i){Wc.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[strict$1("dom"),strict$1("onEscape")]}),Tl=Qs.optional({factory:{sketch:function(t){return function(t){return t.type===Br.sliding?renderSlidingMoreToolbar:t.type===Br.floating?renderFloatingMoreToolbar:renderToolbar}(t)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),s.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,backstage:t.backstage,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[strict$1("dom"),strict$1("onEscape"),strict$1("getSink")]}),Ol=Qs.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?getBehaviours$2:hl;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:derive$1(n(e,t.getSink))}}},name:"header",schema:[strict$1("dom")]}),_l=Qs.optional({name:"socket",schema:[strict$1("dom")]}),Nl=Qs.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:derive$1([Ia.config({}),zo.config({}),ns.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){_r.getCurrent(t).each(xl.hideAllSlots),emit(t,Sl)},onGrown:function(t){emit(t,Sl)},onStartGrow:function(t){emitWith(t,Cl,{width:getRaw(t.element(),"width").getOr("")})},onStartShrink:function(t){emitWith(t,Cl,{width:get$7(t.element())+"px"})}}),Oo.config({}),_r.config({find:function(t){var e=Oo.contents(t);return head(e)}})])}],behaviours:derive$1([ComposingConfigs_childAt(0),config("sidebar-sliding-events",[run(Cl,(function(t,e){set$2(t.element(),"width",e.event().width())})),run(Sl,(function(t,e){remove$6(t.element(),"width")}))])])}}},name:"sidebar",schema:[strict$1("dom")]}),Al=Qs.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:derive$1([Oo.config({})]),components:[]}}},name:"throbber",schema:[strict$1("dom")]}),zl=composite$1({name:"OuterContainer",factory:function(t,e,n){var i={getSocket:function(e){return Zs.getPart(e,t,"socket")},setSidebar:function(e,n){Zs.getPart(e,t,"sidebar").each((function(t){return function(t,e){_r.getCurrent(t).each((function(t){return Oo.set(t,[makeSidebar(e)])}))}(t,n)}))},toggleSidebar:function(e,n){Zs.getPart(e,t,"sidebar").each((function(t){return function(t,e){_r.getCurrent(t).each((function(t){_r.getCurrent(t).each((function(n){ns.hasGrown(t)?xl.isShowing(n,e)?ns.shrink(t):(xl.hideAllSlots(n),xl.showSlot(n,e)):(xl.hideAllSlots(n),xl.showSlot(n,e),ns.grow(t))}))}))}(t,n)}))},whichSidebar:function(e){return Zs.getPart(e,t,"sidebar").bind(whichSidebar).getOrNull()},getHeader:function(e){return Zs.getPart(e,t,"header")},getToolbar:function(e){return Zs.getPart(e,t,"toolbar")},setToolbar:function(e,n){Zs.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){Zs.getPart(e,t,"multiple-toolbar").each((function(t){ol.setItems(t,n)}))},refreshToolbar:function(e){Zs.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},getThrobber:function(e){return Zs.getPart(e,t,"throbber")},focusToolbar:function(e){Zs.getPart(e,t,"toolbar").orThunk((function(){return Zs.getPart(e,t,"multiple-toolbar")})).each((function(t){To.focusIn(t)}))},setMenubar:function(e,n){Zs.getPart(e,t,"menubar").each((function(t){vl.setMenus(t,n)}))},focusMenubar:function(e){Zs.getPart(e,t,"menubar").each((function(t){vl.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:i,behaviours:t.behaviours}},configFields:[strict$1("dom"),strict$1("behaviours")],partFields:[Ol,kl,Tl,El,_l,Nl,Al],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var i=map(n,(function(t){return renderToolbarGroup(t)}));t.setToolbar(e,i)},setToolbars:function(t,e,n){var i=map(n,(function(t){return map(t,renderToolbarGroup)}));t.setToolbars(e,i)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),Dl={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},parseItemsString=function(t){return"string"==typeof t?t.split(" "):t},identifyMenus=function(t,e){var n=__assign(__assign({},Dl),e.menus),i=w(e.menus).length>0,a=void 0===e.menubar||!0===e.menubar?parseItemsString("file edit view insert format tools table help"):parseItemsString(!1===e.menubar?"":e.menubar),u=filter(a,(function(t){return i&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||Dl.hasOwnProperty(t)})),c=map(u,(function(i){var a=n[i];return function(t,e,n){var i=function(t){return t.getParam("removed_menuitems","")}(n).split(/[ ,]/);return{text:t.title,getItems:function(){return bind(t.items,(function(t){var n=t.toLowerCase();return 0===n.trim().length||exists(i,(function(t){return t===n}))?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]}))}}}({title:a.title,items:parseItemsString(a.items)},e,t)}));return filter(c,(function(t){return t.getItems().length>0&&exists(t.getItems(),(function(t){return"separator"!==t.type}))}))},SkinLoaded_fireSkinLoaded=function(t){var done=function(){t._skinLoaded=!0,Events_fireSkinLoaded(t)};return function(){t.initialized?done():t.on("init",done)}},SkinLoaded_fireSkinLoadError=function(t,e){return function(){return Events_fireSkinLoadError(t,{message:e})}},loadSkin=function(t,e){var n,i=function(t){var e=t.settings,n=e.skin,i=e.skin_url;if(!1!==n){var a=n||"oxide";i=i?t.documentBaseURI.toAbsolute(i):Qo.baseURL+"/skins/ui/"+a}return i}(e);i&&(n=i+"/skin.min.css",e.contentCSS.push(i+(t?"/content.inline":"/content")+".min.css")),!1===function(t){return!1===t.getParam("skin")}(e)&&n?Zo.DOM.styleSheetLoader.load(n,SkinLoaded_fireSkinLoaded(e),SkinLoaded_fireSkinLoadError(e,"Skin could not be loaded")):SkinLoaded_fireSkinLoaded(e)()},Ml=curry(loadSkin,!1),Bl=curry(loadSkin,!0),setToolbar=function(t,e,n,i){var a=e.outerContainer,u=n.toolbar,c=n.buttons;if(isArrayOf(u,f)){var l=u.map((function(e){var a={toolbar:e,buttons:c,allowToolbarGroups:n.allowToolbarGroups};return identifyButtons(t,a,{backstage:i},s.none())}));zl.setToolbars(a,l)}else zl.setToolbar(a,identifyButtons(t,n,{backstage:i},s.none()))},Rl=Zo.DOM,Pl=detect$3(),Il=Pl.os.isiOS()&&Pl.os.version.major<=12,Hl={render:function(t,n,i,a,u){var c=Cell(0);Ml(t),function(t,e){attachSystemWith(t,e,after)}($.fromDom(u.targetNode),n.mothership),attachSystem(ve(),n.uiMothership),t.on("PostRender",(function(){setToolbar(t,n,i,a),c.set(t.getWin().innerWidth),zl.setMenubar(n.outerContainer,identifyMenus(t,i)),zl.setSidebar(n.outerContainer,i.sidebar),function(t){var e=t.getWin(),n=t.getDoc().documentElement,i=Cell(we(e.innerWidth,e.innerHeight)),a=Cell(we(n.offsetWidth,n.offsetHeight)),resize=function(n){var u=t.getDoc().documentElement,c=i.get(),s=a.get();c.left()!==e.innerWidth||c.top()!==e.innerHeight?(i.set(we(e.innerWidth,e.innerHeight)),Events_fireResizeContent(t,n)):s.left()===u.offsetWidth&&s.top()===u.offsetHeight||(a.set(we(u.offsetWidth,u.offsetHeight)),Events_fireResizeContent(t,n))},scroll=function(e){return Events_fireScrollContent(t,e)};Rl.bind(e,"resize",resize),Rl.bind(e,"scroll",scroll);var u=capture$1($.fromDom(t.getBody()),"load",resize);t.on("remove",(function(){u.unbind(),Rl.unbind(e,"resize",resize),Rl.unbind(e,"scroll",scroll)}))}(t)}));var s,l,f,d=zl.getSocket(n.outerContainer).getOrDie("Could not find expected socket element");if(!0===Il){setAll$1(d.element(),{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var m=(s=function(){t.fire("ScrollContent")},l=20,f=null,{cancel:function(){null!==f&&(e.clearTimeout(f),f=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===f&&(f=e.setTimeout((function(){s.apply(null,t),f=null}),l))}});bind$3(d.element(),"scroll",m.throttle)}setupReadonlyModeSwitch(t,n),t.addCommand("ToggleSidebar",(function(e,i){zl.toggleSidebar(n.outerContainer,i),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return zl.whichSidebar(n.outerContainer)}));var g=getToolbarMode(t);return g!==Br.sliding&&g!==Br.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var e=t.getWin().innerWidth;e!==c.get()&&(zl.refreshToolbar(n.outerContainer),c.set(e))})),{iframeContainer:d.element().dom(),editorContainer:n.outerContainer.element().dom()}}},Utils_calcCappedSize=function(t,e,n){var i=e.filter((function(e){return t<e})),a=n.filter((function(e){return t>e}));return i.or(a).getOr(t)},Utils_parseToInt=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?s.some(parseInt(""+t,10)):s.none()},Utils_numToPx=function(t){return p(t)?t+"px":t},getHeightWithFallback=function(t){return function(t){var e=getHeightSetting(t),n=getMinHeightSetting(t),i=getMaxHeightSetting(t);return Utils_parseToInt(e).map((function(t){return Utils_calcCappedSize(t,n,i)}))}(t).getOr(getHeightSetting(t))},getWidth$1=function(t){var e=getWidthSetting(t),n=getMinWidthSetting(t),i=getMaxWidthSetting(t);return Utils_parseToInt(e).map((function(t){return Utils_calcCappedSize(t,n,i)}))},getTargetPosition=function(t,e){var n=box(t);return e?n.y():n.bottom()},Ll={render:function(t,e,n,i,a){var u,c=Zo.DOM,s=useFixedContainer(t),l=isStickyToolbar(t),f=$.fromDom(a.targetNode),d=getMaxWidthSetting(t).or(getWidth$1(t)),m=getToolbarMode(t),g=m===Br.floating,h=m===Br.sliding||g,p=isToolbarLocationTop(t),v=Cell(getTargetPosition(f,p)),b=Cell(!1);Bl(t);var updateChromeUi=function(t){(void 0===t&&(t=!1),h&&zl.refreshToolbar(e.outerContainer),s)||function(t){var n=h?t.fold((function(){return 0}),(function(t){return t.components().length>1?get$6(t.components()[1].element()):0})):0,i=box(f),a=p?i.y()-get$6(u.element())+n:i.bottom();setAll$1(e.outerContainer.element(),{position:"absolute",top:Math.round(a)+"px",left:Math.round(i.x())+"px"});var c=d.getOrThunk((function(){var t=Utils_parseToInt(get$4(ve(),"margin-left")).getOr(0);return get$7(ve())-i.x()+t}));set$2(u.element(),"max-width",c+"px")}(zl.getToolbar(e.outerContainer));l&&(t?ll.reset(u):ll.refresh(u)),g&&zl.getToolbar(e.outerContainer).each((function(t){Zc.reposition(t)}))},show=function(){b.set(!0),set$2(e.outerContainer.element(),"display","flex"),c.addClass(t.getBody(),"mce-edit-focus"),remove$6(e.uiMothership.element(),"display"),updateChromeUi()},hide=function(){b.set(!1),e.outerContainer&&(set$2(e.outerContainer.element(),"display","none"),c.removeClass(t.getBody(),"mce-edit-focus")),set$2(e.uiMothership.element(),"display","none")},render=function(){if(u)show();else{u=zl.getHeader(e.outerContainer).getOrDie();var a=function(t){return fixedContainerElement(t).getOr(ve())}(t);attachSystem(a,e.mothership),attachSystem(a,e.uiMothership),setToolbar(t,e,n,i),zl.setMenubar(e.outerContainer,identifyMenus(t,n)),show(),t.on("activate",show),t.on("deactivate",hide),t.on("SkinLoaded ResizeWindow",(function(){b.get()&&updateChromeUi(!0)})),t.on("NodeChange keydown",(function(){Jo.requestAnimationFrame((function(){var t=getTargetPosition(f,p);b.get()&&t!==v.get()&&(updateChromeUi(!0),v.set(t))}))})),t.nodeChanged()}};return t.on("focus",render),t.on("blur hide",hide),t.on("init",(function(){t.hasFocus()&&render()})),setupReadonlyModeSwitch(t,e),{editorContainer:e.outerContainer.element().dom()}}},AlignmentButtons_register=function(t){fc.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:onSetupFormatToggle(t,e.name)})}));var e="alignnone",n="No alignment",i="JustifyNone",a="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(i)},icon:a})},toggleFormat=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},registerButtons=function(t){!function(t){fc.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:onSetupFormatToggle(t,e.name),onAction:toggleFormat(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:onSetupFormatToggle(t,n),onAction:toggleFormat(t,n)})}}(t),function(t){fc.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(e){t.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)}})}))}(t),function(t){fc.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)},onSetup:onSetupFormatToggle(t,e.name)})}))}(t)},SimpleControls_register=function(t){registerButtons(t),function(t){fc.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return t.execCommand(e.action)}})})),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:toggleFormat(t,"code")})}(t)},toggleUndoRedoState=function(t,e,n){var checkState=function(){return!!e.undoManager&&e.undoManager[n]()},onUndoStateChange=function(){t.setDisabled(e.readonly||!checkState())};return t.setDisabled(!checkState()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",onUndoStateChange),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",onUndoStateChange)}},UndoRedo_register=function(t){!function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return toggleUndoRedoState(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return toggleUndoRedoState(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})}(t),function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return toggleUndoRedoState(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return toggleUndoRedoState(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})}(t)},VisualAid_register=function(t){!function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return t.execCommand("mceToggleVisualAid")}})}(t),function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return function(t,e){t.setActive(e.hasVisual);var onVisualAid=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",onVisualAid),function(){return e.off("VisualAid",onVisualAid)}}(e,t)},onAction:function(){t.execCommand("mceToggleVisualAid")}})}(t)},IndentOutdent_register=function(t){!function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(e){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var onNodeChange=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",onNodeChange),function(){return e.off("NodeChange",onNodeChange)}}(e,t)},onAction:function(){return t.execCommand("outdent")}}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return t.execCommand("indent")}})}(t)},ComplexControls_register=function(t,e){!function(t,e){var n=createMenuItems(0,e,getSpec(t));t.ui.registry.addNestedMenuItem("align",{text:e.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=createMenuItems(0,e,getSpec$1(t));t.ui.registry.addNestedMenuItem("fontformats",{text:e.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=__assign({type:"advanced"},e.styleselect),i=createMenuItems(0,e,getSpec$4(t,n));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})}(t,e),function(t,e){var n=createMenuItems(0,e,getSpec$3(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=createMenuItems(0,e,getSpec$2(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e)},FormatControls_setup=function(t,e){AlignmentButtons_register(t),SimpleControls_register(t),ComplexControls_register(t,e),UndoRedo_register(t),ta.register(t),VisualAid_register(t),IndentOutdent_register(t)},nu$d=function(t,e){return{anchor:"makeshift",x:t,y:e}},isTouchEvent$1=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},transposeContentAreaContainer=function(t,e){var n=Zo.DOM.getPos(t);return function(t,e,n){return nu$d(t.x+e,t.y+n)}(e,n.x,n.y)},getPointAnchor=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(isTouchEvent$1(t)){var e=t.touches[0];return nu$d(e.pageX,e.pageY)}return nu$d(t.pageX,t.pageY)}(e):transposeContentAreaContainer(t.getContentAreaContainer(),function(t){if(isTouchEvent$1(t)){var e=t.touches[0];return nu$d(e.clientX,e.clientY)}return nu$d(t.clientX,t.clientY)}(e)):getSelectionAnchor(t)},getSelectionAnchor=function(t){return{anchor:"selection",root:$.fromDom(t.selection.getNode())}},getNodeAnchor$1=function(t){return{anchor:"node",node:s.some($.fromDom(t.selection.getNode())),root:$.fromDom(t.getBody())}},initAndShow=function(t,e,n,i,a,u){var c=n(),s=function(t,e,n){return n?getNodeAnchor$1(t):getPointAnchor(t,e)}(t,e,u);build$2(c,Ii.CLOSE_ON_EXECUTE,i,!1).map((function(t){e.preventDefault(),Yo.showMenuAt(a,s,{menu:{markers:markers$1("normal")},data:t})}))},Fl={onLtr:function(){return[south$1,southeast$1,southwest$1,northeast$1,northwest$1,north$1,north$3,south$3,northeast$3,southeast$3,northwest$3,southwest$3]},onRtl:function(){return[south$1,southwest$1,southeast$1,northwest$1,northeast$1,north$1,north$3,south$3,northwest$3,southwest$3,northeast$3,southeast$3]}},Vl={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},show=function(t,e,n,i,a,u,c){var l=function(t,e,n){var i=e?getNodeAnchor$1(t):getPointAnchor(t,n);return __assign({bubble:nu$8(0,12,Vl),layouts:Fl,overrides:{maxWidthFunction:Hc(),maxHeightFunction:sn()}},i)}(t,u,e);build$2(n,Ii.CLOSE_ON_EXECUTE,i,!0).map((function(n){e.preventDefault(),Yo.showMenuWithinBounds(a,l,{menu:{markers:markers$1("normal"),highlightImmediately:c},data:n,type:"horizontal"},(function(){return s.some(getContextToolbarBounds(t))})),t.fire("contexttoolbar-hide")}))},initAndShow$1=function(t,e,n,i,a,u){var c=detect$3(),s=c.os.isiOS(),l=c.os.isOSX(),f=c.os.isAndroid(),d=c.deviceType.isTouch(),open=function(){var c=n();show(t,e,c,i,a,u,!(f||s||l&&d))};if(!l&&!s||u)f&&!u&&t.selection.setCursorLocation(e.target,0),open();else{var openiOS_1=function(){!function(t){var e=t.selection.getRng(),selectionReset=function(){Jo.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),unbindEventListeners()};t.once("touchend",selectionReset);var preventMousedown=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",preventMousedown,!0);var clearSelectionReset=function(){return unbindEventListeners()};t.once("longpresscancel",clearSelectionReset);var unbindEventListeners=function(){t.off("touchend",selectionReset),t.off("longpresscancel",clearSelectionReset),t.off("mousedown",preventMousedown)}}(t),open()};!function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var i=e.touches[0],a=n.getRng();return getFirstRect$1(t.getWin(),yn.domRange(a)).exists((function(t){return t.left()<=i.clientX&&t.right()>=i.clientX&&t.top()<=i.clientY&&t.bottom()>=i.clientY}))}(t,e)?(t.once("selectionchange",openiOS_1),t.once("touchend",(function(){return t.off("selectionchange",openiOS_1)}))):openiOS_1()}},patchPipeConfig=function(t){return"string"==typeof t?t.split(/[ ,]/):t},Settings$1_shouldNeverUseNative=function(t){return t.settings.contextmenu_never_use_native||!1},Settings$1_getContextMenu=function(t){return function(t,e,n){var i=t.ui.registry.getAll().contextMenus;return get(t.settings,e).map(patchPipeConfig).getOrThunk((function(){return filter(patchPipeConfig(n),(function(t){return has(i,t)}))}))}(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},Settings$1_isContextMenuDisabled=function(t){return!1===t.getParam("contextmenu")},isSeparator$1=function(t){return f(t)?"|"===t:"separator"===t.type},Ul={type:"separator"},makeContextItem=function(t){if(f(t))return t;switch(t.type){case"separator":return Ul;case"submenu":return{type:"nestedmenuitem",text:t.text,icon:t.icon,getSubmenuItems:function(){var e=t.getSubmenuItems();return f(e)?e:map(e,makeContextItem)}};default:return{type:"menuitem",text:t.text,icon:t.icon,onAction:(e=t.onAction,function(){return e()})}}var e},addContextMenuGroup=function(t,e){if(0===e.length)return t;var n=last(t).filter((function(t){return!isSeparator$1(t)})).fold((function(){return[]}),(function(t){return[Ul]}));return t.concat(n).concat(e).concat([Ul])},setup$9=function(t,e,n){var i=detect$3().deviceType.isTouch,a=build$1(Yo.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:derive$1([config("dismissContextMenu",[run(Wt(),(function(e,n){Hn.close(e),t.focus()}))])])})),hideContextMenu=function(t){return Yo.hide(a)},showContextMenu=function(e){if(Settings$1_shouldNeverUseNative(t)&&e.preventDefault(),!function(t,e){return e.ctrlKey&&!Settings$1_shouldNeverUseNative(t)}(t,e)&&!Settings$1_isContextMenuDisabled(t)){var u=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)}(t,e);(i()?initAndShow$1:initAndShow)(t,e,(function(){var n=u?t.selection.getStart(!0):e.target,i=t.ui.registry.getAll(),a=Settings$1_getContextMenu(t);return function(t,e,n){var i=foldl(e,(function(e,i){if(has(t,i)){var a=t[i].update(n);if(f(a))return addContextMenuGroup(e,a.split(" "));if(a.length>0){var u=map(a,makeContextItem);return addContextMenuGroup(e,u)}return e}return e.concat([i])}),[]);return i.length>0&&isSeparator$1(i[i.length-1])&&i.pop(),i}(i.contextMenus,a,n)}),n,a,u)}};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");t.on(e,hideContextMenu),t.on("longpress contextmenu",showContextMenu)}))},jl=Adt_generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),subtract=function(t){return function(e){return e.translate(-t.left(),-t.top())}},add$4=function(t){return function(e){return e.translate(t.left(),t.top())}},transform$1=function(t){return function(e,n){return foldl(t,(function(t,e){return e(t)}),we(e,n))}},asFixed=function(t,e,n){return t.fold(transform$1([add$4(n),subtract(e)]),transform$1([subtract(e)]),transform$1([]))},asAbsolute=function(t,e,n){return t.fold(transform$1([add$4(n)]),transform$1([]),transform$1([add$4(e)]))},asOffset=function(t,e,n){return t.fold(transform$1([]),transform$1([subtract(n)]),transform$1([add$4(e),subtract(n)]))},toStyles=function(t,e,n){var i=t.fold((function(t,e){return{position:s.some("absolute"),left:s.some(t+"px"),top:s.some(e+"px")}}),(function(t,e){return{position:s.some("absolute"),left:s.some(t-n.left()+"px"),top:s.some(e-n.top()+"px")}}),(function(t,e){return{position:s.some("fixed"),left:s.some(t+"px"),top:s.some(e+"px")}}));return __assign({right:s.none(),bottom:s.none()},i)},absorb=function(t,e,n,i){var absorbOne=function(t,a){return function(u,c){var s=t(e,n,i);return a(u.getOr(s.left()),c.getOr(s.top()))}};return t.fold(absorbOne(asOffset,Wl),absorbOne(asAbsolute,ql),absorbOne(asFixed,$l))},Wl=jl.offset,ql=jl.absolute,$l=jl.fixed,getCoords=function(t,e,n,i){return function(t,e){var n=t.element(),i=parseInt(get$2(n,e.leftAttr),10),a=parseInt(get$2(n,e.topAttr),10);return isNaN(i)||isNaN(a)?s.none():s.some(we(i,a))}(t,e).fold((function(){return n}),(function(t){return $l(t.left()+i.left(),t.top()+i.top())}))},moveOrSnap=function(t,e,n,i,a,u){var c=getCoords(t,e,n,i),l=e.mustSnap?findClosestSnap(t,e,c,a,u):findSnap(t,e,c,a,u),f=asFixed(c,a,u);return function(t,e,n){var i=t.element();set$1(i,e.leftAttr,n.left()+"px"),set$1(i,e.topAttr,n.top()+"px")}(t,e,f),l.fold((function(){return{coord:$l(f.left(),f.top()),extra:s.none()}}),(function(t){return{coord:t.output(),extra:t.extra()}}))},stopDrag=function(t,e){!function(t,e){var n=t.element();remove$1(n,e.leftAttr),remove$1(n,e.topAttr)}(t,e)},findMatchingSnap=function(t,e,n,i){return findMap(t,(function(t){var a=t.sensor();return function(t,e,n,i,a,u){var c=asAbsolute(t,a,u),s=asAbsolute(e,a,u);return Math.abs(c.left()-s.left())<=n&&Math.abs(c.top()-s.top())<=i}(e,a,t.range().left(),t.range().top(),n,i)?s.some({output:constant(absorb(t.output(),e,n,i)),extra:t.extra}):s.none()}))},findClosestSnap=function(t,e,n,i,a){var u=e.getSnapPoints(t);return findMatchingSnap(u,n,i,a).orThunk((function(){return foldl(u,(function(t,e){var u=e.sensor(),c=function(t,e,n,i,a,u){var c=asAbsolute(t,a,u),s=asAbsolute(e,a,u),l=Math.abs(c.left()-s.left()),f=Math.abs(c.top()-s.top());return we(l,f)}(n,u,e.range().left(),e.range().top(),i,a);return t.deltas.fold((function(){return{deltas:s.some(c),snap:s.some(e)}}),(function(n){return(c.left()+c.top())/2<=(n.left()+n.top())/2?{deltas:s.some(c),snap:s.some(e)}:t}))}),{deltas:s.none(),snap:s.none()}).snap.map((function(t){return{output:constant(absorb(t.output(),n,i,a)),extra:t.extra}}))}))},findSnap=function(t,e,n,i,a){var u=e.getSnapPoints(t);return findMatchingSnap(u,n,i,a)},Gl=Object.freeze({__proto__:null,snapTo:function(t,e,n,i){var a=e.getTarget(t.element());if(e.repositionTarget){var u=owner(t.element()),c=Se(u),s=getOrigin(a),l=function(t,e,n){return{coord:absorb(t.output(),t.output(),e,n),extra:t.extra()}}(i,c,s),f=toStyles(l.coord,0,s);setOptions(a,f)}}}),instigate=function(t,e){t.getSystem().addToGui(e),function(t){parent(t.element()).filter(oe).each((function(e){getRaw(e,"z-index").each((function(t){set$1(e,"data-initial-z-index",t)})),set$2(e,"z-index",get$4(t.element(),"z-index"))}))}(e)},discard=function(t){!function(t){parent(t.element()).filter(oe).each((function(t){var e=get$2(t,"data-initial-z-index");has$1(t,"data-initial-z-index")?set$2(t,"z-index",e):remove$6(t,"z-index"),remove$1(t,"data-initial-z-index")}))}(t),t.getSystem().removeFromGui(t)},createComponent=function(t,e,n){return t.getSystem().build(la.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},Xl=optionObjOf("snaps",[strict$1("getSnapPoints"),onHandler("onSensor"),strict$1("leftAttr"),strict$1("topAttr"),defaulted$1("lazyViewport",win),defaulted$1("mustSnap",!1)]),Kl=[defaulted$1("useFixed",n),strict$1("blockerClass"),defaulted$1("getTarget",identity),defaulted$1("onDrag",noop),defaulted$1("repositionTarget",!0),defaulted$1("onDrop",noop),defaultedFunction("getBounds",win),Xl],getCurrentCoord=function(t){return(e=getRaw(t,"left"),n=getRaw(t,"top"),i=getRaw(t,"position"),a=function(t,e,n){return("fixed"===n?$l:Wl)(parseInt(t,10),parseInt(e,10))},e.isSome()&&n.isSome()&&i.isSome()?s.some(a(e.getOrDie(),n.getOrDie(),i.getOrDie())):s.none()).getOrThunk((function(){var e=absolute(t);return ql(e.left(),e.top())}));var e,n,i,a},calcNewCoord=function(t,e,n,i,a,u,c){return function(t,e,n,i,a){var u=a.bounds,c=asAbsolute(e,n,i),s=clamp(c.left(),u.x(),u.x()+u.width()-a.width),l=clamp(c.top(),u.y(),u.y()+u.height()-a.height),f=ql(s,l);return e.fold((function(){var t=asOffset(f,n,i);return Wl(t.left(),t.top())}),(function(){return f}),(function(){var t=asFixed(f,n,i);return $l(t.left(),t.top())}))}(0,e.fold((function(){var t,e,c,s=(t=n,e=u.left(),c=u.top(),t.fold((function(t,n){return Wl(t+e,n+c)}),(function(t,n){return ql(t+e,n+c)}),(function(t,n){return $l(t+e,n+c)}))),l=asFixed(s,i,a);return $l(l.left(),l.top())}),(function(e){var c=moveOrSnap(t,e,n,u,i,a);return c.extra.each((function(n){e.onSensor(t,n)})),c.coord})),i,a,c)},calcStartData=function(t,e){return{bounds:t.getBounds(),height:getOuter$1(e.element()),width:getOuter$2(e.element())}},move$1=function(t,e,n,i,a){var u=n.update(i,a),c=n.getStartData().getOrThunk((function(){return calcStartData(e,t)}));u.each((function(n){!function(t,e,n,i){var a=e.getTarget(t.element());if(e.repositionTarget){var u=owner(t.element()),c=Se(u),s=getOrigin(a),l=getCurrentCoord(a),f=calcNewCoord(t,e.snaps,l,c,s,i,n),d=toStyles(f,0,s);setOptions(a,d)}e.onDrag(t,a,i)}(t,e,c,n)}))},stop=function(t,e,n,i){e.each(discard),n.snaps.each((function(e){stopDrag(t,e)}));var a=n.getTarget(t.element());i.reset(),n.onDrop(t,a)},handlers=function(t){return function(e,n){var updateStartState=function(t){n.setStartData(calcStartData(e,t))};return derive(__spreadArrays([run(Ft(),(function(t){n.getStartData().each((function(){return updateStartState(t)}))}))],t(e,n,updateStartState)))}},Yl=Object.freeze({__proto__:null,getData:function(t){return s.from(we(t.x(),t.y()))},getDelta:function(t,e){return we(e.left()-t.left(),e.top()-t.top())}}),events$g=function(t,e,n){return[run(dt(),(function(i,a){if(0===a.event().raw().button){a.stop();var stop$1=function(){return stop(i,s.some(l),t,e)},u=DelayedFunction(stop$1,200),c={drop:stop$1,delayDrop:u.schedule,forceDrop:stop$1,move:function(n){u.cancel(),move$1(i,t,e,Yl,n)}},l=createComponent(i,t.blockerClass,function(t){return derive([run(dt(),t.forceDrop),run(ht(),t.drop),run(mt(),(function(e,n){t.move(n.event())})),run(gt(),t.delayDrop)])}(c));n(i),instigate(i,l)}}))]},Jl=__spreadArrays(Kl,[output("dragger",{handlers:handlers(events$g)})]),Zl=Object.freeze({__proto__:null,getData:function(t){var e=t.raw().touches;return 1===e.length?function(t){var e=t[0];return s.some(we(e.clientX,e.clientY))}(e):s.none()},getDelta:function(t,e){return we(e.left()-t.left(),e.top()-t.top())}}),events$h=function(t,e,n){var i=Cell(s.none());return[run(ct(),(function(a,u){u.stop();var stop$1=function(){stop(a,i.get(),t,e),i.set(s.none())},c={drop:stop$1,delayDrop:function(){},forceDrop:stop$1,move:function(n){move$1(a,t,e,Zl,n)}},l=createComponent(a,t.blockerClass,function(t){return derive([run(ct(),t.forceDrop),run(lt(),t.drop),run(ft(),t.drop),run(st(),(function(e,n){t.move(n.event())}))])}(c));i.set(s.some(l));n(a),instigate(a,l)})),run(st(),(function(n,i){i.stop(),move$1(n,t,e,Zl,i.event())})),run(lt(),(function(n,a){a.stop(),stop(n,i.get(),t,e),i.set(s.none())})),run(ft(),(function(n){stop(n,i.get(),t,e),i.set(s.none())}))]},Ql=Jl,tf=__spreadArrays(Kl,[output("dragger",{handlers:handlers(events$h)})]),ef=__spreadArrays(Kl,[output("dragger",{handlers:handlers((function(t,e,n){return __spreadArrays(events$g(t,e,n),events$h(t,e,n))}))})]),nf=Object.freeze({__proto__:null,mouse:Ql,touch:tf,mouseOrTouch:ef}),rf=Object.freeze({__proto__:null,init:function(){var t=s.none(),e=s.none(),n=constant({});return nu$5({readState:n,reset:function(){t=s.none(),e=s.none()},update:function(e,n){return e.getData(n).bind((function(n){return function(e,n){var i=t.map((function(t){return e.getDelta(t,n)}));return t=s.some(n),i}(e,n)}))},getStartData:function(){return e},setStartData:function(t){e=s.some(t)}})}}),of=createModes$1({branchKey:"mode",branches:nf,name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:MixedBag(["sensor","range","output"],["extra"])},state:rf,apis:Gl}),af=detect$3(),calcSnap=function(t,e,n,i,a,u){return t.fold((function(){return of.snap({sensor:ql(n-20,i-20),range:we(a,u),output:ql(s.some(n),s.some(i)),extra:{td:e}})}),(function(t){var a=n-20,u=i-20,c=t.element().dom().getBoundingClientRect();return of.snap({sensor:ql(a,u),range:we(40,40),output:ql(s.some(n-c.width/2),s.some(i-c.height/2)),extra:{td:e}})}))},getSnapsConfig=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,i){var a=i.td;(function(t,e){return t.exists((function(t){return eq(t,e)}))})(e.get(),a)||(e.set(s.some(a)),n(a))},mustSnap:!0}},createSelector=function(t){return record(ei.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:derive$1([of.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Ga.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},TableSelectorHandles_setup=function(t,e){var n=Cell([]),i=Cell([]),a=Cell(!1),u=Cell(s.none()),c=Cell(s.none()),getTopLeftSnap=function(t){var n=absolute$1(t);return calcSnap(d.getOpt(e),t,n.x(),n.y(),n.width(),n.height())},getBottomRightSnap=function(t){var n=absolute$1(t);return calcSnap(m.getOpt(e),t,n.right(),n.bottom(),n.width(),n.height())},l=getSnapsConfig((function(){return map(n.get(),(function(t){return getTopLeftSnap(t)}))}),u,(function(e){c.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),f=getSnapsConfig((function(){return map(i.get(),(function(t){return getBottomRightSnap(t)}))}),c,(function(e){u.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),d=createSelector(l),m=createSelector(f),g=build$1(d.asSpec()),h=build$1(m.asSpec()),snapTo=function(e,n,i,a){var u=i(n);of.snapTo(e,u);!function(e,n,i,a){var u=n.dom().getBoundingClientRect();remove$6(e.element(),"display");var c=defaultView($.fromDom(t.getBody())).dom().innerHeight,s=i(u),l=a(u,c);(s||l)&&set$2(e.element(),"display","none")}(e,n,(function(t){return t[a]<0}),(function(t,e){return t[a]>e}))},snapTopLeft=function(t){return snapTo(g,t,getTopLeftSnap,"top")},snapBottomRight=function(t){return snapTo(h,t,getBottomRightSnap,"bottom")};af.deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){a.get()||(attach$1(e,g),attach$1(e,h),a.set(!0)),u.set(s.some(t.start)),c.set(s.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),i.set(e.downOrRightCells),snapTopLeft(t.start),snapBottomRight(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){u.get().each(snapTopLeft),c.get().each(snapBottomRight)})),t.on("TableSelectionClear",(function(){a.get()&&(detach(g),detach(h),a.set(!1)),u.set(s.none()),c.set(s.none())})))};!function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"}(Vs||(Vs={}));var resize$3=function(t,e,n){var i=$.fromDom(t.getContainer()),a=function(t,e,n,i,a){var u={};return u.height=Utils_calcCappedSize(i+e.top(),getMinHeightSetting(t),getMaxHeightSetting(t)),n===Vs.Both&&(u.width=Utils_calcCappedSize(a+e.left(),getMinWidthSetting(t),getMaxWidthSetting(t))),u}(t,e,n,get$6(i),get$7(i));each$1(a,(function(t,e){return set$2(i,e,Utils_numToPx(t))})),Events_fireResizeEditor(t)},isHidden$1=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},ElementPath_renderElementPath=function(t,e){e.delimiter||(e.delimiter="»");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:derive$1([To.config({mode:"flow",selector:"div[role=button]"}),Ia.config({}),Oo.config({}),config("elementPathEvents",[Zt((function(n,i){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return To.focusIn(n)})),t.on("NodeChange",(function(i){var a,u,c=function(e){for(var n=[],i=e.length;i-- >0;){var a=e[i];if(1===a.nodeType&&!isHidden$1(a)){var u=t.fire("ResolveName",{name:a.nodeName.toLowerCase(),target:a});if(u.isDefaultPrevented()||n.push({name:u.name,element:a}),u.isPropagationStopped())break}}return n}(i.parents);c.length>0?Oo.set(n,(a=map(c||[],(function(e,n){return ei.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":n,"tab-index":-1,"aria-level":n+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()}})})),u={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},foldl(a.slice(1),(function(t,e){var n=t;return n.push(u),n.push(e),n}),[a[0]]))):Oo.set(n,[])}))}))])]),components:[]}},renderStatusbar=function(t,e){var getTextComponents=function(){var n,i=[];return t.getParam("elementpath",!0,"boolean")&&i.push(ElementPath_renderElementPath(t,{})),contains$1(t.settings.plugins,"wordcount")&&i.push(function(t,e){var replaceCountText=function(t,n,i){return Oo.set(t,[text(e.translate(["{0} "+i,n[i]]))])};return ei.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:derive$1([Ia.config({}),Oo.config({}),Jn.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),config("wordcount-events",[ee((function(t){var e=Jn.getValue(t),n="words"===e.mode?"characters":"words";Jn.setValue(t,{mode:n,count:e.count}),replaceCountText(t,e.count,n)})),Zt((function(e){t.on("wordCountUpdate",(function(t){var n=Jn.getValue(e).mode;Jn.setValue(e,{mode:n,count:t.wordCount}),replaceCountText(e,t.wordCount,n)}))}))])])})}(t,e)),t.getParam("branding",!0,"boolean")&&i.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(n=Si.translate(["Powered by {0}","Tiny"]))+'">'+n+"</a>"}}),i.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:i}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function(){var n=getTextComponents(),i=function(t){var e=!contains$1(t.settings.plugins,"autoresize"),n=t.getParam("resize",e);return!1===n?Vs.None:"both"===n?Vs.Both:Vs.Vertical}(t);return i!==Vs.None&&n.push(function(n){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize"),"aria-hidden":"true"},innerHtml:get$d("resize-handle",e.icons)},behaviours:derive$1([of.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,i,a){resize$3(t,a,n)},blockerClass:"tox-blocker"})])}}(i)),n}()}},Render_setup=function(t){var e,n=t.inline,i=n?Ll:Hl,a=isStickyToolbar(t)?dl:pl,u=s.none(),c=detect$3(),f=c.browser.isIE()?["tox-platform-ie"]:[],d=c.deviceType.isTouch()?["tox-platform-touch"]:[],m=isToolbarLocationTop(t),g=Si.isRtl()?{attributes:{dir:"rtl"}}:{},h={attributes:(e={},e[dn]=m?_e.TopToBottom:_e.BottomToTop,e)},lazyHeader=function(){return u.bind(zl.getHeader)},p=build$1({dom:__assign({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(d)},g),behaviours:derive$1([Bn.config({useFixed:function(){return a.isDocked(lazyHeader)}})])}),lazySink=function(){return l.value(p)},v=record({dom:{tag:"div",classes:["tox-anchorbar"]}}),lazyThrobber=function(){return u.bind((function(t){return zl.getThrobber(t)})).getOrDie("Could not find throbber element")},b=init$8(p,t,(function(){return u.bind((function(t){return v.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),y=zl.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:b,onEscape:function(){t.focus()}}),x=getToolbarMode(t),C=zl.parts().toolbar(__assign({dom:{tag:"div",classes:["tox-toolbar"]},getSink:lazySink,backstage:b,onEscape:function(){t.focus()},type:x,lazyToolbar:function(){return u.bind((function(t){return zl.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return lazyHeader().getOrDie("Could not find header element")}},h)),S=zl.parts()["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},onEscape:function(){},type:x}),k=zl.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),E=zl.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),T=zl.parts().throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:b}),O=t.getParam("statusbar",!0,"boolean")&&!n?s.some(renderStatusbar(t,b.shared.providers)):s.none(),_={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[k,E]},N=isMultipleToolbars(t),A=isToolbarEnabled(t),z=isMenubarEnabled(t),D=zl.parts().header({dom:__assign({tag:"div",classes:["tox-editor-header"]},h),components:flatten([z?[y]:[],N?[S]:A?[C]:[],useFixedContainer(t)?[]:[v.asSpec()]]),sticky:isStickyToolbar(t),editor:t,getSink:lazySink}),M=flatten([m?[D]:[],n?[]:[_],m?[]:[D]]),B=flatten([[{dom:{tag:"div",classes:["tox-editor-container"]},components:M}],n?[]:O.toArray(),[T]]),R=isDistractionFree(t),P=__assign(__assign({role:"application"},Si.isRtl()?{dir:"rtl"}:{}),R?{"aria-hidden":"true"}:{}),I=build$1(zl.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(m?[]:["tox-tinymce--toolbar-bottom"]).concat(d).concat(f),styles:__assign({visibility:"hidden"},R?{opacity:"0",border:"0"}:{}),attributes:P},components:B,behaviours:derive$1([To.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));u=s.some(I),t.shortcuts.add("alt+F9","focus menubar",(function(){zl.focusMenubar(I)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){zl.focusToolbar(I)}));var H=takeover(I),L=takeover(p);Events$1_setup(t,H,L);var setEditorSize=function(){var e=Utils_numToPx(getHeightWithFallback(t)),n=Utils_numToPx(function(t){return getWidth$1(t).getOr(getWidthSetting(t))}(t));return t.inline||(isValidValue("div","width",n)&&set$2(I.element(),"width",n),isValidValue("div","height",e)?set$2(I.element(),"height",e):set$2(I.element(),"height","200px")),e};return{mothership:H,uiMothership:L,backstage:b,renderUI:function(){a.setup(t,lazyHeader),FormatControls_setup(t,b),setup$9(t,lazySink,b),function(t){var e=t.ui.registry.getAll().sidebars;each(w(e),(function(n){var i=e[n],isActive=function(){return s.from(t.queryCommandValue("ToggleSidebar")).is(n)};t.ui.registry.addToggleButton(n,{icon:i.icon,tooltip:i.tooltip,onAction:function(e){t.execCommand("ToggleSidebar",!1,n),e.setActive(isActive())},onSetup:function(e){var handleToggle=function(){return e.setActive(isActive())};return t.on("ToggleSidebar",handleToggle),function(){t.off("ToggleSidebar",handleToggle)}}})}))}(t),setup$7(t,lazyThrobber,b.shared),map$1(function(t){return t.getParam("toolbar_groups",{},"object")}(t),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var e=t.ui.registry.getAll(),n=e.buttons,u=e.menuItems,c=e.contextToolbars,l=e.sidebars,f=getMultipleToolbarsSetting(t),d={menuItems:u,menus:t.settings.menu?map$1(t.settings.menu,(function(t){return __assign(__assign({},t),{items:t.items})})):{},menubar:t.settings.menubar,toolbar:f.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:x===Br.floating,buttons:n,sidebar:l};ContextToolbar_register(t,c,p,{backstage:b}),TableSelectorHandles_setup(t,p);var m=t.getElement(),g=setEditorSize(),h={mothership:H,uiMothership:L,outerContainer:I},v={targetNode:m,height:g};return i.render(t,h,d,b,v)},getUi:function(){return{channels:{broadcastAll:L.broadcast,broadcastOn:L.broadcastOn,register:function(){}}}}}},AriaLabel_labelledBy=function(t,e){var n=s.from(get$2(t,"id")).fold((function(){var t=generate$1("dialog-label");return set$1(e,"id",t),t}),identity);set$1(t,"aria-labelledby",n)},uf=constant([strict$1("lazySink"),option("dragBlockClass"),defaultedFunction("getBounds",win),defaulted$1("useTabstopAt",constant(!0)),defaulted$1("eventOrder",{}),field$1("modalBehaviours",[To]),onKeyboardHandler("onExecute"),onStrictKeyboardHandler("onEscape")]),cf={sketch:identity},sf=constant([br({name:"draghandle",overrides:function(t,e){return{behaviours:derive$1([of.config({mode:"mouse",getTarget:function(t){return ancestor$2(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),pr({schema:[strict$1("dom")],name:"title"}),pr({factory:cf,schema:[strict$1("dom")],name:"close"}),pr({factory:cf,schema:[strict$1("dom")],name:"body"}),br({factory:cf,schema:[strict$1("dom")],name:"footer"}),vr({factory:{sketch:function(t,e){return __assign(__assign({},t),{dom:e.dom,components:e.components})}},schema:[defaulted$1("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),defaulted$1("components",[])],name:"blocker"})]),lf=composite$1({name:"ModalDialog",configFields:uf(),partFields:sf(),factory:function(t,e,n,i){var a=generate$1("alloy.dialog.busy"),u=generate$1("alloy.dialog.idle"),c=derive$1([To.config({mode:"special",onTab:function(){return s.some(!0)},onShiftTab:function(){return s.some(!0)}}),zo.config({})]),l=generate$1("modal-events"),f=__assign(__assign({},t.eventOrder),{"alloy.system.attached":[l].concat(t.eventOrder["alloy.system.attached"]||[])});return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){var n=t.lazySink(e).getOrDie(),l=Cell(s.none()),f=i.blocker(),d=n.getSystem().build(__assign(__assign({},f),{components:f.components.concat([ye(e)]),behaviours:derive$1([zo.config({}),config("dialog-blocker-events",[runOnSource(vt(),(function(){To.focusIn(e)})),run(u,(function(t,n){has$1(e.element(),"aria-busy")&&(remove$1(e.element(),"aria-busy"),l.get().each((function(t){return Oo.remove(e,t)})))})),run(a,(function(t,n){set$1(e.element(),"aria-busy","true");var i=n.event().getBusySpec();l.get().each((function(t){Oo.remove(e,t)}));var a=i(e,c),u=t.getSystem().build(a);l.set(s.some(u)),Oo.append(e,ye(u)),u.hasConfigured(To)&&To.focusIn(u)}))])])}));attach$1(n,d),To.focusIn(e)},hide:function(t){parent(t.element()).each((function(e){t.getSystem().getByDom(e).each((function(t){detach(t)}))}))},getBody:function(e){return getPartOrDie(e,t,"body")},getFooter:function(e){return getPartOrDie(e,t,"footer")},setIdle:function(t){emit(t,u)},setBusy:function(t,e){emitWith(t,a,{getBusySpec:e})}},eventOrder:f,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:augment(t.modalBehaviours,[Oo.config({}),To.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),config(l,[Zt((function(e){var n,i,a;AriaLabel_labelledBy(e.element(),getPartOrDie(e,t,"title").element()),n=e.element(),i=getPartOrDie(e,t,"body").element(),a=s.from(get$2(n,"id")).fold((function(){var t=generate$1("dialog-describe");return set$1(i,"id",t),t}),identity),set$1(n,"aria-describedby",a)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),ff=[strictString("type"),strictString("text"),strictStringEnum("level",["info","warn","error","success"]),strictString("icon"),defaulted$1("url","")],df=objOf(ff),mf=[strictString("type"),strictString("text"),defaultedBoolean("disabled",!1),defaultedBoolean("primary",!1),H("name","name",z((function(){return generate$1("button-name")})),U),optionString("icon"),defaultedBoolean("borderless",!1)],gf=objOf(mf),hf=[strictString("type"),strictString("name"),strictString("label"),defaultedBoolean("disabled",!1)],pf=objOf(hf),vf=j,bf=[strictString("type"),strictString("name")],yf=bf.concat([optionString("label")]),xf=objOf(yf),wf=U,Cf=objOf(yf),Sf=U,kf=objOf(yf),Ef=arrOf(L),createGridFields=function(t){return[strictString("type"),strictNumber("columns"),t]},Tf=yf.concat([defaultedBoolean("sandboxed",!0)]),Of=objOf(Tf),_f=U,Nf=yf.concat([optionString("inputMode"),optionString("placeholder"),defaultedBoolean("maximized",!1),defaultedBoolean("disabled",!1)]),Af=objOf(Nf),zf=U,Df=yf.concat([strictArrayOfObj("items",[strictString("text"),strictString("value")]),defaultedNumber("size",1),defaultedBoolean("disabled",!1)]),Mf=objOf(Df),Bf=U,Rf=yf.concat([defaultedBoolean("constrain",!0),defaultedBoolean("disabled",!1)]),Pf=objOf(Rf),If=objOf([strictString("width"),strictString("height")]),Hf=yf.concat([optionString("placeholder"),defaultedBoolean("maximized",!1),defaultedBoolean("disabled",!1)]),Lf=objOf(Hf),Ff=U,Vf=yf.concat([defaultedStringEnum("filetype","file",["image","media","file"]),defaulted$1("disabled",!1)]),Uf=objOf(Vf),jf=objOf([strictString("value"),defaulted$1("meta",{})]),Wf=bf.concat([defaultedString("tag","textarea"),strictString("scriptId"),strictString("scriptUrl"),function(t,e){return defaultedOf(t,e,q)}("settings",void 0)]),qf=bf.concat([defaultedString("tag","textarea"),strictFunction("init")]),$f=valueOf((function(t){return asRaw("customeditor.old",objOfOnly(qf),t).orThunk((function(){return asRaw("customeditor.new",objOfOnly(Wf),t)}))})),Gf=U,Xf=[strictString("type"),strictString("html"),defaultedStringEnum("presets","presentation",["presentation","document"])],Kf=objOf(Xf),Yf=yf.concat([strictOf("currentState",objOf([strict$1("blob"),strictString("url")]))]),Jf=objOf(Yf),Zf=yf.concat([defaulted$1("columns","auto")]),Qf=objOf(Zf),td=arrOfObj$1([strictString("value"),strictString("text"),strictString("icon")]),createLabelFields=function(t){return[strictString("type"),strictString("label"),t]},ed=[strictString("type"),strictArrayOf("header",U),strictArrayOf("cells",arrOf(U))],nd=objOf(ed),createItemsField=function(t){return H("items","items",N(),arrOf(valueOf((function(e){return asRaw("Checking item of "+t,rd,e).fold((function(t){return l.error(formatError(t))}),(function(t){return l.value(t)}))}))))},rd=valueThunkOf((function(){return chooseProcessor("type",{alertbanner:df,bar:objOf((t=createItemsField("bar"),[strictString("type"),t])),button:gf,checkbox:pf,colorinput:xf,colorpicker:Cf,dropzone:kf,grid:objOf(createGridFields(createItemsField("grid"))),iframe:Of,input:Af,selectbox:Mf,sizeinput:Pf,textarea:Lf,urlinput:Uf,customeditor:$f,htmlpanel:Kf,imagetools:Jf,collection:Qf,label:objOf(createLabelFields(createItemsField("label"))),table:nd,panel:ad});var t})),od=[strictString("type"),defaulted$1("classes",[]),strictArrayOf("items",rd)],ad=objOf(od),ud=[H("name","name",z((function(){return generate$1("tab-name")})),U),strictString("title"),strictArrayOf("items",rd)],cd=[strictString("type"),strictArrayOfObj("tabs",ud)],sd=objOf(cd),ld=objOf([strictString("type"),strictString("name")].concat(li)),fd=j,dd=[H("name","name",z((function(){return generate$1("button-name")})),U),optionString("icon"),defaultedStringEnum("align","end",["start","end"]),defaultedBoolean("primary",!1),defaultedBoolean("disabled",!1)],md=__spreadArrays(dd,[strictString("text")]),gd=__spreadArrays([strictStringEnum("type",["submit","cancel","custom"])],md),hd=__spreadArrays([strictStringEnum("type",["menu"]),optionString("text"),optionString("tooltip"),optionString("icon"),strictArrayOf("items",ld)],dd),pd=md,vd=choose$1("type",{submit:gd,cancel:gd,custom:gd,menu:hd}),bd=objOf([strictString("title"),strictOf("body",chooseProcessor("type",{panel:ad,tabpanel:sd})),defaultedString("size","normal"),strictArrayOf("buttons",vd),defaulted$1("initialData",{}),defaultedFunction("onAction",noop),defaultedFunction("onChange",noop),defaultedFunction("onSubmit",noop),defaultedFunction("onClose",noop),defaultedFunction("onCancel",noop),defaulted$1("onTabChange",noop)]),getAllObjects=function(t){return d(t)?[t].concat(bind(values(t),getAllObjects)):m(t)?bind(t,getAllObjects):[]},isNamedItem=function(t){return f(t.type)&&f(t.name)},yd={checkbox:vf,colorinput:wf,colorpicker:Sf,dropzone:Ef,input:zf,iframe:_f,sizeinput:If,selectbox:Bf,size:If,textarea:Ff,urlinput:jf,customeditor:Gf,collection:td,togglemenuitem:fd},createDataValidator=function(t){var e=function(t){return filter(getAllObjects(t),isNamedItem)}(t),n=bind(e,(function(t){return function(t){return s.from(yd[t.type])}(t).fold((function(){return[]}),(function(e){return[strictOf(t.name,e)]}))}));return objOf(n)},xd=objOf(__spreadArrays([strictStringEnum("type",["cancel","custom"])],pd)),wd=objOf([strictString("title"),strictString("url"),optionNumber("height"),optionNumber("width"),function(t,e){return optionOf(t,arrOf(e))}("buttons",xd),defaultedFunction("onAction",noop),defaultedFunction("onCancel",noop),defaultedFunction("onClose",noop),defaultedFunction("onMessage",noop)]),extract$1=function(t){return{internalDialog:getOrDie(asRaw("dialog",bd,t)),dataValidator:createDataValidator(t),initialData:t.initialData}},Cd={open:function(t,e){var n=extract$1(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(getOrDie(asRaw("dialog",wd,e)))},redial:function(t){return extract$1(t)}},toValidValues=function(t){var e=[],n={};return each$1(t,(function(t,i){t.fold((function(){e.push(i)}),(function(t){n[i]=t}))})),e.length>0?l.error(e):l.value(n)},renderBodyPanel=function(t,n){var i=record(zu.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:map(t.items,(function(t){return interpretInForm(e,t,n)}))}})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:derive$1([To.config({mode:"acyclic",useTabstopAt:not(NavigableObject_isPseudoStop)}),ComposingConfigs_memento(i),RepresentingConfigs_memento(i,{postprocess:function(t){return toValidValues(t).fold((function(t){return e.console.error(t),{}}),(function(t){return t}))}})])}},Sd=single$2({name:"TabButton",configFields:[defaulted$1("uid",void 0),strict$1("value"),H("dom","dom",D((function(){return{attributes:{role:"tab",id:generate$1("aria"),"aria-selected":"false"}}})),F()),option("action"),defaulted$1("domModification",{}),field$1("tabButtonBehaviours",[zo,To,Jn]),strict$1("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:events$7(t.action),behaviours:augment(t.tabButtonBehaviours,[zo.config({}),To.config({mode:"execution",useSpace:!0,useEnter:!0}),Jn.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),kd=constant([strict$1("tabs"),strict$1("dom"),defaulted$1("clickToDismiss",!1),field$1("tabbarBehaviours",[zr,To]),markers(["tabClass","selectedClass"])]),Ed=yr({factory:Sd,name:"tabs",unit:"tab",overrides:function(t){var dismissTab$1=function(t,e){zr.dehighlight(t,e),emitWith(t,Kt(),{tabbar:t,button:e})},changeTab$1=function(t,e){zr.highlight(t,e),emitWith(t,Xt(),{tabbar:t,button:e})};return{action:function(e){var n=e.getSystem().getByUid(t.uid).getOrDie(),i=zr.isHighlighted(n,e);(i&&t.clickToDismiss?dismissTab$1:i?noop:changeTab$1)(n,e)},domModification:{classes:[t.markers.tabClass]}}}}),Td=constant([Ed]),Od=composite$1({name:"Tabbar",configFields:kd(),partFields:Td(),factory:function(t,e,n,i){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:augment(t.tabbarBehaviours,[zr.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){set$1(e.element(),"aria-selected","true")},onDehighlight:function(t,e){set$1(e.element(),"aria-selected","false")}}),To.config({mode:"flow",getInitial:function(t){return zr.getHighlighted(t).map((function(t){return t.element()}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),_d=single$2({name:"Tabview",configFields:[field$1("tabviewBehaviours",[Oo])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:augment(t.tabviewBehaviours,[Oo.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),Nd=constant([defaulted$1("selectFirst",!0),onHandler("onChangeTab"),onHandler("onDismissTab"),defaulted$1("tabs",[]),field$1("tabSectionBehaviours",[])]),Ad=pr({factory:Od,schema:[strict$1("dom"),strictObjOf("markers",[strict$1("tabClass"),strict$1("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),zd=pr({factory:_d,name:"tabview"}),Dd=constant([Ad,zd]),Md=composite$1({name:"TabSection",configFields:Nd(),partFields:Dd(),factory:function(t,e,n,i){var changeTab$1=function(e){var n=Jn.getValue(e);getPart(e,t,"tabview").each((function(i){find(t.tabs,(function(t){return t.value===n})).each((function(n){var a=n.view();(function(t,e){return s.from(get$2(t,e))})(e.element(),"id").each((function(t){set$1(i.element(),"aria-labelledby",t)})),Oo.set(i,a),t.onChangeTab(i,e,a)}))}))},changeTabBy=function(e,n){getPart(e,t,"tabbar").each((function(t){n(t).each(emitExecute)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:get$c(t.tabSectionBehaviours),events:derive(flatten([t.selectFirst?[Zt((function(t,e){changeTabBy(t,zr.getFirst)}))]:[],[run(Xt(),(function(t,e){var n=e.event().button();changeTab$1(n)})),run(Kt(),(function(e,n){var i=n.event().button();t.onDismissTab(e,i)}))]])),apis:{getViewItems:function(e){return getPart(e,t,"tabview").map((function(t){return Oo.contents(t)})).getOr([])},showTab:function(t,e){changeTabBy(t,(function(t){var n=zr.getCandidates(t);return find(n,(function(t){return Jn.getValue(t)===e})).filter((function(e){return!zr.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),setTabviewHeight=function(t,e){set$2(t,"height",e+"px"),detect$3().browser.isIE()?remove$6(t,"flex-basis"):set$2(t,"flex-basis",e+"px")},updateTabviewHeight=function(t,n,i){ancestor$2(t,'[role="dialog"]').each((function(t){descendant$1(t,'[role="tablist"]').each((function(a){i.get().map((function(i){return set$2(n,"height","0"),set$2(n,"flex-basis","0"),Math.min(i,function(t,n,i){var a,u=documentElement(t).dom(),c=ancestor$2(t,".tox-dialog-wrap").getOr(t);a="fixed"===get$4(c,"position")?Math.max(u.clientHeight,e.window.innerHeight):Math.max(u.offsetHeight,u.scrollHeight);var s=get$6(n),l=n.dom().offsetLeft>=i.dom().offsetLeft+get$7(i)?Math.max(get$6(i),s):s,f=parseInt(get$4(t,"margin-top"),10)||0,d=parseInt(get$4(t,"margin-bottom"),10)||0;return a-(get$6(t)+f+d-l)}(t,n,a))})).each((function(t){setTabviewHeight(n,t)}))}))}))},getTabview=function(t){return descendant$1(t,'[role="tabpanel"]')},setMode=function(t){var e;return{smartTabHeight:(e=Cell(s.none()),{extraEvents:[Zt((function(n){var i=n.element();getTabview(i).each((function(a){set$2(a,"visibility","hidden"),n.getSystem().getByDom(a).toOption().each((function(n){var i=function(t){return head(sort(t,(function(t,e){return t>e?-1:t<e?1:0})))}(function(t,e,n){return map(t,(function(i,a){Oo.set(n,t[a].view());var u=e.dom().getBoundingClientRect();return Oo.set(n,[]),u.height}))}(t,a,n));e.set(i)})),updateTabviewHeight(i,a,e),remove$6(a,"visibility"),function(t,e){head(t).each((function(t){return Md.showTab(e,t.value)}))}(t,n),Jo.requestAnimationFrame((function(){updateTabviewHeight(i,a,e)}))}))})),run(Vt(),(function(t){var n=t.element();getTabview(n).each((function(t){updateTabviewHeight(n,t,e)}))})),run(ya,(function(t,n){var i=t.element();getTabview(i).each((function(t){var n=active();set$2(t,"visibility","hidden");var a=getRaw(t,"height").map((function(t){return parseInt(t,10)}));remove$6(t,"height"),remove$6(t,"flex-basis");var u=t.dom().getBoundingClientRect().height;a.forall((function(t){return u>t}))?(e.set(s.from(u)),updateTabviewHeight(i,t,e)):a.each((function(e){setTabviewHeight(t,e)})),remove$6(t,"visibility"),n.each(focus$1)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},renderTabPanel=function(t,e){var n=Cell({}),updateDataWithForm=function(t){var e=Jn.getValue(t),i=toValidValues(e).getOr({}),a=n.get(),u=k(a,i);n.set(u)},setDataOnForm=function(t){var e=n.get();Jn.setValue(t,e)},i=Cell(null),a=map(t.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[zu.sketch((function(n){return{dom:{tag:"div",classes:["tox-form"]},components:map(t.items,(function(t){return interpretInForm(n,t,e)})),formBehaviours:derive$1([To.config({mode:"acyclic",useTabstopAt:not(NavigableObject_isPseudoStop)}),config("TabView.form.events",[Zt(setDataOnForm),Qt(updateDataWithForm)]),Ze.config({channels:wrapAll$1([{key:"send-data-to-section",value:{onReceive:updateDataWithForm}},{key:"send-data-to-view",value:{onReceive:setDataOnForm}}])})])}}))]}}})),u=setMode(a).smartTabHeight;return Md.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var a=Jn.getValue(e);emitWith(t,ba,{name:a,oldName:i.get()}),i.set(a)},tabs:a,components:[Md.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Od.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:derive$1([Ia.config({})])}),Md.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:u.selectFirst,tabSectionBehaviours:derive$1([config("tabpanel",u.extraEvents),To.config({mode:"acyclic"}),_r.config({find:function(t){return head(Md.getViewItems(t))}}),Jn.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn(["send-data-to-section"],{}),n.get()},setValue:function(t,e){n.set(e),t.getSystem().broadcastOn(["send-data-to-view"],{})}}})])})},Bd=generate$1("update-dialog"),Rd=generate$1("update-title"),Pd=generate$1("update-body"),Id=generate$1("update-footer"),Hd=generate$1("body-send-message"),renderBody=function(t,e,n,i){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:__assign(__assign({},e.map((function(t){return{id:t}})).getOr({})),i?{"aria-live":"polite"}:{})},components:[],behaviours:derive$1([ComposingConfigs_childAt(0),Ns.config({channel:Pd,updateState:function(t,e){return s.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[renderTabPanel(t.body,n)];default:return[renderBodyPanel(t.body,n)]}},initialData:t})])}},initCommonEvents=function(t,e){return[runWithTarget(vt(),NavigableObject_onFocus),t(da,(function(t,n){e.onClose(),n.onClose()})),t(ma,(function(t,e,n,i){e.onCancel(t),emit(i,da)})),run(va,(function(t,n){return e.onUnblock()})),run(pa,(function(t,n){return e.onBlock(n.event())}))]},SilverDialogEvents_initUrlDialog=function(t,e){var fireApiEvent=function(e,n){return run(e,(function(e,i){withSpec(e,(function(a,u){n(t(),a,i.event(),e)}))}))},withSpec=function(t,e){Ns.getState(t).get().each((function(n){e(n,t)}))};return __spreadArrays(initCommonEvents(fireApiEvent,e),[fireApiEvent(ga,(function(t,e,n){e.onAction(t,{name:n.name()})}))])},SilverDialogEvents_initDialog=function(t,e){var fireApiEvent=function(e,n){return run(e,(function(e,i){withSpec(e,(function(a,u){n(t(),a,i.event(),e)}))}))},withSpec=function(t,e){Ns.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return __spreadArrays(initCommonEvents(fireApiEvent,e),[fireApiEvent(ha,(function(t,e){return e.onSubmit(t)})),fireApiEvent(fa,(function(t,e,n){e.onChange(t,{name:n.name()})})),fireApiEvent(ga,(function(t,e,n,i){var focusIn=function(){return To.focusIn(i)},a=active();e.onAction(t,{name:n.name(),value:n.value()}),active().fold((function(){focusIn()}),(function(t){(!ut(i.element(),t)||has$1(t,"disabled")||ut(t,a.getOrNull())&&has$1(a.getOrDie(),"disabled"))&&focusIn()}))})),fireApiEvent(ba,(function(t,e,n){e.onTabChange(t,{newTabName:n.name(),oldTabName:n.oldName()})})),Qt((function(e){var n=t();Jn.setValue(e,n.getData())}))])},renderComponents=function(t,e){var n=function(t,e){for(var n=[],i=[],a=0,u=t.length;a<u;a++){var c=t[a];(e(c,a)?n:i).push(c)}return{pass:n,fail:i}}(e.map((function(t){return t.footerButtons})).getOr([]),(function(t){return"start"===t.align})),makeGroup=function(t,e){return la.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:map(e,(function(t){return t.memento.asSpec()}))})};return[makeGroup("start",n.pass),makeGroup("end",n.fail)]},renderFooter=function(t,e){return{dom:fromHtml$2('<div class="tox-dialog__footer"></div>'),components:[],behaviours:derive$1([Ns.config({channel:Id,initialData:t,updateState:function(t,n){var i=map(n.buttons,(function(t){var n=record(function(t,e){return renderFooterButton(t,t.type,e)}(t,e));return{name:t.name,align:t.align,memento:n}}));return s.some({lookupByName:function(t,e){return function(t,e,n){return find(e,(function(t){return t.name===n})).bind((function(e){return e.memento.getOpt(t)}))}(t,i,e)},footerButtons:i})},renderComponents:renderComponents})])}},renderModalFooter=function(t,e){return lf.parts().footer(renderFooter(t,e))},getCompByName=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=_r.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return zu.getField(n,e).fold((function(){var i=t.getFooter();return Ns.getState(i).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return s.some(t)}))}return s.none()},getDialogApi=function(t,e,n){var withRoot=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},i={getData:function(){var e=t.getRoot(),i=e.getSystem().isConnected()?t.getFormWrapper():e,a=Jn.getValue(i),u=map$1(n,(function(t){return t.get()}));return __assign(__assign({},a),u)},setData:function(e){withRoot((function(a){var u=i.getData(),c=__assign(__assign({},u),e),s=function(t,e){var n=t.getRoot();return Ns.getState(n).get().map((function(t){return getOrDie(asRaw("data",t.dataValidator,e))})).getOr(e)}(t,c),l=t.getFormWrapper();Jn.setValue(l,s),each$1(n,(function(t,e){has(c,e)&&t.set(c[e])}))}))},disable:function(e){getCompByName(t,e).each(Pi.disable)},enable:function(e){getCompByName(t,e).each(Pi.enable)},focus:function(e){getCompByName(t,e).each(zo.focus)},block:function(t){if(!f(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");withRoot((function(e){emitWith(e,pa,{message:t})}))},unblock:function(){withRoot((function(t){emit(t,va)}))},showTab:function(e){withRoot((function(n){var i=t.getBody();Ns.getState(i).get().exists((function(t){return t.isTabPanel()}))&&_r.getCurrent(i).each((function(t){Md.showTab(t,e)}))}))},redial:function(t){withRoot((function(n){var a=e(t);n.getSystem().broadcastOn([Bd],a),n.getSystem().broadcastOn([Rd],a.internalDialog),n.getSystem().broadcastOn([Pd],a.internalDialog),n.getSystem().broadcastOn([Id],a.internalDialog),i.setData(a.initialData)}))},close:function(){withRoot((function(t){emit(t,da)}))}};return i},Ld=Ni.deviceType.isTouch(),hiddenHeader=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},pClose=function(t,e){return lf.parts().close(ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:derive$1([Ia.config({})])}))},pUntitled=function(){return lf.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},pBodyMessage=function(t,e){return lf.parts().body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:fromHtml$2("<p>"+e.translate(t)+"</p>")}]}]})},pFooter=function(t){return lf.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},pFooterGroup=function(t,e){return[la.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),la.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},renderDialog=function(t){var e,n="tox-dialog",i=n+"-wrap",a=i+"__backdrop",u=n+"__disable-scroll";return lf.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),s.some(!0)},useTabstopAt:function(t){return!NavigableObject_isPseudoStop(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:__assign({position:"relative"},t.extraStyles)},components:__spreadArrays([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:fromHtml$2('<div class="'+i+'"></div>'),components:[{dom:{tag:"div",classes:Ld?[a,a+"--opaque"]:[a]}}]}},dragBlockClass:i,modalBehaviours:derive$1(__spreadArrays([zo.config({}),config("dialog-events",t.dialogEvents.concat([runOnSource(vt(),(function(t,e){To.focusIn(t)}))])),config("scroll-lock",[Zt((function(){add$2(ve(),u)})),Qt((function(){remove$4(ve(),u)}))])],t.extraBehaviours)),eventOrder:__assign((e={},e[zt()]=["dialog-events"],e[Ut()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[jt()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},renderClose=function(t){return ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(t){emit(t,ma)}})},renderTitle=function(t,e,n){var renderComponents=function(t){return[text(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:__assign({},e.map((function(t){return{id:t}})).getOr({}))},components:renderComponents(t),behaviours:derive$1([Ns.config({channel:Rd,renderComponents:renderComponents})])}},renderDragHandle=function(){return{dom:fromHtml$2('<div class="tox-dialog__draghandle"></div>')}},getHeader=function(t,e){return function(t,e){var n=lf.parts().title(renderTitle(t,s.none(),e)),i=lf.parts().draghandle(renderDragHandle()),a=lf.parts().close(renderClose(e)),u=[n].concat(t.draggable?[i]:[]).concat([a]);return la.sketch({dom:fromHtml$2('<div class="tox-dialog__header"></div>'),components:u})}({title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},e.shared.providers)},getEventExtras=function(t,e){return{onClose:function(){return e.closeWindow()},onBlock:function(e){lf.setBusy(t(),(function(t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:fromHtml$2('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}))},onUnblock:function(){lf.setIdle(t())}}},renderModalDialog=function(t,e,n,i){var a;return build$1(renderDialog(__assign(__assign({},t),{lazySink:i.shared.getSink,extraBehaviours:__spreadArrays([Ns.config({channel:Bd,updateState:function(t,e){return s.some(e)},initialData:e}),RepresentingConfigs_memory({})],t.extraBehaviours),onEscape:function(t){emit(t,ma)},dialogEvents:n,eventOrder:(a={},a[At()]=["reflecting","receiving"],a[Ut()]=["scroll-lock","reflecting","messages","dialog-events","alloy.base.behaviour"],a[jt()]=["alloy.base.behaviour","dialog-events","messages","reflecting","scroll-lock"],a)})))},mapMenuButtons=function(t){return map(t,(function(t){return"menu"===t.type?function(t){var e=map(t.items,(function(t){var e=Cell(!1);return __assign(__assign({},t),{storage:e})}));return __assign(__assign({},t),{items:e})}(t):t}))},extractCellsToObject=function(t){return foldl(t,(function(t,e){return"menu"===e.type?foldl(e.items,(function(t,e){return t[e.name]=e.storage,t}),t):t}),{})},renderDialog$1=function(t,e,n){var i=getHeader(t.internalDialog.title,n),a=function(t,e){var n=renderBody(t,s.none(),e,!1);return lf.parts().body(n)}({body:t.internalDialog.body},n),u=mapMenuButtons(t.internalDialog.buttons),c=extractCellsToObject(u),l=renderModalFooter({buttons:u},n),f=SilverDialogEvents_initDialog((function(){return h}),getEventExtras((function(){return g}),e)),d="normal"!==t.internalDialog.size?"large"===t.internalDialog.size?["tox-dialog--width-lg"]:["tox-dialog--width-md"]:[],m={header:i,body:a,footer:s.some(l),extraClasses:d,extraBehaviours:[],extraStyles:{}},g=renderModalDialog(m,t,f,n),h=getDialogApi({getRoot:function(){return g},getBody:function(){return lf.getBody(g)},getFooter:function(){return lf.getFooter(g)},getFormWrapper:function(){var t=lf.getBody(g);return _r.getCurrent(t).getOr(t)}},e.redial,c);return{dialog:g,instanceApi:h}},renderInlineDialog=function(t,e,n,i){var a,u,c,l,f,d=generate$1("dialog-label"),m=generate$1("dialog-content"),g=record((c={title:t.internalDialog.title,draggable:!0},l=d,f=n.shared.providers,la.sketch({dom:fromHtml$2('<div class="tox-dialog__header"></div>'),components:[renderTitle(c,s.some(l),f),renderDragHandle(),renderClose(f)],containerBehaviours:derive$1([of.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return closest$3(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=record(function(t,e,n,i){return renderBody(t,s.some(e),n,i)}({body:t.internalDialog.body},m,n,i)),p=mapMenuButtons(t.internalDialog.buttons),v=extractCellsToObject(p),b=record(function(t,e){return renderFooter(t,e)}({buttons:p},n)),y=SilverDialogEvents_initDialog((function(){return w}),{onBlock:function(){},onUnblock:function(){},onClose:function(){return e.closeWindow()}}),x=build$1({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(a={role:"dialog"},a["aria-labelledby"]=d,a["aria-describedby"]=""+m,a)},eventOrder:(u={},u[At()]=[Ns.name(),Ze.name()],u[zt()]=["execute-on-form"],u[Ut()]=["reflecting","execute-on-form"],u),behaviours:derive$1([To.config({mode:"cyclic",onEscape:function(t){return emit(t,da),s.some(!0)},useTabstopAt:function(t){return!NavigableObject_isPseudoStop(t)&&("button"!==re(t)||"disabled"!==get$2(t,"disabled"))}}),Ns.config({channel:Bd,updateState:function(t,e){return s.some(e)},initialData:t}),zo.config({}),config("execute-on-form",y.concat([runOnSource(vt(),(function(t,e){To.focusIn(t)}))])),RepresentingConfigs_memory({})]),components:[g.asSpec(),h.asSpec(),b.asSpec()]}),w=getDialogApi({getRoot:function(){return x},getFooter:function(){return b.get(x)},getBody:function(){return h.get(x)},getFormWrapper:function(){var t=h.get(x);return _r.getCurrent(t).getOr(t)}},e.redial,v);return{dialog:x,instanceApi:w}},Fd=tinymce.util.Tools.resolve("tinymce.util.URI"),Vd=["insertContent","setContent","execCommand","close","block","unblock"],isSupportedMessage=function(t){return d(t)&&-1!==Vd.indexOf(t.mceAction)},renderUrlDialog=function(t,n,i,a){var u,c,l,m=getHeader(t.title,a),h=function(t){var e={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[NavigableObject_craft({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:derive$1([Ia.config({}),zo.config({})])})]}],behaviours:derive$1([To.config({mode:"acyclic",useTabstopAt:not(NavigableObject_isPseudoStop)})])};return lf.parts().body(e)}(t),p=t.buttons.bind((function(t){return 0===t.length?s.none():s.some(renderModalFooter({buttons:t},a))})),v=SilverDialogEvents_initUrlDialog((function(){return E}),getEventExtras((function(){return k}),n)),b=__assign(__assign({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),y=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],x=new Fd(t.url,{base_uri:new Fd(e.window.location.href)}),w=x.protocol+"://"+x.host+(x.port?":"+x.port:""),C=Cell(s.none()),S=[config("messages",[Zt((function(){var n=bind$3($.fromDom(e.window),"message",(function(e){if(x.isSameOrigin(new Fd(e.raw().origin))){var n=e.raw().data;isSupportedMessage(n)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var i=!!g(n.ui)&&n.ui;t.execCommand(n.cmd,i,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(i,E,n):function(t){return!isSupportedMessage(t)&&d(t)&&has(t,"mceAction")}(n)&&t.onMessage(E,n)}}));C.set(s.some(n))})),Qt((function(){C.get().each((function(t){return t.unbind()}))}))]),Ze.config({channels:(u={},u[Hd]={onReceive:function(t,e){descendant$1(t.element(),"iframe").each((function(t){t.dom().contentWindow.postMessage(e,w)}))}},u)})],k=renderModalDialog({header:m,body:h,footer:p,extraClasses:y,extraBehaviours:S,extraStyles:b},t,v,a),E=(c=k,l=function(t){c.getSystem().isConnected()&&t(c)},{block:function(t){if(!f(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l((function(e){emitWith(e,pa,{message:t})}))},unblock:function(){l((function(t){emit(t,va)}))},close:function(){l((function(t){emit(t,da)}))},sendMessage:function(t){l((function(e){e.getSystem().broadcastOn([Hd],t)}))}});return{dialog:k,instanceApi:E}},inlineAdditionalBehaviours=function(t,e,n){return e&&n?[]:[ll.config({contextual:{lazyContext:function(){return s.some(box($.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},WindowManager_setup=function(t){var e=t.backstage,n=t.editor,i=isStickyToolbar(n),a=isToolbarLocationTop(n),u=function(t){var e=t.backstage.shared;return{open:function(n,i){var closeDialog=function(){lf.hide(l),i()},a=record(renderFooterButton({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:s.none()},"cancel",t.backstage)),u=pUntitled(),c=pClose(closeDialog,e.providers),l=build$1(renderDialog({lazySink:function(){return e.getSink()},header:hiddenHeader(u,c),body:pBodyMessage(n,e.providers),footer:s.some(pFooter(pFooterGroup([],[a.asSpec()]))),onEscape:closeDialog,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[run(ma,closeDialog)],eventOrder:{}}));lf.show(l);var f=a.get(l);zo.focus(f)}}}(t),c=function(t){var e=t.backstage.shared;return{open:function(n,i){var closeDialog=function(t){lf.hide(f),i(t)},a=record(renderFooterButton({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:s.none()},"submit",t.backstage)),u=renderFooterButton({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:s.none()},"cancel",t.backstage),c=pUntitled(),l=pClose((function(){return closeDialog(!1)}),e.providers),f=build$1(renderDialog({lazySink:function(){return e.getSink()},header:hiddenHeader(c,l),body:pBodyMessage(n,e.providers),footer:s.some(pFooter(pFooterGroup([],[u,a.asSpec()]))),onEscape:function(){return closeDialog(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[run(ma,(function(){return closeDialog(!1)})),run(ha,(function(){return closeDialog(!0)}))],eventOrder:{}}));lf.show(f);var d=a.get(f);zo.focus(d)}}}(t),openModalUrlDialog=function(t,i){return Cd.openUrl((function(t){var a=renderUrlDialog(t,{closeWindow:function(){lf.hide(a.dialog),i(a.instanceApi)}},n,e);return lf.show(a.dialog),a.instanceApi}),t)},openModalDialog=function(t,n){return Cd.open((function(t,i,a){var u=i,c=renderDialog$1({dataValidator:a,initialData:u,internalDialog:t},{redial:Cd.redial,closeWindow:function(){lf.hide(c.dialog),n(c.instanceApi)}},e);return lf.show(c.dialog),c.instanceApi.setData(u),c.instanceApi}),t)},openInlineDialog=function(t,u,c,l){return Cd.open((function(t,f,d){var m,g=getOrDie(asRaw("data",d,f)),h=(m=Cell(s.none()),{clear:function(){m.set(s.none())},set:function(t){m.set(s.some(t))},isSet:function(){return m.get().isSome()},on:function(t){m.get().each(t)}}),refreshDocking=function(){return h.on((function(t){Yo.reposition(t),ll.refresh(t)}))},p=renderInlineDialog({dataValidator:d,initialData:g,internalDialog:t},{redial:Cd.redial,closeWindow:function(){h.on(Yo.hide),n.off("ResizeEditor",refreshDocking),h.clear(),c(p.instanceApi)}},e,l),v=build$1(Yo.sketch(__assign(__assign({lazySink:e.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},a?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:derive$1(__spreadArrays([config("window-manager-inline-events",[run(Wt(),(function(t,e){emit(p.dialog,ma)}))])],inlineAdditionalBehaviours(n,i,a)))})));return h.set(v),Yo.showWithin(v,u,ye(p.dialog),s.some(ve())),i&&a||(ll.refresh(v),n.on("ResizeEditor",refreshDocking)),p.instanceApi.setData(g),To.focusIn(p.dialog),p.instanceApi}),t)};return{open:function(t,n,i){return void 0!==n&&"toolbar"===n.inline?openInlineDialog(t,e.shared.anchors.inlineDialog(),i,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?openInlineDialog(t,e.shared.anchors.cursor(),i,n.ariaAttrs):openModalDialog(t,i)},openUrl:function(t,e){return openModalUrlDialog(t,e)},alert:function(t,e){u.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){c.open(t,(function(t){e(t)}))}}};!function Theme(){a.add("silver",(function(t){var e=Render_setup(t),n=e.uiMothership,i=e.backstage,a=e.renderUI,u=e.getUi;Autocompleter_register(t,i.shared);var c=WindowManager_setup({editor:t,backstage:i});return{renderUI:a,getWindowManagerImpl:constant(c),getNotificationManagerImpl:function(){return NotificationManagerImpl(t,{backstage:i},n)},ui:u()}}))}()}(window)}).call(this,n(104))},1598:function(t,e,n){n(1599)},1599:function(t,e){!function(t){"use strict";var e,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),noop=function(){},constant=function(t){return function(){return t}},not=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},i=constant(!1),a=constant(!0),none=function(){return u},u=function(){var eq=function(t){return t.isNone()},call=function(t){return t()},id=function(t){return t},t={fold:function(t,e){return t()},is:i,isSome:i,isNone:a,getOr:id,getOrThunk:call,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:i,forall:a,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:constant("none()")};return Object.freeze&&Object.freeze(t),t}(),some=function(t){var e=constant(t),self=function(){return n},bind=function(e){return e(t)},n={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:a,isNone:i,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:self,orThunk:self,map:function(e){return some(e(t))},each:function(e){e(t)},bind:bind,exists:bind,forall:bind,filter:function(e){return e(t)?n:u},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(i,(function(e){return n(t,e)}))}};return n},c={some:some,none:none,from:function(t){return null==t?u:some(t)}},isType=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},s=isType("string"),l=isType("array"),f=isType("boolean"),d=isType("function"),m=isType("number"),g=Array.prototype.slice,h=Array.prototype.push,map=function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;a++){var u=t[a];i[a]=e(u,a)}return i},each=function(t,e){for(var n=0,i=t.length;n<i;n++){e(t[n],n)}},filter=function(t,e){for(var n=[],i=0,a=t.length;i<a;i++){var u=t[i];e(u,i)&&n.push(u)}return n},foldl=function(t,e,n){return each(t,(function(t){n=e(n,t)})),n},find=function(t,e){for(var n=0,i=t.length;n<i;n++){var a=t[n];if(e(a,n))return c.some(a)}return c.none()},bind=function(t,e){return function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!l(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);h.apply(e,t[n])}return e}(map(t,e))},head=function(t){return 0===t.length?c.none():c.some(t[0])},last=function(t){return 0===t.length?c.none():c.some(t[t.length-1])},p=(d(Array.from)&&Array.from,function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}),Node_documentPositionContainedBy=function(e,n){return p(e,n,t.Node.DOCUMENT_POSITION_CONTAINED_BY)},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},Cell=function(t){var e=t,get=function(){return e};return{get:get,set:function(t){e=t},clone:function(){return Cell(get())}}},unknown=function(){return nu(0,0)},nu=function(t,e){return{major:t,minor:e}},v={nu:nu,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?unknown():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}}(t,e);if(!n)return{major:0,minor:0};var group=function(t){return Number(e.replace(n,"$"+t))};return nu(group(1),group(2))}(t,n)},unknown:unknown},isBrowser=function(t,e){return function(){return e===t}},nu$1=function(t){var e=t.current;return{current:e,version:t.version,isEdge:isBrowser("Edge",e),isChrome:isBrowser("Chrome",e),isIE:isBrowser("IE",e),isOpera:isBrowser("Opera",e),isFirefox:isBrowser("Firefox",e),isSafari:isBrowser("Safari",e)}},b={unknown:function(){return nu$1({current:void 0,version:v.unknown()})},nu:nu$1,edge:constant("Edge"),chrome:constant("Chrome"),ie:constant("IE"),opera:constant("Opera"),firefox:constant("Firefox"),safari:constant("Safari")},isOS=function(t,e){return function(){return e===t}},nu$2=function(t){var e=t.current;return{current:e,version:t.version,isWindows:isOS("Windows",e),isiOS:isOS("iOS",e),isAndroid:isOS("Android",e),isOSX:isOS("OSX",e),isLinux:isOS("Linux",e),isSolaris:isOS("Solaris",e),isFreeBSD:isOS("FreeBSD",e),isChromeOS:isOS("ChromeOS",e)}},y={unknown:function(){return nu$2({current:void 0,version:v.unknown()})},nu:nu$2,windows:constant("Windows"),ios:constant("iOS"),android:constant("Android"),linux:constant("Linux"),osx:constant("OSX"),solaris:constant("Solaris"),freebsd:constant("FreeBSD"),chromeos:constant("ChromeOS")},detect$1=function(t,e){var n=String(e).toLowerCase();return find(t,(function(t){return t.search(n)}))},UaString_detectBrowser=function(t,e){return detect$1(t,e).map((function(t){var n=v.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},UaString_detectOs=function(t,e){return detect$1(t,e).map((function(t){var n=v.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},contains=function(t,e){return-1!==t.indexOf(e)},x=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(t){return function(e){return contains(e,t)}},w=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return contains(t,"edge/")&&contains(t,"chrome")&&contains(t,"safari")&&contains(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,x],search:function(t){return contains(t,"chrome")&&!contains(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return contains(t,"msie")||contains(t,"trident")}},{name:"Opera",versionRegexes:[x,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[x,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(contains(t,"safari")||contains(t,"mobile/"))&&contains(t,"applewebkit")}}],C=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return contains(t,"iphone")||contains(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],S={browsers:constant(w),oses:constant(C)},PlatformDetection_detect=function(t,e){var n=S.browsers(),i=S.oses(),a=UaString_detectBrowser(n,t).fold(b.unknown,b.nu),u=UaString_detectOs(i,t).fold(y.unknown,y.nu),c=function(t,e,n,i){var a=t.isiOS()&&!0===/ipad/i.test(n),u=t.isiOS()&&!a,c=t.isiOS()||t.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),m=!f&&!l&&!d;return{isiPad:constant(a),isiPhone:constant(u),isTablet:constant(l),isPhone:constant(f),isTouch:constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:constant(d),isDesktop:constant(m)}}(u,a,t,e);return{browser:a,os:u,deviceType:c}},k=Cell(PlatformDetection_detect(t.navigator.userAgent,(function(e){return t.window.matchMedia(e).matches}))),fromDom=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:constant(t)}},E={fromHtml:function(e,n){var i=(n||t.document).createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return fromDom(i.childNodes[0])},fromTag:function(e,n){var i=(n||t.document).createElement(e);return fromDom(i)},fromText:function(e,n){var i=(n||t.document).createTextNode(e);return fromDom(i)},fromDom:fromDom,fromPoint:function(t,e,n){var i=t.dom();return c.from(i.elementFromPoint(e,n)).map(fromDom)}},T=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE,t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),O=(t.Node.TEXT_NODE,t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,T),eq=function(t,e){return t.dom()===e.dom()},_=k.get().browser,N=_.isIE()?function(t,e){return Node_documentPositionContainedBy(t.dom(),e.dom())}:function(t,e){var n=t.dom(),i=e.dom();return n!==i&&n.contains(i)},is$1=function(t,e){var n=t.dom();if(n.nodeType!==O)return!1;var i=n;if(void 0!==i.matches)return i.matches(e);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(e);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},A=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),z=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),D=tinymce.util.Tools.resolve("tinymce.util.VK"),lift2=function(t,e,n){return t.isSome()&&e.isSome()?c.some(n(t.getOrDie(),e.getOrDie())):c.none()},M=Object.keys,parent=function(t){return c.from(t.dom().parentNode).map(E.fromDom)},children=function(t){return map(t.dom().childNodes,E.fromDom)},child=function(t,e){var n=t.dom().childNodes;return c.from(n[e]).map(E.fromDom)},firstChild=function(t){return child(t,0)},lastChild=function(t){return child(t,t.dom().childNodes.length-1)},B=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(t,e){parent(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),append=function(t,e){t.dom().appendChild(e.dom())},append$1=function(t,e){each(e,(function(e){append(t,e)}))},remove=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},fireListEvent=function(t,e,n){return t.fire("ListMutation",{action:e,element:n})},R=void 0!==t.window?t.window:Function("return this;")(),resolve=function(t,e){return function(t,e){for(var n=null!=e?e:R,i=0;i<t.length&&null!=n;++i)n=n[t[i]];return n}(t.split("."),e)},Global$1_getOrDie=function(t,e){var n=function(t,e){return resolve(t,e)}(t,e);if(null==n)throw new Error(t+" not available on this browser");return n},HTMLElement_isPrototypeOf=function(t){return function(t){return Global$1_getOrDie("HTMLElement",t)}(resolve("ownerDocument.defaultView",t)).prototype.isPrototypeOf(t)},P=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),I=tinymce.util.Tools.resolve("tinymce.util.Tools"),isBr=function(t){return t&&"BR"===t.nodeName},NodeType_isTextNode=function(t){return t&&3===t.nodeType},NodeType_isListNode=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},NodeType_isOlUlNode=function(t){return t&&/^(OL|UL)$/.test(t.nodeName)},NodeType_isDlItemNode=function(t){return t&&/^(DT|DD)$/.test(t.nodeName)},NodeType_isListItemNode=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},NodeType_isTableCellNode=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},H=isBr,NodeType_isFirstChild=function(t){return t.parentNode.firstChild===t},NodeType_isTextBlock=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},NodeType_isBlock=function(t,e){return t&&t.nodeName in e},NodeType_isBogusBr=function(t,e){return!!isBr(e)&&!(!t.isBlock(e.nextSibling)||isBr(e.previousSibling))},NodeType_isEmpty=function(t,e,n){var i=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&i},NodeType_isChildOfBody=function(t,e){return t.isChildOf(e,t.getRoot())},getParentList=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",getClosestListRootElm(t,e))},getSelectedListItems=function(t){var e=t.selection.getSelectedBlocks();return I.grep(function(t,e){var n=I.map(e,(function(e){var n=t.dom.getParent(e,"li,dd,dt",getClosestListRootElm(t,e));return n||e}));return P.unique(n)}(t,e),(function(t){return NodeType_isListItemNode(t)}))},getClosestListRootElm=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},findLastParentListNode=function(t,e){var n=t.dom.getParents(e,"ol,ul",getClosestListRootElm(t,e));return last(n)},getUniqueListRoots=function(t,e){var n=map(e,(function(e){return findLastParentListNode(t,e).getOr(e)}));return P.unique(n)},L={isList:function(t){var e=getParentList(t);return HTMLElement_isPrototypeOf(e)},getParentList:getParentList,getSelectedSubLists:function(t){var e=getParentList(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return I.grep(t.querySelectorAll("ol,ul,dl"),(function(t){return NodeType_isListNode(t)}))}(e):I.grep(n,(function(t){return NodeType_isListNode(t)&&e!==t}))},getSelectedListItems:getSelectedListItems,getClosestListRootElm:getClosestListRootElm,getSelectedDlItems:function(t){return filter(getSelectedListItems(t),NodeType_isDlItemNode)},getSelectedListRoots:function(t){var e=function(t){var e=findLastParentListNode(t,t.selection.getStart()),n=filter(t.selection.getSelectedBlocks(),NodeType_isOlUlNode);return e.toArray().concat(n)}(t);return getUniqueListRoots(t,e)}},Settings_shouldIndentOnTab=function(t){return t.getParam("lists_indent_on_tab",!0)},Settings_getForcedRootBlock=function(t){var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Settings_getForcedRootBlockAttrs=function(t){return t.getParam("forced_root_block_attrs",{})},createTextBlock=function(t,e){var n,i,a,u=t.dom,c=t.schema.getBlockElements(),s=u.createFragment(),l=Settings_getForcedRootBlock(t);if(l&&((i=u.create(l)).tagName===l.toUpperCase()&&u.setAttribs(i,Settings_getForcedRootBlockAttrs(t)),NodeType_isBlock(e.firstChild,c)||s.appendChild(i)),e)for(;n=e.firstChild;){var f=n.nodeName;a||"SPAN"===f&&"bookmark"===n.getAttribute("data-mce-type")||(a=!0),NodeType_isBlock(n,c)?(s.appendChild(n),i=null):l?(i||(i=u.create(l),s.appendChild(i)),i.appendChild(n)):s.appendChild(n)}return l?a||i.appendChild(u.create("br",{"data-mce-bogus":"1"})):s.appendChild(u.create("br")),s},name=function(t){return t.dom().nodeName.toLowerCase()},F=(e=T,function(t){return function(t){return t.dom().nodeType}(t)===e}),setAll=function(e,n){var i=e.dom();!function(t,e){for(var n=M(t),i=0,a=n.length;i<a;i++){var u=n[i];e(t[u],u)}}(n,(function(e,n){!function(e,n,i){if(!(s(i)||f(i)||m(i)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,i+"")}(i,n,e)}))},clone=function(t){return foldl(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})},internalSet=function(e,n,i){if(!s(i))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",e),new Error("CSS value must be a string: "+i);(function(t){return void 0!==t.style&&d(t.style.getPropertyValue)})(e)&&e.style.setProperty(n,i)},deep=function(t){return function(t,e){return E.fromDom(t.dom().cloneNode(e))}(t,!0)},mutate=function(t,e){var n=function(t,e){var n=E.fromTag(e),i=clone(t);return setAll(n,i),n}(t,e);B(t,n);var i=children(t);return append$1(n,i),remove(t),n},joinSegment=function(t,e){append(t.item,e.list)},createSegment=function(t,e){var n={list:E.fromTag(e,t),item:E.fromTag("li",t)};return append(n.list,n.item),n},writeShallow=function(t,e,n){var i=e.slice(0,n.depth);return last(i).each((function(e){!function(t,e){append(t.list,e),t.item=e}(e,function(t,e,n){var i=E.fromTag("li",t);return setAll(i,e),append$1(i,n),i}(t,n.itemAttributes,n.content)),function(t,e){name(t.list)!==e.listType&&(t.list=mutate(t.list,e.listType)),setAll(t.list,e.listAttributes)}(e,n)})),i},writeDeep=function(t,e,n){var i,a=function(t,e,n){for(var i=[],a=0;a<n;a++)i.push(createSegment(t,e.listType));return i}(t,n,n.depth-e.length);return function(t){for(var e=1;e<t.length;e++)joinSegment(t[e-1],t[e])}(a),function(t,e){for(var n=0;n<t.length-1;n++)i=t[n].item,a="list-style-type",u="none",c=void 0,c=i.dom(),internalSet(c,a,u);var i,a,u,c;last(t).each((function(t){setAll(t.list,e.listAttributes),setAll(t.item,e.itemAttributes),append$1(t.item,e.content)}))}(a,n),i=a,lift2(last(e),head(i),joinSegment),e.concat(a)},isList$1=function(t){return is$1(t,"OL,UL")},hasFirstChildList=function(t){return firstChild(t).map(isList$1).getOr(!1)},isIndented=function(t){return t.depth>0},isSelected=function(t){return t.isSelected},cloneItemContent=function(t){var e=children(t),n=lastChild(t).map(isList$1).getOr(!1)?e.slice(0,-1):e;return map(n,deep)},normalizeEntries=function(t){each(t,(function(e,n){(function(t,e){for(var n=t[e].depth,i=e-1;i>=0;i--){if(t[i].depth===n)return c.some(t[i]);if(t[i].depth<n)break}return c.none()})(t,n).each((function(t){var n,i;i=t,(n=e).listType=i.listType,n.listAttributes=__assign({},i.listAttributes)}))}))},parseItem=function(t,e,n,i){return firstChild(i).filter(isList$1).fold((function(){e.each((function(t){eq(t.start,i)&&n.set(!0)}));var a=function(t,e,n){return parent(t).filter(F).map((function(i){return{depth:e,isSelected:n,content:cloneItemContent(t),itemAttributes:clone(t),listAttributes:clone(i),listType:name(i)}}))}(i,t,n.get());e.each((function(t){eq(t.end,i)&&n.set(!1)}));var u=lastChild(i).filter(isList$1).map((function(i){return parseList(t,e,n,i)})).getOr([]);return a.toArray().concat(u)}),(function(i){return parseList(t,e,n,i)}))},parseList=function(t,e,n,i){return bind(children(i),(function(i){return(isList$1(i)?parseList:parseItem)(t+1,e,n,i)}))},outdentedComposer=function(e,n){return map(n,(function(n){var i,a,u,c=(i=n.content,u=(a||t.document).createDocumentFragment(),each(i,(function(t){u.appendChild(t.dom())})),E.fromDom(u));return E.fromDom(createTextBlock(e,c.dom()))}))},indentedComposer=function(t,e){return normalizeEntries(e),function(t,e){var n=foldl(e,(function(e,n){return n.depth>e.length?writeDeep(t,e,n):writeShallow(t,e,n)}),[]);return head(n).map((function(t){return t.list}))}(t.contentDocument,e).toArray()},getItemSelection=function(t){var e,n,i=map(L.getSelectedListItems(t),E.fromDom);return lift2(find(i,not(hasFirstChildList)),find((e=i,(n=g.call(e,0)).reverse(),n),not(hasFirstChildList)),(function(t,e){return{start:t,end:e}}))},listIndentation=function(t,e,n){var i=function(t,e){var n=Cell(!1);return map(t,(function(t){return{sourceList:t,entries:parseList(0,e,n,t)}}))}(e,getItemSelection(t));each(i,(function(e){!function(t,e){each(filter(t,isSelected),(function(t){return function(t,e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}}(e,t)}))}(e.entries,n);var i,a=function(t,e){return bind(function(t,e){if(0===t.length)return[];for(var n=e(t[0]),i=[],a=[],u=0,c=t.length;u<c;u++){var s=t[u],l=e(s);l!==n&&(i.push(a),a=[]),n=l,a.push(s)}return 0!==a.length&&i.push(a),i}(e,isIndented),(function(e){return head(e).map(isIndented).getOr(!1)?indentedComposer(t,e):outdentedComposer(t,e)}))}(t,e.entries);each(a,(function(e){fireListEvent(t,"Indent"===n?"IndentList":"OutdentList",e.dom())})),i=e.sourceList,each(a,(function(t){B(i,t)})),remove(e.sourceList)}))},V=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),U=V.DOM,SplitList_splitList=function(t,e,n){var i,a,u,c,s,l;for(u=U.select('span[data-mce-type="bookmark"]',e),s=createTextBlock(t,n),(i=U.createRng()).setStartAfter(n),i.setEndAfter(e),c=(a=i.extractContents()).firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&t.dom.isEmpty(c)){U.remove(c);break}t.dom.isEmpty(a)||U.insertAfter(a,e),U.insertAfter(s,e),NodeType_isEmpty(t.dom,n.parentNode)&&(l=n.parentNode,I.each(u,(function(t){l.parentNode.insertBefore(t,n.parentNode)})),U.remove(l)),U.remove(n),NodeType_isEmpty(t.dom,e)&&U.remove(e)},indentDlItem=function(t){is$1(t,"dt")&&mutate(t,"dd")},dlIndentation=function(t,e,n){each(n,"Indent"===e?indentDlItem:function(e){return function(t,e){is$1(e,"dd")?mutate(e,"dt"):is$1(e,"dt")&&parent(e).each((function(n){return SplitList_splitList(t,n.dom(),e.dom())}))}(t,e)})},getNormalizedPoint=function(t,e){if(NodeType_isTextNode(t))return{container:t,offset:e};var n=A.getNode(t,e);return NodeType_isTextNode(n)?{container:n,offset:e>=t.childNodes.length?n.data.length:0}:n.previousSibling&&NodeType_isTextNode(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&NodeType_isTextNode(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:t,offset:e}},Range_normalizeRange=function(t){var e=t.cloneRange(),n=getNormalizedPoint(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var i=getNormalizedPoint(t.endContainer,t.endOffset);return e.setEnd(i.container,i.offset),e},selectionIndentation=function(t,e){var n=map(L.getSelectedListRoots(t),E.fromDom),i=map(L.getSelectedDlItems(t),E.fromDom),a=!1;if(n.length||i.length){var u=t.selection.getBookmark();listIndentation(t,n,e),dlIndentation(t,e,i),t.selection.moveToBookmark(u),t.selection.setRng(Range_normalizeRange(t.selection.getRng())),t.nodeChanged(),a=!0}return a},indentListSelection=function(t){return selectionIndentation(t,"Indent")},outdentListSelection=function(t){return selectionIndentation(t,"Outdent")},flattenListSelection=function(t){return selectionIndentation(t,"Flatten")},j=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),W=V.DOM,Bookmark_createBookmark=function(t){var e={},setupEndPoint=function(n){var i,a,u;a=t[n?"startContainer":"endContainer"],u=t[n?"startOffset":"endOffset"],1===a.nodeType&&(i=W.create("span",{"data-mce-type":"bookmark"}),a.hasChildNodes()?(u=Math.min(u,a.childNodes.length-1),n?a.insertBefore(i,a.childNodes[u]):W.insertAfter(i,a.childNodes[u])):a.appendChild(i),a=i,u=0),e[n?"startContainer":"endContainer"]=a,e[n?"startOffset":"endOffset"]=u};return setupEndPoint(!0),t.collapsed||setupEndPoint(),e},Bookmark_resolveBookmark=function(t){function restoreEndPoint(e){var n,i,a;n=a=t[e?"startContainer":"endContainer"],i=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(i=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,W.remove(a),!n.hasChildNodes()&&W.isBlock(n)&&n.appendChild(W.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=i)}restoreEndPoint(!0),restoreEndPoint();var e=W.createRng();return e.setStart(t.startContainer,t.startOffset),t.endContainer&&e.setEnd(t.endContainer,t.endOffset),Range_normalizeRange(e)},isCustomList=function(t){return/\btox\-/.test(t.className)},listToggleActionFromListName=function(t){switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},setAttribs=function(t,e){I.each(e,(function(e,n){t.setAttribute(n,e)}))},updateListWithDetails=function(t,e,n){!function(t,e,n){var i=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",i)}(t,e,n),function(t,e,n){setAttribs(e,n["list-attributes"]),I.each(t.select("li",e),(function(t){setAttribs(t,n["list-item-attributes"])}))}(t,e,n)},getEndPointNode=function(t,e,n,i){var a,u;for(a=e[n?"startContainer":"endContainer"],u=e[n?"startOffset":"endOffset"],1===a.nodeType&&(a=a.childNodes[Math.min(u,a.childNodes.length-1)]||a),!n&&H(a.nextSibling)&&(a=a.nextSibling);a.parentNode!==i;){if(NodeType_isTextBlock(t,a))return a;if(/^(TD|TH)$/.test(a.parentNode.nodeName))return a;a=a.parentNode}return a},applyList=function(t,e,n){void 0===n&&(n={});var i,a=t.selection.getRng(!0),u="LI",c=L.getClosestListRootElm(t,t.selection.getStart(!0)),s=t.dom;"false"!==s.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(u="DT"),i=Bookmark_createBookmark(a),I.each(function(t,e,n){for(var i,a=[],u=t.dom,c=getEndPointNode(t,e,!0,n),s=getEndPointNode(t,e,!1,n),l=[],f=c;f&&(l.push(f),f!==s);f=f.nextSibling);return I.each(l,(function(e){if(NodeType_isTextBlock(t,e))return a.push(e),void(i=null);if(u.isBlock(e)||H(e))return H(e)&&u.remove(e),void(i=null);var c=e.nextSibling;j.isBookmarkNode(e)&&(NodeType_isTextBlock(t,c)||!c&&e.parentNode===n)?i=null:(i||(i=u.create("p"),e.parentNode.insertBefore(i,e),a.push(i)),i.appendChild(e))})),a}(t,a,c),(function(i){var a,c;(c=i.previousSibling)&&NodeType_isListNode(c)&&c.nodeName===e&&function(t,e,n){var i=t.getStyle(e,"list-style-type"),a=n?n["list-style-type"]:"";return i===(a=null===a?"":a)}(s,c,n)?(a=c,i=s.rename(i,u),c.appendChild(i)):(a=s.create(e),i.parentNode.insertBefore(a,i),a.appendChild(i),i=s.rename(i,u)),function(t,e,n){I.each(n,(function(n){var i;return t.setStyle(e,((i={})[n]="",i))}))}(s,i,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),updateListWithDetails(s,a,n),mergeWithAdjacentLists(t.dom,a)})),t.selection.setRng(Bookmark_resolveBookmark(i)))},shouldMerge=function(t,e,n){return function(t,e){return t&&e&&NodeType_isListNode(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(i=n,e.className===i.className);var i},mergeWithAdjacentLists=function(t,e){var n,i;if(n=e.nextSibling,shouldMerge(t,e,n)){for(;i=n.firstChild;)e.appendChild(i);t.remove(n)}if(n=e.previousSibling,shouldMerge(t,e,n)){for(;i=n.lastChild;)e.insertBefore(i,e.firstChild);t.remove(n)}},toggleMultipleLists=function(t,e,n,i,a){if(e.nodeName!==i||hasListStyleDetail(a)){var u=Bookmark_createBookmark(t.selection.getRng(!0));I.each([e].concat(n),(function(e){!function(t,e,n,i){if(e.nodeName!==n){var a=t.dom.rename(e,n);updateListWithDetails(t.dom,a,i),fireListEvent(t,listToggleActionFromListName(n),a)}else updateListWithDetails(t.dom,e,i),fireListEvent(t,listToggleActionFromListName(n),e)}(t,e,i,a)})),t.selection.setRng(Bookmark_resolveBookmark(u))}else flattenListSelection(t)},hasListStyleDetail=function(t){return"list-style-type"in t},q={toggleList:function(t,e,n){var i=L.getParentList(t),a=L.getSelectedSubLists(t);n=n||{},i&&a.length>0?toggleMultipleLists(t,i,a,e,n):function(t,e,n,i){if(e!==t.getBody())if(e)if(e.nodeName!==n||hasListStyleDetail(i)||isCustomList(e)){var a=Bookmark_createBookmark(t.selection.getRng(!0));updateListWithDetails(t.dom,e,i);var u=t.dom.rename(e,n);mergeWithAdjacentLists(t.dom,u),t.selection.setRng(Bookmark_resolveBookmark(a)),fireListEvent(t,listToggleActionFromListName(n),u)}else flattenListSelection(t);else applyList(t,n,i),fireListEvent(t,listToggleActionFromListName(n),e)}(t,i,e,n)},mergeWithAdjacentLists:mergeWithAdjacentLists},$=V.DOM,normalizeList=function(t,e){var n,i=e.parentNode;"LI"===i.nodeName&&i.firstChild===e&&((n=i.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),NodeType_isEmpty(t,i)&&$.remove(i)):$.setStyle(i,"listStyleType","none")),NodeType_isListNode(i)&&(n=i.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},NormalizeLists_normalizeLists=function(t,e){I.each(I.grep(t.select("ol,ul",e)),(function(e){normalizeList(t,e)}))},findNextCaretContainer=function(t,e,n,i){var a=e.startContainer,u=e.startOffset;if(NodeType_isTextNode(a)&&(n?u<a.data.length:u>0))return a;var c=t.schema.getNonEmptyElements();1===a.nodeType&&(a=A.getNode(a,u));var s=new z(a,i);for(n&&NodeType_isBogusBr(t.dom,a)&&s.next();a=s[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(c[a.nodeName])return a;if(NodeType_isTextNode(a)&&a.data.length>0)return a}},hasOnlyOneBlockChild=function(t,e){var n=e.childNodes;return 1===n.length&&!NodeType_isListNode(n[0])&&t.isBlock(n[0])},moveChildren=function(t,e,n){var i,a;if(a=hasOnlyOneBlockChild(t,n)?n.firstChild:n,function(t,e){hasOnlyOneBlockChild(t,e)&&t.remove(e.firstChild,!0)}(t,e),!NodeType_isEmpty(t,e,!0))for(;i=e.firstChild;)a.appendChild(i)},mergeLiElements=function(t,e,n){var i,a,u=e.parentNode;if(NodeType_isChildOfBody(t,e)&&NodeType_isChildOfBody(t,n)){NodeType_isListNode(n.lastChild)&&(a=n.lastChild),u===n.lastChild&&H(u.previousSibling)&&t.remove(u.previousSibling),(i=n.lastChild)&&H(i)&&e.hasChildNodes()&&t.remove(i),NodeType_isEmpty(t,n,!0)&&t.$(n).empty(),moveChildren(t,e,n),a&&n.appendChild(a);var c=N(E.fromDom(n),E.fromDom(e))?t.getParents(e,NodeType_isListNode,n):[];t.remove(e),each(c,(function(e){NodeType_isEmpty(t,e)&&e!==t.getRoot()&&t.remove(e)}))}},mergeForward=function(t,e,n,i){var a=t.dom;if(a.isEmpty(i))!function(t,e,n){t.dom.$(n).empty(),mergeLiElements(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,i);else{var u=Bookmark_createBookmark(e);mergeLiElements(a,n,i),t.selection.setRng(Bookmark_resolveBookmark(u))}},backspaceDeleteFromListToListCaret=function(t,e){var n=t.dom,i=t.selection,a=i.getStart(),u=L.getClosestListRootElm(t,a),c=n.getParent(i.getStart(),"LI",u);if(c){var s=c.parentNode;if(s===t.getBody()&&NodeType_isEmpty(n,s))return!0;var l=Range_normalizeRange(i.getRng()),f=n.getParent(findNextCaretContainer(t,l,e,u),"LI",u);if(f&&f!==c)return t.undoManager.transact((function(){e?mergeForward(t,l,f,c):NodeType_isFirstChild(c)?outdentListSelection(t):function(t,e,n,i){var a=Bookmark_createBookmark(e);mergeLiElements(t.dom,n,i);var u=Bookmark_resolveBookmark(a);t.selection.setRng(u)}(t,l,c,f)})),!0;if(!f&&!e&&0===l.startOffset&&0===l.endOffset)return t.undoManager.transact((function(){flattenListSelection(t)})),!0}return!1},backspaceDeleteCaret=function(t,e){return backspaceDeleteFromListToListCaret(t,e)||function(t,e){var n=t.dom,i=t.selection.getStart(),a=L.getClosestListRootElm(t,i),u=n.getParent(i,n.isBlock,a);if(u&&n.isEmpty(u)){var c=Range_normalizeRange(t.selection.getRng()),s=n.getParent(findNextCaretContainer(t,c,e,a),"LI",a);if(s)return t.undoManager.transact((function(){!function(t,e,n){var i=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),i&&t.isEmpty(i)&&t.remove(i)}(n,u,a),q.mergeWithAdjacentLists(n,s.parentNode),t.selection.select(s,!0),t.selection.collapse(e)})),!0}return!1}(t,e)},backspaceDelete=function(t,e){return t.selection.isCollapsed()?backspaceDeleteCaret(t,e):function(t){var e=t.selection.getStart(),n=L.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||L.getSelectedListItems(t).length>0)&&(t.undoManager.transact((function(){t.execCommand("Delete"),NormalizeLists_normalizeLists(t.dom,t.getBody())})),!0)}(t)},Delete_setup=function(t){t.on("keydown",(function(e){e.keyCode===D.BACKSPACE?backspaceDelete(t,!1)&&e.preventDefault():e.keyCode===D.DELETE&&backspaceDelete(t,!0)&&e.preventDefault()}))},G=backspaceDelete,Api_get=function(t){return{backspaceDelete:function(e){G(t,e)}}},queryListCommandState=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},Commands_register=function(t){t.on("BeforeExecCommand",(function(e){var n=e.command.toLowerCase();"indent"===n?indentListSelection(t):"outdent"===n&&outdentListSelection(t)})),t.addCommand("InsertUnorderedList",(function(e,n){q.toggleList(t,"UL",n)})),t.addCommand("InsertOrderedList",(function(e,n){q.toggleList(t,"OL",n)})),t.addCommand("InsertDefinitionList",(function(e,n){q.toggleList(t,"DL",n)})),t.addCommand("RemoveList",(function(){flattenListSelection(t)})),t.addQueryStateHandler("InsertUnorderedList",queryListCommandState(t,"UL")),t.addQueryStateHandler("InsertOrderedList",queryListCommandState(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",queryListCommandState(t,"DL"))},Keyboard_setup=function(t){Settings_shouldIndentOnTab(t)&&function(t){t.on("keydown",(function(e){e.keyCode!==D.TAB||D.metaKeyPressed(e)||t.undoManager.transact((function(){(e.shiftKey?outdentListSelection(t):indentListSelection(t))&&e.preventDefault()}))}))}(t),Delete_setup(t)},listState=function(t,e){return function(n){var nodeChangeHandler=function(t){var i=function(t,e){for(var n=0;n<t.length;n++){if(e(t[n]))return n}return-1}(t.parents,NodeType_isTableCellNode),a=-1!==i?t.parents.slice(0,i):t.parents,u=I.grep(a,NodeType_isListNode);n.setActive(u.length>0&&u[0].nodeName===e&&!isCustomList(u[0]))};return t.on("NodeChange",nodeChangeHandler),function(){return t.off("NodeChange",nodeChangeHandler)}}},Buttons_register=function(t){var exec=function(e){return function(){return t.execCommand(e)}};(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==I.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:exec("InsertOrderedList"),onSetup:listState(t,"OL")}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:exec("InsertUnorderedList"),onSetup:listState(t,"UL")}))};!function Plugin(){n.add("lists",(function(t){return Keyboard_setup(t),Buttons_register(t),Commands_register(t),Api_get(t)}))}()}(window)},1600:function(t,e,n){n(1601)},1601:function(t,e,n){(function(t){!function(e){"use strict";var n,i,a,u,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.util.VK"),isType=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},l=isType("string"),f=isType("array"),d=isType("boolean"),m=isType("function"),Settings_assumeExternalTargets=function(t){var e=t.getParam("link_assume_external_targets",!1);return d(e)&&e?1:!l(e)||"http"!==e&&"https"!==e?0:e},Settings_hasContextToolbar=function(t){return t.getParam("link_context_toolbar",!1,"boolean")},Settings_getLinkList=function(t){return t.getParam("link_list")},Settings_getDefaultLinkTarget=function(t){return t.getParam("default_link_target")},Settings_getTargetList=function(t){return t.getParam("target_list",!0)},Settings_getRelList=function(t){return t.getParam("rel_list",[],"array")},Settings_getLinkClassList=function(t){return t.getParam("link_class_list",[],"array")},Settings_shouldShowLinkTitle=function(t){return t.getParam("link_title",!0,"boolean")},Settings_allowUnsafeLinkTarget=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},Settings_useQuickLink=function(t){return t.getParam("link_quicklink",!1,"boolean")},Settings_getDefaultLinkProtocol=function(t){return t.getParam("link_default_protocol","http","string")},OpenUrl_open=function(t){var n=e.document.createElement("a");n.target="_blank",n.href=t,n.rel="noreferrer noopener";var i=e.document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,n){e.document.body.appendChild(t),t.dispatchEvent(n),e.document.body.removeChild(t)}(n,i)},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},noop=function(){},constant=function(t){return function(){return t}},g=constant(!1),h=constant(!0),none=function(){return p},p=(n=function(t){return t.isNone()},u={fold:function(t,e){return t()},is:g,isSome:g,isNone:h,getOr:a=function(t){return t},getOrThunk:i=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:a,orThunk:i,map:none,each:noop,bind:none,exists:g,forall:h,filter:none,equals:n,equals_:n,toArray:function(){return[]},toString:constant("none()")},Object.freeze&&Object.freeze(u),u),some=function(t){var e=constant(t),self=function(){return n},bind=function(e){return e(t)},n={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:h,isNone:g,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:self,orThunk:self,map:function(e){return some(e(t))},each:function(e){e(t)},bind:bind,exists:bind,forall:bind,filter:function(e){return e(t)?n:p},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(g,(function(e){return n(t,e)}))}};return n},v={some:some,none:none,from:function(t){return null==t?p:some(t)}},b=Array.prototype.slice,y=Array.prototype.indexOf,x=Array.prototype.push,contains=function(t,e){return n=t,i=e,y.call(n,i)>-1;var n,i},each=function(t,e){for(var n=0,i=t.length;n<i;n++){e(t[n],n)}},flatten=function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!f(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);x.apply(e,t[n])}return e},bind=function(t,e){return flatten(function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;a++){var u=t[a];i[a]=e(u,a)}return i}(t,e))},w=(m(Array.from)&&Array.from,function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n],n);if(i.isSome())return i}return v.none()}),C=tinymce.util.Tools.resolve("tinymce.util.Tools"),hasProtocol=function(t){return/^\w+:/i.test(t)},applyRelTargetRules=function(t,e){var n=["noopener"],i=t?t.split(/\s+/):[],removeTargetRules=function(t){return t.filter((function(t){return-1===C.inArray(n,t)}))},a=e?function(t){return(t=removeTargetRules(t)).length>0?t.concat(n):n}(i):removeTargetRules(i);return a.length>0?function(t){return C.trim(t.sort().join(" "))}(a):""},getAnchorElement=function(t,e){return e=e||t.selection.getNode(),isImageFigure(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},isLink=function(t){return t&&"A"===t.nodeName&&!!t.href},isImageFigure=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},getLinkAttrs=function(t){return function(t,e,n){return each(t,(function(t){n=e(n,t)})),n}(["title","rel","class","target"],(function(e,n){return t[n].each((function(t){e[n]=t.length>0?t:null})),e}),{href:t.href})},applyLinkOverrides=function(t,e){var n=__assign({},e);if(!(Settings_getRelList(t).length>0)&&!1===Settings_allowUnsafeLinkTarget(t)){var i=applyRelTargetRules(n.rel,"_blank"===n.target);n.rel=i||null}return v.from(n.target).isNone()&&!1===Settings_getTargetList(t)&&(n.target=Settings_getDefaultLinkTarget(t)),n.href=function(t,e){return"http"!==e&&"https"!==e||hasProtocol(t)?t:e+"://"+t}(n.href,Settings_assumeExternalTargets(t)),n},unlinkImageFigure=function(t,e){var n=t.dom.select("img",e)[0];if(n){var i=t.dom.getParents(n,"a[href]",e)[0];i&&(i.parentNode.insertBefore(n,i),t.dom.remove(i))}},linkImageFigure=function(t,e,n){var i=t.dom.select("img",e)[0];if(i){var a=t.dom.create("a",n);i.parentNode.insertBefore(a,i),a.appendChild(i)}},Utils_link=function(t,e,n){var i=t.selection.getNode(),a=getAnchorElement(t,i),u=applyLinkOverrides(t,getLinkAttrs(n));t.undoManager.transact((function(){n.href===e.href&&e.attach(),a?(t.focus(),function(t,e,n,i){n.each((function(t){e.hasOwnProperty("innerText")?e.innerText=t:e.textContent=t})),t.dom.setAttribs(e,i),t.selection.select(e)}(t,a,n.text,u)):function(t,e,n,i){isImageFigure(e)?linkImageFigure(t,e,i):n.fold((function(){t.execCommand("mceInsertLink",!1,i)}),(function(e){t.insertContent(t.dom.createHTML("a",i,t.dom.encode(e)))}))}(t,i,n.text,u)}))},Utils_unlink=function(t){t.undoManager.transact((function(){var e=t.selection.getNode();if(isImageFigure(e))unlinkImageFigure(t,e);else{var n=t.dom.getParent(e,"a[href]",t.getBody());n&&t.dom.remove(n,!0)}t.focus()}))},Utils_hasLinks=function(t){return C.grep(t,isLink).length>0},Utils_getHref=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")},Utils_isOnlyTextSelected=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},S=getAnchorElement,Utils_getAnchorText=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},k=applyRelTargetRules,E=hasProtocol,cat=function(t){for(var e=[],push=function(t){e.push(t)},n=0;n<t.length;n++)t[n].each(push);return e},getValue=function(t){return l(t.value)?t.value:""},sanitizeWith=function(t){return void 0===t&&(t=getValue),function(e){return v.from(e).map((function(e){return function(t,e){var n=[];return C.each(t,(function(t){var i=l(t.text)?t.text:l(t.title)?t.title:"";if(void 0!==t.menu);else{var a=e(t);n.push({text:i,value:a})}})),n}(e,t)}))}},T={sanitize:function(t){return sanitizeWith(getValue)(t)},sanitizeWith:sanitizeWith,createUi:function(t,e){return function(n){return{name:t,type:"selectbox",label:e,items:n}}},getValue:getValue},Cell=function(t){var e=t,get=function(){return e};return{get:get,set:function(t){e=t},clone:function(){return Cell(get())}}},getDelta=function(t,e,n,i){var a=i[e],u=t.length>0;return void 0!==a?function(t,e){return w(e,(function(e){return v.some(e).filter((function(e){return e.value===t}))}))}(a,n).map((function(e){return{url:{value:e.value,meta:{text:u?t:e.text,attach:noop}},text:u?t:e.text}})):v.none()},DialogChanges_init=function(t,e){var n=Cell(t.text),onCatalogChange=function(t,i){var a,u,c=(a=e,u=i.name,"link"===u?a.catalogs.link:"anchor"===u?a.catalogs.anchor:v.none()).getOr([]);return getDelta(n.get(),i.name,c,t)};return{onChange:function(t,e){return"url"===e.name?function(t){if(n.get().length<=0){var e=void 0!==t.url.meta.text?t.url.meta.text:t.url.value,i=void 0!==t.url.meta.title?t.url.meta.title:"";return v.some({text:e,title:i})}return v.none()}(t()):contains(["anchor","link"],e.name)?onCatalogChange(t(),e):"text"===e.name?(n.set(t().text),v.none()):v.none()}}},O={},_={exports:O};!function(e,n,i,a){!function(a){if("object"==typeof n&&void 0!==i)i.exports=a();else if("function"==typeof e&&e.amd)e([],a);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=a()}}((function(){return function r(t,e,n){function o(u,c){if(!e[u]){if(!t[u]){var s="function"==typeof a&&a;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[u]={exports:{}};t[u][0].call(f.exports,(function(e){return o(t[u][1][e]||e)}),f,f.exports,r,t,e,n)}return e[u].exports}for(var i="function"==typeof a&&a,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,e,n){var i,a,u=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(i===setTimeout)return setTimeout(t,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){i=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var c,s=[],l=!1,f=-1;function cleanUpNextTick(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&drainQueue())}function drainQueue(){if(!l){var t=runTimeout(cleanUpNextTick);l=!0;for(var e=s.length;e;){for(c=s,s=[];++f<e;)c&&c[f].run();f=-1,e=s.length}c=null,l=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new Item(t,e)),1!==s.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=noop,u.addListener=noop,u.once=noop,u.off=noop,u.removeListener=noop,u.removeAllListeners=noop,u.emit=noop,u.prependListener=noop,u.prependOnceListener=noop,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){!function(n){var i=setTimeout;function noop(){}function Promise(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(t,this)}function handle(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Promise._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void reject(e.promise,t)}resolve(e.promise,i)}else(1===t._state?resolve:reject)(e.promise,t._value)}))):t._deferreds.push(e)}function resolve(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Promise)return t._state=3,t._value=e,void finale(t);if("function"==typeof n)return void doResolve(function bind(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,finale(t)}catch(e){reject(t,e)}}function reject(t,e){t._state=2,t._value=e,finale(t)}function finale(t){2===t._state&&0===t._deferreds.length&&Promise._immediateFn((function(){t._handled||Promise._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)handle(t,t._deferreds[e]);t._deferreds=null}function Handler(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function doResolve(t,e){var n=!1;try{t((function(t){n||(n=!0,resolve(e,t))}),(function(t){n||(n=!0,reject(e,t))}))}catch(t){if(n)return;n=!0,reject(e,t)}}Promise.prototype.catch=function(t){return this.then(null,t)},Promise.prototype.then=function(t,e){var n=new this.constructor(noop);return handle(this,new Handler(t,e,n)),n},Promise.all=function(t){var e=Array.prototype.slice.call(t);return new Promise((function(t,n){if(0===e.length)return t([]);var i=e.length;function res(a,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){res(a,t)}),n)}e[a]=u,0==--i&&t(e)}catch(t){n(t)}}for(var a=0;a<e.length;a++)res(a,e[a])}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise?t:new Promise((function(e){e(t)}))},Promise.reject=function(t){return new Promise((function(e,n){n(t)}))},Promise.race=function(t){return new Promise((function(e,n){for(var i=0,a=t.length;i<a;i++)t[i].then(e,n)}))},Promise._immediateFn="function"==typeof t?function(e){t(e)}:function(t){i(t,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},Promise._setImmediateFn=function _setImmediateFn(t){Promise._immediateFn=t},Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(t){Promise._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=Promise:n.Promise||(n.Promise=Promise)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,i){var a=t("process/browser.js").nextTick,u=Function.prototype.apply,c=Array.prototype.slice,s={},l=0;function Timeout(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new Timeout(u.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new Timeout(u.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=l++,i=!(arguments.length<2)&&c.call(arguments,1);return s[e]=!0,a((function onNextTick(){s[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof i?i:function(t){delete s[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var i=t("promise-polyfill"),a="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:a.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,O,_,void 0);var N=_.exports.boltExport,nu=function(t){var n=v.none(),i=[],get=function(t){isReady()?call(t):i.push(t)},isReady=function(){return n.isSome()},run=function(t){each(t,call)},call=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(t){n=v.some(t),run(i),i=[]})),{get:get,map:function(t){return nu((function(e){get((function(n){e(t(n))}))}))},isReady:isReady}},A={nu:nu,pure:function(t){return nu((function(e){e(t)}))}},errorReporter=function(t){e.setTimeout((function(){throw t}),0)},make=function(t){var get=function(e){t().then(e,errorReporter)};return{map:function(e){return make((function(){return t().then(e)}))},bind:function(e){return make((function(){return t().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return make((function(){return t().then((function(){return e.toPromise()}))}))},toLazy:function(){return A.nu(get)},toCached:function(){var e=null;return make((function(){return null===e&&(e=t()),e}))},toPromise:t,get:get}},Future_nu=function(t){return make((function(){return new N(t)}))},Future_pure=function(t){return make((function(){return N.resolve(t)}))},z=tinymce.util.Tools.resolve("tinymce.util.Delay"),tryEmailTransform=function(t){var e=t.href;return e.indexOf("@")>0&&-1===e.indexOf("//")&&-1===e.indexOf("mailto:")?v.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return __assign(__assign({},t),{href:"mailto:"+e})}}):v.none()},tryProtocolTransform=function(t,e){return function(n){var i=n.href;return 1===t&&!E(i)||0===t&&/^\s*www[\.|\d\.]/i.test(i)?v.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+e+":// prefix?",preprocess:function(t){return __assign(__assign({},t),{href:e+"://"+i})}}):v.none()}},DialogConfirms_preprocess=function(t,e){return w([tryEmailTransform,tryProtocolTransform(Settings_assumeExternalTargets(t),Settings_getDefaultLinkProtocol(t))],(function(t){return t(e)})).fold((function(){return Future_pure(e)}),(function(n){return Future_nu((function(i){!function(t,e,n){var i=t.selection.getRng();z.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(i),n(e)}))}))}(t,n.message,(function(t){i(t?n.preprocess(e):e)}))}))}))},AnchorListOptions_getAnchors=function(t){var e=t.dom.select("a:not([href])"),n=bind(e,(function(t){var e=t.name||t.id;return e?[{text:e,value:"#"+e}]:[]}));return n.length>0?v.some([{text:"None",value:""}].concat(n)):v.none()},ClassListOptions_getClasses=function(t){var e=Settings_getLinkClassList(t);return e.length>0?T.sanitize(e):v.none()},D=tinymce.util.Tools.resolve("tinymce.util.XHR"),LinkListOptions_getLinks=function(t){var extractor=function(e){return t.convertURL(e.value||e.url,"href")},e=Settings_getLinkList(t);return Future_nu((function(t){l(e)?D.send({url:e,success:function(e){return t(function(t){try{return v.some(JSON.parse(t))}catch(t){return v.none()}}(e))},error:function(e){return t(v.none())}}):m(e)?e((function(e){return t(v.some(e))})):t(v.from(e))})).map((function(t){return t.bind(T.sanitizeWith(extractor)).map((function(t){return t.length>0?[{text:"None",value:""}].concat(t):t}))}))},RelOptions_getRels=function(t,e){var n=Settings_getRelList(t);if(n.length>0){var i=e.is("_blank");return(!1===Settings_allowUnsafeLinkTarget(t)?T.sanitizeWith((function(t){return k(T.getValue(t),i)})):T.sanitize)(n)}return v.none()},M=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],TargetOptions_getTargets=function(t){var e=Settings_getTargetList(t);return f(e)?T.sanitize(e).orThunk((function(){return v.some(M)})):!1===e?v.none():v.some(M)},nonEmptyAttr=function(t,e,n){var i=t.getAttrib(e,n);return null!==i&&i.length>0?v.some(i):v.none()},DialogInfo_collect=function(t,e){return LinkListOptions_getLinks(t).map((function(n){var i=function(t,e){var n=t.dom,i=Utils_isOnlyTextSelected(t.selection.getContent())?v.some(Utils_getAnchorText(t.selection,e)):v.none(),a=e?v.some(n.getAttrib(e,"href")):v.none(),u=e?v.from(n.getAttrib(e,"target")):v.none(),c=nonEmptyAttr(n,e,"rel"),s=nonEmptyAttr(n,e,"class");return{url:a,text:i,title:nonEmptyAttr(n,e,"title"),target:u,rel:c,linkClass:s}}(t,e);return{anchor:i,catalogs:{targets:TargetOptions_getTargets(t),rels:RelOptions_getRels(t,i.target),classes:ClassListOptions_getClasses(t),anchor:AnchorListOptions_getAnchors(t),link:n},optNode:v.from(e),flags:{titleEnabled:Settings_shouldShowLinkTitle(t)}}}))},Dialog_open=function(t){(function(t){var e=S(t);return DialogInfo_collect(t,e)})(t).map((function(e){var n=function(t,e){return function(n){var i=n.getData();if(!i.url.value)return Utils_unlink(t),void n.close();var getChangedValue=function(t){return v.from(i[t]).filter((function(n){return!e.anchor[t].is(n)}))},a={href:i.url.value,text:getChangedValue("text"),target:getChangedValue("target"),rel:getChangedValue("rel"),class:getChangedValue("linkClass"),title:getChangedValue("title")},u={href:i.url.value,attach:void 0!==i.url.meta&&i.url.meta.attach?i.url.meta.attach:function(){}};DialogConfirms_preprocess(t,a).get((function(e){Utils_link(t,u,e)})),n.close()}}(t,e);return function(t,e,n){var i=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),a=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],u=function(t,e){return{url:{value:t.anchor.url.getOr(""),meta:{attach:function(){},text:t.anchor.url.fold((function(){return""}),(function(){return t.anchor.text.getOr("")})),original:{value:t.anchor.url.getOr("")}}},text:t.anchor.text.getOr(""),title:t.anchor.title.getOr(""),anchor:t.anchor.url.getOr(""),link:t.anchor.url.getOr(""),rel:t.anchor.rel.getOr(""),target:t.anchor.target.or(e).getOr(""),linkClass:t.anchor.linkClass.getOr("")}}(t,v.from(Settings_getDefaultLinkTarget(n))),c=DialogChanges_init(u,t),s=t.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:flatten([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],i,a,cat([s.anchor.map(T.createUi("anchor","Anchors")),s.rels.map(T.createUi("rel","Rel")),s.targets.map(T.createUi("target","Open link in...")),s.link.map(T.createUi("link","Link list")),s.classes.map(T.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onChange:function(t,e){var n=e.name;c.onChange(t.getData,{name:n}).each((function(e){t.setData(e)}))},onSubmit:e}}(e,n,t)})).get((function(e){t.windowManager.open(e)}))},getLink=function(t,e){return t.dom.getParent(e,"a[href]")},getSelectedLink=function(t){return getLink(t,t.selection.getStart())},gotoLink=function(t,e){if(e){var n=Utils_getHref(e);if(/^#/.test(n)){var i=t.$(n);i.length&&t.selection.scrollIntoView(i[0],!0)}else OpenUrl_open(e.href)}},Actions_openDialog=function(t){return function(){Dialog_open(t)}},Actions_gotoSelectedLink=function(t){return function(){gotoLink(t,getSelectedLink(t))}},Actions_setupGotoLinks=function(t){t.on("click",(function(e){var n=getLink(t,e.target);n&&s.metaKeyPressed(e)&&(e.preventDefault(),gotoLink(t,n))})),t.on("keydown",(function(e){var n=getSelectedLink(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),gotoLink(t,n))}))},Actions_toggleActiveState=function(t){return function(e){var nodeChangeHandler=function(n){return e.setActive(!t.readonly&&!!S(t,n.element))};return t.on("NodeChange",nodeChangeHandler),function(){return t.off("NodeChange",nodeChangeHandler)}}},Actions_toggleEnabledState=function(t){return function(e){e.setDisabled(!Utils_hasLinks(t.dom.getParents(t.selection.getStart())));var nodeChangeHandler=function(t){return e.setDisabled(!Utils_hasLinks(t.parents))};return t.on("NodeChange",nodeChangeHandler),function(){return t.off("NodeChange",nodeChangeHandler)}}},Commands_register=function(t){t.addCommand("mceLink",(function(){Settings_useQuickLink(t)?t.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Actions_openDialog(t)()}))},Keyboard_setup=function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))},Controls_setupButtons=function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Actions_openDialog(t),onSetup:Actions_toggleActiveState(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Actions_gotoSelectedLink(t),onSetup:Actions_toggleEnabledState(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Utils_unlink(t)},onSetup:Actions_toggleEnabledState(t)})},Controls_setupMenuItems=function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Actions_gotoSelectedLink(t),onSetup:Actions_toggleEnabledState(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Actions_openDialog(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Utils_unlink(t)},onSetup:Actions_toggleEnabledState(t)})},Controls_setupContextMenu=function(t){t.ui.registry.addContextMenu("link",{update:function(e){return Utils_hasLinks(t.dom.getParents(e,"a"))?"link unlink openlink":"link"}})},Controls_setupContextToolbars=function(t){var onSetupLink=function(e){var n=t.selection.getNode();return e.setDisabled(!S(t,n)),function(){}};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Actions_toggleActiveState(t)},label:"Link",predicate:function(e){return!!S(t,e)&&Settings_hasContextToolbar(t)},initValue:function(){var e=S(t);return e?Utils_getHref(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var n=t.selection.getNode();return e.setActive(!!S(t,n)),Actions_toggleActiveState(t)(e)},onAction:function(e){var n=S(t),i=e.getValue();if(n)t.dom.setAttrib(n,"href",i),function(t){t.selection.collapse(!1)}(t),e.hide();else{var a={href:i,attach:function(){}},u=Utils_isOnlyTextSelected(t.selection.getContent())?v.some(Utils_getAnchorText(t.selection,n)).filter((function(t){return t.length>0})).or(v.from(i)):v.none();Utils_link(t,a,{href:i,text:u,title:v.none(),rel:v.none(),target:v.none(),class:v.none()}),e.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:onSetupLink,onAction:function(e){Utils_unlink(t),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:onSetupLink,onAction:function(e){Actions_gotoSelectedLink(t)(),e.hide()}}]})};!function Plugin(){c.add("link",(function(t){Controls_setupButtons(t),Controls_setupMenuItems(t),Controls_setupContextMenu(t),Controls_setupContextToolbars(t),Actions_setupGotoLinks(t),Commands_register(t),Keyboard_setup(t)}))}()}(window)}).call(this,n(104))},1602:function(t,e,n){n(1603)},1603:function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),Content_setContent=function(t,e){t.focus(),t.undoManager.transact((function(){t.setContent(e)})),t.selection.setCursorLocation(),t.nodeChanged()},Content_getContent=function(t){return t.getContent({source_view:!0})},Dialog_open=function(t){var e=Content_getContent(t);t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:e},onSubmit:function(e){Content_setContent(t,e.getData().code),e.close()}})},Commands_register=function(t){t.addCommand("mceCodeEditor",(function(){Dialog_open(t)}))},Buttons_register=function(t){t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return Dialog_open(t)}}),t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return Dialog_open(t)}})};!function Plugin(){t.add("code",(function(t){return Commands_register(t),Buttons_register(t),{}}))}()}()}}]);